var O=Object.defineProperty,y=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var h=(t,o,n)=>o in t?O(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,r=(t,o)=>{for(var n in o||(o={}))x.call(o,n)&&h(t,n,o[n]);if(S)for(var n of S(o))W.call(o,n)&&h(t,n,o[n]);return t},w=(t,o)=>y(t,T(o));import{D as C}from"./vendor-5b169328.js";const b={pump:{reagent:"",volume:0,op:"pump"},prime:{reagent:"",volume:0,op:"prime"},temp:{temp:25,wait:!0,op:"temp"},hold:{time:0,op:"hold"},takeimage:{name:"Test",path:".",xy0:[0,0],xy1:[1,1],channels:[!0,!0,!0,!0],z_tilt:19850,z_obj:32e3,save:!1,lasers:[0,0],laser_onoff:[!0,!0],od:[0,0],overlap:.1,op:"takeimage",z_from:0,z_to:0,z_spacing:232},autofocus:{channels:[!0,!0,!0,!0],laser_onoff:!0,laser:5,od:0,op:"autofocus"},goto:{step:1,n:4,op:"goto"}},E={name:"",port:1,v_pull:100,v_prime:200,v_push:2e3,wait:26},_={name:"",path:".",fc:!1,reagents:[{uid:0,reagent:r({},E)}],cmds:[{uid:0,cmd:r({},b.pump)}]},p=[2e3,5e3,1e4,3e4,6e4];function f(t,o,n=s=>s,k=!0){console.log(`%cInitializing ${t}.`,"color:green");let s,u,c,l=0,d=Date.now();const i=new Set;function D(){const e=l;return l++,p[e>=p.length-1?p.length-1:e]}function z(){c&&clearTimeout(c),s.readyState!==WebSocket.CLOSED&&s.close()}function N(){z(),i.size>0&&(c=setTimeout(()=>m(),D()))}async function m(){return c&&(clearTimeout(c),c=void 0),s=new WebSocket(t),s.onmessage=e=>{console.log(e.data),i.forEach(a=>{o=n(e.data),a(o)})},s.onclose=e=>N(),u=new Promise((e,a)=>{s.onerror=g=>{console.error("Websocket error"),a(g)},s.onopen=g=>{l=0,d=Date.now(),e(!0)}}),u}return m(),{set(e){if(Date.now()-d>500){console.log(e);const a=typeof e=="object"?()=>s.send(JSON.stringify(e)):()=>s.send(e);if(s)switch(s.readyState){case(WebSocket.CLOSED||WebSocket.CLOSING):{m().then(a);break}case WebSocket.CONNECTING:{u.then(a);break}case WebSocket.OPEN:{a();break}}}k&&i.forEach(a=>a(e))},update(e){},subscribe(e){return e(o),i.add(e),()=>i.delete(e)}}}const J={n:0,img:[""],hist:[{counts:[10],bin_edges:[0]}],channels:[!1,!1,!1,!1]},$={x:-1,y:-1,z_tilt:[-1,-1,-1],z_obj:-1,od:[0,0],laser_onoff:[!0,!0],lasers:[-1,-1],shutter:!1,msg:""},j={block:"",max_uid:2,mode:"editingA",exps:[r({},_),r({},_)],image_params:w(r({},b.takeimage),{fc:!1})},P=C(r({},J)),G=f(`ws://${window.location.hostname}:8000/status`,r({},$),t=>JSON.parse(t)),v=f(`ws://${window.location.hostname}:8000/user`,r({},j),t=>JSON.parse(t)),A=f(`ws://${window.location.hostname}:8000/cmd`,{msg:"ok"},t=>JSON.parse(t),!1);export{b as a,A as c,_ as e,P as i,E as r,G as s,v as u};
