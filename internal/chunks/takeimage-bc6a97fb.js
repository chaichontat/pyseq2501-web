import{S as pt,i as _t,s as dt,aa as bs,e as m,w as K,c as h,a as g,x as Q,d as f,b as u,g as A,y as x,q as W,o as q,B as ee,ab as gs,ac as vs,k as P,m as T,t as $,h as z,H as n,j as me,ad as ks,W as V,X as Z,U as Es,Y as al,N as Ne,v as ys,ae as ws,af as $s,V as Et,ag as tl,ah as pe,F as Ul,I as Ml,J as Bl,K as jl,ai as zs,aj as Is,M as cs,ak as Ns,n as Ps,p as Ts,al as ps,P as ls,Q as ss,a3 as X,T as we,a4 as le,O as Ie,Z as ll,f as Os,_ as sl}from"./vendor-1f7587d6.js";import{l as Ss,a as He,s as Ct,u as tt,c as lt,d as Cs}from"./utils-69f2e21a.js";import{r as Ds}from"./coords-813c65ab.js";import{S as Vs,t as Al}from"./tooltip-ee5265a1.js";function As(t){let e;return{c(){e=m("div"),this.h()},l(l){e=h(l,"DIV",{class:!0}),g(e).forEach(f),this.h()},h(){u(e,"class","absolute bottom-6 h-[90%] w-full bg-blue-800 opacity-60")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function Us(t){let e,l=t[3]+"",s;return{c(){e=m("span"),s=$(l),this.h()},l(r){e=h(r,"SPAN",{class:!0});var a=g(e);s=z(a,l),a.forEach(f),this.h()},h(){u(e,"class","vert absolute bottom-0 right-0 translate-x-1 text-center text-sm svelte-b05ewu")},m(r,a){A(r,e,a),n(e,s)},p(r,a){a&8&&l!==(l=r[3]+"")&&me(s,l)},d(r){r&&f(e)}}}function Ms(t){let e,l,s,r;return e=new gs({props:{data:t[1],width:80,$$slots:{default:[As]},$$scope:{ctx:t}}}),s=new vs({props:{vertical:!0,count:5,$$slots:{default:[Us,({value:a})=>({3:a}),({value:a})=>a?8:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment)},l(a){Q(e.$$.fragment,a),l=T(a),Q(s.$$.fragment,a)},m(a,c){x(e,a,c),A(a,l,c),x(s,a,c),r=!0},p(a,c){const o={};c&2&&(o.data=a[1]),c&16&&(o.$$scope={dirty:c,ctx:a}),e.$set(o);const b={};c&24&&(b.$$scope={dirty:c,ctx:a}),s.$set(b)},i(a){r||(W(e.$$.fragment,a),W(s.$$.fragment,a),r=!0)},o(a){q(e.$$.fragment,a),q(s.$$.fragment,a),r=!1},d(a){ee(e,a),a&&f(l),ee(s,a)}}}function Bs(t){let e,l,s;return l=new bs({props:{x1:-10,x2:4096+10,y1:0,y2:t[0],$$slots:{default:[Ms]},$$scope:{ctx:t}}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var a=g(e);Q(l.$$.fragment,a),a.forEach(f),this.h()},h(){u(e,"class","box-border h-full w-full")},m(r,a){A(r,e,a),x(l,e,null),s=!0},p(r,[a]){const c={};a&1&&(c.y2=r[0]),a&18&&(c.$$scope={dirty:a,ctx:r}),l.$set(c)},i(r){s||(W(l.$$.fragment,r),s=!0)},o(r){q(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function js(t,e){return t.map((l,s)=>({x:l,y:e[s]}))}function Ls(t,e,l){let{hist:s}=e,r,a=[{x:0,y:0},{x:2e3,y:10}];return t.$$set=c=>{"hist"in c&&l(2,s=c.hist)},t.$$.update=()=>{t.$$.dirty&4&&s&&(l(1,a=js(s.bin_edges,s.counts)),l(0,r=Math.max(...s.counts)))},[r,a,s]}class Fs extends pt{constructor(e){super();_t(this,e,Ls,Bs,dt,{hist:2})}}function Hs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 0"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var a=g(e);l=z(a,"Channel 0"),a.forEach(f),this.h()},h(){u(e,"class",s=pe(st("green",t[16],t[1].img.channels[0]))+" svelte-17prul8"),V(e,"bg-green-600",t[16])},m(r,a){A(r,e,a),n(e,l)},p(r,a){a&65538&&s!==(s=pe(st("green",r[16],r[1].img.channels[0]))+" svelte-17prul8")&&u(e,"class",s),a&65538&&V(e,"bg-green-600",r[16])},d(r){r&&f(e)}}}function Zs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 1"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var a=g(e);l=z(a,"Channel 1"),a.forEach(f),this.h()},h(){u(e,"class",s=pe(st("orange",t[16],t[1].img.channels[1]))+" svelte-17prul8"),V(e,"bg-orange-500",t[16])},m(r,a){A(r,e,a),n(e,l)},p(r,a){a&65538&&s!==(s=pe(st("orange",r[16],r[1].img.channels[1]))+" svelte-17prul8")&&u(e,"class",s),a&65538&&V(e,"bg-orange-500",r[16])},d(r){r&&f(e)}}}function Ws(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 2"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var a=g(e);l=z(a,"Channel 2"),a.forEach(f),this.h()},h(){u(e,"class",s=pe(st("rose",t[16],t[1].img.channels[2]))+" svelte-17prul8"),V(e,"bg-rose-600",t[16])},m(r,a){A(r,e,a),n(e,l)},p(r,a){a&65538&&s!==(s=pe(st("rose",r[16],r[1].img.channels[2]))+" svelte-17prul8")&&u(e,"class",s),a&65538&&V(e,"bg-rose-600",r[16])},d(r){r&&f(e)}}}function qs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 3"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var a=g(e);l=z(a,"Channel 3"),a.forEach(f),this.h()},h(){u(e,"class",s=pe(st("amber",t[16],t[1].img.channels[3]))+" svelte-17prul8"),V(e,"bg-amber-800",t[16])},m(r,a){A(r,e,a),n(e,l)},p(r,a){a&65538&&s!==(s=pe(st("amber",r[16],r[1].img.channels[3]))+" svelte-17prul8")&&u(e,"class",s),a&65538&&V(e,"bg-amber-800",r[16])},d(r){r&&f(e)}}}function Gs(t){let e,l,s,r,a,c,o,b;return e=new tl({props:{disabled:!t[1].img.channels[0],$$slots:{default:[Hs,({selected:i})=>({16:i}),({selected:i})=>i?65536:0]},$$scope:{ctx:t}}}),s=new tl({props:{disabled:!t[1].img.channels[1],$$slots:{default:[Zs,({selected:i})=>({16:i}),({selected:i})=>i?65536:0]},$$scope:{ctx:t}}}),a=new tl({props:{disabled:!t[1].img.channels[2],$$slots:{default:[Ws,({selected:i})=>({16:i}),({selected:i})=>i?65536:0]},$$scope:{ctx:t}}}),o=new tl({props:{disabled:!t[1].img.channels[3],$$slots:{default:[qs,({selected:i})=>({16:i}),({selected:i})=>i?65536:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment),r=P(),K(a.$$.fragment),c=P(),K(o.$$.fragment)},l(i){Q(e.$$.fragment,i),l=T(i),Q(s.$$.fragment,i),r=T(i),Q(a.$$.fragment,i),c=T(i),Q(o.$$.fragment,i)},m(i,E){x(e,i,E),A(i,l,E),x(s,i,E),A(i,r,E),x(a,i,E),A(i,c,E),x(o,i,E),b=!0},p(i,E){const p={};E&2&&(p.disabled=!i[1].img.channels[0]),E&196610&&(p.$$scope={dirty:E,ctx:i}),e.$set(p);const _={};E&2&&(_.disabled=!i[1].img.channels[1]),E&196610&&(_.$$scope={dirty:E,ctx:i}),s.$set(_);const y={};E&2&&(y.disabled=!i[1].img.channels[2]),E&196610&&(y.$$scope={dirty:E,ctx:i}),a.$set(y);const I={};E&2&&(I.disabled=!i[1].img.channels[3]),E&196610&&(I.$$scope={dirty:E,ctx:i}),o.$set(I)},i(i){b||(W(e.$$.fragment,i),W(s.$$.fragment,i),W(a.$$.fragment,i),W(o.$$.fragment,i),b=!0)},o(i){q(e.$$.fragment,i),q(s.$$.fragment,i),q(a.$$.fragment,i),q(o.$$.fragment,i),b=!1},d(i){ee(e,i),i&&f(l),ee(s,i),i&&f(r),ee(a,i),i&&f(c),ee(o,i)}}}function Xs(t){let e,l;return e=new $s({props:{class:"grid grid-cols-4 space-x-1 rounded-xl bg-white p-1 opacity-90 shadow",$$slots:{default:[Gs]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,r){x(e,s,r),l=!0},p(s,r){const a={};r&131074&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){l||(W(e.$$.fragment,s),l=!0)},o(s){q(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Rs(t){let e,l,s,r,a,c,o,b,i,E,p,_,y,I,w,j,d,v,N;return a=new ks({props:{$$slots:{default:[Xs]},$$scope:{ctx:t}}}),a.$on("change",t[10]),j=new Fs({props:{hist:t[1].img.hist[t[0]]}}),{c(){e=m("div"),l=m("canvas"),s=P(),r=m("div"),K(a.$$.fragment),c=P(),o=m("button"),b=$("Center"),i=P(),E=m("div"),p=m("label"),_=m("input"),y=$(`
      Show Histogram`),I=P(),w=m("div"),K(j.$$.fragment),this.h()},l(B){e=h(B,"DIV",{id:!0,class:!0});var D=g(e);l=h(D,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),g(l).forEach(f),s=T(D),r=h(D,"DIV",{class:!0});var S=g(r);Q(a.$$.fragment,S),S.forEach(f),c=T(D),o=h(D,"BUTTON",{class:!0});var M=g(o);b=z(M,"Center"),M.forEach(f),i=T(D),E=h(D,"DIV",{class:!0});var L=g(E);p=h(L,"LABEL",{class:!0});var F=g(p);_=h(F,"INPUT",{type:!0,class:!0}),y=z(F,`
      Show Histogram`),F.forEach(f),L.forEach(f),I=T(D),w=h(D,"DIV",{id:!0,class:!0});var J=g(w);Q(j.$$.fragment,J),J.forEach(f),D.forEach(f),this.h()},h(){u(l,"id","canvas"),u(l,"width",2048),u(l,"height",128),u(l,"class","svelte-17prul8"),u(r,"class","absolute top-4 left-4 z-40 h-10 w-2/5"),u(o,"class","white-button absolute top-4 right-56 z-40 inline-flex h-10 items-center rounded-lg border bg-white px-4 font-medium opacity-90 shadow-lg"),u(_,"type","checkbox"),u(_,"class","mr-1 rounded text-blue-500 focus:ring-blue-300"),u(p,"class","mx-4 cursor-pointer font-medium"),u(E,"class","absolute top-4 right-8 z-40 inline-flex h-10 items-center rounded-lg border bg-white opacity-90 shadow-lg"),u(w,"id","histogram"),u(w,"class","absolute bottom-8 right-8 z-30 h-[300px] w-[400px] rounded-lg bg-white p-6 pb-3 opacity-90 shadow-lg shadow-gray-500"),V(w,"hidden",!t[5]),u(e,"id","frame"),u(e,"class","relative z-10 mx-auto mt-4 min-h-[60vh] w-11/12 resize-y rounded-md border border-gray-300 svelte-17prul8")},m(B,D){A(B,e,D),n(e,l),t[8](l),n(e,s),n(e,r),x(a,r,null),n(e,c),n(e,o),n(o,b),n(e,i),n(e,E),n(E,p),n(p,_),_.checked=t[5],n(p,y),n(e,I),n(e,w),x(j,w,null),t[14](e),d=!0,v||(N=[Z(l,"wheel",function(){Es(t[4].zoomWithWheel)&&t[4].zoomWithWheel.apply(this,arguments)}),Z(l,"click",t[9]),Z(o,"click",t[11]),Z(_,"change",t[12]),Z(_,"click",t[13])],v=!0)},p(B,[D]){t=B;const S={};D&131074&&(S.$$scope={dirty:D,ctx:t}),a.$set(S),D&32&&(_.checked=t[5]);const M={};D&3&&(M.hist=t[1].img.hist[t[0]]),j.$set(M),D&32&&V(w,"hidden",!t[5])},i(B){d||(W(a.$$.fragment,B),W(j.$$.fragment,B),d=!0)},o(B){q(a.$$.fragment,B),q(j.$$.fragment,B),d=!1},d(B){B&&f(e),t[8](null),ee(a),ee(j),t[14](null),v=!1,al(N)}}}function st(t,e,l){return`tab-button ${e?"text-white font-semibold":`${l?`font-semibold text-gray-700 hover:text-black bg-white hover:bg-${t}-300`:"text-gray-400 cursor-default"}`}`}function Ys(t,e,l){let s;Ne(t,Ss,N=>l(1,s=N));let r,a,c,o,b,i=!0,E=0,p=[0,1,2,3];ys(()=>{l(6,b=a.getContext("2d")),l(4,o=ws(a,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),c=new Image,c.onload=()=>b==null?void 0:b.drawImage(c,0,0);function _(N){Et[N?"unshift":"push"](()=>{a=N,l(3,a)})}const y=()=>l(0,E=1),I=N=>l(0,E=N.detail),w=()=>{o.pan(0,0)};function j(){i=this.checked,l(5,i)}const d=()=>l(5,i=!i);function v(N){Et[N?"unshift":"push"](()=>{r=N,l(2,r),l(6,b),l(1,s),l(0,E),l(7,p)})}return t.$$.update=()=>{if(t.$$.dirty&195&&b&&s.img){if(l(7,p=s.img.channels.flatMap((N,B)=>N?[B]:[])),l(6,b.canvas.height=s.img.dim[0],b),l(6,b.canvas.width=s.img.dim[1],b),l(2,r.style.height=`${Math.min(512,s.img.dim[0])}px`,r),console.log(s.img.channels),!s.img.channels[E]){const N=s.img.channels.findIndex(Boolean);console.log(N),N!==-1&&l(0,E=N)}c.src=s.img.img[p.findIndex(N=>N===E)]}},[E,s,r,a,o,i,b,p,_,y,I,w,j,d,v]}class kn extends pt{constructor(e){super();_t(this,e,Ys,Rs,dt,{})}}const Js=t=>({}),ns=t=>({});function Ks(t){let e,l,s,r,a,c,o;const b=t[3].buttons,i=Ul(b,t,t[2],ns),E=t[3].default,p=Ul(E,t,t[2],null);return{c(){e=m("span"),i&&i.c(),l=P(),s=m("content"),p&&p.c(),r=P(),a=m("div"),c=m("progress"),this.h()},l(_){e=h(_,"SPAN",{class:!0});var y=g(e);i&&i.l(y),l=T(y),s=h(y,"CONTENT",{class:!0});var I=g(s);p&&p.l(I),r=T(I),a=h(I,"DIV",{class:!0});var w=g(a);c=h(w,"PROGRESS",{class:!0}),g(c).forEach(f),w.forEach(f),I.forEach(f),y.forEach(f),this.h()},h(){u(c,"class","relative h-2 w-full appearance-none overflow-hidden rounded-lg shadow svelte-ica9vh"),c.value=t[1],u(a,"class","mt-1"),u(s,"class","flex-grow rounded-lg border border-base-300 bg-white/60 px-4 py-2"),u(e,"class","z-40 flex w-full space-x-2")},m(_,y){A(_,e,y),i&&i.m(e,null),n(e,l),n(e,s),p&&p.m(s,null),n(s,r),n(s,a),n(a,c),o=!0},p(_,[y]){i&&i.p&&(!o||y&4)&&Ml(i,b,_,_[2],o?jl(b,_[2],y,Js):Bl(_[2]),ns),p&&p.p&&(!o||y&4)&&Ml(p,E,_,_[2],o?jl(E,_[2],y,null):Bl(_[2]),null),(!o||y&2)&&(c.value=_[1])},i(_){o||(W(i,_),W(p,_),o=!0)},o(_){q(i,_),q(p,_),o=!1},d(_){_&&f(e),i&&i.d(_),p&&p.d(_)}}}function Qs(t,e,l){let s,r=cs,a=()=>(r(),r=Is(b,i=>l(1,s=i)),b);t.$$.on_destroy.push(()=>r());let{$$slots:c={},$$scope:o}=e;const b=zs(0,{duration:400,easing:Ns});return a(),t.$$set=i=>{"$$scope"in i&&l(2,o=i.$$scope)},[b,s,o,c]}class En extends pt{constructor(e){super();_t(this,e,Qs,Ks,dt,{progress:0})}get progress(){return this.$$.ctx[0]}}function xs(t){let e,l;const s=t[7].default,r=Ul(s,t,t[6],null),a=r||tn();return{c(){e=m("div"),a&&a.c(),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=g(e);a&&a.l(o),o.forEach(f),this.h()},h(){u(e,"class","mx-auto")},m(c,o){A(c,e,o),a&&a.m(e,null),l=!0},p(c,o){r&&r.p&&(!l||o&64)&&Ml(r,s,c,c[6],l?jl(s,c[6],o,null):Bl(c[6]),null)},i(c){l||(W(a,c),l=!0)},o(c){q(a,c),l=!1},d(c){c&&f(e),a&&a.d(c)}}}function en(t){let e,l,s;return l=new Vs({props:{color:"black"}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var a=g(e);Q(l.$$.fragment,a),a.forEach(f),this.h()},h(){u(e,"class","mx-auto opacity-40")},m(r,a){A(r,e,a),x(l,e,null),s=!0},p:cs,i(r){s||(W(l.$$.fragment,r),s=!0)},o(r){q(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function tn(t){let e;return{c(){e=$("Go")},l(l){e=z(l,"Go")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function ln(t){let e,l,s,r,a,c,o;const b=[en,xs],i=[];function E(p,_){return p[1]?0:1}return l=E(t),s=i[l]=b[l](t),{c(){e=m("button"),s.c(),this.h()},l(p){e=h(p,"BUTTON",{type:!0,class:!0,tabindex:!0});var _=g(e);s.l(_),_.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class",r=pe(`white-button rounded-lg px-4 py-1 text-sm font-semibold transition-all duration-100 ${t[5][t[2]]} disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 ${t[3]}`)+" svelte-1rnzpdo"),u(e,"tabindex","0"),e.disabled=t[0]},m(p,_){A(p,e,_),i[l].m(e,null),a=!0,c||(o=Z(e,"click",t[8]),c=!0)},p(p,[_]){let y=l;l=E(p),l===y?i[l].p(p,_):(Ps(),q(i[y],1,1,()=>{i[y]=null}),Ts(),s=i[l],s?s.p(p,_):(s=i[l]=b[l](p),s.c()),W(s,1),s.m(e,null)),(!a||_&12&&r!==(r=pe(`white-button rounded-lg px-4 py-1 text-sm font-semibold transition-all duration-100 ${p[5][p[2]]} disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 ${p[3]}`)+" svelte-1rnzpdo"))&&u(e,"class",r),(!a||_&1)&&(e.disabled=p[0])},i(p){a||(W(s),a=!0)},o(p){q(s),a=!1},d(p){p&&f(e),i[l].d(),c=!1,o()}}}function sn(t,e,l){let{$$slots:s={},$$scope:r}=e,{disabled:a=!1}=e,{spin:c=!1}=e,{color:o="indigo"}=e,{cl:b=""}=e;const i=ps(),E={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},p=()=>i("click");return t.$$set=_=>{"disabled"in _&&l(0,a=_.disabled),"spin"in _&&l(1,c=_.spin),"color"in _&&l(2,o=_.color),"cl"in _&&l(3,b=_.cl),"$$scope"in _&&l(6,r=_.$$scope)},[a,c,o,b,i,E,r,s,p]}class nl extends pt{constructor(e){super();_t(this,e,sn,ln,dt,{disabled:0,spin:1,color:2,cl:3})}}function nn(t){let e;return{c(){e=$("Preview")},l(l){e=z(l,"Preview")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function an(t){let e,l,s,r,a,c,o,b,i,E,p,_,y,I,w,j,d,v,N,B,D;return v=new nl({props:{color:"sky",disabled:t[3],$$slots:{default:[nn]},$$scope:{ctx:t}}}),v.$on("click",t[11]),{c(){e=m("div"),l=m("div"),s=m("span"),r=$("X"),a=P(),c=m("input"),o=P(),b=m("span"),i=$("Y"),E=P(),p=m("input"),_=P(),y=m("button"),I=ls("svg"),w=ls("path"),j=$(`
    Current`),d=P(),K(v.$$.fragment),this.h()},l(S){e=h(S,"DIV",{class:!0});var M=g(e);l=h(M,"DIV",{class:!0});var L=g(l);s=h(L,"SPAN",{class:!0});var F=g(s);r=z(F,"X"),F.forEach(f),a=T(L),c=h(L,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),o=T(L),b=h(L,"SPAN",{class:!0});var J=g(b);i=z(J,"Y"),J.forEach(f),E=T(L),p=h(L,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),L.forEach(f),_=T(M),y=h(M,"BUTTON",{type:!0,class:!0});var re=g(y);I=ss(re,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var U=g(I);w=ss(U,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(w).forEach(f),U.forEach(f),j=z(re,`
    Current`),re.forEach(f),d=T(M),Q(v.$$.fragment,M),M.forEach(f),this.h()},h(){u(s,"class","color-group flex items-center rounded-l-lg border-l svelte-awp8a4"),V(s,"span-disabled",t[2].block),u(c,"type","number"),u(c,"min","-5"),u(c,"max","30"),u(c,"step","0.01"),u(c,"class","pretty z-10 h-10 w-24 rounded-none text-center"),c.disabled=t[3],u(b,"class","color-group flex items-center svelte-awp8a4"),V(b,"span-disabled",t[2].block),u(p,"type","number"),u(p,"min","-5"),u(p,"max","80"),u(p,"step","0.01"),u(p,"class","pretty z-10 h-10 w-24 rounded-l-none rounded-r-lg text-center"),p.disabled=t[3],u(l,"class","flex font-medium"),u(w,"stroke-linecap","round"),u(w,"stroke-linejoin","round"),u(w,"stroke-width","2"),u(w,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),u(I,"xmlns","http://www.w3.org/2000/svg"),u(I,"class","mr-1 h-5 w-5"),u(I,"fill","none"),u(I,"viewBox","0 0 24 24"),u(I,"stroke","currentColor"),u(y,"type","button"),u(y,"class","white-button rounded-lg px-3 py-1 text-sm font-medium text-gray-900 disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50"),y.disabled=t[3],u(e,"class","flex gap-x-2")},m(S,M){A(S,e,M),n(e,l),n(l,s),n(s,r),n(l,a),n(l,c),X(c,t[0][0]),n(l,o),n(l,b),n(b,i),n(l,E),n(l,p),X(p,t[0][1]),n(e,_),n(e,y),n(y,I),n(I,w),n(y,j),n(e,d),x(v,e,null),N=!0,B||(D=[Z(c,"input",t[7]),Z(c,"change",t[8]),we(He.call(null,c,[-5,30])),Z(p,"input",t[9]),Z(p,"change",t[10]),we(He.call(null,p,[-5,80])),Z(y,"click",t[6])],B=!0)},p(S,[M]){M&4&&V(s,"span-disabled",S[2].block),(!N||M&8)&&(c.disabled=S[3]),M&1&&le(c.value)!==S[0][0]&&X(c,S[0][0]),M&4&&V(b,"span-disabled",S[2].block),(!N||M&8)&&(p.disabled=S[3]),M&1&&le(p.value)!==S[0][1]&&X(p,S[0][1]),(!N||M&8)&&(y.disabled=S[3]);const L={};M&8&&(L.disabled=S[3]),M&16384&&(L.$$scope={dirty:M,ctx:S}),v.$set(L)},i(S){N||(W(v.$$.fragment,S),N=!0)},o(S){q(v.$$.fragment,S),N=!1},d(S){S&&f(e),ee(v),B=!1,al(D)}}}function on(t,e,l){let s,r,a,c;Ne(t,Ct,d=>l(2,s=d)),Ne(t,Ct,d=>l(12,r=d)),Ne(t,tt,d=>l(13,a=d)),Ne(t,lt,d=>l(4,c=d));const o=ps();let{i:b}=e,{xy:i=[-1,-1]}=e;function E(){const{x:d,y:v}=Ds(a.image_params.fc,r.x,r.y);l(0,i[0]=Math.round((d+Number.EPSILON)*100)/100,i),l(0,i[1]=Math.round((v+Number.EPSILON)*100)/100,i)}let p=!1;function _(){i[0]=le(this.value),l(0,i)}const y=()=>o("change");function I(){i[1]=le(this.value),l(0,i)}const w=()=>o("change"),j=()=>{Ie(lt,c={cmd:`preview${b}`},c),Ie(Ct,s.block="previewing",s)};return t.$$set=d=>{"i"in d&&l(1,b=d.i),"xy"in d&&l(0,i=d.xy)},t.$$.update=()=>{t.$$.dirty&4&&l(3,p=Boolean(s.block))},[i,b,s,p,c,o,E,_,y,I,w,j]}class as extends pt{constructor(e){super();_t(this,e,on,an,dt,{i:1,xy:0})}}function rn(t){let e;return{c(){e=$("Set")},l(l){e=z(l,"Set")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function un(t){let e,l,s,r,a,c,o,b,i,E,p,_,y,I,w,j;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("0.2"),a=m("option"),c=$("0.5"),o=m("option"),b=$("0.6"),i=m("option"),E=$("1.0"),p=m("option"),_=$("2.4"),y=m("option"),I=$("4.0"),w=m("option"),j=$("Closed"),this.h()},l(d){e=h(d,"OPTION",{});var v=g(e);l=z(v,"Open"),v.forEach(f),s=h(d,"OPTION",{});var N=g(s);r=z(N,"0.2"),N.forEach(f),a=h(d,"OPTION",{});var B=g(a);c=z(B,"0.5"),B.forEach(f),o=h(d,"OPTION",{});var D=g(o);b=z(D,"0.6"),D.forEach(f),i=h(d,"OPTION",{});var S=g(i);E=z(S,"1.0"),S.forEach(f),p=h(d,"OPTION",{});var M=g(p);_=z(M,"2.4"),M.forEach(f),y=h(d,"OPTION",{});var L=g(y);I=z(L,"4.0"),L.forEach(f),w=h(d,"OPTION",{});var F=g(w);j=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="0.2",s.value=s.__value,a.__value="0.5",a.value=a.__value,o.__value="0.6",o.value=o.__value,i.__value="1.0",i.value=i.__value,p.__value="2.4",p.value=p.__value,y.__value="4.0",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(d,v){A(d,e,v),n(e,l),A(d,s,v),n(s,r),A(d,a,v),n(a,c),A(d,o,v),n(o,b),A(d,i,v),n(i,E),A(d,p,v),n(p,_),A(d,y,v),n(y,I),A(d,w,v),n(w,j)},d(d){d&&f(e),d&&f(s),d&&f(a),d&&f(o),d&&f(i),d&&f(p),d&&f(y),d&&f(w)}}}function fn(t){let e,l,s,r,a,c,o,b,i,E,p,_,y,I,w,j;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("1.0"),a=m("option"),c=$("2.0"),o=m("option"),b=$("3.5"),i=m("option"),E=$("3.8"),p=m("option"),_=$("4.0"),y=m("option"),I=$("4.5"),w=m("option"),j=$("Closed"),this.h()},l(d){e=h(d,"OPTION",{});var v=g(e);l=z(v,"Open"),v.forEach(f),s=h(d,"OPTION",{});var N=g(s);r=z(N,"1.0"),N.forEach(f),a=h(d,"OPTION",{});var B=g(a);c=z(B,"2.0"),B.forEach(f),o=h(d,"OPTION",{});var D=g(o);b=z(D,"3.5"),D.forEach(f),i=h(d,"OPTION",{});var S=g(i);E=z(S,"3.8"),S.forEach(f),p=h(d,"OPTION",{});var M=g(p);_=z(M,"4.0"),M.forEach(f),y=h(d,"OPTION",{});var L=g(y);I=z(L,"4.5"),L.forEach(f),w=h(d,"OPTION",{});var F=g(w);j=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="1.0",s.value=s.__value,a.__value="2.0",a.value=a.__value,o.__value="3.5",o.value=o.__value,i.__value="3.8",i.value=i.__value,p.__value="4.0",p.value=p.__value,y.__value="4.5",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(d,v){A(d,e,v),n(e,l),A(d,s,v),n(s,r),A(d,a,v),n(a,c),A(d,o,v),n(o,b),A(d,i,v),n(i,E),A(d,p,v),n(p,_),A(d,y,v),n(y,I),A(d,w,v),n(w,j)},d(d){d&&f(e),d&&f(s),d&&f(a),d&&f(o),d&&f(i),d&&f(p),d&&f(y),d&&f(w)}}}function cn(t){let e,l,s,r,a,c,o,b=(Boolean(t[1])?660:532)+"",i,E,p,_,y,I,w,j,d,v,N,B,D=2*t[1]+"",S,M,L,F,J,re,U=2*t[1]+1+"",Pe,te,he,nt,ie,Te,ge,at,ue=(Number(t[0].od[t[1]]!=-1)*t[0].lasers[t[1]]*Math.pow(10,-t[0].od[t[1]])).toFixed(4)+"",Ze,ot,R,ve,Se;w=new nl({props:{disabled:t[4].block,$$slots:{default:[rn]},$$scope:{ctx:t}}}),w.$on("click",t[8]);function mt(O,H){return O[1]==0?fn:un}let We=mt(t),G=We(t);return{c(){e=m("p"),l=m("span"),s=m("label"),r=m("input"),c=P(),o=m("div"),i=$(b),E=$(" nm"),p=P(),_=m("input"),I=$(`
    mW
    `),K(w.$$.fragment),j=P(),d=m("label"),v=m("input"),B=$(`
    Channel `),S=$(D),M=P(),L=m("label"),F=m("input"),re=$(`
    Channel `),Pe=$(U),te=P(),he=m("span"),nt=$(`Filter OD
    `),ie=m("select"),G.c(),Te=P(),ge=m("p"),at=$("Effective: "),Ze=$(ue),ot=$(" mW"),this.h()},l(O){e=h(O,"P",{class:!0});var H=g(e);l=h(H,"SPAN",{class:!0});var Y=g(l);s=h(Y,"LABEL",{});var de=g(s);r=h(de,"INPUT",{type:!0,class:!0}),c=T(de),o=h(de,"DIV",{class:!0});var Ce=g(o);i=z(Ce,b),E=z(Ce," nm"),Ce.forEach(f),de.forEach(f),p=T(Y),_=h(Y,"INPUT",{type:!0,class:!0,min:!0,max:!0}),I=z(Y,`
    mW
    `),Q(w.$$.fragment,Y),Y.forEach(f),j=T(H),d=h(H,"LABEL",{class:!0});var De=g(d);v=h(De,"INPUT",{type:!0,class:!0}),B=z(De,`
    Channel `),S=z(De,D),De.forEach(f),M=T(H),L=h(H,"LABEL",{class:!0});var qe=g(L);F=h(qe,"INPUT",{type:!0,class:!0}),re=z(qe,`
    Channel `),Pe=z(qe,U),qe.forEach(f),te=T(H),he=h(H,"SPAN",{class:!0});var $e=g(he);nt=z($e,`Filter OD
    `),ie=h($e,"SELECT",{class:!0});var rt=g(ie);G.l(rt),rt.forEach(f),Te=T($e),ge=h($e,"P",{class:!0});var Ge=g(ge);at=z(Ge,"Effective: "),Ze=z(Ge,ue),ot=z(Ge," mW"),Ge.forEach(f),$e.forEach(f),H.forEach(f),this.h()},h(){u(r,"type","checkbox"),u(r,"class",a=pe(`mr-1 rounded ${t[1]?"rounded text-red-600 focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),u(o,"class","inline font-semibold"),V(o,"text-green-800",t[0].laser_onoff[t[1]]&&!t[1]),V(o,"text-red-800",t[0].laser_onoff[t[1]]&&t[1]),u(_,"type","number"),u(_,"class","pretty h-8 w-[4.5rem] pr-2"),u(_,"min","0"),u(_,"max","500"),_.disabled=y=!t[0].laser_onoff[t[1]],V(_,"pretty-disabled",!t[0].laser_onoff[0]),u(l,"class","flex items-center gap-x-2"),V(l,"text-gray-400",!t[0].laser_onoff[t[1]]),u(v,"type","checkbox"),u(v,"class",N=pe(`mr-1 rounded ${t[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),u(d,"class","channel rounded-lg ring-red-500 svelte-6ipz4o"),u(F,"type","checkbox"),u(F,"class",J=pe(`mr-1 rounded ${t[1]?"text-amber-900 focus:ring-amber-700":"rounded text-orange-600 focus:ring-orange-300"}`)+" svelte-6ipz4o"),u(L,"class","channel svelte-6ipz4o"),u(ie,"class","rounded-lg border-gray-400 py-1 text-sm focus:ring focus:ring-blue-200 focus:ring-opacity-50 disabled:border-gray-300"),u(ge,"class","ml-3 text-sm font-medium"),u(he,"class","opacity-85 ml-8 font-normal"),u(e,"class","flex flex-col")},m(O,H){A(O,e,H),n(e,l),n(l,s),n(s,r),r.checked=t[0].laser_onoff[t[1]],n(s,c),n(s,o),n(o,i),n(o,E),n(l,p),n(l,_),X(_,t[0].lasers[t[1]]),n(l,I),x(w,l,null),n(e,j),n(e,d),n(d,v),v.checked=t[0].channels[2*t[1]],n(d,B),n(d,S),n(e,M),n(e,L),n(L,F),F.checked=t[0].channels[2*t[1]+1],n(L,re),n(L,Pe),n(e,te),n(e,he),n(he,nt),n(he,ie),G.m(ie,null),n(he,Te),n(he,ge),n(ge,at),n(ge,Ze),n(ge,ot),R=!0,ve||(Se=[Z(r,"change",t[6]),Z(_,"input",t[7]),we(He.call(null,_,[0,500])),Z(v,"change",t[9]),Z(F,"change",t[10]),Z(ie,"change",t[5])],ve=!0)},p(O,[H]){(!R||H&2&&a!==(a=pe(`mr-1 rounded ${O[1]?"rounded text-red-600 focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&u(r,"class",a),H&3&&(r.checked=O[0].laser_onoff[O[1]]),(!R||H&2)&&b!==(b=(Boolean(O[1])?660:532)+"")&&me(i,b),H&3&&V(o,"text-green-800",O[0].laser_onoff[O[1]]&&!O[1]),H&3&&V(o,"text-red-800",O[0].laser_onoff[O[1]]&&O[1]),(!R||H&3&&y!==(y=!O[0].laser_onoff[O[1]]))&&(_.disabled=y),H&3&&le(_.value)!==O[0].lasers[O[1]]&&X(_,O[0].lasers[O[1]]),H&1&&V(_,"pretty-disabled",!O[0].laser_onoff[0]);const Y={};H&16&&(Y.disabled=O[4].block),H&2048&&(Y.$$scope={dirty:H,ctx:O}),w.$set(Y),H&3&&V(l,"text-gray-400",!O[0].laser_onoff[O[1]]),(!R||H&2&&N!==(N=pe(`mr-1 rounded ${O[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&u(v,"class",N),H&3&&(v.checked=O[0].channels[2*O[1]]),(!R||H&2)&&D!==(D=2*O[1]+"")&&me(S,D),(!R||H&2&&J!==(J=pe(`mr-1 rounded ${O[1]?"text-amber-900 focus:ring-amber-700":"rounded text-orange-600 focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&u(F,"class",J),H&3&&(F.checked=O[0].channels[2*O[1]+1]),(!R||H&2)&&U!==(U=2*O[1]+1+"")&&me(Pe,U),We!==(We=mt(O))&&(G.d(1),G=We(O),G&&(G.c(),G.m(ie,null))),(!R||H&3)&&ue!==(ue=(Number(O[0].od[O[1]]!=-1)*O[0].lasers[O[1]]*Math.pow(10,-O[0].od[O[1]])).toFixed(4)+"")&&me(Ze,ue)},i(O){R||(W(w.$$.fragment,O),R=!0)},o(O){q(w.$$.fragment,O),R=!1},d(O){O&&f(e),ee(w),G.d(),ve=!1,al(Se)}}}function pn(t,e,l){let s,r,a;Ne(t,lt,I=>l(2,s=I)),Ne(t,tt,I=>l(3,r=I)),Ne(t,Ct,I=>l(4,a=I));let{params:c}=e,{i:o}=e;function b(I){let w;switch(I.currentTarget.value){case"Open":w=0;break;case"Closed":w=-1;break;default:w=Number(I.currentTarget.value)}l(0,c.od[o]=w,c),Ie(tt,r.image_params.od[o]=c.od[o],r),Ie(lt,s={move:{od:o===0?[c.od[o],void 0]:[void 0,c.od[o]]}},s)}function i(){c.laser_onoff[o]=this.checked,l(0,c)}function E(){c.lasers[o]=le(this.value),l(0,c)}const p=()=>{Ie(tt,r.image_params.laser_onoff[o]=c.laser_onoff[o],r),Ie(tt,r.image_params.lasers[o]=c.lasers[o],r),Ie(lt,s={move:{lasers:o===0?[c.lasers[o],void 0]:[void 0,c.lasers[o]],laser_onoff:o===0?[c.laser_onoff[o],void 0]:[void 0,c.laser_onoff[o]]}},s)};function _(){c.channels[2*o]=this.checked,l(0,c)}function y(){c.channels[2*o+1]=this.checked,l(0,c)}return t.$$set=I=>{"params"in I&&l(0,c=I.params),"i"in I&&l(1,o=I.i)},[c,o,s,r,a,b,i,E,p,_,y]}class os extends pt{constructor(e){super();_t(this,e,pn,cn,dt,{params:0,i:1})}}function rs(t){let e,l,s,r,a,c;return{c(){e=m("p"),l=$("Image Path"),s=P(),r=m("input"),this.h()},l(o){e=h(o,"P",{class:!0});var b=g(e);l=z(b,"Image Path"),b.forEach(f),s=T(o),r=h(o,"INPUT",{type:!0,class:!0}),this.h()},h(){u(e,"class","text-lg svelte-1m4l8fo"),u(r,"type","text"),u(r,"class","pretty mb-4 max-w-[470px] flex-grow"),V(r,"invalid",!t[0].path)},m(o,b){A(o,e,b),n(e,l),A(o,s,b),A(o,r,b),X(r,t[0].path),a||(c=Z(r,"input",t[10]),a=!0)},p(o,b){b&1&&r.value!==o[0].path&&X(r,o[0].path),b&1&&V(r,"invalid",!o[0].path)},d(o){o&&f(e),o&&f(s),o&&f(r),a=!1,c()}}}function is(t){let e;return{c(){e=$("per z-stack.")},l(l){e=z(l,"per z-stack.")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function us(t){let e,l=t[1].n_z+"",s,r,a,c=t[0].z_obj+t[0].z_from*t[0].z_spacing+"",o,b,i=t[0].z_obj+t[0].z_to*t[0].z_spacing+"",E,p,_,y,I=(t[1].n_z?yt(t[1].n_z*t[1].time):yt(t[1].time))+"",w,j,d=t[1].n_z>1&&fs();return{c(){e=m("div"),s=$(l),r=$(" Z step"),d&&d.c(),a=$(" from "),o=$(c),b=$(" to "),E=$(i),p=P(),_=m("div"),y=$("Total time: "),w=$(I),j=$("."),this.h()},l(v){e=h(v,"DIV",{class:!0});var N=g(e);s=z(N,l),r=z(N," Z step"),d&&d.l(N),a=z(N," from "),o=z(N,c),b=z(N," to "),E=z(N,i),N.forEach(f),p=T(v),_=h(v,"DIV",{class:!0});var B=g(_);y=z(B,"Total time: "),w=z(B,I),j=z(B,"."),B.forEach(f),this.h()},h(){u(e,"class","font-base px-2"),u(_,"class","px-2 font-semibold")},m(v,N){A(v,e,N),n(e,s),n(e,r),d&&d.m(e,null),n(e,a),n(e,o),n(e,b),n(e,E),A(v,p,N),A(v,_,N),n(_,y),n(_,w),n(_,j)},p(v,N){N&2&&l!==(l=v[1].n_z+"")&&me(s,l),v[1].n_z>1?d||(d=fs(),d.c(),d.m(e,a)):d&&(d.d(1),d=null),N&1&&c!==(c=v[0].z_obj+v[0].z_from*v[0].z_spacing+"")&&me(o,c),N&1&&i!==(i=v[0].z_obj+v[0].z_to*v[0].z_spacing+"")&&me(E,i),N&2&&I!==(I=(v[1].n_z?yt(v[1].n_z*v[1].time):yt(v[1].time))+"")&&me(w,I)},d(v){v&&f(e),d&&d.d(),v&&f(p),v&&f(_)}}}function fs(t){let e;return{c(){e=$("s")},l(l){e=z(l,"s")},m(l,s){A(l,e,s)},d(l){l&&f(e)}}}function _n(t){let e,l,s,r,a,c,o,b,i,E,p,_,y,I,w,j,d,v,N,B,D,S,M,L,F,J,re,U,Pe,te,he,nt,ie,Te,ge,at,ue,Ze,ot,R,ve,Se,mt,We,G,O,H,Y,de,Ce=t[1].width.toFixed(2)+"",De,qe,$e=t[1].height.toFixed(2)+"",rt,Ge,ol,Ve,wt=t[1].n_cols+"",Dt,rl,$t=t[1].n_bundles+"",Vt,il,ul,ze,zt=yt(t[1].time)+"",At,fl,cl,Xe,ht,pl,_l,Re,Ye,it,bt,dl,ml,Je,ke,hl,Ae,bl,ut,gt,gl,vl,Ke,Ee,kl,Ue,El,Qe,xe,Oe,Ut,yl,Me,et,wl,$l,zl,se,Be,Il,Nl,ne,Mt,Pl,je,Tl,Ol,ae,Bt,Sl,Le,Cl,Dl,oe,jt,be,Vl,Ll,fe=!t[3]&&rs(t);function _s(k){t[11](k)}let Fl={i:0};t[0]!==void 0&&(Fl.params=t[0]),w=new os({props:Fl}),Et.push(()=>ll(w,"params",_s));function ds(k){t[12](k)}let Hl={i:1};t[0]!==void 0&&(Hl.params=t[0]),v=new os({props:Hl}),Et.push(()=>ll(v,"params",ds));function ms(k){t[13](k)}let Zl={i:0};t[0].xy0!==void 0&&(Zl.xy=t[0].xy0),te=new as({props:Zl}),Et.push(()=>ll(te,"xy",ms)),te.$on("change",t[6]);function hs(k){t[14](k)}let Wl={i:1};t[0].xy1!==void 0&&(Wl.xy=t[0].xy1),ue=new as({props:Wl}),Et.push(()=>ll(ue,"xy",hs)),ue.$on("change",t[6]);let _e=t[2]&&is();Ae=new nl({props:{disabled:t[4].block}}),Ae.$on("click",t[17]),Ue=new nl({props:{disabled:t[4].block}}),Ue.$on("click",t[19]);let ce=t[2]&&us(t);return{c(){e=m("div"),l=m("section"),s=m("p"),r=$("Name"),a=P(),c=m("div"),o=m("input"),b=P(),fe&&fe.c(),i=P(),E=m("section"),p=m("h2"),_=$("Laser and Channels"),y=P(),I=m("div"),K(w.$$.fragment),d=P(),K(v.$$.fragment),B=P(),D=m("section"),S=m("h2"),M=$("Positions"),L=P(),F=m("div"),J=m("div"),re=m("p"),U=$("\u{1F4CC} Corner 1"),Pe=P(),K(te.$$.fragment),nt=P(),ie=m("div"),Te=m("p"),ge=$("\u{1F4CD} Corner 2"),at=P(),K(ue.$$.fragment),ot=P(),R=m("div"),ve=m("div"),Se=m("p"),mt=$("X-Overlap"),We=P(),G=m("input"),O=$(`
          (0-1)`),H=P(),Y=m("div"),de=m("span"),De=$(Ce),qe=$(" \xD7 "),rt=$($e),Ge=$(" mm."),ol=P(),Ve=m("span"),Dt=$(wt),rl=$(" columns of "),Vt=$($t),il=$(" bundles."),ul=P(),ze=m("span"),At=$(zt),fl=P(),_e&&_e.c(),cl=P(),Xe=m("section"),ht=m("h2"),pl=$("Focus"),_l=P(),Re=m("div"),Ye=m("div"),it=m("div"),bt=m("p"),dl=$("Z Tilt"),ml=P(),Je=m("div"),ke=m("input"),hl=P(),K(Ae.$$.fragment),bl=P(),ut=m("div"),gt=m("p"),gl=$("Z Objective"),vl=P(),Ke=m("span"),Ee=m("input"),kl=P(),K(Ue.$$.fragment),El=P(),Qe=m("div"),xe=m("label"),Oe=m("input"),yl=P(),Me=m("div"),et=m("div"),wl=$("Z-Stack"),$l=P(),ce&&ce.c(),zl=P(),se=m("div"),Be=m("span"),Il=$("Spacing"),Nl=P(),ne=m("input"),Pl=P(),je=m("span"),Tl=$("From"),Ol=P(),ae=m("input"),Sl=P(),Le=m("span"),Cl=$("To"),Dl=P(),oe=m("input"),this.h()},l(k){e=h(k,"DIV",{id:!0,class:!0,style:!0});var C=g(e);l=h(C,"SECTION",{class:!0});var Fe=g(l);s=h(Fe,"P",{class:!0});var It=g(s);r=z(It,"Name"),It.forEach(f),a=T(Fe),c=h(Fe,"DIV",{class:!0});var Nt=g(c);o=h(Nt,"INPUT",{type:!0,class:!0}),Nt.forEach(f),b=T(Fe),fe&&fe.l(Fe),Fe.forEach(f),i=T(C),E=h(C,"SECTION",{class:!0});var ft=g(E);p=h(ft,"H2",{class:!0});var Pt=g(p);_=z(Pt,"Laser and Channels"),Pt.forEach(f),y=T(ft),I=h(ft,"DIV",{class:!0});var ct=g(I);Q(w.$$.fragment,ct),d=T(ct),Q(v.$$.fragment,ct),ct.forEach(f),ft.forEach(f),B=T(C),D=h(C,"SECTION",{class:!0});var Lt=g(D);S=h(Lt,"H2",{class:!0});var ql=g(S);M=z(ql,"Positions"),ql.forEach(f),L=T(Lt),F=h(Lt,"DIV",{class:!0});var vt=g(F);J=h(vt,"DIV",{});var Ft=g(J);re=h(Ft,"P",{class:!0});var Gl=g(re);U=z(Gl,"\u{1F4CC} Corner 1"),Gl.forEach(f),Pe=T(Ft),Q(te.$$.fragment,Ft),Ft.forEach(f),nt=T(vt),ie=h(vt,"DIV",{});var Ht=g(ie);Te=h(Ht,"P",{class:!0});var Xl=g(Te);ge=z(Xl,"\u{1F4CD} Corner 2"),Xl.forEach(f),at=T(Ht),Q(ue.$$.fragment,Ht),Ht.forEach(f),ot=T(vt),R=h(vt,"DIV",{class:!0});var Zt=g(R);ve=h(Zt,"DIV",{});var Tt=g(ve);Se=h(Tt,"P",{class:!0});var Rl=g(Se);mt=z(Rl,"X-Overlap"),Rl.forEach(f),We=T(Tt),G=h(Tt,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),O=z(Tt,`
          (0-1)`),Tt.forEach(f),H=T(Zt),Y=h(Zt,"DIV",{class:!0});var kt=g(Y);de=h(kt,"SPAN",{class:!0});var Ot=g(de);De=z(Ot,Ce),qe=z(Ot," \xD7 "),rt=z(Ot,$e),Ge=z(Ot," mm."),Ot.forEach(f),ol=T(kt),Ve=h(kt,"SPAN",{class:!0});var St=g(Ve);Dt=z(St,wt),rl=z(St," columns of "),Vt=z(St,$t),il=z(St," bundles."),St.forEach(f),ul=T(kt),ze=h(kt,"SPAN",{class:!0});var Wt=g(ze);At=z(Wt,zt),fl=T(Wt),_e&&_e.l(Wt),Wt.forEach(f),kt.forEach(f),Zt.forEach(f),vt.forEach(f),Lt.forEach(f),cl=T(C),Xe=h(C,"SECTION",{class:!0});var qt=g(Xe);ht=h(qt,"H2",{class:!0});var Yl=g(ht);pl=z(Yl,"Focus"),Yl.forEach(f),_l=T(qt),Re=h(qt,"DIV",{class:!0});var Gt=g(Re);Ye=h(Gt,"DIV",{class:!0});var Xt=g(Ye);it=h(Xt,"DIV",{});var Rt=g(it);bt=h(Rt,"P",{class:!0});var Jl=g(bt);dl=z(Jl,"Z Tilt"),Jl.forEach(f),ml=T(Rt),Je=h(Rt,"DIV",{class:!0});var Yt=g(Je);ke=h(Yt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),hl=T(Yt),Q(Ae.$$.fragment,Yt),Yt.forEach(f),Rt.forEach(f),bl=T(Xt),ut=h(Xt,"DIV",{});var Jt=g(ut);gt=h(Jt,"P",{class:!0});var Kl=g(gt);gl=z(Kl,"Z Objective"),Kl.forEach(f),vl=T(Jt),Ke=h(Jt,"SPAN",{class:!0});var Kt=g(Ke);Ee=h(Kt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),kl=T(Kt),Q(Ue.$$.fragment,Kt),Kt.forEach(f),Jt.forEach(f),Xt.forEach(f),El=T(Gt),Qe=h(Gt,"DIV",{class:!0});var Qt=g(Qe);xe=h(Qt,"LABEL",{class:!0});var xt=g(xe);Oe=h(xt,"INPUT",{type:!0,class:!0}),yl=T(xt),Me=h(xt,"DIV",{class:!0});var el=g(Me);et=h(el,"DIV",{class:!0});var Ql=g(et);wl=z(Ql,"Z-Stack"),Ql.forEach(f),$l=T(el),ce&&ce.l(el),el.forEach(f),xt.forEach(f),zl=T(Qt),se=h(Qt,"DIV",{class:!0,id:!0});var ye=g(se);Be=h(ye,"SPAN",{class:!0});var xl=g(Be);Il=z(xl,"Spacing"),xl.forEach(f),Nl=T(ye),ne=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Pl=T(ye),je=h(ye,"SPAN",{class:!0});var es=g(je);Tl=z(es,"From"),es.forEach(f),Ol=T(ye),ae=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Sl=T(ye),Le=h(ye,"SPAN",{class:!0});var ts=g(Le);Cl=z(ts,"To"),ts.forEach(f),Dl=T(ye),oe=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ye.forEach(f),Qt.forEach(f),Gt.forEach(f),qt.forEach(f),C.forEach(f),this.h()},h(){u(s,"class","mt-1 text-lg svelte-1m4l8fo"),u(o,"type","text"),u(o,"class","pretty mb-4 h-12 flex-grow text-lg"),V(o,"invalid",t[7](t[0].name)),u(c,"class","flex max-w-[470px] flex-grow gap-x-2"),u(l,"class","flex flex-col text-lg font-medium"),u(p,"class","svelte-1m4l8fo"),u(I,"class","grid min-w-[600px] grid-cols-2"),V(I,"opacity-70",t[4].block),u(E,"class","font-medium leading-10 "),u(S,"class","svelte-1m4l8fo"),u(re,"class","svelte-1m4l8fo"),u(Te,"class","svelte-1m4l8fo"),u(Se,"class","svelte-1m4l8fo"),u(G,"type","number"),u(G,"class","pretty w-20 pr-2"),u(G,"step","0.01"),u(G,"min","0"),u(G,"max","0.99"),u(de,"class","tabular-nums"),u(Ve,"class","tabular-nums"),u(ze,"class","tabular-nums"),V(ze,"font-semibold",!t[2]),u(Y,"class","flex flex-col justify-center font-normal"),u(R,"class","flex gap-8"),u(F,"class","-mt-1 space-y-4"),u(D,"class","flex flex-col gap-2"),V(D,"-mt-20",t[3]),u(ht,"class","svelte-1m4l8fo"),u(bt,"class","svelte-1m4l8fo"),u(ke,"type","number"),u(ke,"class","pretty w-28"),u(ke,"min","0"),u(ke,"max","25000"),u(Je,"class","flex gap-2"),u(gt,"class","svelte-1m4l8fo"),u(Ee,"type","number"),u(Ee,"class","pretty w-28"),u(Ee,"min","0"),u(Ee,"max","60000"),u(Ke,"class","flex gap-2"),u(Ye,"class","flex space-x-8"),u(Oe,"type","checkbox"),u(Oe,"class","mr-1 rounded focus:ring-blue-600"),Oe.disabled=Ut=t[4].block==="capturing",u(et,"class","pr-2"),V(et,"font-medium",t[2]),u(Me,"class","flex divide-x-2"),u(xe,"class","flex items-center gap-x-1"),u(Be,"class","color-group flex items-center rounded-l-lg border-l svelte-1m4l8fo"),V(Be,"span-disabled",t[4].block||!t[2]),u(ne,"type","number"),u(ne,"min","1"),u(ne,"max","60000"),u(ne,"step","1"),u(ne,"class","pretty z-10 h-10 w-28 rounded-none text-center"),ne.disabled=Mt=t[4].block||!t[2],V(ne,"disabled",t[4].block||!t[2]),u(je,"class","color-group flex items-center svelte-1m4l8fo"),V(je,"span-disabled",t[4].block||!t[2]),u(ae,"type","number"),u(ae,"min","-100"),u(ae,"max","100"),u(ae,"step","1"),u(ae,"class","pretty z-10 h-10 w-16 rounded-none text-center"),ae.disabled=Bt=t[4].block||!t[2],V(ae,"disabled",t[4].block||!t[2]),u(Le,"class","color-group flex items-center svelte-1m4l8fo"),V(Le,"span-disabled",t[4].block||!t[2]),u(oe,"type","number"),u(oe,"min","-100"),u(oe,"max","100"),u(oe,"step","1"),u(oe,"class","pretty z-10 h-10 w-16 rounded-l-none rounded-r-lg text-center"),oe.disabled=jt=t[4].block||!t[2],V(oe,"disabled",t[4].block||!t[2]),u(se,"class","flex font-medium"),u(se,"id","zBox"),u(Qe,"class","space-y-2"),u(Re,"class","-mt-1 space-y-4"),u(Xe,"class","flex flex-col gap-2"),u(e,"id","control"),u(e,"class","grid gap-y-6"),Os(e,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(k,C){A(k,e,C),n(e,l),n(l,s),n(s,r),n(l,a),n(l,c),n(c,o),X(o,t[0].name),n(l,b),fe&&fe.m(l,null),n(e,i),n(e,E),n(E,p),n(p,_),n(E,y),n(E,I),x(w,I,null),n(I,d),x(v,I,null),n(e,B),n(e,D),n(D,S),n(S,M),n(D,L),n(D,F),n(F,J),n(J,re),n(re,U),n(J,Pe),x(te,J,null),n(F,nt),n(F,ie),n(ie,Te),n(Te,ge),n(ie,at),x(ue,ie,null),n(F,ot),n(F,R),n(R,ve),n(ve,Se),n(Se,mt),n(ve,We),n(ve,G),X(G,t[0].overlap),n(ve,O),n(R,H),n(R,Y),n(Y,de),n(de,De),n(de,qe),n(de,rt),n(de,Ge),n(Y,ol),n(Y,Ve),n(Ve,Dt),n(Ve,rl),n(Ve,Vt),n(Ve,il),n(Y,ul),n(Y,ze),n(ze,At),n(ze,fl),_e&&_e.m(ze,null),n(e,cl),n(e,Xe),n(Xe,ht),n(ht,pl),n(Xe,_l),n(Xe,Re),n(Re,Ye),n(Ye,it),n(it,bt),n(bt,dl),n(it,ml),n(it,Je),n(Je,ke),X(ke,t[0].z_tilt),n(Je,hl),x(Ae,Je,null),n(Ye,bl),n(Ye,ut),n(ut,gt),n(gt,gl),n(ut,vl),n(ut,Ke),n(Ke,Ee),X(Ee,t[0].z_obj),n(Ke,kl),x(Ue,Ke,null),n(Re,El),n(Re,Qe),n(Qe,xe),n(xe,Oe),Oe.checked=t[2],n(xe,yl),n(xe,Me),n(Me,et),n(et,wl),n(Me,$l),ce&&ce.m(Me,null),n(Qe,zl),n(Qe,se),n(se,Be),n(Be,Il),n(se,Nl),n(se,ne),X(ne,t[0].z_spacing),n(se,Pl),n(se,je),n(je,Tl),n(se,Ol),n(se,ae),X(ae,t[0].z_from),n(se,Sl),n(se,Le),n(Le,Cl),n(se,Dl),n(se,oe),X(oe,t[0].z_to),be=!0,Vl||(Ll=[Z(o,"input",t[9]),Z(G,"input",t[15]),we(He.call(null,G,[.01,.99])),Z(ke,"input",t[16]),we(He.call(null,ke,[0,25e3])),Z(Ee,"input",t[18]),we(He.call(null,Ee,[0,6e4])),Z(Oe,"change",t[20]),we(Al.call(null,Be,"Nyquist is 232.")),Z(ne,"input",t[21]),we(He.call(null,ne,[1,6e4])),we(Al.call(null,je,"Multiple of Spacing")),Z(ae,"input",t[22]),we(He.call(null,ae,[-100,100])),we(Al.call(null,Le,"Multiple of Spacing")),Z(oe,"input",t[23]),we(He.call(null,oe,[-100,100]))],Vl=!0)},p(k,[C]){C&1&&o.value!==k[0].name&&X(o,k[0].name),C&129&&V(o,"invalid",k[7](k[0].name)),k[3]?fe&&(fe.d(1),fe=null):fe?fe.p(k,C):(fe=rs(k),fe.c(),fe.m(l,null));const Fe={};!j&&C&1&&(j=!0,Fe.params=k[0],sl(()=>j=!1)),w.$set(Fe);const It={};!N&&C&1&&(N=!0,It.params=k[0],sl(()=>N=!1)),v.$set(It),C&16&&V(I,"opacity-70",k[4].block);const Nt={};!he&&C&1&&(he=!0,Nt.xy=k[0].xy0,sl(()=>he=!1)),te.$set(Nt);const ft={};!Ze&&C&1&&(Ze=!0,ft.xy=k[0].xy1,sl(()=>Ze=!1)),ue.$set(ft),C&1&&le(G.value)!==k[0].overlap&&X(G,k[0].overlap),(!be||C&2)&&Ce!==(Ce=k[1].width.toFixed(2)+"")&&me(De,Ce),(!be||C&2)&&$e!==($e=k[1].height.toFixed(2)+"")&&me(rt,$e),(!be||C&2)&&wt!==(wt=k[1].n_cols+"")&&me(Dt,wt),(!be||C&2)&&$t!==($t=k[1].n_bundles+"")&&me(Vt,$t),(!be||C&2)&&zt!==(zt=yt(k[1].time)+"")&&me(At,zt),k[2]?_e||(_e=is(),_e.c(),_e.m(ze,null)):_e&&(_e.d(1),_e=null),C&4&&V(ze,"font-semibold",!k[2]),C&8&&V(D,"-mt-20",k[3]),C&1&&le(ke.value)!==k[0].z_tilt&&X(ke,k[0].z_tilt);const Pt={};C&16&&(Pt.disabled=k[4].block),Ae.$set(Pt),C&1&&le(Ee.value)!==k[0].z_obj&&X(Ee,k[0].z_obj);const ct={};C&16&&(ct.disabled=k[4].block),Ue.$set(ct),(!be||C&16&&Ut!==(Ut=k[4].block==="capturing"))&&(Oe.disabled=Ut),C&4&&(Oe.checked=k[2]),C&4&&V(et,"font-medium",k[2]),k[2]?ce?ce.p(k,C):(ce=us(k),ce.c(),ce.m(Me,null)):ce&&(ce.d(1),ce=null),C&20&&V(Be,"span-disabled",k[4].block||!k[2]),(!be||C&20&&Mt!==(Mt=k[4].block||!k[2]))&&(ne.disabled=Mt),C&1&&le(ne.value)!==k[0].z_spacing&&X(ne,k[0].z_spacing),C&20&&V(ne,"disabled",k[4].block||!k[2]),C&20&&V(je,"span-disabled",k[4].block||!k[2]),(!be||C&20&&Bt!==(Bt=k[4].block||!k[2]))&&(ae.disabled=Bt),C&1&&le(ae.value)!==k[0].z_from&&X(ae,k[0].z_from),C&20&&V(ae,"disabled",k[4].block||!k[2]),C&20&&V(Le,"span-disabled",k[4].block||!k[2]),(!be||C&20&&jt!==(jt=k[4].block||!k[2]))&&(oe.disabled=jt),C&1&&le(oe.value)!==k[0].z_to&&X(oe,k[0].z_to),C&20&&V(oe,"disabled",k[4].block||!k[2])},i(k){be||(W(w.$$.fragment,k),W(v.$$.fragment,k),W(te.$$.fragment,k),W(ue.$$.fragment,k),W(Ae.$$.fragment,k),W(Ue.$$.fragment,k),be=!0)},o(k){q(w.$$.fragment,k),q(v.$$.fragment,k),q(te.$$.fragment,k),q(ue.$$.fragment,k),q(Ae.$$.fragment,k),q(Ue.$$.fragment,k),be=!1},d(k){k&&f(e),fe&&fe.d(),ee(w),ee(v),ee(te),ee(ue),_e&&_e.d(),ee(Ae),ee(Ue),ce&&ce.d(),Vl=!1,al(Ll)}}}function dn(t,e){t&&(t.querySelectorAll("input").forEach(l=>l.disabled=e),t.querySelectorAll("select").forEach(l=>l.disabled=e),t.querySelectorAll("button").forEach(l=>l.disabled=e))}function yt(t){const e=new Date(t*1e3).toISOString();return t>3600?`${e.substring(11,19)} hrs`:`${e.substring(14,19)} mins`}function mn(t,e,l){let s,r,a;Ne(t,Ct,U=>l(4,s=U)),Ne(t,tt,U=>l(24,r=U)),Ne(t,lt,U=>l(5,a=U));let{inAuto:c=!0}=e,{params:o}=e,{stats:b={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=e,{z_stack:i=!1}=e,{fc_:E=0}=e;function p(){Ie(tt,r.image_params.xy0=o.xy0,r),Ie(tt,r.image_params.xy1=o.xy1,r)}function _(U){if(!U)return!0;if(!c)return!1;const Pe=r.exps[E].cmds.filter(te=>te.cmd.op==="takeimage").map(te=>te.cmd.name);return Cs(Pe)[U]>1}function y(){o.name=this.value,l(0,o)}function I(){o.path=this.value,l(0,o)}function w(U){o=U,l(0,o)}function j(U){o=U,l(0,o)}function d(U){t.$$.not_equal(o.xy0,U)&&(o.xy0=U,l(0,o))}function v(U){t.$$.not_equal(o.xy1,U)&&(o.xy1=U,l(0,o))}function N(){o.overlap=le(this.value),l(0,o)}function B(){o.z_tilt=le(this.value),l(0,o)}const D=()=>Ie(lt,a={move:{z_tilt:o.z_tilt}},a);function S(){o.z_obj=le(this.value),l(0,o)}const M=()=>Ie(lt,a={move:{z_obj:o.z_obj}},a);function L(){i=this.checked,l(2,i)}function F(){o.z_spacing=le(this.value),l(0,o)}function J(){o.z_from=le(this.value),l(0,o)}function re(){o.z_to=le(this.value),l(0,o)}return t.$$set=U=>{"inAuto"in U&&l(3,c=U.inAuto),"params"in U&&l(0,o=U.params),"stats"in U&&l(1,b=U.stats),"z_stack"in U&&l(2,i=U.z_stack),"fc_"in U&&l(8,E=U.fc_)},t.$$.update=()=>{t.$$.dirty&16&&dn(document.getElementById("control"),s.block),t.$$.dirty&1&&l(1,b.height=Math.max(o.xy1[1],o.xy0[1])-Math.min(o.xy1[1],o.xy0[1]),b),t.$$.dirty&1&&l(1,b.width=Math.max(o.xy1[0],o.xy0[0])-Math.min(o.xy1[0],o.xy0[0]),b),t.$$.dirty&3&&l(1,b.n_cols=b.width==0?1:Math.ceil(b.width/(.768*(1-o.overlap))),b),t.$$.dirty&2&&l(1,b.n_bundles=Math.ceil(b.height/.048),b),t.$$.dirty&2&&l(1,b.time=b.n_bundles*b.n_cols/20,b),t.$$.dirty&1&&l(1,b.n_z=Math.abs(o.z_to-o.z_from)+1,b)},[o,b,i,c,s,a,p,_,E,y,I,w,j,d,v,N,B,D,S,M,L,F,J,re]}class yn extends pt{constructor(e){super();_t(this,e,mn,_n,dt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{En as P,yn as T,kn as a};
