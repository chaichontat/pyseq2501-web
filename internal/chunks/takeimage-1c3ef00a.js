import{S as nt,i as ot,s as rt,e as _,c as d,a as v,d as r,b as n,a0 as sl,g as L,V as G,n as ms,o as ie,p as vs,q as se,_ as hs,F as Es,I as zs,J as Is,K as Ps,w as Ne,x as Oe,y as Te,M as ws,B as Se,t as b,h as g,k as O,O as st,m as T,P as at,U as A,H as t,a1 as q,Q as ye,$ as J,W as qt,N as cl,X as Ie,j as de,T as et,Y as lt,Z as tt}from"./vendor-9417e0b8.js";import{u as We,s as Ns,c as al}from"./store-c68bb769.js";import{r as Os}from"./preview.svelte_svelte_type_style_lang-df4526fd.js";import{S as Ts,c as Xe,t as Zt,a as Ss}from"./tooltip-d1460923.js";function Cs(e){let l,s;const o=e[7].default,p=Es(o,e,e[6],null),u=p||As();return{c(){l=_("div"),u&&u.c(),this.h()},l(a){l=d(a,"DIV",{class:!0});var i=v(l);u&&u.l(i),i.forEach(r),this.h()},h(){n(l,"class","mx-auto")},m(a,i){L(a,l,i),u&&u.m(l,null),s=!0},p(a,i){p&&p.p&&(!s||i&64)&&zs(p,o,a,a[6],s?Ps(o,a[6],i,null):Is(a[6]),null)},i(a){s||(se(u,a),s=!0)},o(a){ie(u,a),s=!1},d(a){a&&r(l),u&&u.d(a)}}}function Ds(e){let l,s,o;return s=new Ts({props:{color:"black"}}),{c(){l=_("div"),Ne(s.$$.fragment),this.h()},l(p){l=d(p,"DIV",{class:!0});var u=v(l);Oe(s.$$.fragment,u),u.forEach(r),this.h()},h(){n(l,"class","mx-auto opacity-40")},m(p,u){L(p,l,u),Te(s,l,null),o=!0},p:ws,i(p){o||(se(s.$$.fragment,p),o=!0)},o(p){ie(s.$$.fragment,p),o=!1},d(p){p&&r(l),Se(s)}}}function As(e){let l;return{c(){l=b("Go")},l(s){l=g(s,"Go")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Vs(e){let l,s,o,p,u,a,i;const k=[Ds,Cs],P=[];function V(m,h){return m[1]?0:1}return s=V(e),o=P[s]=k[s](e),{c(){l=_("button"),o.c(),this.h()},l(m){l=d(m,"BUTTON",{type:!0,class:!0,tabindex:!0});var h=v(l);o.l(h),h.forEach(r),this.h()},h(){n(l,"type","button"),n(l,"class",p=sl(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${e[5][e[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${e[3]}`)+" svelte-1rnzpdo"),n(l,"tabindex","0"),l.disabled=e[0]},m(m,h){L(m,l,h),P[s].m(l,null),u=!0,a||(i=G(l,"click",e[8]),a=!0)},p(m,[h]){let z=s;s=V(m),s===z?P[s].p(m,h):(ms(),ie(P[z],1,1,()=>{P[z]=null}),vs(),o=P[s],o?o.p(m,h):(o=P[s]=k[s](m),o.c()),se(o,1),o.m(l,null)),(!u||h&12&&p!==(p=sl(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${m[5][m[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${m[3]}`)+" svelte-1rnzpdo"))&&n(l,"class",p),(!u||h&1)&&(l.disabled=m[0])},i(m){u||(se(o),u=!0)},o(m){ie(o),u=!1},d(m){m&&r(l),P[s].d(),a=!1,i()}}}function Ms(e,l,s){let{$$slots:o={},$$scope:p}=l,{disabled:u=!1}=l,{spin:a=!1}=l,{color:i="indigo"}=l,{cl:k=""}=l;const P=hs(),V={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},m=()=>P("click");return e.$$set=h=>{"disabled"in h&&s(0,u=h.disabled),"spin"in h&&s(1,a=h.spin),"color"in h&&s(2,i=h.color),"cl"in h&&s(3,k=h.cl),"$$scope"in h&&s(6,p=h.$$scope)},[u,a,i,k,P,V,p,o,m]}class Cl extends nt{constructor(l){super();ot(this,l,Ms,Vs,rt,{disabled:0,spin:1,color:2,cl:3})}}function Us(e){let l,s,o,p,u,a,i,k,P,V,m,h,z,B,I,w,f,y,N,F,H;return z=new Cl({props:{disabled:e[3]}}),z.$on("click",e[11]),{c(){l=_("div"),s=_("div"),o=_("span"),p=b("X"),u=O(),a=_("input"),i=O(),k=_("span"),P=b("Y"),V=O(),m=_("input"),h=O(),Ne(z.$$.fragment),B=O(),I=_("button"),w=st("svg"),f=st("path"),y=b(`
    Current`),this.h()},l(S){l=d(S,"DIV",{class:!0});var M=v(l);s=d(M,"DIV",{class:!0});var j=v(s);o=d(j,"SPAN",{class:!0});var Z=v(o);p=g(Z,"X"),Z.forEach(r),u=T(j),a=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),i=T(j),k=d(j,"SPAN",{class:!0});var X=v(k);P=g(X,"Y"),X.forEach(r),V=T(j),m=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(r),h=T(M),Oe(z.$$.fragment,M),B=T(M),I=d(M,"BUTTON",{type:!0,class:!0});var D=v(I);w=at(D,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var K=v(w);f=at(K,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(f).forEach(r),K.forEach(r),y=g(D,`
    Current`),D.forEach(r),M.forEach(r),this.h()},h(){n(o,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),A(o,"span-disabled",e[2].block),n(a,"type","number"),n(a,"min","-5"),n(a,"max","30"),n(a,"step","0.01"),n(a,"class","z-10 h-10 text-center rounded-none pretty w-28"),a.disabled=e[3],n(k,"class","flex items-center color-group svelte-awp8a4"),A(k,"span-disabled",e[2].block),n(m,"type","number"),n(m,"min","-5"),n(m,"max","80"),n(m,"step","0.01"),n(m,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),m.disabled=e[3],n(s,"class","flex font-medium"),n(f,"stroke-linecap","round"),n(f,"stroke-linejoin","round"),n(f,"stroke-width","2"),n(f,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),n(w,"xmlns","http://www.w3.org/2000/svg"),n(w,"class","w-5 h-5 mr-1"),n(w,"fill","none"),n(w,"viewBox","0 0 24 24"),n(w,"stroke","currentColor"),n(I,"type","button"),n(I,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),I.disabled=e[3],n(l,"class","flex gap-x-2")},m(S,M){L(S,l,M),t(l,s),t(s,o),t(o,p),t(s,u),t(s,a),q(a,e[0][0]),t(s,i),t(s,k),t(k,P),t(s,V),t(s,m),q(m,e[0][1]),t(l,h),Te(z,l,null),t(l,B),t(l,I),t(I,w),t(w,f),t(I,y),N=!0,F||(H=[G(a,"input",e[7]),G(a,"change",e[8]),ye(Xe.call(null,a,[-5,30])),G(m,"input",e[9]),G(m,"change",e[10]),ye(Xe.call(null,m,[-5,80])),G(I,"click",e[6])],F=!0)},p(S,[M]){M&4&&A(o,"span-disabled",S[2].block),(!N||M&8)&&(a.disabled=S[3]),M&1&&J(a.value)!==S[0][0]&&q(a,S[0][0]),M&4&&A(k,"span-disabled",S[2].block),(!N||M&8)&&(m.disabled=S[3]),M&1&&J(m.value)!==S[0][1]&&q(m,S[0][1]);const j={};M&8&&(j.disabled=S[3]),z.$set(j),(!N||M&8)&&(I.disabled=S[3])},i(S){N||(se(z.$$.fragment,S),N=!0)},o(S){ie(z.$$.fragment,S),N=!1},d(S){S&&r(l),Se(z),F=!1,qt(H)}}}function Bs(e,l,s){let o,p,u;cl(e,We,w=>s(2,o=w)),cl(e,Ns,w=>s(12,p=w)),cl(e,al,w=>s(4,u=w));const a=hs();let{i}=l,{xy:k=[-1,-1]}=l;function P(){const{x:w,y:f}=Os(o.image_params.fc,p.x,p.y);s(0,k[0]=Math.round((w+Number.EPSILON)*100)/100,k),s(0,k[1]=Math.round((f+Number.EPSILON)*100)/100,k)}let V=!1;function m(){k[0]=J(this.value),s(0,k)}const h=()=>a("change");function z(){k[1]=J(this.value),s(0,k)}const B=()=>a("change"),I=()=>{Ie(We,o.block="moving",o),Ie(al,u={move:i===0?{xy0:k}:{xy1:k}},u)};return e.$$set=w=>{"i"in w&&s(1,i=w.i),"xy"in w&&s(0,k=w.xy)},e.$$.update=()=>{e.$$.dirty&4&&s(3,V=Boolean(o.block))},[k,i,o,V,u,a,P,m,h,z,B,I]}class is extends nt{constructor(l){super();ot(this,l,Bs,Us,rt,{i:1,xy:0})}}function js(e){let l;return{c(){l=b("Set")},l(s){l=g(s,"Set")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Ls(e){let l,s,o,p,u,a,i,k,P,V,m,h,z,B,I,w;return{c(){l=_("option"),s=b("Open"),o=_("option"),p=b("0.2"),u=_("option"),a=b("0.5"),i=_("option"),k=b("0.6"),P=_("option"),V=b("1.0"),m=_("option"),h=b("2.4"),z=_("option"),B=b("4.0"),I=_("option"),w=b("Closed"),this.h()},l(f){l=d(f,"OPTION",{});var y=v(l);s=g(y,"Open"),y.forEach(r),o=d(f,"OPTION",{});var N=v(o);p=g(N,"0.2"),N.forEach(r),u=d(f,"OPTION",{});var F=v(u);a=g(F,"0.5"),F.forEach(r),i=d(f,"OPTION",{});var H=v(i);k=g(H,"0.6"),H.forEach(r),P=d(f,"OPTION",{});var S=v(P);V=g(S,"1.0"),S.forEach(r),m=d(f,"OPTION",{});var M=v(m);h=g(M,"2.4"),M.forEach(r),z=d(f,"OPTION",{});var j=v(z);B=g(j,"4.0"),j.forEach(r),I=d(f,"OPTION",{});var Z=v(I);w=g(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="0.2",o.value=o.__value,u.__value="0.5",u.value=u.__value,i.__value="0.6",i.value=i.__value,P.__value="1.0",P.value=P.__value,m.__value="2.4",m.value=m.__value,z.__value="4.0",z.value=z.__value,I.__value="Closed",I.value=I.__value},m(f,y){L(f,l,y),t(l,s),L(f,o,y),t(o,p),L(f,u,y),t(u,a),L(f,i,y),t(i,k),L(f,P,y),t(P,V),L(f,m,y),t(m,h),L(f,z,y),t(z,B),L(f,I,y),t(I,w)},d(f){f&&r(l),f&&r(o),f&&r(u),f&&r(i),f&&r(P),f&&r(m),f&&r(z),f&&r(I)}}}function Fs(e){let l,s,o,p,u,a,i,k,P,V,m,h,z,B,I,w;return{c(){l=_("option"),s=b("Open"),o=_("option"),p=b("1.0"),u=_("option"),a=b("2.0"),i=_("option"),k=b("3.5"),P=_("option"),V=b("3.8"),m=_("option"),h=b("4.0"),z=_("option"),B=b("4.5"),I=_("option"),w=b("Closed"),this.h()},l(f){l=d(f,"OPTION",{});var y=v(l);s=g(y,"Open"),y.forEach(r),o=d(f,"OPTION",{});var N=v(o);p=g(N,"1.0"),N.forEach(r),u=d(f,"OPTION",{});var F=v(u);a=g(F,"2.0"),F.forEach(r),i=d(f,"OPTION",{});var H=v(i);k=g(H,"3.5"),H.forEach(r),P=d(f,"OPTION",{});var S=v(P);V=g(S,"3.8"),S.forEach(r),m=d(f,"OPTION",{});var M=v(m);h=g(M,"4.0"),M.forEach(r),z=d(f,"OPTION",{});var j=v(z);B=g(j,"4.5"),j.forEach(r),I=d(f,"OPTION",{});var Z=v(I);w=g(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="1.0",o.value=o.__value,u.__value="2.0",u.value=u.__value,i.__value="3.5",i.value=i.__value,P.__value="3.8",P.value=P.__value,m.__value="4.0",m.value=m.__value,z.__value="4.5",z.value=z.__value,I.__value="Closed",I.value=I.__value},m(f,y){L(f,l,y),t(l,s),L(f,o,y),t(o,p),L(f,u,y),t(u,a),L(f,i,y),t(i,k),L(f,P,y),t(P,V),L(f,m,y),t(m,h),L(f,z,y),t(z,B),L(f,I,y),t(I,w)},d(f){f&&r(l),f&&r(o),f&&r(u),f&&r(i),f&&r(P),f&&r(m),f&&r(z),f&&r(I)}}}function Zs(e){let l,s,o,p,u,a,i,k=(Boolean(e[1])?660:532)+"",P,V,m,h,z,B,I,w,f,y,N,F,H=2*e[1]+"",S,M,j,Z,X,D,K=2*e[1]+1+"",pe,nl,W,ol,ce,ke,ae,rl,Ce=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",ne,il,ee,me,Ee;I=new Cl({props:{$$slots:{default:[js]},$$scope:{ctx:e}}}),I.$on("click",e[7]);function De(E,U){return E[1]==0?Fs:Ls}let Ge=De(e),ue=Ge(e);return{c(){l=_("p"),s=_("span"),o=_("label"),p=_("input"),a=O(),i=_("div"),P=b(k),V=b(" nm"),m=O(),h=_("input"),B=b(`
    mW
    `),Ne(I.$$.fragment),w=O(),f=_("label"),y=_("input"),F=b(`
    Channel `),S=b(H),M=O(),j=_("label"),Z=_("input"),D=b(`
    Channel `),pe=b(K),nl=O(),W=_("span"),ol=b(`Filter OD
    `),ce=_("select"),ue.c(),ke=O(),ae=_("p"),rl=b("Effective: "),ne=b(Ce),il=b(" mW"),this.h()},l(E){l=d(E,"P",{class:!0});var U=v(l);s=d(U,"SPAN",{class:!0});var fe=v(s);o=d(fe,"LABEL",{});var oe=v(o);p=d(oe,"INPUT",{type:!0,class:!0}),a=T(oe),i=d(oe,"DIV",{class:!0});var _e=v(i);P=g(_e,k),V=g(_e," nm"),_e.forEach(r),oe.forEach(r),m=T(fe),h=d(fe,"INPUT",{type:!0,class:!0,min:!0,max:!0}),B=g(fe,`
    mW
    `),Oe(I.$$.fragment,fe),fe.forEach(r),w=T(U),f=d(U,"LABEL",{class:!0});var Pe=v(f);y=d(Pe,"INPUT",{type:!0,class:!0}),F=g(Pe,`
    Channel `),S=g(Pe,H),Pe.forEach(r),M=T(U),j=d(U,"LABEL",{class:!0});var Ae=v(j);Z=d(Ae,"INPUT",{type:!0,class:!0}),D=g(Ae,`
    Channel `),pe=g(Ae,K),Ae.forEach(r),nl=T(U),W=d(U,"SPAN",{class:!0});var Ve=v(W);ol=g(Ve,`Filter OD
    `),ce=d(Ve,"SELECT",{class:!0});var Ye=v(ce);ue.l(Ye),Ye.forEach(r),ke=T(Ve),ae=d(Ve,"P",{class:!0});var Me=v(ae);rl=g(Me,"Effective: "),ne=g(Me,Ce),il=g(Me," mW"),Me.forEach(r),Ve.forEach(r),U.forEach(r),this.h()},h(){n(p,"type","checkbox"),n(p,"class",u=sl(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),n(i,"class","inline font-semibold"),A(i,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),A(i,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),n(h,"type","number"),n(h,"class","w-20 h-8 pretty"),n(h,"min","0"),n(h,"max","500"),h.disabled=z=!e[0].laser_onoff[e[1]],A(h,"pretty-disabled",!e[0].laser_onoff[0]),n(s,"class","flex items-center gap-x-2"),A(s,"text-gray-400",!e[0].laser_onoff[e[1]]),n(y,"type","checkbox"),n(y,"class",N=sl(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),n(f,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),A(f,"text-gray-400",!e[0].channels[2*e[1]]),n(Z,"type","checkbox"),n(Z,"class",X=sl(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),n(j,"class","channel svelte-6ipz4o"),A(j,"text-gray-400",!e[0].channels[2*e[1]+1]),n(ce,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300"),n(ae,"class","ml-3 text-sm font-medium"),n(W,"class","ml-8 font-normal opacity-85"),n(l,"class","flex flex-col")},m(E,U){L(E,l,U),t(l,s),t(s,o),t(o,p),p.checked=e[0].laser_onoff[e[1]],t(o,a),t(o,i),t(i,P),t(i,V),t(s,m),t(s,h),q(h,e[0].lasers[e[1]]),t(s,B),Te(I,s,null),t(l,w),t(l,f),t(f,y),y.checked=e[0].channels[2*e[1]],t(f,F),t(f,S),t(l,M),t(l,j),t(j,Z),Z.checked=e[0].channels[2*e[1]+1],t(j,D),t(j,pe),t(l,nl),t(l,W),t(W,ol),t(W,ce),ue.m(ce,null),t(W,ke),t(W,ae),t(ae,rl),t(ae,ne),t(ae,il),ee=!0,me||(Ee=[G(p,"change",e[5]),G(h,"input",e[6]),ye(Xe.call(null,h,[0,500])),G(y,"change",e[8]),G(Z,"change",e[9]),G(ce,"change",e[4])],me=!0)},p(E,[U]){(!ee||U&2&&u!==(u=sl(`rounded mr-1 ${E[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&n(p,"class",u),U&3&&(p.checked=E[0].laser_onoff[E[1]]),(!ee||U&2)&&k!==(k=(Boolean(E[1])?660:532)+"")&&de(P,k),U&3&&A(i,"text-green-800",E[0].laser_onoff[E[1]]&&!E[1]),U&3&&A(i,"text-red-800",E[0].laser_onoff[E[1]]&&E[1]),(!ee||U&3&&z!==(z=!E[0].laser_onoff[E[1]]))&&(h.disabled=z),U&3&&J(h.value)!==E[0].lasers[E[1]]&&q(h,E[0].lasers[E[1]]),U&1&&A(h,"pretty-disabled",!E[0].laser_onoff[0]);const fe={};U&1024&&(fe.$$scope={dirty:U,ctx:E}),I.$set(fe),U&3&&A(s,"text-gray-400",!E[0].laser_onoff[E[1]]),(!ee||U&2&&N!==(N=sl(`mr-1 rounded ${E[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&n(y,"class",N),U&3&&(y.checked=E[0].channels[2*E[1]]),(!ee||U&2)&&H!==(H=2*E[1]+"")&&de(S,H),U&3&&A(f,"text-gray-400",!E[0].channels[2*E[1]]),(!ee||U&2&&X!==(X=sl(`mr-1 rounded ${E[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&n(Z,"class",X),U&3&&(Z.checked=E[0].channels[2*E[1]+1]),(!ee||U&2)&&K!==(K=2*E[1]+1+"")&&de(pe,K),U&3&&A(j,"text-gray-400",!E[0].channels[2*E[1]+1]),Ge!==(Ge=De(E))&&(ue.d(1),ue=Ge(E),ue&&(ue.c(),ue.m(ce,null))),(!ee||U&3)&&Ce!==(Ce=(Number(E[0].od[E[1]]!=-1)*E[0].lasers[E[1]]*Math.pow(10,-E[0].od[E[1]])).toFixed(4)+"")&&de(ne,Ce)},i(E){ee||(se(I.$$.fragment,E),ee=!0)},o(E){ie(I.$$.fragment,E),ee=!1},d(E){E&&r(l),Se(I),ue.d(),me=!1,qt(Ee)}}}function qs(e,l,s){let o,p;cl(e,al,z=>s(2,o=z)),cl(e,We,z=>s(3,p=z));let{params:u}=l,{i:a}=l;function i(z){let B;switch(z.currentTarget.value){case"Open":B=0;break;case"Closed":B=-1;break;default:B=Number(z.currentTarget.value)}s(0,u.od[a]=B,u),Ie(We,p.image_params.od[a]=u.od[a],p),Ie(al,o={move:{od:a===0?[u.od[a],void 0]:[void 0,u.od[a]]}},o)}function k(){u.laser_onoff[a]=this.checked,s(0,u)}function P(){u.lasers[a]=J(this.value),s(0,u)}const V=()=>{Ie(We,p.image_params.laser_onoff[a]=u.laser_onoff[a],p),Ie(We,p.image_params.lasers[a]=u.lasers[a],p),Ie(al,o={move:{lasers:a===0?[u.lasers[a],void 0]:[void 0,u.lasers[a]],laser_onoff:a===0?[u.laser_onoff[a],void 0]:[void 0,u.laser_onoff[a]]}},o)};function m(){u.channels[2*a]=this.checked,s(0,u)}function h(){u.channels[2*a+1]=this.checked,s(0,u)}return e.$$set=z=>{"params"in z&&s(0,u=z.params),"i"in z&&s(1,a=z.i)},[u,a,o,p,i,k,P,V,m,h]}class us extends nt{constructor(l){super();ot(this,l,qs,Zs,rt,{params:0,i:1})}}function fs(e){let l,s;return l=new Cl({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[Hs]},$$scope:{ctx:e}}}),{c(){Ne(l.$$.fragment)},l(o){Oe(l.$$.fragment,o)},m(o,p){Te(l,o,p),s=!0},i(o){s||(se(l.$$.fragment,o),s=!0)},o(o){ie(l.$$.fragment,o),s=!1},d(o){Se(l,o)}}}function Hs(e){let l;return{c(){l=b("Preview")},l(s){l=g(s,"Preview")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function _s(e){let l,s,o,p,u,a;return{c(){l=_("p"),s=b("Image Path"),o=O(),p=_("input"),this.h()},l(i){l=d(i,"P",{class:!0});var k=v(l);s=g(k,"Image Path"),k.forEach(r),o=T(i),p=d(i,"INPUT",{type:!0,class:!0}),this.h()},h(){n(l,"class","text-lg svelte-1m4l8fo"),n(p,"type","text"),n(p,"class","max-w-md mb-4 pretty"),A(p,"invalid",!e[0].path)},m(i,k){L(i,l,k),t(l,s),L(i,o,k),L(i,p,k),q(p,e[0].path),u||(a=G(p,"input",e[10]),u=!0)},p(i,k){k&1&&p.value!==i[0].path&&q(p,i[0].path),k&1&&A(p,"invalid",!i[0].path)},d(i){i&&r(l),i&&r(o),i&&r(p),u=!1,a()}}}function ds(e){let l;return{c(){l=b("per z-stack.")},l(s){l=g(s,"per z-stack.")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function ps(e){let l,s=e[1].n_z+"",o,p,u,a=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",i,k,P=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",V,m,h,z,B=(e[1].n_z?El(e[1].n_z*e[1].time):El(e[1].time))+"",I,w,f=e[1].n_z>1&&cs();return{c(){l=_("div"),o=b(s),p=b(" Z step"),f&&f.c(),u=b(" from "),i=b(a),k=b(" to "),V=b(P),m=O(),h=_("div"),z=b("Total time: "),I=b(B),w=b("."),this.h()},l(y){l=d(y,"DIV",{class:!0});var N=v(l);o=g(N,s),p=g(N," Z step"),f&&f.l(N),u=g(N," from "),i=g(N,a),k=g(N," to "),V=g(N,P),N.forEach(r),m=T(y),h=d(y,"DIV",{class:!0});var F=v(h);z=g(F,"Total time: "),I=g(F,B),w=g(F,"."),F.forEach(r),this.h()},h(){n(l,"class","px-2 font-base"),n(h,"class","px-2 font-semibold")},m(y,N){L(y,l,N),t(l,o),t(l,p),f&&f.m(l,null),t(l,u),t(l,i),t(l,k),t(l,V),L(y,m,N),L(y,h,N),t(h,z),t(h,I),t(h,w)},p(y,N){N&2&&s!==(s=y[1].n_z+"")&&de(o,s),y[1].n_z>1?f||(f=cs(),f.c(),f.m(l,u)):f&&(f.d(1),f=null),N&1&&a!==(a=y[0].z_obj+y[0].z_from*y[0].z_spacing+"")&&de(i,a),N&1&&P!==(P=y[0].z_obj+y[0].z_to*y[0].z_spacing+"")&&de(V,P),N&2&&B!==(B=(y[1].n_z?El(y[1].n_z*y[1].time):El(y[1].time))+"")&&de(I,B)},d(y){y&&r(l),f&&f.d(),y&&r(m),y&&r(h)}}}function cs(e){let l;return{c(){l=b("s")},l(s){l=g(s,"s")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Xs(e){let l,s,o,p,u,a,i,k,P,V,m,h,z,B,I,w,f,y,N,F,H,S,M,j,Z,X,D,K,pe,nl,W,ol,ce,ke,ae,rl,Ce,ne,il,ee,me,Ee,De,Ge,ue,E,U,fe,oe,_e,Pe=e[1].width.toFixed(2)+"",Ae,Ve,Ye=e[1].height.toFixed(2)+"",Me,it,ut,Ue,zl=e[1].n_cols+"",Dl,ft,Il=e[1].n_bundles+"",Al,_t,dt,ze,Pl=El(e[1].time)+"",Vl,pt,ct,Je,ml,mt,vt,Ke,Qe,ul,vl,ht,bt,Re,ve,gt,$e,yt,fl,hl,kt,Et,we,he,zt,xe,It,Be,je,_l,Pt,wl,wt,Nt,el,ll,tl,Ot,Le,bl,Tt,St,Ct,Q,Fe,Dt,At,R,Ml,Vt,Ze,Mt,Ut,$,Ul,Bt,qe,jt,Lt,x,Bl,be,Ft,Ht,Y=e[3]&&fs(e),le=!e[3]&&_s(e);function bs(c){e[11](c)}let Xt={i:0};e[0]!==void 0&&(Xt.params=e[0]),w=new us({props:Xt}),et.push(()=>lt(w,"params",bs));function gs(c){e[12](c)}let Wt={i:1};e[0]!==void 0&&(Wt.params=e[0]),N=new us({props:Wt}),et.push(()=>lt(N,"params",gs));function ys(c){e[13](c)}let Gt={i:0};e[0].xy0!==void 0&&(Gt.xy=e[0].xy0),W=new is({props:Gt}),et.push(()=>lt(W,"xy",ys)),W.$on("change",e[6]);function ks(c){e[14](c)}let Yt={i:1};e[0].xy1!==void 0&&(Yt.xy=e[0].xy1),ne=new is({props:Yt}),et.push(()=>lt(ne,"xy",ks)),ne.$on("change",e[6]);let re=e[2]&&ds();$e=new Cl({}),$e.$on("click",e[17]),xe=new Cl({}),xe.$on("click",e[19]);let te=e[2]&&ps(e);return{c(){l=_("div"),s=_("section"),o=_("p"),p=b("Name"),u=O(),a=_("div"),i=_("input"),k=O(),Y&&Y.c(),P=O(),le&&le.c(),V=O(),m=_("section"),h=_("h2"),z=b("Laser and Channels"),B=O(),I=_("div"),Ne(w.$$.fragment),y=O(),Ne(N.$$.fragment),H=O(),S=_("section"),M=_("h2"),j=b("Positions"),Z=O(),X=_("div"),D=_("div"),K=_("p"),pe=b("\u{1F4CC} Corner 1"),nl=O(),Ne(W.$$.fragment),ce=O(),ke=_("div"),ae=_("p"),rl=b("\u{1F4CD} Corner 2"),Ce=O(),Ne(ne.$$.fragment),ee=O(),me=_("div"),Ee=_("div"),De=_("p"),Ge=b("X-Overlap"),ue=O(),E=_("input"),U=b(`
          (0-1)`),fe=O(),oe=_("div"),_e=_("span"),Ae=b(Pe),Ve=b(" \xD7 "),Me=b(Ye),it=b(" mm."),ut=O(),Ue=_("span"),Dl=b(zl),ft=b(" columns of "),Al=b(Il),_t=b(" bundles."),dt=O(),ze=_("span"),Vl=b(Pl),pt=O(),re&&re.c(),ct=O(),Je=_("section"),ml=_("h2"),mt=b("Focus"),vt=O(),Ke=_("div"),Qe=_("div"),ul=_("div"),vl=_("p"),ht=b("Z Tilt"),bt=O(),Re=_("div"),ve=_("input"),gt=O(),Ne($e.$$.fragment),yt=O(),fl=_("div"),hl=_("p"),kt=b("Z Objective"),Et=O(),we=_("span"),he=_("input"),zt=O(),Ne(xe.$$.fragment),It=O(),Be=_("button"),je=st("svg"),_l=st("path"),Pt=O(),wl=_("span"),wt=b("Autofocus"),Nt=O(),el=_("div"),ll=_("label"),tl=_("input"),Ot=O(),Le=_("div"),bl=_("div"),Tt=b("Z-Stack"),St=O(),te&&te.c(),Ct=O(),Q=_("div"),Fe=_("span"),Dt=b("Spacing"),At=O(),R=_("input"),Vt=O(),Ze=_("span"),Mt=b("From"),Ut=O(),$=_("input"),Bt=O(),qe=_("span"),jt=b("To"),Lt=O(),x=_("input"),this.h()},l(c){l=d(c,"DIV",{id:!0,class:!0});var C=v(l);s=d(C,"SECTION",{class:!0});var He=v(s);o=d(He,"P",{class:!0});var Nl=v(o);p=g(Nl,"Name"),Nl.forEach(r),u=T(He),a=d(He,"DIV",{class:!0});var dl=v(a);i=d(dl,"INPUT",{type:!0,class:!0}),k=T(dl),Y&&Y.l(dl),dl.forEach(r),P=T(He),le&&le.l(He),He.forEach(r),V=T(C),m=d(C,"SECTION",{class:!0});var pl=v(m);h=d(pl,"H2",{class:!0});var Jt=v(h);z=g(Jt,"Laser and Channels"),Jt.forEach(r),B=T(pl),I=d(pl,"DIV",{class:!0});var jl=v(I);Oe(w.$$.fragment,jl),y=T(jl),Oe(N.$$.fragment,jl),jl.forEach(r),pl.forEach(r),H=T(C),S=d(C,"SECTION",{class:!0});var Ll=v(S);M=d(Ll,"H2",{class:!0});var Kt=v(M);j=g(Kt,"Positions"),Kt.forEach(r),Z=T(Ll),X=d(Ll,"DIV",{class:!0});var gl=v(X);D=d(gl,"DIV",{});var Fl=v(D);K=d(Fl,"P",{class:!0});var Qt=v(K);pe=g(Qt,"\u{1F4CC} Corner 1"),Qt.forEach(r),nl=T(Fl),Oe(W.$$.fragment,Fl),Fl.forEach(r),ce=T(gl),ke=d(gl,"DIV",{});var Zl=v(ke);ae=d(Zl,"P",{class:!0});var Rt=v(ae);rl=g(Rt,"\u{1F4CD} Corner 2"),Rt.forEach(r),Ce=T(Zl),Oe(ne.$$.fragment,Zl),Zl.forEach(r),ee=T(gl),me=d(gl,"DIV",{class:!0});var ql=v(me);Ee=d(ql,"DIV",{});var Ol=v(Ee);De=d(Ol,"P",{class:!0});var $t=v(De);Ge=g($t,"X-Overlap"),$t.forEach(r),ue=T(Ol),E=d(Ol,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),U=g(Ol,`
          (0-1)`),Ol.forEach(r),fe=T(ql),oe=d(ql,"DIV",{class:!0});var yl=v(oe);_e=d(yl,"SPAN",{class:!0});var Tl=v(_e);Ae=g(Tl,Pe),Ve=g(Tl," \xD7 "),Me=g(Tl,Ye),it=g(Tl," mm."),Tl.forEach(r),ut=T(yl),Ue=d(yl,"SPAN",{class:!0});var Sl=v(Ue);Dl=g(Sl,zl),ft=g(Sl," columns of "),Al=g(Sl,Il),_t=g(Sl," bundles."),Sl.forEach(r),dt=T(yl),ze=d(yl,"SPAN",{class:!0});var Hl=v(ze);Vl=g(Hl,Pl),pt=T(Hl),re&&re.l(Hl),Hl.forEach(r),yl.forEach(r),ql.forEach(r),gl.forEach(r),Ll.forEach(r),ct=T(C),Je=d(C,"SECTION",{class:!0});var Xl=v(Je);ml=d(Xl,"H2",{class:!0});var xt=v(ml);mt=g(xt,"Focus"),xt.forEach(r),vt=T(Xl),Ke=d(Xl,"DIV",{class:!0});var Wl=v(Ke);Qe=d(Wl,"DIV",{class:!0});var Gl=v(Qe);ul=d(Gl,"DIV",{});var Yl=v(ul);vl=d(Yl,"P",{class:!0});var es=v(vl);ht=g(es,"Z Tilt"),es.forEach(r),bt=T(Yl),Re=d(Yl,"DIV",{class:!0});var Jl=v(Re);ve=d(Jl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),gt=T(Jl),Oe($e.$$.fragment,Jl),Jl.forEach(r),Yl.forEach(r),yt=T(Gl),fl=d(Gl,"DIV",{});var Kl=v(fl);hl=d(Kl,"P",{class:!0});var ls=v(hl);kt=g(ls,"Z Objective"),ls.forEach(r),Et=T(Kl),we=d(Kl,"SPAN",{class:!0});var kl=v(we);he=d(kl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),zt=T(kl),Oe(xe.$$.fragment,kl),It=T(kl),Be=d(kl,"BUTTON",{type:!0,class:!0});var Ql=v(Be);je=at(Ql,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var ts=v(je);_l=at(ts,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(_l).forEach(r),ts.forEach(r),Pt=T(Ql),wl=d(Ql,"SPAN",{});var ss=v(wl);wt=g(ss,"Autofocus"),ss.forEach(r),Ql.forEach(r),kl.forEach(r),Kl.forEach(r),Gl.forEach(r),Nt=T(Wl),el=d(Wl,"DIV",{class:!0});var Rl=v(el);ll=d(Rl,"LABEL",{class:!0});var $l=v(ll);tl=d($l,"INPUT",{type:!0,class:!0}),Ot=T($l),Le=d($l,"DIV",{class:!0});var xl=v(Le);bl=d(xl,"DIV",{class:!0});var as=v(bl);Tt=g(as,"Z-Stack"),as.forEach(r),St=T(xl),te&&te.l(xl),xl.forEach(r),$l.forEach(r),Ct=T(Rl),Q=d(Rl,"DIV",{class:!0,id:!0});var ge=v(Q);Fe=d(ge,"SPAN",{class:!0});var ns=v(Fe);Dt=g(ns,"Spacing"),ns.forEach(r),At=T(ge),R=d(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Vt=T(ge),Ze=d(ge,"SPAN",{class:!0});var os=v(Ze);Mt=g(os,"From"),os.forEach(r),Ut=T(ge),$=d(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Bt=T(ge),qe=d(ge,"SPAN",{class:!0});var rs=v(qe);jt=g(rs,"To"),rs.forEach(r),Lt=T(ge),x=d(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ge.forEach(r),Rl.forEach(r),Wl.forEach(r),Xl.forEach(r),C.forEach(r),this.h()},h(){n(o,"class","mt-1 text-lg svelte-1m4l8fo"),n(i,"type","text"),n(i,"class","flex-grow mb-4 pretty text-lg h-12"),A(i,"invalid",e[7](e[0].name)),n(a,"class","flex w-full max-w-md gap-x-2"),n(s,"class","flex flex-col text-lg font-medium"),n(h,"class","svelte-1m4l8fo"),n(I,"class","grid grid-cols-2"),A(I,"opacity-70",e[4].block),n(m,"class","font-medium leading-10 "),n(M,"class","svelte-1m4l8fo"),n(K,"class","svelte-1m4l8fo"),n(ae,"class","svelte-1m4l8fo"),n(De,"class","svelte-1m4l8fo"),n(E,"type","number"),n(E,"class","w-20 pr-2 pretty"),n(E,"step","0.01"),n(E,"min","0"),n(E,"max","0.99"),n(_e,"class","tabular-nums"),n(Ue,"class","tabular-nums"),n(ze,"class","tabular-nums"),A(ze,"font-semibold",!e[2]),n(oe,"class","flex flex-col justify-center font-normal"),n(me,"class","flex gap-8"),n(X,"class","-mt-1 space-y-4"),n(S,"class","flex flex-col gap-2"),A(S,"-mt-20",e[3]),n(ml,"class","svelte-1m4l8fo"),n(vl,"class","svelte-1m4l8fo"),n(ve,"type","number"),n(ve,"class","w-28 pretty"),n(ve,"min","0"),n(ve,"max","25000"),n(Re,"class","flex gap-2"),n(hl,"class","svelte-1m4l8fo"),n(he,"type","number"),n(he,"class","w-28 pretty"),n(he,"min","0"),n(he,"max","60000"),n(_l,"fill-rule","evenodd"),n(_l,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),n(_l,"clip-rule","evenodd"),n(je,"xmlns","http://www.w3.org/2000/svg"),n(je,"class","w-5 h-5 mr-1"),n(je,"viewBox","0 0 20 20"),n(je,"fill","currentColor"),n(Be,"type","button"),n(Be,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),n(we,"class","flex gap-2"),n(Qe,"class","flex space-x-8"),n(tl,"type","checkbox"),n(tl,"class","mr-1 rounded"),n(bl,"class","pr-2"),n(Le,"class","flex divide-x-2"),n(ll,"class","flex items-center gap-x-1"),n(Fe,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),A(Fe,"span-disabled",e[4].block||!e[2]),n(R,"type","number"),n(R,"min","1"),n(R,"max","60000"),n(R,"step","1"),n(R,"class","z-10 h-10 text-center rounded-none pretty w-28"),R.disabled=Ml=e[4].block||!e[2],A(R,"disabled",e[4].block||!e[2]),n(Ze,"class","flex items-center color-group svelte-1m4l8fo"),A(Ze,"span-disabled",e[4].block||!e[2]),n($,"type","number"),n($,"min","-100"),n($,"max","100"),n($,"step","1"),n($,"class","z-10 w-16 h-10 text-center rounded-none pretty"),$.disabled=Ul=e[4].block||!e[2],A($,"disabled",e[4].block||!e[2]),n(qe,"class","flex items-center color-group svelte-1m4l8fo"),A(qe,"span-disabled",e[4].block||!e[2]),n(x,"type","number"),n(x,"min","-100"),n(x,"max","100"),n(x,"step","1"),n(x,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),x.disabled=Bl=e[4].block||!e[2],A(x,"disabled",e[4].block||!e[2]),n(Q,"class","flex font-medium"),n(Q,"id","zBox"),n(el,"class","space-y-2"),n(Ke,"class","-mt-1 space-y-4"),n(Je,"class","flex flex-col gap-2"),n(l,"id","control"),n(l,"class","grid grid-cols-2 gap-y-6 gap-x-4")},m(c,C){L(c,l,C),t(l,s),t(s,o),t(o,p),t(s,u),t(s,a),t(a,i),q(i,e[0].name),t(a,k),Y&&Y.m(a,null),t(s,P),le&&le.m(s,null),t(l,V),t(l,m),t(m,h),t(h,z),t(m,B),t(m,I),Te(w,I,null),t(I,y),Te(N,I,null),t(l,H),t(l,S),t(S,M),t(M,j),t(S,Z),t(S,X),t(X,D),t(D,K),t(K,pe),t(D,nl),Te(W,D,null),t(X,ce),t(X,ke),t(ke,ae),t(ae,rl),t(ke,Ce),Te(ne,ke,null),t(X,ee),t(X,me),t(me,Ee),t(Ee,De),t(De,Ge),t(Ee,ue),t(Ee,E),q(E,e[0].overlap),t(Ee,U),t(me,fe),t(me,oe),t(oe,_e),t(_e,Ae),t(_e,Ve),t(_e,Me),t(_e,it),t(oe,ut),t(oe,Ue),t(Ue,Dl),t(Ue,ft),t(Ue,Al),t(Ue,_t),t(oe,dt),t(oe,ze),t(ze,Vl),t(ze,pt),re&&re.m(ze,null),t(l,ct),t(l,Je),t(Je,ml),t(ml,mt),t(Je,vt),t(Je,Ke),t(Ke,Qe),t(Qe,ul),t(ul,vl),t(vl,ht),t(ul,bt),t(ul,Re),t(Re,ve),q(ve,e[0].z_tilt),t(Re,gt),Te($e,Re,null),t(Qe,yt),t(Qe,fl),t(fl,hl),t(hl,kt),t(fl,Et),t(fl,we),t(we,he),q(he,e[0].z_obj),t(we,zt),Te(xe,we,null),t(we,It),t(we,Be),t(Be,je),t(je,_l),t(Be,Pt),t(Be,wl),t(wl,wt),t(Ke,Nt),t(Ke,el),t(el,ll),t(ll,tl),tl.checked=e[2],t(ll,Ot),t(ll,Le),t(Le,bl),t(bl,Tt),t(Le,St),te&&te.m(Le,null),t(el,Ct),t(el,Q),t(Q,Fe),t(Fe,Dt),t(Q,At),t(Q,R),q(R,e[0].z_spacing),t(Q,Vt),t(Q,Ze),t(Ze,Mt),t(Q,Ut),t(Q,$),q($,e[0].z_from),t(Q,Bt),t(Q,qe),t(qe,jt),t(Q,Lt),t(Q,x),q(x,e[0].z_to),be=!0,Ft||(Ht=[G(i,"input",e[9]),G(E,"input",e[15]),ye(Xe.call(null,E,[.01,.99])),G(ve,"input",e[16]),ye(Xe.call(null,ve,[0,25e3])),G(he,"input",e[18]),ye(Xe.call(null,he,[0,6e4])),G(tl,"change",e[20]),ye(Zt.call(null,Fe,"Nyquist is 232.")),G(R,"input",e[21]),ye(Xe.call(null,R,[1,6e4])),ye(Zt.call(null,Ze,"Multiple of Spacing")),G($,"input",e[22]),ye(Xe.call(null,$,[-100,100])),ye(Zt.call(null,qe,"Multiple of Spacing")),G(x,"input",e[23]),ye(Xe.call(null,x,[-100,100]))],Ft=!0)},p(c,[C]){C&1&&i.value!==c[0].name&&q(i,c[0].name),C&129&&A(i,"invalid",c[7](c[0].name)),c[3]?Y?C&8&&se(Y,1):(Y=fs(c),Y.c(),se(Y,1),Y.m(a,null)):Y&&(ms(),ie(Y,1,1,()=>{Y=null}),vs()),c[3]?le&&(le.d(1),le=null):le?le.p(c,C):(le=_s(c),le.c(),le.m(s,null));const He={};!f&&C&1&&(f=!0,He.params=c[0],tt(()=>f=!1)),w.$set(He);const Nl={};!F&&C&1&&(F=!0,Nl.params=c[0],tt(()=>F=!1)),N.$set(Nl),C&16&&A(I,"opacity-70",c[4].block);const dl={};!ol&&C&1&&(ol=!0,dl.xy=c[0].xy0,tt(()=>ol=!1)),W.$set(dl);const pl={};!il&&C&1&&(il=!0,pl.xy=c[0].xy1,tt(()=>il=!1)),ne.$set(pl),C&1&&J(E.value)!==c[0].overlap&&q(E,c[0].overlap),(!be||C&2)&&Pe!==(Pe=c[1].width.toFixed(2)+"")&&de(Ae,Pe),(!be||C&2)&&Ye!==(Ye=c[1].height.toFixed(2)+"")&&de(Me,Ye),(!be||C&2)&&zl!==(zl=c[1].n_cols+"")&&de(Dl,zl),(!be||C&2)&&Il!==(Il=c[1].n_bundles+"")&&de(Al,Il),(!be||C&2)&&Pl!==(Pl=El(c[1].time)+"")&&de(Vl,Pl),c[2]?re||(re=ds(),re.c(),re.m(ze,null)):re&&(re.d(1),re=null),C&4&&A(ze,"font-semibold",!c[2]),C&8&&A(S,"-mt-20",c[3]),C&1&&J(ve.value)!==c[0].z_tilt&&q(ve,c[0].z_tilt),C&1&&J(he.value)!==c[0].z_obj&&q(he,c[0].z_obj),C&4&&(tl.checked=c[2]),c[2]?te?te.p(c,C):(te=ps(c),te.c(),te.m(Le,null)):te&&(te.d(1),te=null),C&20&&A(Fe,"span-disabled",c[4].block||!c[2]),(!be||C&20&&Ml!==(Ml=c[4].block||!c[2]))&&(R.disabled=Ml),C&1&&J(R.value)!==c[0].z_spacing&&q(R,c[0].z_spacing),C&20&&A(R,"disabled",c[4].block||!c[2]),C&20&&A(Ze,"span-disabled",c[4].block||!c[2]),(!be||C&20&&Ul!==(Ul=c[4].block||!c[2]))&&($.disabled=Ul),C&1&&J($.value)!==c[0].z_from&&q($,c[0].z_from),C&20&&A($,"disabled",c[4].block||!c[2]),C&20&&A(qe,"span-disabled",c[4].block||!c[2]),(!be||C&20&&Bl!==(Bl=c[4].block||!c[2]))&&(x.disabled=Bl),C&1&&J(x.value)!==c[0].z_to&&q(x,c[0].z_to),C&20&&A(x,"disabled",c[4].block||!c[2])},i(c){be||(se(Y),se(w.$$.fragment,c),se(N.$$.fragment,c),se(W.$$.fragment,c),se(ne.$$.fragment,c),se($e.$$.fragment,c),se(xe.$$.fragment,c),be=!0)},o(c){ie(Y),ie(w.$$.fragment,c),ie(N.$$.fragment,c),ie(W.$$.fragment,c),ie(ne.$$.fragment,c),ie($e.$$.fragment,c),ie(xe.$$.fragment,c),be=!1},d(c){c&&r(l),Y&&Y.d(),le&&le.d(),Se(w),Se(N),Se(W),Se(ne),re&&re.d(),Se($e),Se(xe),te&&te.d(),Ft=!1,qt(Ht)}}}function Ws(e,l){e&&(e.querySelectorAll("input").forEach(s=>s.disabled=l),e.querySelectorAll("select").forEach(s=>s.disabled=l),e.querySelectorAll("button").forEach(s=>s.disabled=l))}function El(e){const l=new Date(e*1e3).toISOString();return e>3600?`${l.substring(11,19)} hrs`:`${l.substring(14,19)} mins`}function Gs(e,l,s){let o,p;cl(e,We,D=>s(4,o=D)),cl(e,al,D=>s(5,p=D));let{inAuto:u=!0}=l,{params:a}=l,{stats:i={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=l,{z_stack:k=!1}=l,{fc_:P=0}=l;function V(){Ie(We,o.image_params.xy0=a.xy0,o),Ie(We,o.image_params.xy1=a.xy1,o)}function m(D){if(!D)return!0;if(!u)return!1;const K=o.exps[P].cmds.filter(pe=>pe.cmd.op==="takeimage").map(pe=>pe.cmd.name);return Ss(K)[D]>1}function h(){a.name=this.value,s(0,a)}function z(){a.path=this.value,s(0,a)}function B(D){a=D,s(0,a)}function I(D){a=D,s(0,a)}function w(D){e.$$.not_equal(a.xy0,D)&&(a.xy0=D,s(0,a))}function f(D){e.$$.not_equal(a.xy1,D)&&(a.xy1=D,s(0,a))}function y(){a.overlap=J(this.value),s(0,a)}function N(){a.z_tilt=J(this.value),s(0,a)}const F=()=>Ie(al,p={move:{z_tilt:a.z_tilt}},p);function H(){a.z_obj=J(this.value),s(0,a)}const S=()=>Ie(al,p={move:{z_obj:a.z_obj}},p);function M(){k=this.checked,s(2,k)}function j(){a.z_spacing=J(this.value),s(0,a)}function Z(){a.z_from=J(this.value),s(0,a)}function X(){a.z_to=J(this.value),s(0,a)}return e.$$set=D=>{"inAuto"in D&&s(3,u=D.inAuto),"params"in D&&s(0,a=D.params),"stats"in D&&s(1,i=D.stats),"z_stack"in D&&s(2,k=D.z_stack),"fc_"in D&&s(8,P=D.fc_)},e.$$.update=()=>{e.$$.dirty&16&&Ws(document.getElementById("control"),o.block),e.$$.dirty&1&&s(1,i.height=Math.max(a.xy1[1],a.xy0[1])-Math.min(a.xy1[1],a.xy0[1]),i),e.$$.dirty&1&&s(1,i.width=Math.max(a.xy1[0],a.xy0[0])-Math.min(a.xy1[0],a.xy0[0]),i),e.$$.dirty&3&&s(1,i.n_cols=Math.ceil(i.width/(.768*(1-a.overlap))),i),e.$$.dirty&2&&s(1,i.n_bundles=Math.ceil(i.height/.048),i),e.$$.dirty&2&&s(1,i.time=i.n_bundles*i.n_cols/20,i),e.$$.dirty&1&&s(1,i.n_z=Math.abs(a.z_to-a.z_from)+1,i)},[a,i,k,u,o,p,V,m,P,h,z,B,I,w,f,y,N,F,H,S,M,j,Z,X]}class Rs extends nt{constructor(l){super();ot(this,l,Gs,Xs,rt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{Rs as T};
