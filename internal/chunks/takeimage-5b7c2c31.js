import{S as _t,i as pt,s as dt,aa as bs,e as m,w as K,c as h,a as v,x as Q,d as f,b as u,g as V,y as x,q as Z,o as W,B as ee,ab as gs,ac as vs,k as P,m as T,t as $,h as z,H as a,j as me,ad as ks,W as O,X as H,U as Es,Y as nl,N as $e,v as ys,ae as ws,af as $s,V as Et,ag as tl,ah as _e,F as Ul,I as Ml,J as Bl,K as ql,ai as zs,aj as Is,M as cs,ak as Ns,n as Ps,p as Ts,al as _s,P as ls,Q as ss,a3 as X,T as we,a4 as le,O as Ne,Z as ll,f as Os,_ as sl}from"./vendor-09fd25a6.js";import{l as Ss,u as He,a as Fe,s as Ct,c as lt,b as Cs}from"./utils-c8f8532a.js";import{r as Ds}from"./coords-813c65ab.js";import{S as Vs,t as Al}from"./tooltip-64b2f3e8.js";function As(t){let e;return{c(){e=m("div"),this.h()},l(l){e=h(l,"DIV",{class:!0}),v(e).forEach(f),this.h()},h(){u(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function Us(t){let e,l=t[3]+"",s;return{c(){e=m("span"),s=$(l),this.h()},l(r){e=h(r,"SPAN",{class:!0});var n=v(e);s=z(n,l),n.forEach(f),this.h()},h(){u(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(r,n){V(r,e,n),a(e,s)},p(r,n){n&8&&l!==(l=r[3]+"")&&me(s,l)},d(r){r&&f(e)}}}function Ms(t){let e,l,s,r;return e=new gs({props:{data:t[1],width:80,$$slots:{default:[As]},$$scope:{ctx:t}}}),s=new vs({props:{vertical:!0,count:5,$$slots:{default:[Us,({value:n})=>({3:n}),({value:n})=>n?8:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment)},l(n){Q(e.$$.fragment,n),l=T(n),Q(s.$$.fragment,n)},m(n,c){x(e,n,c),V(n,l,c),x(s,n,c),r=!0},p(n,c){const o={};c&2&&(o.data=n[1]),c&16&&(o.$$scope={dirty:c,ctx:n}),e.$set(o);const g={};c&24&&(g.$$scope={dirty:c,ctx:n}),s.$set(g)},i(n){r||(Z(e.$$.fragment,n),Z(s.$$.fragment,n),r=!0)},o(n){W(e.$$.fragment,n),W(s.$$.fragment,n),r=!1},d(n){ee(e,n),n&&f(l),ee(s,n)}}}function Bs(t){let e,l,s;return l=new bs({props:{x1:-10,x2:4096+10,y1:0,y2:t[0],$$slots:{default:[Ms]},$$scope:{ctx:t}}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=v(e);Q(l.$$.fragment,n),n.forEach(f),this.h()},h(){u(e,"class","w-full h-full box-border")},m(r,n){V(r,e,n),x(l,e,null),s=!0},p(r,[n]){const c={};n&1&&(c.y2=r[0]),n&18&&(c.$$scope={dirty:n,ctx:r}),l.$set(c)},i(r){s||(Z(l.$$.fragment,r),s=!0)},o(r){W(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function qs(t,e){return t.map((l,s)=>({x:l,y:e[s]}))}function js(t,e,l){let{hist:s}=e,r,n=[{x:0,y:0},{x:2e3,y:10}];return t.$$set=c=>{"hist"in c&&l(2,s=c.hist)},t.$$.update=()=>{t.$$.dirty&4&&s&&(l(1,n=qs(s.bin_edges,s.counts)),l(0,r=Math.max(...s.counts)))},[r,n,s]}class Ls extends _t{constructor(e){super();pt(this,e,js,Bs,dt,{hist:2})}}function Fs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 0"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=v(e);l=z(n,"Channel 0"),n.forEach(f),this.h()},h(){u(e,"class",s=_e(st("green",t[15],t[6].image_params.channels[0]))+" svelte-132l8kq"),O(e,"bg-green-600",t[15])},m(r,n){V(r,e,n),a(e,l)},p(r,n){n&32832&&s!==(s=_e(st("green",r[15],r[6].image_params.channels[0]))+" svelte-132l8kq")&&u(e,"class",s),n&32832&&O(e,"bg-green-600",r[15])},d(r){r&&f(e)}}}function Hs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 1"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=v(e);l=z(n,"Channel 1"),n.forEach(f),this.h()},h(){u(e,"class",s=_e(st("orange",t[15],t[6].image_params.channels[1]))+" svelte-132l8kq"),O(e,"bg-orange-500",t[15])},m(r,n){V(r,e,n),a(e,l)},p(r,n){n&32832&&s!==(s=_e(st("orange",r[15],r[6].image_params.channels[1]))+" svelte-132l8kq")&&u(e,"class",s),n&32832&&O(e,"bg-orange-500",r[15])},d(r){r&&f(e)}}}function Zs(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 2"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=v(e);l=z(n,"Channel 2"),n.forEach(f),this.h()},h(){u(e,"class",s=_e(st("rose",t[15],t[6].image_params.channels[2]))+" svelte-132l8kq"),O(e,"bg-rose-600",t[15])},m(r,n){V(r,e,n),a(e,l)},p(r,n){n&32832&&s!==(s=_e(st("rose",r[15],r[6].image_params.channels[2]))+" svelte-132l8kq")&&u(e,"class",s),n&32832&&O(e,"bg-rose-600",r[15])},d(r){r&&f(e)}}}function Ws(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 3"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=v(e);l=z(n,"Channel 3"),n.forEach(f),this.h()},h(){u(e,"class",s=_e(st("amber",t[15],t[6].image_params.channels[3]))+" svelte-132l8kq"),O(e,"bg-amber-800",t[15])},m(r,n){V(r,e,n),a(e,l)},p(r,n){n&32832&&s!==(s=_e(st("amber",r[15],r[6].image_params.channels[3]))+" svelte-132l8kq")&&u(e,"class",s),n&32832&&O(e,"bg-amber-800",r[15])},d(r){r&&f(e)}}}function Gs(t){let e,l,s,r,n,c,o,g;return e=new tl({props:{disabled:!t[6].image_params.channels[0],$$slots:{default:[Fs,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:t}}}),s=new tl({props:{disabled:!t[6].image_params.channels[1],$$slots:{default:[Hs,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:t}}}),n=new tl({props:{disabled:!t[6].image_params.channels[2],$$slots:{default:[Zs,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:t}}}),o=new tl({props:{disabled:!t[6].image_params.channels[3],$$slots:{default:[Ws,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment),r=P(),K(n.$$.fragment),c=P(),K(o.$$.fragment)},l(i){Q(e.$$.fragment,i),l=T(i),Q(s.$$.fragment,i),r=T(i),Q(n.$$.fragment,i),c=T(i),Q(o.$$.fragment,i)},m(i,E){x(e,i,E),V(i,l,E),x(s,i,E),V(i,r,E),x(n,i,E),V(i,c,E),x(o,i,E),g=!0},p(i,E){const p={};E&64&&(p.disabled=!i[6].image_params.channels[0]),E&98368&&(p.$$scope={dirty:E,ctx:i}),e.$set(p);const d={};E&64&&(d.disabled=!i[6].image_params.channels[1]),E&98368&&(d.$$scope={dirty:E,ctx:i}),s.$set(d);const y={};E&64&&(y.disabled=!i[6].image_params.channels[2]),E&98368&&(y.$$scope={dirty:E,ctx:i}),n.$set(y);const I={};E&64&&(I.disabled=!i[6].image_params.channels[3]),E&98368&&(I.$$scope={dirty:E,ctx:i}),o.$set(I)},i(i){g||(Z(e.$$.fragment,i),Z(s.$$.fragment,i),Z(n.$$.fragment,i),Z(o.$$.fragment,i),g=!0)},o(i){W(e.$$.fragment,i),W(s.$$.fragment,i),W(n.$$.fragment,i),W(o.$$.fragment,i),g=!1},d(i){ee(e,i),i&&f(l),ee(s,i),i&&f(r),ee(n,i),i&&f(c),ee(o,i)}}}function Xs(t){let e,l;return e=new $s({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[Gs]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,r){x(e,s,r),l=!0},p(s,r){const n={};r&65600&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){l||(Z(e.$$.fragment,s),l=!0)},o(s){W(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function Rs(t){let e,l,s,r,n,c,o,g,i,E,p,d,y,I,w,B,_,b,A;return n=new ks({props:{$$slots:{default:[Xs]},$$scope:{ctx:t}}}),n.$on("change",t[9]),B=new Ls({props:{hist:t[1].img.hist[t[0]]}}),{c(){e=m("div"),l=m("canvas"),s=P(),r=m("div"),K(n.$$.fragment),c=P(),o=m("button"),g=$("Center"),i=P(),E=m("div"),p=m("label"),d=m("input"),y=$(`
      Show Histogram`),I=P(),w=m("div"),K(B.$$.fragment),this.h()},l(q){e=h(q,"DIV",{id:!0,class:!0});var D=v(e);l=h(D,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),v(l).forEach(f),s=T(D),r=h(D,"DIV",{class:!0});var S=v(r);Q(n.$$.fragment,S),S.forEach(f),c=T(D),o=h(D,"BUTTON",{class:!0});var M=v(o);g=z(M,"Center"),M.forEach(f),i=T(D),E=h(D,"DIV",{class:!0});var j=v(E);p=h(j,"LABEL",{class:!0});var F=v(p);d=h(F,"INPUT",{type:!0,class:!0}),y=z(F,`
      Show Histogram`),F.forEach(f),j.forEach(f),I=T(D),w=h(D,"DIV",{id:!0,class:!0});var J=v(w);Q(B.$$.fragment,J),J.forEach(f),D.forEach(f),this.h()},h(){u(l,"id","canvas"),u(l,"width",2048),u(l,"height",128),u(l,"class","svelte-132l8kq"),u(r,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),u(o,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),u(d,"type","checkbox"),u(d,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),u(p,"class","mx-4 font-medium cursor-pointer"),u(E,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),u(w,"id","histogram"),u(w,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),O(w,"hidden",!t[5]),u(e,"id","frame"),u(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(q,D){V(q,e,D),a(e,l),t[8](l),a(e,s),a(e,r),x(n,r,null),a(e,c),a(e,o),a(o,g),a(e,i),a(e,E),a(E,p),a(p,d),d.checked=t[5],a(p,y),a(e,I),a(e,w),x(B,w,null),t[13](e),_=!0,b||(A=[H(l,"wheel",function(){Es(t[4].zoomWithWheel)&&t[4].zoomWithWheel.apply(this,arguments)}),H(o,"click",t[10]),H(d,"change",t[11]),H(d,"click",t[12])],b=!0)},p(q,[D]){t=q;const S={};D&65600&&(S.$$scope={dirty:D,ctx:t}),n.$set(S),D&32&&(d.checked=t[5]);const M={};D&3&&(M.hist=t[1].img.hist[t[0]]),B.$set(M),D&32&&O(w,"hidden",!t[5])},i(q){_||(Z(n.$$.fragment,q),Z(B.$$.fragment,q),_=!0)},o(q){W(n.$$.fragment,q),W(B.$$.fragment,q),_=!1},d(q){q&&f(e),t[8](null),ee(n),ee(B),t[13](null),b=!1,nl(A)}}}function st(t,e,l){return`tab-button ${e?"text-white":`${l?`text-gray-700 hover:text-black bg-white hover:bg-${t}-300`:"text-gray-400"}`}`}function Ys(t,e,l){let s,r;$e(t,Ss,b=>l(1,s=b)),$e(t,He,b=>l(6,r=b));let n,c,o,g,i,E=!0,p=0;ys(()=>{l(7,i=c.getContext("2d")),l(4,g=ws(c,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),o=new Image,o.onload=()=>i==null?void 0:i.drawImage(o,0,0);function d(b){Et[b?"unshift":"push"](()=>{c=b,l(3,c)})}const y=b=>l(0,p=b.detail),I=()=>{g.pan(0,0)};function w(){E=this.checked,l(5,E)}const B=()=>l(5,E=!E);function _(b){Et[b?"unshift":"push"](()=>{n=b,l(2,n),l(7,i),l(1,s)})}return t.$$.update=()=>{t.$$.dirty&3&&(o.src=s.img.img[p]),t.$$.dirty&130&&i&&s.img&&(l(7,i.canvas.height=s.img.dim[0],i),l(7,i.canvas.width=s.img.dim[1],i),l(2,n.style.height=`${Math.min(512,s.img.dim[0])}px`,n))},[p,s,n,c,g,E,r,i,d,y,I,w,B,_]}class va extends _t{constructor(e){super();pt(this,e,Ys,Rs,dt,{})}}const Js=t=>({}),as=t=>({});function Ks(t){let e,l,s,r,n,c,o;const g=t[3].buttons,i=Ul(g,t,t[2],as),E=t[3].default,p=Ul(E,t,t[2],null);return{c(){e=m("span"),i&&i.c(),l=P(),s=m("content"),p&&p.c(),r=P(),n=m("div"),c=m("progress"),this.h()},l(d){e=h(d,"SPAN",{class:!0});var y=v(e);i&&i.l(y),l=T(y),s=h(y,"CONTENT",{class:!0});var I=v(s);p&&p.l(I),r=T(I),n=h(I,"DIV",{class:!0});var w=v(n);c=h(w,"PROGRESS",{class:!0}),v(c).forEach(f),w.forEach(f),I.forEach(f),y.forEach(f),this.h()},h(){u(c,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),c.value=t[1],u(n,"class","mt-1"),u(s,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),u(e,"class","z-40 flex w-full space-x-2")},m(d,y){V(d,e,y),i&&i.m(e,null),a(e,l),a(e,s),p&&p.m(s,null),a(s,r),a(s,n),a(n,c),o=!0},p(d,[y]){i&&i.p&&(!o||y&4)&&Ml(i,g,d,d[2],o?ql(g,d[2],y,Js):Bl(d[2]),as),p&&p.p&&(!o||y&4)&&Ml(p,E,d,d[2],o?ql(E,d[2],y,null):Bl(d[2]),null),(!o||y&2)&&(c.value=d[1])},i(d){o||(Z(i,d),Z(p,d),o=!0)},o(d){W(i,d),W(p,d),o=!1},d(d){d&&f(e),i&&i.d(d),p&&p.d(d)}}}function Qs(t,e,l){let s,r=cs,n=()=>(r(),r=Is(g,i=>l(1,s=i)),g);t.$$.on_destroy.push(()=>r());let{$$slots:c={},$$scope:o}=e;const g=zs(0,{duration:400,easing:Ns});return n(),t.$$set=i=>{"$$scope"in i&&l(2,o=i.$$scope)},[g,s,o,c]}class ka extends _t{constructor(e){super();pt(this,e,Qs,Ks,dt,{progress:0})}get progress(){return this.$$.ctx[0]}}function xs(t){let e,l;const s=t[7].default,r=Ul(s,t,t[6],null),n=r||ta();return{c(){e=m("div"),n&&n.c(),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=v(e);n&&n.l(o),o.forEach(f),this.h()},h(){u(e,"class","mx-auto")},m(c,o){V(c,e,o),n&&n.m(e,null),l=!0},p(c,o){r&&r.p&&(!l||o&64)&&Ml(r,s,c,c[6],l?ql(s,c[6],o,null):Bl(c[6]),null)},i(c){l||(Z(n,c),l=!0)},o(c){W(n,c),l=!1},d(c){c&&f(e),n&&n.d(c)}}}function ea(t){let e,l,s;return l=new Vs({props:{color:"black"}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=v(e);Q(l.$$.fragment,n),n.forEach(f),this.h()},h(){u(e,"class","mx-auto opacity-40")},m(r,n){V(r,e,n),x(l,e,null),s=!0},p:cs,i(r){s||(Z(l.$$.fragment,r),s=!0)},o(r){W(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function ta(t){let e;return{c(){e=$("Go")},l(l){e=z(l,"Go")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function la(t){let e,l,s,r,n,c,o;const g=[ea,xs],i=[];function E(p,d){return p[1]?0:1}return l=E(t),s=i[l]=g[l](t),{c(){e=m("button"),s.c(),this.h()},l(p){e=h(p,"BUTTON",{type:!0,class:!0,tabindex:!0});var d=v(e);s.l(d),d.forEach(f),this.h()},h(){u(e,"type","button"),u(e,"class",r=_e(`px-4 py-1 text-sm font-semibold rounded-lg white-button transition-all duration-100 ${t[5][t[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${t[3]}`)+" svelte-1rnzpdo"),u(e,"tabindex","0"),e.disabled=t[0]},m(p,d){V(p,e,d),i[l].m(e,null),n=!0,c||(o=H(e,"click",t[8]),c=!0)},p(p,[d]){let y=l;l=E(p),l===y?i[l].p(p,d):(Ps(),W(i[y],1,1,()=>{i[y]=null}),Ts(),s=i[l],s?s.p(p,d):(s=i[l]=g[l](p),s.c()),Z(s,1),s.m(e,null)),(!n||d&12&&r!==(r=_e(`px-4 py-1 text-sm font-semibold rounded-lg white-button transition-all duration-100 ${p[5][p[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${p[3]}`)+" svelte-1rnzpdo"))&&u(e,"class",r),(!n||d&1)&&(e.disabled=p[0])},i(p){n||(Z(s),n=!0)},o(p){W(s),n=!1},d(p){p&&f(e),i[l].d(),c=!1,o()}}}function sa(t,e,l){let{$$slots:s={},$$scope:r}=e,{disabled:n=!1}=e,{spin:c=!1}=e,{color:o="indigo"}=e,{cl:g=""}=e;const i=_s(),E={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},p=()=>i("click");return t.$$set=d=>{"disabled"in d&&l(0,n=d.disabled),"spin"in d&&l(1,c=d.spin),"color"in d&&l(2,o=d.color),"cl"in d&&l(3,g=d.cl),"$$scope"in d&&l(6,r=d.$$scope)},[n,c,o,g,i,E,r,s,p]}class al extends _t{constructor(e){super();pt(this,e,sa,la,dt,{disabled:0,spin:1,color:2,cl:3})}}function aa(t){let e;return{c(){e=$("Preview")},l(l){e=z(l,"Preview")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function na(t){let e,l,s,r,n,c,o,g,i,E,p,d,y,I,w,B,_,b,A,q,D;return b=new al({props:{color:"sky",disabled:t[3],$$slots:{default:[aa]},$$scope:{ctx:t}}}),b.$on("click",t[11]),{c(){e=m("div"),l=m("div"),s=m("span"),r=$("X"),n=P(),c=m("input"),o=P(),g=m("span"),i=$("Y"),E=P(),p=m("input"),d=P(),y=m("button"),I=ls("svg"),w=ls("path"),B=$(`
    Current`),_=P(),K(b.$$.fragment),this.h()},l(S){e=h(S,"DIV",{class:!0});var M=v(e);l=h(M,"DIV",{class:!0});var j=v(l);s=h(j,"SPAN",{class:!0});var F=v(s);r=z(F,"X"),F.forEach(f),n=T(j),c=h(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),o=T(j),g=h(j,"SPAN",{class:!0});var J=v(g);i=z(J,"Y"),J.forEach(f),E=T(j),p=h(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(f),d=T(M),y=h(M,"BUTTON",{type:!0,class:!0});var re=v(y);I=ss(re,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var U=v(I);w=ss(U,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(w).forEach(f),U.forEach(f),B=z(re,`
    Current`),re.forEach(f),_=T(M),Q(b.$$.fragment,M),M.forEach(f),this.h()},h(){u(s,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),O(s,"span-disabled",t[2].block),u(c,"type","number"),u(c,"min","-5"),u(c,"max","30"),u(c,"step","0.01"),u(c,"class","z-10 w-24 h-10 text-center rounded-none pretty"),c.disabled=t[3],u(g,"class","flex items-center color-group svelte-awp8a4"),O(g,"span-disabled",t[2].block),u(p,"type","number"),u(p,"min","-5"),u(p,"max","80"),u(p,"step","0.01"),u(p,"class","z-10 w-24 h-10 text-center rounded-l-none rounded-r-lg pretty"),p.disabled=t[3],u(l,"class","flex font-medium"),u(w,"stroke-linecap","round"),u(w,"stroke-linejoin","round"),u(w,"stroke-width","2"),u(w,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),u(I,"xmlns","http://www.w3.org/2000/svg"),u(I,"class","w-5 h-5 mr-1"),u(I,"fill","none"),u(I,"viewBox","0 0 24 24"),u(I,"stroke","currentColor"),u(y,"type","button"),u(y,"class","px-3 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),y.disabled=t[3],u(e,"class","flex gap-x-2")},m(S,M){V(S,e,M),a(e,l),a(l,s),a(s,r),a(l,n),a(l,c),X(c,t[0][0]),a(l,o),a(l,g),a(g,i),a(l,E),a(l,p),X(p,t[0][1]),a(e,d),a(e,y),a(y,I),a(I,w),a(y,B),a(e,_),x(b,e,null),A=!0,q||(D=[H(c,"input",t[7]),H(c,"change",t[8]),we(Fe.call(null,c,[-5,30])),H(p,"input",t[9]),H(p,"change",t[10]),we(Fe.call(null,p,[-5,80])),H(y,"click",t[6])],q=!0)},p(S,[M]){M&4&&O(s,"span-disabled",S[2].block),(!A||M&8)&&(c.disabled=S[3]),M&1&&le(c.value)!==S[0][0]&&X(c,S[0][0]),M&4&&O(g,"span-disabled",S[2].block),(!A||M&8)&&(p.disabled=S[3]),M&1&&le(p.value)!==S[0][1]&&X(p,S[0][1]),(!A||M&8)&&(y.disabled=S[3]);const j={};M&8&&(j.disabled=S[3]),M&16384&&(j.$$scope={dirty:M,ctx:S}),b.$set(j)},i(S){A||(Z(b.$$.fragment,S),A=!0)},o(S){W(b.$$.fragment,S),A=!1},d(S){S&&f(e),ee(b),q=!1,nl(D)}}}function oa(t,e,l){let s,r,n,c;$e(t,Ct,_=>l(2,s=_)),$e(t,Ct,_=>l(12,r=_)),$e(t,He,_=>l(13,n=_)),$e(t,lt,_=>l(4,c=_));const o=_s();let{i:g}=e,{xy:i=[-1,-1]}=e;function E(){const{x:_,y:b}=Ds(n.image_params.fc,r.x,r.y);l(0,i[0]=Math.round((_+Number.EPSILON)*100)/100,i),l(0,i[1]=Math.round((b+Number.EPSILON)*100)/100,i)}let p=!1;function d(){i[0]=le(this.value),l(0,i)}const y=()=>o("change");function I(){i[1]=le(this.value),l(0,i)}const w=()=>o("change"),B=()=>{Ne(lt,c={cmd:`preview${g}`},c),Ne(Ct,s.block="previewing",s)};return t.$$set=_=>{"i"in _&&l(1,g=_.i),"xy"in _&&l(0,i=_.xy)},t.$$.update=()=>{t.$$.dirty&4&&l(3,p=Boolean(s.block))},[i,g,s,p,c,o,E,d,y,I,w,B]}class ns extends _t{constructor(e){super();pt(this,e,oa,na,dt,{i:1,xy:0})}}function ra(t){let e;return{c(){e=$("Set")},l(l){e=z(l,"Set")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function ia(t){let e,l,s,r,n,c,o,g,i,E,p,d,y,I,w,B;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("0.2"),n=m("option"),c=$("0.5"),o=m("option"),g=$("0.6"),i=m("option"),E=$("1.0"),p=m("option"),d=$("2.4"),y=m("option"),I=$("4.0"),w=m("option"),B=$("Closed"),this.h()},l(_){e=h(_,"OPTION",{});var b=v(e);l=z(b,"Open"),b.forEach(f),s=h(_,"OPTION",{});var A=v(s);r=z(A,"0.2"),A.forEach(f),n=h(_,"OPTION",{});var q=v(n);c=z(q,"0.5"),q.forEach(f),o=h(_,"OPTION",{});var D=v(o);g=z(D,"0.6"),D.forEach(f),i=h(_,"OPTION",{});var S=v(i);E=z(S,"1.0"),S.forEach(f),p=h(_,"OPTION",{});var M=v(p);d=z(M,"2.4"),M.forEach(f),y=h(_,"OPTION",{});var j=v(y);I=z(j,"4.0"),j.forEach(f),w=h(_,"OPTION",{});var F=v(w);B=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="0.2",s.value=s.__value,n.__value="0.5",n.value=n.__value,o.__value="0.6",o.value=o.__value,i.__value="1.0",i.value=i.__value,p.__value="2.4",p.value=p.__value,y.__value="4.0",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(_,b){V(_,e,b),a(e,l),V(_,s,b),a(s,r),V(_,n,b),a(n,c),V(_,o,b),a(o,g),V(_,i,b),a(i,E),V(_,p,b),a(p,d),V(_,y,b),a(y,I),V(_,w,b),a(w,B)},d(_){_&&f(e),_&&f(s),_&&f(n),_&&f(o),_&&f(i),_&&f(p),_&&f(y),_&&f(w)}}}function ua(t){let e,l,s,r,n,c,o,g,i,E,p,d,y,I,w,B;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("1.0"),n=m("option"),c=$("2.0"),o=m("option"),g=$("3.5"),i=m("option"),E=$("3.8"),p=m("option"),d=$("4.0"),y=m("option"),I=$("4.5"),w=m("option"),B=$("Closed"),this.h()},l(_){e=h(_,"OPTION",{});var b=v(e);l=z(b,"Open"),b.forEach(f),s=h(_,"OPTION",{});var A=v(s);r=z(A,"1.0"),A.forEach(f),n=h(_,"OPTION",{});var q=v(n);c=z(q,"2.0"),q.forEach(f),o=h(_,"OPTION",{});var D=v(o);g=z(D,"3.5"),D.forEach(f),i=h(_,"OPTION",{});var S=v(i);E=z(S,"3.8"),S.forEach(f),p=h(_,"OPTION",{});var M=v(p);d=z(M,"4.0"),M.forEach(f),y=h(_,"OPTION",{});var j=v(y);I=z(j,"4.5"),j.forEach(f),w=h(_,"OPTION",{});var F=v(w);B=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="1.0",s.value=s.__value,n.__value="2.0",n.value=n.__value,o.__value="3.5",o.value=o.__value,i.__value="3.8",i.value=i.__value,p.__value="4.0",p.value=p.__value,y.__value="4.5",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(_,b){V(_,e,b),a(e,l),V(_,s,b),a(s,r),V(_,n,b),a(n,c),V(_,o,b),a(o,g),V(_,i,b),a(i,E),V(_,p,b),a(p,d),V(_,y,b),a(y,I),V(_,w,b),a(w,B)},d(_){_&&f(e),_&&f(s),_&&f(n),_&&f(o),_&&f(i),_&&f(p),_&&f(y),_&&f(w)}}}function fa(t){let e,l,s,r,n,c,o,g=(Boolean(t[1])?660:532)+"",i,E,p,d,y,I,w,B,_,b,A,q,D=2*t[1]+"",S,M,j,F,J,re,U=2*t[1]+1+"",Pe,te,he,at,ie,Te,ge,nt,ue=(Number(t[0].od[t[1]]!=-1)*t[0].lasers[t[1]]*Math.pow(10,-t[0].od[t[1]])).toFixed(4)+"",Ze,ot,R,ve,Se;w=new al({props:{disabled:t[4].block,$$slots:{default:[ra]},$$scope:{ctx:t}}}),w.$on("click",t[8]);function mt(N,L){return N[1]==0?ua:ia}let We=mt(t),G=We(t);return{c(){e=m("p"),l=m("span"),s=m("label"),r=m("input"),c=P(),o=m("div"),i=$(g),E=$(" nm"),p=P(),d=m("input"),I=$(`
    mW
    `),K(w.$$.fragment),B=P(),_=m("label"),b=m("input"),q=$(`
    Channel `),S=$(D),M=P(),j=m("label"),F=m("input"),re=$(`
    Channel `),Pe=$(U),te=P(),he=m("span"),at=$(`Filter OD
    `),ie=m("select"),G.c(),Te=P(),ge=m("p"),nt=$("Effective: "),Ze=$(ue),ot=$(" mW"),this.h()},l(N){e=h(N,"P",{class:!0});var L=v(e);l=h(L,"SPAN",{class:!0});var Y=v(l);s=h(Y,"LABEL",{});var de=v(s);r=h(de,"INPUT",{type:!0,class:!0}),c=T(de),o=h(de,"DIV",{class:!0});var Ce=v(o);i=z(Ce,g),E=z(Ce," nm"),Ce.forEach(f),de.forEach(f),p=T(Y),d=h(Y,"INPUT",{type:!0,class:!0,min:!0,max:!0}),I=z(Y,`
    mW
    `),Q(w.$$.fragment,Y),Y.forEach(f),B=T(L),_=h(L,"LABEL",{class:!0});var De=v(_);b=h(De,"INPUT",{type:!0,class:!0}),q=z(De,`
    Channel `),S=z(De,D),De.forEach(f),M=T(L),j=h(L,"LABEL",{class:!0});var Ge=v(j);F=h(Ge,"INPUT",{type:!0,class:!0}),re=z(Ge,`
    Channel `),Pe=z(Ge,U),Ge.forEach(f),te=T(L),he=h(L,"SPAN",{class:!0});var ze=v(he);at=z(ze,`Filter OD
    `),ie=h(ze,"SELECT",{class:!0});var rt=v(ie);G.l(rt),rt.forEach(f),Te=T(ze),ge=h(ze,"P",{class:!0});var Xe=v(ge);nt=z(Xe,"Effective: "),Ze=z(Xe,ue),ot=z(Xe," mW"),Xe.forEach(f),ze.forEach(f),L.forEach(f),this.h()},h(){u(r,"type","checkbox"),u(r,"class",n=_e(`rounded mr-1 ${t[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),u(o,"class","inline font-semibold"),O(o,"text-green-800",t[0].laser_onoff[t[1]]&&!t[1]),O(o,"text-red-800",t[0].laser_onoff[t[1]]&&t[1]),u(d,"type","number"),u(d,"class","w-[4.5rem] h-8 pr-2 pretty"),u(d,"min","0"),u(d,"max","500"),d.disabled=y=!t[0].laser_onoff[t[1]],O(d,"pretty-disabled",!t[0].laser_onoff[0]),u(l,"class","flex items-center gap-x-2"),O(l,"text-gray-400",!t[0].laser_onoff[t[1]]),u(b,"type","checkbox"),u(b,"class",A=_e(`mr-1 rounded ${t[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),u(_,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),O(_,"text-gray-400",!t[0].channels[2*t[1]]),u(F,"type","checkbox"),u(F,"class",J=_e(`mr-1 rounded ${t[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),u(j,"class","channel svelte-6ipz4o"),O(j,"text-gray-400",!t[0].channels[2*t[1]+1]),u(ie,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"),u(ge,"class","ml-3 text-sm font-medium"),u(he,"class","ml-8 font-normal opacity-85"),u(e,"class","flex flex-col")},m(N,L){V(N,e,L),a(e,l),a(l,s),a(s,r),r.checked=t[0].laser_onoff[t[1]],a(s,c),a(s,o),a(o,i),a(o,E),a(l,p),a(l,d),X(d,t[0].lasers[t[1]]),a(l,I),x(w,l,null),a(e,B),a(e,_),a(_,b),b.checked=t[0].channels[2*t[1]],a(_,q),a(_,S),a(e,M),a(e,j),a(j,F),F.checked=t[0].channels[2*t[1]+1],a(j,re),a(j,Pe),a(e,te),a(e,he),a(he,at),a(he,ie),G.m(ie,null),a(he,Te),a(he,ge),a(ge,nt),a(ge,Ze),a(ge,ot),R=!0,ve||(Se=[H(r,"change",t[6]),H(d,"input",t[7]),we(Fe.call(null,d,[0,500])),H(b,"change",t[9]),H(F,"change",t[10]),H(ie,"change",t[5])],ve=!0)},p(N,[L]){(!R||L&2&&n!==(n=_e(`rounded mr-1 ${N[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&u(r,"class",n),L&3&&(r.checked=N[0].laser_onoff[N[1]]),(!R||L&2)&&g!==(g=(Boolean(N[1])?660:532)+"")&&me(i,g),L&3&&O(o,"text-green-800",N[0].laser_onoff[N[1]]&&!N[1]),L&3&&O(o,"text-red-800",N[0].laser_onoff[N[1]]&&N[1]),(!R||L&3&&y!==(y=!N[0].laser_onoff[N[1]]))&&(d.disabled=y),L&3&&le(d.value)!==N[0].lasers[N[1]]&&X(d,N[0].lasers[N[1]]),L&1&&O(d,"pretty-disabled",!N[0].laser_onoff[0]);const Y={};L&16&&(Y.disabled=N[4].block),L&2048&&(Y.$$scope={dirty:L,ctx:N}),w.$set(Y),L&3&&O(l,"text-gray-400",!N[0].laser_onoff[N[1]]),(!R||L&2&&A!==(A=_e(`mr-1 rounded ${N[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&u(b,"class",A),L&3&&(b.checked=N[0].channels[2*N[1]]),(!R||L&2)&&D!==(D=2*N[1]+"")&&me(S,D),L&3&&O(_,"text-gray-400",!N[0].channels[2*N[1]]),(!R||L&2&&J!==(J=_e(`mr-1 rounded ${N[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&u(F,"class",J),L&3&&(F.checked=N[0].channels[2*N[1]+1]),(!R||L&2)&&U!==(U=2*N[1]+1+"")&&me(Pe,U),L&3&&O(j,"text-gray-400",!N[0].channels[2*N[1]+1]),We!==(We=mt(N))&&(G.d(1),G=We(N),G&&(G.c(),G.m(ie,null))),(!R||L&3)&&ue!==(ue=(Number(N[0].od[N[1]]!=-1)*N[0].lasers[N[1]]*Math.pow(10,-N[0].od[N[1]])).toFixed(4)+"")&&me(Ze,ue)},i(N){R||(Z(w.$$.fragment,N),R=!0)},o(N){W(w.$$.fragment,N),R=!1},d(N){N&&f(e),ee(w),G.d(),ve=!1,nl(Se)}}}function ca(t,e,l){let s,r,n;$e(t,lt,I=>l(2,s=I)),$e(t,He,I=>l(3,r=I)),$e(t,Ct,I=>l(4,n=I));let{params:c}=e,{i:o}=e;function g(I){let w;switch(I.currentTarget.value){case"Open":w=0;break;case"Closed":w=-1;break;default:w=Number(I.currentTarget.value)}l(0,c.od[o]=w,c),Ne(He,r.image_params.od[o]=c.od[o],r),Ne(lt,s={move:{od:o===0?[c.od[o],void 0]:[void 0,c.od[o]]}},s)}function i(){c.laser_onoff[o]=this.checked,l(0,c)}function E(){c.lasers[o]=le(this.value),l(0,c)}const p=()=>{Ne(He,r.image_params.laser_onoff[o]=c.laser_onoff[o],r),Ne(He,r.image_params.lasers[o]=c.lasers[o],r),Ne(lt,s={move:{lasers:o===0?[c.lasers[o],void 0]:[void 0,c.lasers[o]],laser_onoff:o===0?[c.laser_onoff[o],void 0]:[void 0,c.laser_onoff[o]]}},s)};function d(){c.channels[2*o]=this.checked,l(0,c)}function y(){c.channels[2*o+1]=this.checked,l(0,c)}return t.$$set=I=>{"params"in I&&l(0,c=I.params),"i"in I&&l(1,o=I.i)},[c,o,s,r,n,g,i,E,p,d,y]}class os extends _t{constructor(e){super();pt(this,e,ca,fa,dt,{params:0,i:1})}}function rs(t){let e,l,s,r,n,c;return{c(){e=m("p"),l=$("Image Path"),s=P(),r=m("input"),this.h()},l(o){e=h(o,"P",{class:!0});var g=v(e);l=z(g,"Image Path"),g.forEach(f),s=T(o),r=h(o,"INPUT",{type:!0,class:!0}),this.h()},h(){u(e,"class","text-lg svelte-1m4l8fo"),u(r,"type","text"),u(r,"class","flex-grow max-w-[470px] mb-4 pretty"),O(r,"invalid",!t[0].path)},m(o,g){V(o,e,g),a(e,l),V(o,s,g),V(o,r,g),X(r,t[0].path),n||(c=H(r,"input",t[10]),n=!0)},p(o,g){g&1&&r.value!==o[0].path&&X(r,o[0].path),g&1&&O(r,"invalid",!o[0].path)},d(o){o&&f(e),o&&f(s),o&&f(r),n=!1,c()}}}function is(t){let e;return{c(){e=$("per z-stack.")},l(l){e=z(l,"per z-stack.")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function us(t){let e,l=t[1].n_z+"",s,r,n,c=t[0].z_obj+t[0].z_from*t[0].z_spacing+"",o,g,i=t[0].z_obj+t[0].z_to*t[0].z_spacing+"",E,p,d,y,I=(t[1].n_z?yt(t[1].n_z*t[1].time):yt(t[1].time))+"",w,B,_=t[1].n_z>1&&fs();return{c(){e=m("div"),s=$(l),r=$(" Z step"),_&&_.c(),n=$(" from "),o=$(c),g=$(" to "),E=$(i),p=P(),d=m("div"),y=$("Total time: "),w=$(I),B=$("."),this.h()},l(b){e=h(b,"DIV",{class:!0});var A=v(e);s=z(A,l),r=z(A," Z step"),_&&_.l(A),n=z(A," from "),o=z(A,c),g=z(A," to "),E=z(A,i),A.forEach(f),p=T(b),d=h(b,"DIV",{class:!0});var q=v(d);y=z(q,"Total time: "),w=z(q,I),B=z(q,"."),q.forEach(f),this.h()},h(){u(e,"class","px-2 font-base"),u(d,"class","px-2 font-semibold")},m(b,A){V(b,e,A),a(e,s),a(e,r),_&&_.m(e,null),a(e,n),a(e,o),a(e,g),a(e,E),V(b,p,A),V(b,d,A),a(d,y),a(d,w),a(d,B)},p(b,A){A&2&&l!==(l=b[1].n_z+"")&&me(s,l),b[1].n_z>1?_||(_=fs(),_.c(),_.m(e,n)):_&&(_.d(1),_=null),A&1&&c!==(c=b[0].z_obj+b[0].z_from*b[0].z_spacing+"")&&me(o,c),A&1&&i!==(i=b[0].z_obj+b[0].z_to*b[0].z_spacing+"")&&me(E,i),A&2&&I!==(I=(b[1].n_z?yt(b[1].n_z*b[1].time):yt(b[1].time))+"")&&me(w,I)},d(b){b&&f(e),_&&_.d(),b&&f(p),b&&f(d)}}}function fs(t){let e;return{c(){e=$("s")},l(l){e=z(l,"s")},m(l,s){V(l,e,s)},d(l){l&&f(e)}}}function _a(t){let e,l,s,r,n,c,o,g,i,E,p,d,y,I,w,B,_,b,A,q,D,S,M,j,F,J,re,U,Pe,te,he,at,ie,Te,ge,nt,ue,Ze,ot,R,ve,Se,mt,We,G,N,L,Y,de,Ce=t[1].width.toFixed(2)+"",De,Ge,ze=t[1].height.toFixed(2)+"",rt,Xe,ol,Ve,wt=t[1].n_cols+"",Dt,rl,$t=t[1].n_bundles+"",Vt,il,ul,Ie,zt=yt(t[1].time)+"",At,fl,cl,Re,ht,_l,pl,Ye,Je,it,bt,dl,ml,Ke,ke,hl,Ae,bl,ut,gt,gl,vl,Qe,Ee,kl,Ue,El,xe,et,Oe,Ut,yl,Me,tt,wl,$l,zl,se,Be,Il,Nl,ae,Mt,Pl,qe,Tl,Ol,ne,Bt,Sl,je,Cl,Dl,oe,qt,be,Vl,jl,fe=!t[3]&&rs(t);function ps(k){t[11](k)}let Ll={i:0};t[0]!==void 0&&(Ll.params=t[0]),w=new os({props:Ll}),Et.push(()=>ll(w,"params",ps));function ds(k){t[12](k)}let Fl={i:1};t[0]!==void 0&&(Fl.params=t[0]),b=new os({props:Fl}),Et.push(()=>ll(b,"params",ds));function ms(k){t[13](k)}let Hl={i:0};t[0].xy0!==void 0&&(Hl.xy=t[0].xy0),te=new ns({props:Hl}),Et.push(()=>ll(te,"xy",ms)),te.$on("change",t[6]);function hs(k){t[14](k)}let Zl={i:1};t[0].xy1!==void 0&&(Zl.xy=t[0].xy1),ue=new ns({props:Zl}),Et.push(()=>ll(ue,"xy",hs)),ue.$on("change",t[6]);let pe=t[2]&&is();Ae=new al({props:{disabled:t[4].block}}),Ae.$on("click",t[17]),Ue=new al({props:{disabled:t[4].block}}),Ue.$on("click",t[19]);let ce=t[2]&&us(t);return{c(){e=m("div"),l=m("section"),s=m("p"),r=$("Name"),n=P(),c=m("div"),o=m("input"),g=P(),fe&&fe.c(),i=P(),E=m("section"),p=m("h2"),d=$("Laser and Channels"),y=P(),I=m("div"),K(w.$$.fragment),_=P(),K(b.$$.fragment),q=P(),D=m("section"),S=m("h2"),M=$("Positions"),j=P(),F=m("div"),J=m("div"),re=m("p"),U=$("\u{1F4CC} Corner 1"),Pe=P(),K(te.$$.fragment),at=P(),ie=m("div"),Te=m("p"),ge=$("\u{1F4CD} Corner 2"),nt=P(),K(ue.$$.fragment),ot=P(),R=m("div"),ve=m("div"),Se=m("p"),mt=$("X-Overlap"),We=P(),G=m("input"),N=$(`
          (0-1)`),L=P(),Y=m("div"),de=m("span"),De=$(Ce),Ge=$(" \xD7 "),rt=$(ze),Xe=$(" mm."),ol=P(),Ve=m("span"),Dt=$(wt),rl=$(" columns of "),Vt=$($t),il=$(" bundles."),ul=P(),Ie=m("span"),At=$(zt),fl=P(),pe&&pe.c(),cl=P(),Re=m("section"),ht=m("h2"),_l=$("Focus"),pl=P(),Ye=m("div"),Je=m("div"),it=m("div"),bt=m("p"),dl=$("Z Tilt"),ml=P(),Ke=m("div"),ke=m("input"),hl=P(),K(Ae.$$.fragment),bl=P(),ut=m("div"),gt=m("p"),gl=$("Z Objective"),vl=P(),Qe=m("span"),Ee=m("input"),kl=P(),K(Ue.$$.fragment),El=P(),xe=m("div"),et=m("label"),Oe=m("input"),yl=P(),Me=m("div"),tt=m("div"),wl=$("Z-Stack"),$l=P(),ce&&ce.c(),zl=P(),se=m("div"),Be=m("span"),Il=$("Spacing"),Nl=P(),ae=m("input"),Pl=P(),qe=m("span"),Tl=$("From"),Ol=P(),ne=m("input"),Sl=P(),je=m("span"),Cl=$("To"),Dl=P(),oe=m("input"),this.h()},l(k){e=h(k,"DIV",{id:!0,class:!0,style:!0});var C=v(e);l=h(C,"SECTION",{class:!0});var Le=v(l);s=h(Le,"P",{class:!0});var It=v(s);r=z(It,"Name"),It.forEach(f),n=T(Le),c=h(Le,"DIV",{class:!0});var Nt=v(c);o=h(Nt,"INPUT",{type:!0,class:!0}),Nt.forEach(f),g=T(Le),fe&&fe.l(Le),Le.forEach(f),i=T(C),E=h(C,"SECTION",{class:!0});var ft=v(E);p=h(ft,"H2",{class:!0});var Pt=v(p);d=z(Pt,"Laser and Channels"),Pt.forEach(f),y=T(ft),I=h(ft,"DIV",{class:!0});var ct=v(I);Q(w.$$.fragment,ct),_=T(ct),Q(b.$$.fragment,ct),ct.forEach(f),ft.forEach(f),q=T(C),D=h(C,"SECTION",{class:!0});var jt=v(D);S=h(jt,"H2",{class:!0});var Wl=v(S);M=z(Wl,"Positions"),Wl.forEach(f),j=T(jt),F=h(jt,"DIV",{class:!0});var vt=v(F);J=h(vt,"DIV",{});var Lt=v(J);re=h(Lt,"P",{class:!0});var Gl=v(re);U=z(Gl,"\u{1F4CC} Corner 1"),Gl.forEach(f),Pe=T(Lt),Q(te.$$.fragment,Lt),Lt.forEach(f),at=T(vt),ie=h(vt,"DIV",{});var Ft=v(ie);Te=h(Ft,"P",{class:!0});var Xl=v(Te);ge=z(Xl,"\u{1F4CD} Corner 2"),Xl.forEach(f),nt=T(Ft),Q(ue.$$.fragment,Ft),Ft.forEach(f),ot=T(vt),R=h(vt,"DIV",{class:!0});var Ht=v(R);ve=h(Ht,"DIV",{});var Tt=v(ve);Se=h(Tt,"P",{class:!0});var Rl=v(Se);mt=z(Rl,"X-Overlap"),Rl.forEach(f),We=T(Tt),G=h(Tt,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),N=z(Tt,`
          (0-1)`),Tt.forEach(f),L=T(Ht),Y=h(Ht,"DIV",{class:!0});var kt=v(Y);de=h(kt,"SPAN",{class:!0});var Ot=v(de);De=z(Ot,Ce),Ge=z(Ot," \xD7 "),rt=z(Ot,ze),Xe=z(Ot," mm."),Ot.forEach(f),ol=T(kt),Ve=h(kt,"SPAN",{class:!0});var St=v(Ve);Dt=z(St,wt),rl=z(St," columns of "),Vt=z(St,$t),il=z(St," bundles."),St.forEach(f),ul=T(kt),Ie=h(kt,"SPAN",{class:!0});var Zt=v(Ie);At=z(Zt,zt),fl=T(Zt),pe&&pe.l(Zt),Zt.forEach(f),kt.forEach(f),Ht.forEach(f),vt.forEach(f),jt.forEach(f),cl=T(C),Re=h(C,"SECTION",{class:!0});var Wt=v(Re);ht=h(Wt,"H2",{class:!0});var Yl=v(ht);_l=z(Yl,"Focus"),Yl.forEach(f),pl=T(Wt),Ye=h(Wt,"DIV",{class:!0});var Gt=v(Ye);Je=h(Gt,"DIV",{class:!0});var Xt=v(Je);it=h(Xt,"DIV",{});var Rt=v(it);bt=h(Rt,"P",{class:!0});var Jl=v(bt);dl=z(Jl,"Z Tilt"),Jl.forEach(f),ml=T(Rt),Ke=h(Rt,"DIV",{class:!0});var Yt=v(Ke);ke=h(Yt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),hl=T(Yt),Q(Ae.$$.fragment,Yt),Yt.forEach(f),Rt.forEach(f),bl=T(Xt),ut=h(Xt,"DIV",{});var Jt=v(ut);gt=h(Jt,"P",{class:!0});var Kl=v(gt);gl=z(Kl,"Z Objective"),Kl.forEach(f),vl=T(Jt),Qe=h(Jt,"SPAN",{class:!0});var Kt=v(Qe);Ee=h(Kt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),kl=T(Kt),Q(Ue.$$.fragment,Kt),Kt.forEach(f),Jt.forEach(f),Xt.forEach(f),El=T(Gt),xe=h(Gt,"DIV",{class:!0});var Qt=v(xe);et=h(Qt,"LABEL",{class:!0});var xt=v(et);Oe=h(xt,"INPUT",{type:!0,class:!0}),yl=T(xt),Me=h(xt,"DIV",{class:!0});var el=v(Me);tt=h(el,"DIV",{class:!0});var Ql=v(tt);wl=z(Ql,"Z-Stack"),Ql.forEach(f),$l=T(el),ce&&ce.l(el),el.forEach(f),xt.forEach(f),zl=T(Qt),se=h(Qt,"DIV",{class:!0,id:!0});var ye=v(se);Be=h(ye,"SPAN",{class:!0});var xl=v(Be);Il=z(xl,"Spacing"),xl.forEach(f),Nl=T(ye),ae=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Pl=T(ye),qe=h(ye,"SPAN",{class:!0});var es=v(qe);Tl=z(es,"From"),es.forEach(f),Ol=T(ye),ne=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Sl=T(ye),je=h(ye,"SPAN",{class:!0});var ts=v(je);Cl=z(ts,"To"),ts.forEach(f),Dl=T(ye),oe=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ye.forEach(f),Qt.forEach(f),Gt.forEach(f),Wt.forEach(f),C.forEach(f),this.h()},h(){u(s,"class","mt-1 text-lg svelte-1m4l8fo"),u(o,"type","text"),u(o,"class","flex-grow h-12 mb-4 text-lg pretty"),O(o,"invalid",t[7](t[0].name)),u(c,"class","flex-grow flex gap-x-2 max-w-[470px]"),u(l,"class","flex flex-col text-lg font-medium"),u(p,"class","svelte-1m4l8fo"),u(I,"class","grid grid-cols-2 min-w-[600px]"),O(I,"opacity-70",t[4].block),u(E,"class","font-medium leading-10 "),u(S,"class","svelte-1m4l8fo"),u(re,"class","svelte-1m4l8fo"),u(Te,"class","svelte-1m4l8fo"),u(Se,"class","svelte-1m4l8fo"),u(G,"type","number"),u(G,"class","w-20 pr-2 pretty"),u(G,"step","0.01"),u(G,"min","0"),u(G,"max","0.99"),u(de,"class","tabular-nums"),u(Ve,"class","tabular-nums"),u(Ie,"class","tabular-nums"),O(Ie,"font-semibold",!t[2]),u(Y,"class","flex flex-col justify-center font-normal"),u(R,"class","flex gap-8"),u(F,"class","-mt-1 space-y-4"),u(D,"class","flex flex-col gap-2"),O(D,"-mt-20",t[3]),u(ht,"class","svelte-1m4l8fo"),u(bt,"class","svelte-1m4l8fo"),u(ke,"type","number"),u(ke,"class","w-28 pretty"),u(ke,"min","0"),u(ke,"max","25000"),u(Ke,"class","flex gap-2"),u(gt,"class","svelte-1m4l8fo"),u(Ee,"type","number"),u(Ee,"class","w-28 pretty"),u(Ee,"min","0"),u(Ee,"max","60000"),u(Qe,"class","flex gap-2"),u(Je,"class","flex space-x-8"),u(Oe,"type","checkbox"),u(Oe,"class","mr-1 rounded focus:ring-blue-600"),Oe.disabled=Ut=t[4].block==="capturing",u(tt,"class","pr-2"),O(tt,"font-medium",t[2]),u(Me,"class","flex divide-x-2"),u(et,"class","flex items-center gap-x-1"),u(Be,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),O(Be,"span-disabled",t[4].block||!t[2]),u(ae,"type","number"),u(ae,"min","1"),u(ae,"max","60000"),u(ae,"step","1"),u(ae,"class","z-10 h-10 text-center rounded-none pretty w-28"),ae.disabled=Mt=t[4].block||!t[2],O(ae,"disabled",t[4].block||!t[2]),u(qe,"class","flex items-center color-group svelte-1m4l8fo"),O(qe,"span-disabled",t[4].block||!t[2]),u(ne,"type","number"),u(ne,"min","-100"),u(ne,"max","100"),u(ne,"step","1"),u(ne,"class","z-10 w-16 h-10 text-center rounded-none pretty"),ne.disabled=Bt=t[4].block||!t[2],O(ne,"disabled",t[4].block||!t[2]),u(je,"class","flex items-center color-group svelte-1m4l8fo"),O(je,"span-disabled",t[4].block||!t[2]),u(oe,"type","number"),u(oe,"min","-100"),u(oe,"max","100"),u(oe,"step","1"),u(oe,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),oe.disabled=qt=t[4].block||!t[2],O(oe,"disabled",t[4].block||!t[2]),u(se,"class","flex font-medium"),u(se,"id","zBox"),u(xe,"class","space-y-2"),u(Ye,"class","-mt-1 space-y-4"),u(Re,"class","flex flex-col gap-2"),u(e,"id","control"),u(e,"class","grid gap-y-6"),Os(e,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(k,C){V(k,e,C),a(e,l),a(l,s),a(s,r),a(l,n),a(l,c),a(c,o),X(o,t[0].name),a(l,g),fe&&fe.m(l,null),a(e,i),a(e,E),a(E,p),a(p,d),a(E,y),a(E,I),x(w,I,null),a(I,_),x(b,I,null),a(e,q),a(e,D),a(D,S),a(S,M),a(D,j),a(D,F),a(F,J),a(J,re),a(re,U),a(J,Pe),x(te,J,null),a(F,at),a(F,ie),a(ie,Te),a(Te,ge),a(ie,nt),x(ue,ie,null),a(F,ot),a(F,R),a(R,ve),a(ve,Se),a(Se,mt),a(ve,We),a(ve,G),X(G,t[0].overlap),a(ve,N),a(R,L),a(R,Y),a(Y,de),a(de,De),a(de,Ge),a(de,rt),a(de,Xe),a(Y,ol),a(Y,Ve),a(Ve,Dt),a(Ve,rl),a(Ve,Vt),a(Ve,il),a(Y,ul),a(Y,Ie),a(Ie,At),a(Ie,fl),pe&&pe.m(Ie,null),a(e,cl),a(e,Re),a(Re,ht),a(ht,_l),a(Re,pl),a(Re,Ye),a(Ye,Je),a(Je,it),a(it,bt),a(bt,dl),a(it,ml),a(it,Ke),a(Ke,ke),X(ke,t[0].z_tilt),a(Ke,hl),x(Ae,Ke,null),a(Je,bl),a(Je,ut),a(ut,gt),a(gt,gl),a(ut,vl),a(ut,Qe),a(Qe,Ee),X(Ee,t[0].z_obj),a(Qe,kl),x(Ue,Qe,null),a(Ye,El),a(Ye,xe),a(xe,et),a(et,Oe),Oe.checked=t[2],a(et,yl),a(et,Me),a(Me,tt),a(tt,wl),a(Me,$l),ce&&ce.m(Me,null),a(xe,zl),a(xe,se),a(se,Be),a(Be,Il),a(se,Nl),a(se,ae),X(ae,t[0].z_spacing),a(se,Pl),a(se,qe),a(qe,Tl),a(se,Ol),a(se,ne),X(ne,t[0].z_from),a(se,Sl),a(se,je),a(je,Cl),a(se,Dl),a(se,oe),X(oe,t[0].z_to),be=!0,Vl||(jl=[H(o,"input",t[9]),H(G,"input",t[15]),we(Fe.call(null,G,[.01,.99])),H(ke,"input",t[16]),we(Fe.call(null,ke,[0,25e3])),H(Ee,"input",t[18]),we(Fe.call(null,Ee,[0,6e4])),H(Oe,"change",t[20]),we(Al.call(null,Be,"Nyquist is 232.")),H(ae,"input",t[21]),we(Fe.call(null,ae,[1,6e4])),we(Al.call(null,qe,"Multiple of Spacing")),H(ne,"input",t[22]),we(Fe.call(null,ne,[-100,100])),we(Al.call(null,je,"Multiple of Spacing")),H(oe,"input",t[23]),we(Fe.call(null,oe,[-100,100]))],Vl=!0)},p(k,[C]){C&1&&o.value!==k[0].name&&X(o,k[0].name),C&129&&O(o,"invalid",k[7](k[0].name)),k[3]?fe&&(fe.d(1),fe=null):fe?fe.p(k,C):(fe=rs(k),fe.c(),fe.m(l,null));const Le={};!B&&C&1&&(B=!0,Le.params=k[0],sl(()=>B=!1)),w.$set(Le);const It={};!A&&C&1&&(A=!0,It.params=k[0],sl(()=>A=!1)),b.$set(It),C&16&&O(I,"opacity-70",k[4].block);const Nt={};!he&&C&1&&(he=!0,Nt.xy=k[0].xy0,sl(()=>he=!1)),te.$set(Nt);const ft={};!Ze&&C&1&&(Ze=!0,ft.xy=k[0].xy1,sl(()=>Ze=!1)),ue.$set(ft),C&1&&le(G.value)!==k[0].overlap&&X(G,k[0].overlap),(!be||C&2)&&Ce!==(Ce=k[1].width.toFixed(2)+"")&&me(De,Ce),(!be||C&2)&&ze!==(ze=k[1].height.toFixed(2)+"")&&me(rt,ze),(!be||C&2)&&wt!==(wt=k[1].n_cols+"")&&me(Dt,wt),(!be||C&2)&&$t!==($t=k[1].n_bundles+"")&&me(Vt,$t),(!be||C&2)&&zt!==(zt=yt(k[1].time)+"")&&me(At,zt),k[2]?pe||(pe=is(),pe.c(),pe.m(Ie,null)):pe&&(pe.d(1),pe=null),C&4&&O(Ie,"font-semibold",!k[2]),C&8&&O(D,"-mt-20",k[3]),C&1&&le(ke.value)!==k[0].z_tilt&&X(ke,k[0].z_tilt);const Pt={};C&16&&(Pt.disabled=k[4].block),Ae.$set(Pt),C&1&&le(Ee.value)!==k[0].z_obj&&X(Ee,k[0].z_obj);const ct={};C&16&&(ct.disabled=k[4].block),Ue.$set(ct),(!be||C&16&&Ut!==(Ut=k[4].block==="capturing"))&&(Oe.disabled=Ut),C&4&&(Oe.checked=k[2]),C&4&&O(tt,"font-medium",k[2]),k[2]?ce?ce.p(k,C):(ce=us(k),ce.c(),ce.m(Me,null)):ce&&(ce.d(1),ce=null),C&20&&O(Be,"span-disabled",k[4].block||!k[2]),(!be||C&20&&Mt!==(Mt=k[4].block||!k[2]))&&(ae.disabled=Mt),C&1&&le(ae.value)!==k[0].z_spacing&&X(ae,k[0].z_spacing),C&20&&O(ae,"disabled",k[4].block||!k[2]),C&20&&O(qe,"span-disabled",k[4].block||!k[2]),(!be||C&20&&Bt!==(Bt=k[4].block||!k[2]))&&(ne.disabled=Bt),C&1&&le(ne.value)!==k[0].z_from&&X(ne,k[0].z_from),C&20&&O(ne,"disabled",k[4].block||!k[2]),C&20&&O(je,"span-disabled",k[4].block||!k[2]),(!be||C&20&&qt!==(qt=k[4].block||!k[2]))&&(oe.disabled=qt),C&1&&le(oe.value)!==k[0].z_to&&X(oe,k[0].z_to),C&20&&O(oe,"disabled",k[4].block||!k[2])},i(k){be||(Z(w.$$.fragment,k),Z(b.$$.fragment,k),Z(te.$$.fragment,k),Z(ue.$$.fragment,k),Z(Ae.$$.fragment,k),Z(Ue.$$.fragment,k),be=!0)},o(k){W(w.$$.fragment,k),W(b.$$.fragment,k),W(te.$$.fragment,k),W(ue.$$.fragment,k),W(Ae.$$.fragment,k),W(Ue.$$.fragment,k),be=!1},d(k){k&&f(e),fe&&fe.d(),ee(w),ee(b),ee(te),ee(ue),pe&&pe.d(),ee(Ae),ee(Ue),ce&&ce.d(),Vl=!1,nl(jl)}}}function pa(t,e){t&&(t.querySelectorAll("input").forEach(l=>l.disabled=e),t.querySelectorAll("select").forEach(l=>l.disabled=e),t.querySelectorAll("button").forEach(l=>l.disabled=e))}function yt(t){const e=new Date(t*1e3).toISOString();return t>3600?`${e.substring(11,19)} hrs`:`${e.substring(14,19)} mins`}function da(t,e,l){let s,r,n;$e(t,Ct,U=>l(4,s=U)),$e(t,He,U=>l(24,r=U)),$e(t,lt,U=>l(5,n=U));let{inAuto:c=!0}=e,{params:o}=e,{stats:g={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=e,{z_stack:i=!1}=e,{fc_:E=0}=e;function p(){Ne(He,r.image_params.xy0=o.xy0,r),Ne(He,r.image_params.xy1=o.xy1,r)}function d(U){if(!U)return!0;if(!c)return!1;const Pe=r.exps[E].cmds.filter(te=>te.cmd.op==="takeimage").map(te=>te.cmd.name);return Cs(Pe)[U]>1}function y(){o.name=this.value,l(0,o)}function I(){o.path=this.value,l(0,o)}function w(U){o=U,l(0,o)}function B(U){o=U,l(0,o)}function _(U){t.$$.not_equal(o.xy0,U)&&(o.xy0=U,l(0,o))}function b(U){t.$$.not_equal(o.xy1,U)&&(o.xy1=U,l(0,o))}function A(){o.overlap=le(this.value),l(0,o)}function q(){o.z_tilt=le(this.value),l(0,o)}const D=()=>Ne(lt,n={move:{z_tilt:o.z_tilt}},n);function S(){o.z_obj=le(this.value),l(0,o)}const M=()=>Ne(lt,n={move:{z_obj:o.z_obj}},n);function j(){i=this.checked,l(2,i)}function F(){o.z_spacing=le(this.value),l(0,o)}function J(){o.z_from=le(this.value),l(0,o)}function re(){o.z_to=le(this.value),l(0,o)}return t.$$set=U=>{"inAuto"in U&&l(3,c=U.inAuto),"params"in U&&l(0,o=U.params),"stats"in U&&l(1,g=U.stats),"z_stack"in U&&l(2,i=U.z_stack),"fc_"in U&&l(8,E=U.fc_)},t.$$.update=()=>{t.$$.dirty&16&&pa(document.getElementById("control"),s.block),t.$$.dirty&1&&l(1,g.height=Math.max(o.xy1[1],o.xy0[1])-Math.min(o.xy1[1],o.xy0[1]),g),t.$$.dirty&1&&l(1,g.width=Math.max(o.xy1[0],o.xy0[0])-Math.min(o.xy1[0],o.xy0[0]),g),t.$$.dirty&3&&l(1,g.n_cols=g.width==0?1:Math.ceil(g.width/(.768*(1-o.overlap))),g),t.$$.dirty&2&&l(1,g.n_bundles=Math.ceil(g.height/.048),g),t.$$.dirty&2&&l(1,g.time=g.n_bundles*g.n_cols/20,g),t.$$.dirty&1&&l(1,g.n_z=Math.abs(o.z_to-o.z_from)+1,g)},[o,g,i,c,s,n,p,d,E,y,I,w,B,_,b,A,q,D,S,M,j,F,J,re]}class Ea extends _t{constructor(e){super();pt(this,e,da,_a,dt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{ka as P,Ea as T,va as a};
