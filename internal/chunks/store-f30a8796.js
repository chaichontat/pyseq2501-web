import"./vendor-2c8cd3e7.js";const u=[2e3,5e3,1e4,3e4,6e4];function a(t,f=void 0,p=o=>o){let o,n,r,c=0;const i=new Set;function S(){const e=c;return c++,u[e>=u.length-1?u.length-1:e]}function d(){r&&clearTimeout(r),o&&(o.close(),o=void 0)}function w(){d(),i.size>0&&(r=setTimeout(()=>l(),S()))}async function l(){return r&&(clearTimeout(r),r=void 0),n||(o=new WebSocket(t),o.onmessage=e=>{i.forEach(s=>{s(p(e.data))})},o.onclose=e=>{w()},n=new Promise((e,s)=>{o&&(o.onerror=m=>{s(m),n=void 0},o.onopen=m=>{c=0,e(!0),n=void 0})}),n)}return{set(e){if(o){const s=typeof e=="object"?()=>o.send(JSON.stringify(e)):()=>o.send(e);o.readyState!==WebSocket.OPEN?l().then(s):s()}i.forEach(s=>{s(e)})},update(e){console.log("update")},subscribe(e){return l(),e(f),i.add(e),()=>{i.delete(e),i.size===0&&d()}}}}let g={x:-1,y:-1,z_tilt:[-1,-1,-1],z_obj:-1,laser_r:-1,laser_g:-1,shutter:!1,moving:!1,msg:""},_={n:16,x:0,y:0,z_tilt:19850,z_obj:32e3,laser_r:5,laser_g:5,flowcell:!1,mode:"manual"},h={n:0,img:"",hist:{counts:[10],bin_edges:[0]}};const O=a(`ws://${window.location.hostname}:8000/img`,h,t=>JSON.parse(JSON.parse(t))),J=a(`ws://${window.location.hostname}:8000/status`,g,t=>JSON.parse(JSON.parse(t))),b=a(`ws://${window.location.hostname}:8000/user`,_,t=>JSON.parse(JSON.parse(t))),y=a(`ws://${window.location.hostname}:8000/cmd`,void 0,t=>JSON.parse(JSON.parse(t)));export{y as c,O as i,J as s,b as u};
