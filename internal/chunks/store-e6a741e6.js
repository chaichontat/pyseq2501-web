var v=Object.defineProperty;var _=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var h=(t,s,r)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,u=(t,s)=>{for(var r in s||(s={}))x.call(s,r)&&h(t,r,s[r]);if(_)for(var r of _(s))z.call(s,r)&&h(t,r,s[r]);return t};import{D as T}from"./vendor-298196a7.js";const k={name:"",port:1,v_pull:100,v_prime:200,v_push:2e3,wait:26},N={pump:{reagent:"",volume:0,op:"pump"},prime:{reagent:"",volume:0,op:"prime"},temp:{temp:25,op:"temp"},hold:{time:0,temp:25,op:"hold"},move:{xy:[0,0],op:"move"},image:{xy_start:[0,0],xy_end:[0,0],z_tilt:2e4,channels:[!0,!0,!0,!0],laser_onoff:[!0,!0],lasers:[50,50],op:"image"},autofocus:{channels:[!0,!0,!0,!0],laser_onoff:[!0,!0],lasers:[50,50],op:"autofocus"},goto:{step:1,n:4,op:"goto"}},p=[2e3,5e3,1e4,3e4,6e4];function f(t,s=void 0,r=o=>o,S=!0){let o,a,i,c=0;const l=new Set;function b(){const e=c;return c++,p[e>=p.length-1?p.length-1:e]}function d(){i&&clearTimeout(i),o&&(o.close(),o=void 0)}function y(){d(),l.size>0&&(i=setTimeout(()=>m(),b()))}async function m(){return i&&(clearTimeout(i),i=void 0),a||(o=new WebSocket(t),o.onmessage=e=>{console.log(e.data),l.forEach(n=>{n(r(e.data))})},o.onclose=e=>y(),a=new Promise((e,n)=>{o&&(o.onerror=g=>{console.error("Websocket error"),n(g),a=void 0},o.onopen=g=>{c=0,e(!0),a=void 0})}),a)}return{set(e){if(console.log(e),o){const n=typeof e=="object"?()=>o.send(JSON.stringify(e)):()=>o.send(e);o.readyState!==WebSocket.OPEN?m().then(n):n()}S&&l.forEach(n=>{n(e)})},update(e){},subscribe(e){return m(),e(s),l.add(e),()=>{l.delete(e),l.size===0&&d()}}}}let O={x:-1,y:-1,z_tilt:[-1,-1,-1],z_obj:-1,laser_r:-1,laser_g:-1,shutter:!1,moving:!1,msg:""};const w={name:"",flowcell:0,reagents:[{uid:0,reagent:u({},k)}],cmds:[{uid:0,cmd:u({},N.image)}]},J={block:"",max_uid:2,mode:"editingA",recipes:[u({},w),u({},w)],image_params:{name:"Test",path:".",xy0:[0,0],xy1:[1,1],channels:[!0,!0,!0,!0],z_tilt:19850,z_obj:32e3,lasers:[0,0],laser_onoff:[!0,!0],od:[0,0],flowcell:!1,overlap:.1,n:0}};let D={n:0,img:[""],hist:[{counts:[10],bin_edges:[0]}],channels:[!1,!1,!1,!1]};const P=T(D),W=f(`ws://${window.location.hostname}:8000/status`,O,t=>JSON.parse(JSON.parse(t))),$=f(`ws://${window.location.hostname}:8000/user`,J,t=>JSON.parse(JSON.parse(t))),A=f(`ws://${window.location.hostname}:8000/cmd`,"",t=>t,!1);export{A as c,N as d,P as i,k as r,W as s,$ as u};
