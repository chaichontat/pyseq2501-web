import{S as X,i as Y,s as x,ab as ee,e as d,w as E,c as b,a as v,x as q,d as u,b as c,g as k,y as z,q as S,o as I,B as N,ac as te,ad as se,k as y,m as D,t as P,h as W,H as m,j as ae,ae as ne,U as V,V as G,R as le,W as re,N as K,v as oe,af as ie,ag as ue,T as Q,ah as j,a0 as H}from"./vendor-3b7a823e.js";import{l as fe,u as ce}from"./store-cb7bda8e.js";function he(l){let e;return{c(){e=d("div"),this.h()},l(a){e=b(a,"DIV",{class:!0}),v(e).forEach(u),this.h()},h(){c(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(a,n){k(a,e,n)},d(a){a&&u(e)}}}function me(l){let e,a=l[3]+"",n;return{c(){e=d("span"),n=P(a),this.h()},l(s){e=b(s,"SPAN",{class:!0});var t=v(e);n=W(t,a),t.forEach(u),this.h()},h(){c(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(s,t){k(s,e,t),m(e,n)},p(s,t){t&8&&a!==(a=s[3]+"")&&ae(n,a)},d(s){s&&u(e)}}}function ge(l){let e,a,n,s;return e=new te({props:{data:l[1],width:80,$$slots:{default:[he]},$$scope:{ctx:l}}}),n=new se({props:{vertical:!0,count:5,$$slots:{default:[me,({value:t})=>({3:t}),({value:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment),a=y(),E(n.$$.fragment)},l(t){q(e.$$.fragment,t),a=D(t),q(n.$$.fragment,t)},m(t,i){z(e,t,i),k(t,a,i),z(n,t,i),s=!0},p(t,i){const f={};i&2&&(f.data=t[1]),i&16&&(f.$$scope={dirty:i,ctx:t}),e.$set(f);const g={};i&24&&(g.$$scope={dirty:i,ctx:t}),n.$set(g)},i(t){s||(S(e.$$.fragment,t),S(n.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),I(n.$$.fragment,t),s=!1},d(t){N(e,t),t&&u(a),N(n,t)}}}function pe(l){let e,a,n;return a=new ee({props:{x1:-10,x2:4096+10,y1:0,y2:l[0],$$slots:{default:[ge]},$$scope:{ctx:l}}}),{c(){e=d("div"),E(a.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var t=v(e);q(a.$$.fragment,t),t.forEach(u),this.h()},h(){c(e,"class","w-full h-full box-border")},m(s,t){k(s,e,t),z(a,e,null),n=!0},p(s,[t]){const i={};t&1&&(i.y2=s[0]),t&18&&(i.$$scope={dirty:t,ctx:s}),a.$set(i)},i(s){n||(S(a.$$.fragment,s),n=!0)},o(s){I(a.$$.fragment,s),n=!1},d(s){s&&u(e),N(a)}}}function $e(l,e){return l.map((a,n)=>({x:a,y:e[n]}))}function _e(l,e,a){let{hist:n}=e,s,t=[{x:0,y:0},{x:2e3,y:10}];return l.$$set=i=>{"hist"in i&&a(2,n=i.hist)},l.$$.update=()=>{l.$$.dirty&4&&n&&(a(1,t=$e(n.bin_edges,n.counts)),a(0,s=Math.max(...n.counts)))},[s,t,n]}class de extends X{constructor(e){super();Y(this,e,_e,pe,x,{hist:2})}}function be(l){let e,a,n;return{c(){e=d("button"),a=P("Channel 0"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var t=v(e);a=W(t,"Channel 0"),t.forEach(u),this.h()},h(){c(e,"class",n=H(O("green",l[15],l[6].image_params.channels[0]))+" svelte-132l8kq"),V(e,"bg-green-600",l[15])},m(s,t){k(s,e,t),m(e,a)},p(s,t){t&32832&&n!==(n=H(O("green",s[15],s[6].image_params.channels[0]))+" svelte-132l8kq")&&c(e,"class",n),t&32832&&V(e,"bg-green-600",s[15])},d(s){s&&u(e)}}}function ve(l){let e,a,n;return{c(){e=d("button"),a=P("Channel 1"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var t=v(e);a=W(t,"Channel 1"),t.forEach(u),this.h()},h(){c(e,"class",n=H(O("orange",l[15],l[6].image_params.channels[1]))+" svelte-132l8kq"),V(e,"bg-orange-500",l[15])},m(s,t){k(s,e,t),m(e,a)},p(s,t){t&32832&&n!==(n=H(O("orange",s[15],s[6].image_params.channels[1]))+" svelte-132l8kq")&&c(e,"class",n),t&32832&&V(e,"bg-orange-500",s[15])},d(s){s&&u(e)}}}function we(l){let e,a,n;return{c(){e=d("button"),a=P("Channel 2"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var t=v(e);a=W(t,"Channel 2"),t.forEach(u),this.h()},h(){c(e,"class",n=H(O("rose",l[15],l[6].image_params.channels[2]))+" svelte-132l8kq"),V(e,"bg-rose-600",l[15])},m(s,t){k(s,e,t),m(e,a)},p(s,t){t&32832&&n!==(n=H(O("rose",s[15],s[6].image_params.channels[2]))+" svelte-132l8kq")&&c(e,"class",n),t&32832&&V(e,"bg-rose-600",s[15])},d(s){s&&u(e)}}}function ke(l){let e,a,n;return{c(){e=d("button"),a=P("Channel 3"),this.h()},l(s){e=b(s,"BUTTON",{class:!0});var t=v(e);a=W(t,"Channel 3"),t.forEach(u),this.h()},h(){c(e,"class",n=H(O("amber",l[15],l[6].image_params.channels[3]))+" svelte-132l8kq"),V(e,"bg-amber-800",l[15])},m(s,t){k(s,e,t),m(e,a)},p(s,t){t&32832&&n!==(n=H(O("amber",s[15],s[6].image_params.channels[3]))+" svelte-132l8kq")&&c(e,"class",n),t&32832&&V(e,"bg-amber-800",s[15])},d(s){s&&u(e)}}}function Ce(l){let e,a,n,s,t,i,f,g;return e=new j({props:{disabled:!l[6].image_params.channels[0],$$slots:{default:[be,({selected:r})=>({15:r}),({selected:r})=>r?32768:0]},$$scope:{ctx:l}}}),n=new j({props:{disabled:!l[6].image_params.channels[1],$$slots:{default:[ve,({selected:r})=>({15:r}),({selected:r})=>r?32768:0]},$$scope:{ctx:l}}}),t=new j({props:{disabled:!l[6].image_params.channels[2],$$slots:{default:[we,({selected:r})=>({15:r}),({selected:r})=>r?32768:0]},$$scope:{ctx:l}}}),f=new j({props:{disabled:!l[6].image_params.channels[3],$$slots:{default:[ke,({selected:r})=>({15:r}),({selected:r})=>r?32768:0]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment),a=y(),E(n.$$.fragment),s=y(),E(t.$$.fragment),i=y(),E(f.$$.fragment)},l(r){q(e.$$.fragment,r),a=D(r),q(n.$$.fragment,r),s=D(r),q(t.$$.fragment,r),i=D(r),q(f.$$.fragment,r)},m(r,o){z(e,r,o),k(r,a,o),z(n,r,o),k(r,s,o),z(t,r,o),k(r,i,o),z(f,r,o),g=!0},p(r,o){const p={};o&64&&(p.disabled=!r[6].image_params.channels[0]),o&98368&&(p.$$scope={dirty:o,ctx:r}),e.$set(p);const $={};o&64&&($.disabled=!r[6].image_params.channels[1]),o&98368&&($.$$scope={dirty:o,ctx:r}),n.$set($);const B={};o&64&&(B.disabled=!r[6].image_params.channels[2]),o&98368&&(B.$$scope={dirty:o,ctx:r}),t.$set(B);const U={};o&64&&(U.disabled=!r[6].image_params.channels[3]),o&98368&&(U.$$scope={dirty:o,ctx:r}),f.$set(U)},i(r){g||(S(e.$$.fragment,r),S(n.$$.fragment,r),S(t.$$.fragment,r),S(f.$$.fragment,r),g=!0)},o(r){I(e.$$.fragment,r),I(n.$$.fragment,r),I(t.$$.fragment,r),I(f.$$.fragment,r),g=!1},d(r){N(e,r),r&&u(a),N(n,r),r&&u(s),N(t,r),r&&u(i),N(f,r)}}}function Te(l){let e,a;return e=new ue({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[Ce]},$$scope:{ctx:l}}}),{c(){E(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,s){z(e,n,s),a=!0},p(n,s){const t={};s&65600&&(t.$$scope={dirty:s,ctx:n}),e.$set(t)},i(n){a||(S(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){N(e,n)}}}function Ee(l){let e,a,n,s,t,i,f,g,r,o,p,$,B,U,C,T,A,_,R;return t=new ne({props:{$$slots:{default:[Te]},$$scope:{ctx:l}}}),t.$on("change",l[9]),T=new de({props:{hist:l[1].img.hist[l[0]]}}),{c(){e=d("div"),a=d("canvas"),n=y(),s=d("div"),E(t.$$.fragment),i=y(),f=d("button"),g=P("Center"),r=y(),o=d("div"),p=d("label"),$=d("input"),B=P(`
      Show Histogram`),U=y(),C=d("div"),E(T.$$.fragment),this.h()},l(w){e=b(w,"DIV",{id:!0,class:!0});var h=v(e);a=b(h,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),v(a).forEach(u),n=D(h),s=b(h,"DIV",{class:!0});var L=v(s);q(t.$$.fragment,L),L.forEach(u),i=D(h),f=b(h,"BUTTON",{class:!0});var M=v(f);g=W(M,"Center"),M.forEach(u),r=D(h),o=b(h,"DIV",{class:!0});var Z=v(o);p=b(Z,"LABEL",{class:!0});var F=v(p);$=b(F,"INPUT",{type:!0,class:!0}),B=W(F,`
      Show Histogram`),F.forEach(u),Z.forEach(u),U=D(h),C=b(h,"DIV",{id:!0,class:!0});var J=v(C);q(T.$$.fragment,J),J.forEach(u),h.forEach(u),this.h()},h(){c(a,"id","canvas"),c(a,"width",2048),c(a,"height",128),c(a,"class","svelte-132l8kq"),c(s,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),c(f,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),c($,"type","checkbox"),c($,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),c(p,"class","mx-4 font-medium cursor-pointer"),c(o,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),c(C,"id","histogram"),c(C,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),V(C,"hidden",!l[5]),c(e,"id","frame"),c(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(w,h){k(w,e,h),m(e,a),l[8](a),m(e,n),m(e,s),z(t,s,null),m(e,i),m(e,f),m(f,g),m(e,r),m(e,o),m(o,p),m(p,$),$.checked=l[5],m(p,B),m(e,U),m(e,C),z(T,C,null),l[13](e),A=!0,_||(R=[G(a,"wheel",function(){le(l[4].zoomWithWheel)&&l[4].zoomWithWheel.apply(this,arguments)}),G(f,"click",l[10]),G($,"change",l[11]),G($,"click",l[12])],_=!0)},p(w,[h]){l=w;const L={};h&65600&&(L.$$scope={dirty:h,ctx:l}),t.$set(L),h&32&&($.checked=l[5]);const M={};h&3&&(M.hist=l[1].img.hist[l[0]]),T.$set(M),h&32&&V(C,"hidden",!l[5])},i(w){A||(S(t.$$.fragment,w),S(T.$$.fragment,w),A=!0)},o(w){I(t.$$.fragment,w),I(T.$$.fragment,w),A=!1},d(w){w&&u(e),l[8](null),N(t),N(T),l[13](null),_=!1,re(R)}}}function O(l,e,a){return`tab-button ${e?"text-white":`${a?`text-gray-700 hover:text-black bg-white hover:bg-${l}-300`:"text-gray-400"}`}`}function qe(l,e,a){let n,s;K(l,fe,_=>a(1,n=_)),K(l,ce,_=>a(6,s=_));let t,i,f,g,r,o=!0,p=0;oe(()=>{a(7,r=i.getContext("2d")),a(4,g=ie(i,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),f=new Image,f.onload=()=>r==null?void 0:r.drawImage(f,0,0);function $(_){Q[_?"unshift":"push"](()=>{i=_,a(3,i)})}const B=_=>a(0,p=_.detail),U=()=>{g.pan(0,0)};function C(){o=this.checked,a(5,o)}const T=()=>a(5,o=!o);function A(_){Q[_?"unshift":"push"](()=>{t=_,a(2,t)})}return l.$$.update=()=>{l.$$.dirty&3&&(f.src=n.img.img[p]),l.$$.dirty&130&&r&&n.img&&(a(7,r.canvas.height=Math.max(n.img.dim[0],512),r),a(7,r.canvas.width=n.img.dim[1],r))},[p,n,t,i,g,o,s,r,$,B,U,C,T,A]}class Ie extends X{constructor(e){super();Y(this,e,qe,Ee,x,{})}}export{Ie as P};
