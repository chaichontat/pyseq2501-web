import{S as kt,i as Et,s as $t,ac as ml,e as c,w as Q,c as d,a as h,x,d as f,b as u,g as U,y as ee,q as Y,o as J,B as te,ad as hl,ae as vl,k as P,m as T,t as w,h as y,H as l,j as me,af as gl,W as O,X as Z,U as bl,Y as ns,N as ye,v as kl,ag as El,ah as $l,V as gt,ai as ts,a7 as de,F as Qs,I as xs,J as el,K as tl,aj as wl,ak as yl,M as zl,al as Il,P as sl,Q as ll,a3 as W,T as we,a4 as se,a8 as Nl,O as Ne,Z as ss,f as Pl,_ as ls}from"./vendor-86a163ee.js";import{l as Tl,u as He,a as Fe,s as Ct,c as st,b as Ol}from"./utils-c0f75bea.js";import{G as as,r as Sl}from"./go-85408bec.js";import{t as As}from"./tooltip-8c168986.js";function Cl(e){let t;return{c(){t=c("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),h(t).forEach(f),this.h()},h(){u(t,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(s,n){U(s,t,n)},d(s){s&&f(t)}}}function Dl(e){let t,s=e[3]+"",n;return{c(){t=c("span"),n=w(s),this.h()},l(r){t=d(r,"SPAN",{class:!0});var o=h(t);n=y(o,s),o.forEach(f),this.h()},h(){u(t,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(r,o){U(r,t,o),l(t,n)},p(r,o){o&8&&s!==(s=r[3]+"")&&me(n,s)},d(r){r&&f(t)}}}function Vl(e){let t,s,n,r;return t=new hl({props:{data:e[1],width:80,$$slots:{default:[Cl]},$$scope:{ctx:e}}}),n=new vl({props:{vertical:!0,count:5,$$slots:{default:[Dl,({value:o})=>({3:o}),({value:o})=>o?8:0]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment),s=P(),Q(n.$$.fragment)},l(o){x(t.$$.fragment,o),s=T(o),x(n.$$.fragment,o)},m(o,p){ee(t,o,p),U(o,s,p),ee(n,o,p),r=!0},p(o,p){const a={};p&2&&(a.data=o[1]),p&16&&(a.$$scope={dirty:p,ctx:o}),t.$set(a);const v={};p&24&&(v.$$scope={dirty:p,ctx:o}),n.$set(v)},i(o){r||(Y(t.$$.fragment,o),Y(n.$$.fragment,o),r=!0)},o(o){J(t.$$.fragment,o),J(n.$$.fragment,o),r=!1},d(o){te(t,o),o&&f(s),te(n,o)}}}function Al(e){let t,s,n;return s=new ml({props:{x1:-10,x2:4096+10,y1:0,y2:e[0],$$slots:{default:[Vl]},$$scope:{ctx:e}}}),{c(){t=c("div"),Q(s.$$.fragment),this.h()},l(r){t=d(r,"DIV",{class:!0});var o=h(t);x(s.$$.fragment,o),o.forEach(f),this.h()},h(){u(t,"class","w-full h-full box-border")},m(r,o){U(r,t,o),ee(s,t,null),n=!0},p(r,[o]){const p={};o&1&&(p.y2=r[0]),o&18&&(p.$$scope={dirty:o,ctx:r}),s.$set(p)},i(r){n||(Y(s.$$.fragment,r),n=!0)},o(r){J(s.$$.fragment,r),n=!1},d(r){r&&f(t),te(s)}}}function Ul(e,t){return e.map((s,n)=>({x:s,y:t[n]}))}function Ml(e,t,s){let{hist:n}=t,r,o=[{x:0,y:0},{x:2e3,y:10}];return e.$$set=p=>{"hist"in p&&s(2,n=p.hist)},e.$$.update=()=>{e.$$.dirty&4&&n&&(s(1,o=Ul(n.bin_edges,n.counts)),s(0,r=Math.max(...n.counts)))},[r,o,n]}class Bl extends kt{constructor(t){super();Et(this,t,Ml,Al,$t,{hist:2})}}function ql(e){let t,s,n;return{c(){t=c("button"),s=w("Channel 0"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=h(t);s=y(o,"Channel 0"),o.forEach(f),this.h()},h(){u(t,"class",n=de(lt("green",e[15],e[6].image_params.channels[0]))+" svelte-132l8kq"),O(t,"bg-green-600",e[15])},m(r,o){U(r,t,o),l(t,s)},p(r,o){o&32832&&n!==(n=de(lt("green",r[15],r[6].image_params.channels[0]))+" svelte-132l8kq")&&u(t,"class",n),o&32832&&O(t,"bg-green-600",r[15])},d(r){r&&f(t)}}}function jl(e){let t,s,n;return{c(){t=c("button"),s=w("Channel 1"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=h(t);s=y(o,"Channel 1"),o.forEach(f),this.h()},h(){u(t,"class",n=de(lt("orange",e[15],e[6].image_params.channels[1]))+" svelte-132l8kq"),O(t,"bg-orange-500",e[15])},m(r,o){U(r,t,o),l(t,s)},p(r,o){o&32832&&n!==(n=de(lt("orange",r[15],r[6].image_params.channels[1]))+" svelte-132l8kq")&&u(t,"class",n),o&32832&&O(t,"bg-orange-500",r[15])},d(r){r&&f(t)}}}function Ll(e){let t,s,n;return{c(){t=c("button"),s=w("Channel 2"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=h(t);s=y(o,"Channel 2"),o.forEach(f),this.h()},h(){u(t,"class",n=de(lt("rose",e[15],e[6].image_params.channels[2]))+" svelte-132l8kq"),O(t,"bg-rose-600",e[15])},m(r,o){U(r,t,o),l(t,s)},p(r,o){o&32832&&n!==(n=de(lt("rose",r[15],r[6].image_params.channels[2]))+" svelte-132l8kq")&&u(t,"class",n),o&32832&&O(t,"bg-rose-600",r[15])},d(r){r&&f(t)}}}function Fl(e){let t,s,n;return{c(){t=c("button"),s=w("Channel 3"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=h(t);s=y(o,"Channel 3"),o.forEach(f),this.h()},h(){u(t,"class",n=de(lt("amber",e[15],e[6].image_params.channels[3]))+" svelte-132l8kq"),O(t,"bg-amber-800",e[15])},m(r,o){U(r,t,o),l(t,s)},p(r,o){o&32832&&n!==(n=de(lt("amber",r[15],r[6].image_params.channels[3]))+" svelte-132l8kq")&&u(t,"class",n),o&32832&&O(t,"bg-amber-800",r[15])},d(r){r&&f(t)}}}function Hl(e){let t,s,n,r,o,p,a,v;return t=new ts({props:{disabled:!e[6].image_params.channels[0],$$slots:{default:[ql,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),n=new ts({props:{disabled:!e[6].image_params.channels[1],$$slots:{default:[jl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),o=new ts({props:{disabled:!e[6].image_params.channels[2],$$slots:{default:[Ll,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),a=new ts({props:{disabled:!e[6].image_params.channels[3],$$slots:{default:[Fl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment),s=P(),Q(n.$$.fragment),r=P(),Q(o.$$.fragment),p=P(),Q(a.$$.fragment)},l(i){x(t.$$.fragment,i),s=T(i),x(n.$$.fragment,i),r=T(i),x(o.$$.fragment,i),p=T(i),x(a.$$.fragment,i)},m(i,$){ee(t,i,$),U(i,s,$),ee(n,i,$),U(i,r,$),ee(o,i,$),U(i,p,$),ee(a,i,$),v=!0},p(i,$){const g={};$&64&&(g.disabled=!i[6].image_params.channels[0]),$&98368&&(g.$$scope={dirty:$,ctx:i}),t.$set(g);const b={};$&64&&(b.disabled=!i[6].image_params.channels[1]),$&98368&&(b.$$scope={dirty:$,ctx:i}),n.$set(b);const z={};$&64&&(z.disabled=!i[6].image_params.channels[2]),$&98368&&(z.$$scope={dirty:$,ctx:i}),o.$set(z);const I={};$&64&&(I.disabled=!i[6].image_params.channels[3]),$&98368&&(I.$$scope={dirty:$,ctx:i}),a.$set(I)},i(i){v||(Y(t.$$.fragment,i),Y(n.$$.fragment,i),Y(o.$$.fragment,i),Y(a.$$.fragment,i),v=!0)},o(i){J(t.$$.fragment,i),J(n.$$.fragment,i),J(o.$$.fragment,i),J(a.$$.fragment,i),v=!1},d(i){te(t,i),i&&f(s),te(n,i),i&&f(r),te(o,i),i&&f(p),te(a,i)}}}function Zl(e){let t,s;return t=new $l({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[Hl]},$$scope:{ctx:e}}}),{c(){Q(t.$$.fragment)},l(n){x(t.$$.fragment,n)},m(n,r){ee(t,n,r),s=!0},p(n,r){const o={};r&65600&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){s||(Y(t.$$.fragment,n),s=!0)},o(n){J(t.$$.fragment,n),s=!1},d(n){te(t,n)}}}function Wl(e){let t,s,n,r,o,p,a,v,i,$,g,b,z,I,E,B,_,m,V;return o=new gl({props:{$$slots:{default:[Zl]},$$scope:{ctx:e}}}),o.$on("change",e[9]),B=new Bl({props:{hist:e[1].img.hist[e[0]]}}),{c(){t=c("div"),s=c("canvas"),n=P(),r=c("div"),Q(o.$$.fragment),p=P(),a=c("button"),v=w("Center"),i=P(),$=c("div"),g=c("label"),b=c("input"),z=w(`
      Show Histogram`),I=P(),E=c("div"),Q(B.$$.fragment),this.h()},l(q){t=d(q,"DIV",{id:!0,class:!0});var D=h(t);s=d(D,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),h(s).forEach(f),n=T(D),r=d(D,"DIV",{class:!0});var S=h(r);x(o.$$.fragment,S),S.forEach(f),p=T(D),a=d(D,"BUTTON",{class:!0});var M=h(a);v=y(M,"Center"),M.forEach(f),i=T(D),$=d(D,"DIV",{class:!0});var j=h($);g=d(j,"LABEL",{class:!0});var F=h(g);b=d(F,"INPUT",{type:!0,class:!0}),z=y(F,`
      Show Histogram`),F.forEach(f),j.forEach(f),I=T(D),E=d(D,"DIV",{id:!0,class:!0});var R=h(E);x(B.$$.fragment,R),R.forEach(f),D.forEach(f),this.h()},h(){u(s,"id","canvas"),u(s,"width",2048),u(s,"height",128),u(s,"class","svelte-132l8kq"),u(r,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),u(a,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),u(b,"type","checkbox"),u(b,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),u(g,"class","mx-4 font-medium cursor-pointer"),u($,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),u(E,"id","histogram"),u(E,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),O(E,"hidden",!e[5]),u(t,"id","frame"),u(t,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(q,D){U(q,t,D),l(t,s),e[8](s),l(t,n),l(t,r),ee(o,r,null),l(t,p),l(t,a),l(a,v),l(t,i),l(t,$),l($,g),l(g,b),b.checked=e[5],l(g,z),l(t,I),l(t,E),ee(B,E,null),e[13](t),_=!0,m||(V=[Z(s,"wheel",function(){bl(e[4].zoomWithWheel)&&e[4].zoomWithWheel.apply(this,arguments)}),Z(a,"click",e[10]),Z(b,"change",e[11]),Z(b,"click",e[12])],m=!0)},p(q,[D]){e=q;const S={};D&65600&&(S.$$scope={dirty:D,ctx:e}),o.$set(S),D&32&&(b.checked=e[5]);const M={};D&3&&(M.hist=e[1].img.hist[e[0]]),B.$set(M),D&32&&O(E,"hidden",!e[5])},i(q){_||(Y(o.$$.fragment,q),Y(B.$$.fragment,q),_=!0)},o(q){J(o.$$.fragment,q),J(B.$$.fragment,q),_=!1},d(q){q&&f(t),e[8](null),te(o),te(B),e[13](null),m=!1,ns(V)}}}function lt(e,t,s){return`tab-button ${t?"text-white":`${s?`text-gray-700 hover:text-black bg-white hover:bg-${e}-300`:"text-gray-400"}`}`}function Xl(e,t,s){let n,r;ye(e,Tl,m=>s(1,n=m)),ye(e,He,m=>s(6,r=m));let o,p,a,v,i,$=!0,g=0;kl(()=>{s(7,i=p.getContext("2d")),s(4,v=El(p,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),a=new Image,a.onload=()=>i==null?void 0:i.drawImage(a,0,0);function b(m){gt[m?"unshift":"push"](()=>{p=m,s(3,p)})}const z=m=>s(0,g=m.detail),I=()=>{v.pan(0,0)};function E(){$=this.checked,s(5,$)}const B=()=>s(5,$=!$);function _(m){gt[m?"unshift":"push"](()=>{o=m,s(2,o),s(7,i),s(1,n)})}return e.$$.update=()=>{e.$$.dirty&3&&(a.src=n.img.img[g]),e.$$.dirty&130&&i&&n.img&&(s(7,i.canvas.height=n.img.dim[0],i),s(7,i.canvas.width=n.img.dim[1],i),s(2,o.style.height=`${Math.min(512,n.img.dim[0])}px`,o))},[g,n,o,p,v,$,r,i,b,z,I,E,B,_]}class pa extends kt{constructor(t){super();Et(this,t,Xl,Wl,$t,{})}}const Gl=e=>({}),al=e=>({});function Rl(e){let t,s,n,r,o,p,a;const v=e[3].buttons,i=Qs(v,e,e[2],al),$=e[3].default,g=Qs($,e,e[2],null);return{c(){t=c("span"),i&&i.c(),s=P(),n=c("content"),g&&g.c(),r=P(),o=c("div"),p=c("progress"),this.h()},l(b){t=d(b,"SPAN",{class:!0});var z=h(t);i&&i.l(z),s=T(z),n=d(z,"CONTENT",{class:!0});var I=h(n);g&&g.l(I),r=T(I),o=d(I,"DIV",{class:!0});var E=h(o);p=d(E,"PROGRESS",{class:!0}),h(p).forEach(f),E.forEach(f),I.forEach(f),z.forEach(f),this.h()},h(){u(p,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),p.value=e[1],u(o,"class","mt-1"),u(n,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),u(t,"class","z-40 flex w-full space-x-2")},m(b,z){U(b,t,z),i&&i.m(t,null),l(t,s),l(t,n),g&&g.m(n,null),l(n,r),l(n,o),l(o,p),a=!0},p(b,[z]){i&&i.p&&(!a||z&4)&&xs(i,v,b,b[2],a?tl(v,b[2],z,Gl):el(b[2]),al),g&&g.p&&(!a||z&4)&&xs(g,$,b,b[2],a?tl($,b[2],z,null):el(b[2]),null),(!a||z&2)&&(p.value=b[1])},i(b){a||(Y(i,b),Y(g,b),a=!0)},o(b){J(i,b),J(g,b),a=!1},d(b){b&&f(t),i&&i.d(b),g&&g.d(b)}}}function Yl(e,t,s){let n,r=zl,o=()=>(r(),r=yl(v,i=>s(1,n=i)),v);e.$$.on_destroy.push(()=>r());let{$$slots:p={},$$scope:a}=t;const v=wl(0,{duration:400,easing:Il});return o(),e.$$set=i=>{"$$scope"in i&&s(2,a=i.$$scope)},[v,n,a,p]}class _a extends kt{constructor(t){super();Et(this,t,Yl,Rl,$t,{progress:0})}get progress(){return this.$$.ctx[0]}}function Jl(e){let t;return{c(){t=w("Preview")},l(s){t=y(s,"Preview")},m(s,n){U(s,t,n)},d(s){s&&f(t)}}}function Kl(e){let t,s,n,r,o,p,a,v,i,$,g,b,z,I,E,B,_,m,V,q,D;return m=new as({props:{color:"sky",disabled:e[3],$$slots:{default:[Jl]},$$scope:{ctx:e}}}),m.$on("click",e[11]),{c(){t=c("div"),s=c("div"),n=c("span"),r=w("X"),o=P(),p=c("input"),a=P(),v=c("span"),i=w("Y"),$=P(),g=c("input"),b=P(),z=c("button"),I=sl("svg"),E=sl("path"),B=w(`
    Current`),_=P(),Q(m.$$.fragment),this.h()},l(S){t=d(S,"DIV",{class:!0});var M=h(t);s=d(M,"DIV",{class:!0});var j=h(s);n=d(j,"SPAN",{class:!0});var F=h(n);r=y(F,"X"),F.forEach(f),o=T(j),p=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),a=T(j),v=d(j,"SPAN",{class:!0});var R=h(v);i=y(R,"Y"),R.forEach(f),$=T(j),g=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(f),b=T(M),z=d(M,"BUTTON",{type:!0,class:!0});var re=h(z);I=ll(re,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var A=h(I);E=ll(A,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(E).forEach(f),A.forEach(f),B=y(re,`
    Current`),re.forEach(f),_=T(M),x(m.$$.fragment,M),M.forEach(f),this.h()},h(){u(n,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),O(n,"span-disabled",e[2].block),u(p,"type","number"),u(p,"min","-5"),u(p,"max","30"),u(p,"step","0.01"),u(p,"class","z-10 w-24 h-10 text-center rounded-none pretty"),p.disabled=e[3],u(v,"class","flex items-center color-group svelte-awp8a4"),O(v,"span-disabled",e[2].block),u(g,"type","number"),u(g,"min","-5"),u(g,"max","80"),u(g,"step","0.01"),u(g,"class","z-10 w-24 h-10 text-center rounded-l-none rounded-r-lg pretty"),g.disabled=e[3],u(s,"class","flex font-medium"),u(E,"stroke-linecap","round"),u(E,"stroke-linejoin","round"),u(E,"stroke-width","2"),u(E,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),u(I,"xmlns","http://www.w3.org/2000/svg"),u(I,"class","w-5 h-5 mr-1"),u(I,"fill","none"),u(I,"viewBox","0 0 24 24"),u(I,"stroke","currentColor"),u(z,"type","button"),u(z,"class","px-3 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),z.disabled=e[3],u(t,"class","flex gap-x-2")},m(S,M){U(S,t,M),l(t,s),l(s,n),l(n,r),l(s,o),l(s,p),W(p,e[0][0]),l(s,a),l(s,v),l(v,i),l(s,$),l(s,g),W(g,e[0][1]),l(t,b),l(t,z),l(z,I),l(I,E),l(z,B),l(t,_),ee(m,t,null),V=!0,q||(D=[Z(p,"input",e[7]),Z(p,"change",e[8]),we(Fe.call(null,p,[-5,30])),Z(g,"input",e[9]),Z(g,"change",e[10]),we(Fe.call(null,g,[-5,80])),Z(z,"click",e[6])],q=!0)},p(S,[M]){M&4&&O(n,"span-disabled",S[2].block),(!V||M&8)&&(p.disabled=S[3]),M&1&&se(p.value)!==S[0][0]&&W(p,S[0][0]),M&4&&O(v,"span-disabled",S[2].block),(!V||M&8)&&(g.disabled=S[3]),M&1&&se(g.value)!==S[0][1]&&W(g,S[0][1]),(!V||M&8)&&(z.disabled=S[3]);const j={};M&8&&(j.disabled=S[3]),M&16384&&(j.$$scope={dirty:M,ctx:S}),m.$set(j)},i(S){V||(Y(m.$$.fragment,S),V=!0)},o(S){J(m.$$.fragment,S),V=!1},d(S){S&&f(t),te(m),q=!1,ns(D)}}}function Ql(e,t,s){let n,r,o,p;ye(e,Ct,_=>s(2,n=_)),ye(e,Ct,_=>s(12,r=_)),ye(e,He,_=>s(13,o=_)),ye(e,st,_=>s(4,p=_));const a=Nl();let{i:v}=t,{xy:i=[-1,-1]}=t;function $(){const{x:_,y:m}=Sl(o.image_params.fc,r.x,r.y);s(0,i[0]=Math.round((_+Number.EPSILON)*100)/100,i),s(0,i[1]=Math.round((m+Number.EPSILON)*100)/100,i)}let g=!1;function b(){i[0]=se(this.value),s(0,i)}const z=()=>a("change");function I(){i[1]=se(this.value),s(0,i)}const E=()=>a("change"),B=()=>{Ne(st,p={cmd:`preview${v}`},p),Ne(Ct,n.block="previewing",n)};return e.$$set=_=>{"i"in _&&s(1,v=_.i),"xy"in _&&s(0,i=_.xy)},e.$$.update=()=>{e.$$.dirty&4&&s(3,g=Boolean(n.block))},[i,v,n,g,p,a,$,b,z,I,E,B]}class nl extends kt{constructor(t){super();Et(this,t,Ql,Kl,$t,{i:1,xy:0})}}function xl(e){let t;return{c(){t=w("Set")},l(s){t=y(s,"Set")},m(s,n){U(s,t,n)},d(s){s&&f(t)}}}function ea(e){let t,s,n,r,o,p,a,v,i,$,g,b,z,I,E,B;return{c(){t=c("option"),s=w("Open"),n=c("option"),r=w("0.2"),o=c("option"),p=w("0.5"),a=c("option"),v=w("0.6"),i=c("option"),$=w("1.0"),g=c("option"),b=w("2.4"),z=c("option"),I=w("4.0"),E=c("option"),B=w("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var m=h(t);s=y(m,"Open"),m.forEach(f),n=d(_,"OPTION",{});var V=h(n);r=y(V,"0.2"),V.forEach(f),o=d(_,"OPTION",{});var q=h(o);p=y(q,"0.5"),q.forEach(f),a=d(_,"OPTION",{});var D=h(a);v=y(D,"0.6"),D.forEach(f),i=d(_,"OPTION",{});var S=h(i);$=y(S,"1.0"),S.forEach(f),g=d(_,"OPTION",{});var M=h(g);b=y(M,"2.4"),M.forEach(f),z=d(_,"OPTION",{});var j=h(z);I=y(j,"4.0"),j.forEach(f),E=d(_,"OPTION",{});var F=h(E);B=y(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,n.__value="0.2",n.value=n.__value,o.__value="0.5",o.value=o.__value,a.__value="0.6",a.value=a.__value,i.__value="1.0",i.value=i.__value,g.__value="2.4",g.value=g.__value,z.__value="4.0",z.value=z.__value,E.__value="Closed",E.value=E.__value},m(_,m){U(_,t,m),l(t,s),U(_,n,m),l(n,r),U(_,o,m),l(o,p),U(_,a,m),l(a,v),U(_,i,m),l(i,$),U(_,g,m),l(g,b),U(_,z,m),l(z,I),U(_,E,m),l(E,B)},d(_){_&&f(t),_&&f(n),_&&f(o),_&&f(a),_&&f(i),_&&f(g),_&&f(z),_&&f(E)}}}function ta(e){let t,s,n,r,o,p,a,v,i,$,g,b,z,I,E,B;return{c(){t=c("option"),s=w("Open"),n=c("option"),r=w("1.0"),o=c("option"),p=w("2.0"),a=c("option"),v=w("3.5"),i=c("option"),$=w("3.8"),g=c("option"),b=w("4.0"),z=c("option"),I=w("4.5"),E=c("option"),B=w("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var m=h(t);s=y(m,"Open"),m.forEach(f),n=d(_,"OPTION",{});var V=h(n);r=y(V,"1.0"),V.forEach(f),o=d(_,"OPTION",{});var q=h(o);p=y(q,"2.0"),q.forEach(f),a=d(_,"OPTION",{});var D=h(a);v=y(D,"3.5"),D.forEach(f),i=d(_,"OPTION",{});var S=h(i);$=y(S,"3.8"),S.forEach(f),g=d(_,"OPTION",{});var M=h(g);b=y(M,"4.0"),M.forEach(f),z=d(_,"OPTION",{});var j=h(z);I=y(j,"4.5"),j.forEach(f),E=d(_,"OPTION",{});var F=h(E);B=y(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,n.__value="1.0",n.value=n.__value,o.__value="2.0",o.value=o.__value,a.__value="3.5",a.value=a.__value,i.__value="3.8",i.value=i.__value,g.__value="4.0",g.value=g.__value,z.__value="4.5",z.value=z.__value,E.__value="Closed",E.value=E.__value},m(_,m){U(_,t,m),l(t,s),U(_,n,m),l(n,r),U(_,o,m),l(o,p),U(_,a,m),l(a,v),U(_,i,m),l(i,$),U(_,g,m),l(g,b),U(_,z,m),l(z,I),U(_,E,m),l(E,B)},d(_){_&&f(t),_&&f(n),_&&f(o),_&&f(a),_&&f(i),_&&f(g),_&&f(z),_&&f(E)}}}function sa(e){let t,s,n,r,o,p,a,v=(Boolean(e[1])?660:532)+"",i,$,g,b,z,I,E,B,_,m,V,q,D=2*e[1]+"",S,M,j,F,R,re,A=2*e[1]+1+"",Pe,K,he,at,ie,Te,ge,nt,ue=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",Ze,ot,X,be,Se;E=new as({props:{disabled:e[4].block,$$slots:{default:[xl]},$$scope:{ctx:e}}}),E.$on("click",e[8]);function _t(N,L){return N[1]==0?ta:ea}let We=_t(e),H=We(e);return{c(){t=c("p"),s=c("span"),n=c("label"),r=c("input"),p=P(),a=c("div"),i=w(v),$=w(" nm"),g=P(),b=c("input"),I=w(`
    mW
    `),Q(E.$$.fragment),B=P(),_=c("label"),m=c("input"),q=w(`
    Channel `),S=w(D),M=P(),j=c("label"),F=c("input"),re=w(`
    Channel `),Pe=w(A),K=P(),he=c("span"),at=w(`Filter OD
    `),ie=c("select"),H.c(),Te=P(),ge=c("p"),nt=w("Effective: "),Ze=w(ue),ot=w(" mW"),this.h()},l(N){t=d(N,"P",{class:!0});var L=h(t);s=d(L,"SPAN",{class:!0});var G=h(s);n=d(G,"LABEL",{});var ce=h(n);r=d(ce,"INPUT",{type:!0,class:!0}),p=T(ce),a=d(ce,"DIV",{class:!0});var Ce=h(a);i=y(Ce,v),$=y(Ce," nm"),Ce.forEach(f),ce.forEach(f),g=T(G),b=d(G,"INPUT",{type:!0,class:!0,min:!0,max:!0}),I=y(G,`
    mW
    `),x(E.$$.fragment,G),G.forEach(f),B=T(L),_=d(L,"LABEL",{class:!0});var De=h(_);m=d(De,"INPUT",{type:!0,class:!0}),q=y(De,`
    Channel `),S=y(De,D),De.forEach(f),M=T(L),j=d(L,"LABEL",{class:!0});var Xe=h(j);F=d(Xe,"INPUT",{type:!0,class:!0}),re=y(Xe,`
    Channel `),Pe=y(Xe,A),Xe.forEach(f),K=T(L),he=d(L,"SPAN",{class:!0});var ze=h(he);at=y(ze,`Filter OD
    `),ie=d(ze,"SELECT",{class:!0});var rt=h(ie);H.l(rt),rt.forEach(f),Te=T(ze),ge=d(ze,"P",{class:!0});var Ge=h(ge);nt=y(Ge,"Effective: "),Ze=y(Ge,ue),ot=y(Ge," mW"),Ge.forEach(f),ze.forEach(f),L.forEach(f),this.h()},h(){u(r,"type","checkbox"),u(r,"class",o=de(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),u(a,"class","inline font-semibold"),O(a,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),O(a,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),u(b,"type","number"),u(b,"class","w-[4.5rem] h-8 pr-2 pretty"),u(b,"min","0"),u(b,"max","500"),b.disabled=z=!e[0].laser_onoff[e[1]],O(b,"pretty-disabled",!e[0].laser_onoff[0]),u(s,"class","flex items-center gap-x-2"),O(s,"text-gray-400",!e[0].laser_onoff[e[1]]),u(m,"type","checkbox"),u(m,"class",V=de(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),u(_,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),O(_,"text-gray-400",!e[0].channels[2*e[1]]),u(F,"type","checkbox"),u(F,"class",R=de(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),u(j,"class","channel svelte-6ipz4o"),O(j,"text-gray-400",!e[0].channels[2*e[1]+1]),u(ie,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"),u(ge,"class","ml-3 text-sm font-medium"),u(he,"class","ml-8 font-normal opacity-85"),u(t,"class","flex flex-col")},m(N,L){U(N,t,L),l(t,s),l(s,n),l(n,r),r.checked=e[0].laser_onoff[e[1]],l(n,p),l(n,a),l(a,i),l(a,$),l(s,g),l(s,b),W(b,e[0].lasers[e[1]]),l(s,I),ee(E,s,null),l(t,B),l(t,_),l(_,m),m.checked=e[0].channels[2*e[1]],l(_,q),l(_,S),l(t,M),l(t,j),l(j,F),F.checked=e[0].channels[2*e[1]+1],l(j,re),l(j,Pe),l(t,K),l(t,he),l(he,at),l(he,ie),H.m(ie,null),l(he,Te),l(he,ge),l(ge,nt),l(ge,Ze),l(ge,ot),X=!0,be||(Se=[Z(r,"change",e[6]),Z(b,"input",e[7]),we(Fe.call(null,b,[0,500])),Z(m,"change",e[9]),Z(F,"change",e[10]),Z(ie,"change",e[5])],be=!0)},p(N,[L]){(!X||L&2&&o!==(o=de(`rounded mr-1 ${N[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&u(r,"class",o),L&3&&(r.checked=N[0].laser_onoff[N[1]]),(!X||L&2)&&v!==(v=(Boolean(N[1])?660:532)+"")&&me(i,v),L&3&&O(a,"text-green-800",N[0].laser_onoff[N[1]]&&!N[1]),L&3&&O(a,"text-red-800",N[0].laser_onoff[N[1]]&&N[1]),(!X||L&3&&z!==(z=!N[0].laser_onoff[N[1]]))&&(b.disabled=z),L&3&&se(b.value)!==N[0].lasers[N[1]]&&W(b,N[0].lasers[N[1]]),L&1&&O(b,"pretty-disabled",!N[0].laser_onoff[0]);const G={};L&16&&(G.disabled=N[4].block),L&2048&&(G.$$scope={dirty:L,ctx:N}),E.$set(G),L&3&&O(s,"text-gray-400",!N[0].laser_onoff[N[1]]),(!X||L&2&&V!==(V=de(`mr-1 rounded ${N[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&u(m,"class",V),L&3&&(m.checked=N[0].channels[2*N[1]]),(!X||L&2)&&D!==(D=2*N[1]+"")&&me(S,D),L&3&&O(_,"text-gray-400",!N[0].channels[2*N[1]]),(!X||L&2&&R!==(R=de(`mr-1 rounded ${N[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&u(F,"class",R),L&3&&(F.checked=N[0].channels[2*N[1]+1]),(!X||L&2)&&A!==(A=2*N[1]+1+"")&&me(Pe,A),L&3&&O(j,"text-gray-400",!N[0].channels[2*N[1]+1]),We!==(We=_t(N))&&(H.d(1),H=We(N),H&&(H.c(),H.m(ie,null))),(!X||L&3)&&ue!==(ue=(Number(N[0].od[N[1]]!=-1)*N[0].lasers[N[1]]*Math.pow(10,-N[0].od[N[1]])).toFixed(4)+"")&&me(Ze,ue)},i(N){X||(Y(E.$$.fragment,N),X=!0)},o(N){J(E.$$.fragment,N),X=!1},d(N){N&&f(t),te(E),H.d(),be=!1,ns(Se)}}}function la(e,t,s){let n,r,o;ye(e,st,I=>s(2,n=I)),ye(e,He,I=>s(3,r=I)),ye(e,Ct,I=>s(4,o=I));let{params:p}=t,{i:a}=t;function v(I){let E;switch(I.currentTarget.value){case"Open":E=0;break;case"Closed":E=-1;break;default:E=Number(I.currentTarget.value)}s(0,p.od[a]=E,p),Ne(He,r.image_params.od[a]=p.od[a],r),Ne(st,n={move:{od:a===0?[p.od[a],void 0]:[void 0,p.od[a]]}},n)}function i(){p.laser_onoff[a]=this.checked,s(0,p)}function $(){p.lasers[a]=se(this.value),s(0,p)}const g=()=>{Ne(He,r.image_params.laser_onoff[a]=p.laser_onoff[a],r),Ne(He,r.image_params.lasers[a]=p.lasers[a],r),Ne(st,n={move:{lasers:a===0?[p.lasers[a],void 0]:[void 0,p.lasers[a]],laser_onoff:a===0?[p.laser_onoff[a],void 0]:[void 0,p.laser_onoff[a]]}},n)};function b(){p.channels[2*a]=this.checked,s(0,p)}function z(){p.channels[2*a+1]=this.checked,s(0,p)}return e.$$set=I=>{"params"in I&&s(0,p=I.params),"i"in I&&s(1,a=I.i)},[p,a,n,r,o,v,i,$,g,b,z]}class ol extends kt{constructor(t){super();Et(this,t,la,sa,$t,{params:0,i:1})}}function rl(e){let t,s,n,r,o,p;return{c(){t=c("p"),s=w("Image Path"),n=P(),r=c("input"),this.h()},l(a){t=d(a,"P",{class:!0});var v=h(t);s=y(v,"Image Path"),v.forEach(f),n=T(a),r=d(a,"INPUT",{type:!0,class:!0}),this.h()},h(){u(t,"class","text-lg svelte-1m4l8fo"),u(r,"type","text"),u(r,"class","flex-grow max-w-[470px] mb-4 pretty"),O(r,"invalid",!e[0].path)},m(a,v){U(a,t,v),l(t,s),U(a,n,v),U(a,r,v),W(r,e[0].path),o||(p=Z(r,"input",e[10]),o=!0)},p(a,v){v&1&&r.value!==a[0].path&&W(r,a[0].path),v&1&&O(r,"invalid",!a[0].path)},d(a){a&&f(t),a&&f(n),a&&f(r),o=!1,p()}}}function il(e){let t;return{c(){t=w("per z-stack.")},l(s){t=y(s,"per z-stack.")},m(s,n){U(s,t,n)},d(s){s&&f(t)}}}function ul(e){let t,s=e[1].n_z+"",n,r,o,p=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",a,v,i=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",$,g,b,z,I=(e[1].n_z?bt(e[1].n_z*e[1].time):bt(e[1].time))+"",E,B,_=e[1].n_z>1&&fl();return{c(){t=c("div"),n=w(s),r=w(" Z step"),_&&_.c(),o=w(" from "),a=w(p),v=w(" to "),$=w(i),g=P(),b=c("div"),z=w("Total time: "),E=w(I),B=w("."),this.h()},l(m){t=d(m,"DIV",{class:!0});var V=h(t);n=y(V,s),r=y(V," Z step"),_&&_.l(V),o=y(V," from "),a=y(V,p),v=y(V," to "),$=y(V,i),V.forEach(f),g=T(m),b=d(m,"DIV",{class:!0});var q=h(b);z=y(q,"Total time: "),E=y(q,I),B=y(q,"."),q.forEach(f),this.h()},h(){u(t,"class","px-2 font-base"),u(b,"class","px-2 font-semibold")},m(m,V){U(m,t,V),l(t,n),l(t,r),_&&_.m(t,null),l(t,o),l(t,a),l(t,v),l(t,$),U(m,g,V),U(m,b,V),l(b,z),l(b,E),l(b,B)},p(m,V){V&2&&s!==(s=m[1].n_z+"")&&me(n,s),m[1].n_z>1?_||(_=fl(),_.c(),_.m(t,o)):_&&(_.d(1),_=null),V&1&&p!==(p=m[0].z_obj+m[0].z_from*m[0].z_spacing+"")&&me(a,p),V&1&&i!==(i=m[0].z_obj+m[0].z_to*m[0].z_spacing+"")&&me($,i),V&2&&I!==(I=(m[1].n_z?bt(m[1].n_z*m[1].time):bt(m[1].time))+"")&&me(E,I)},d(m){m&&f(t),_&&_.d(),m&&f(g),m&&f(b)}}}function fl(e){let t;return{c(){t=w("s")},l(s){t=y(s,"s")},m(s,n){U(s,t,n)},d(s){s&&f(t)}}}function aa(e){let t,s,n,r,o,p,a,v,i,$,g,b,z,I,E,B,_,m,V,q,D,S,M,j,F,R,re,A,Pe,K,he,at,ie,Te,ge,nt,ue,Ze,ot,X,be,Se,_t,We,H,N,L,G,ce,Ce=e[1].width.toFixed(2)+"",De,Xe,ze=e[1].height.toFixed(2)+"",rt,Ge,os,Ve,wt=e[1].n_cols+"",Dt,rs,yt=e[1].n_bundles+"",Vt,is,us,Ie,zt=bt(e[1].time)+"",At,fs,ps,Re,ct,_s,cs,Ye,Je,it,dt,ds,ms,Ke,ke,hs,Ae,vs,ut,mt,gs,bs,Qe,Ee,ks,Ue,Es,xe,et,Oe,Ut,$s,Me,tt,ws,ys,zs,le,Be,Is,Ns,ae,Mt,Ps,qe,Ts,Os,ne,Bt,Ss,je,Cs,Ds,oe,qt,ve,Vs,Us,fe=!e[3]&&rl(e);function pl(k){e[11](k)}let Ms={i:0};e[0]!==void 0&&(Ms.params=e[0]),E=new ol({props:Ms}),gt.push(()=>ss(E,"params",pl));function _l(k){e[12](k)}let Bs={i:1};e[0]!==void 0&&(Bs.params=e[0]),m=new ol({props:Bs}),gt.push(()=>ss(m,"params",_l));function cl(k){e[13](k)}let qs={i:0};e[0].xy0!==void 0&&(qs.xy=e[0].xy0),K=new nl({props:qs}),gt.push(()=>ss(K,"xy",cl)),K.$on("change",e[6]);function dl(k){e[14](k)}let js={i:1};e[0].xy1!==void 0&&(js.xy=e[0].xy1),ue=new nl({props:js}),gt.push(()=>ss(ue,"xy",dl)),ue.$on("change",e[6]);let _e=e[2]&&il();Ae=new as({props:{disabled:e[4].block}}),Ae.$on("click",e[17]),Ue=new as({props:{disabled:e[4].block}}),Ue.$on("click",e[19]);let pe=e[2]&&ul(e);return{c(){t=c("div"),s=c("section"),n=c("p"),r=w("Name"),o=P(),p=c("div"),a=c("input"),v=P(),fe&&fe.c(),i=P(),$=c("section"),g=c("h2"),b=w("Laser and Channels"),z=P(),I=c("div"),Q(E.$$.fragment),_=P(),Q(m.$$.fragment),q=P(),D=c("section"),S=c("h2"),M=w("Positions"),j=P(),F=c("div"),R=c("div"),re=c("p"),A=w("\u{1F4CC} Corner 1"),Pe=P(),Q(K.$$.fragment),at=P(),ie=c("div"),Te=c("p"),ge=w("\u{1F4CD} Corner 2"),nt=P(),Q(ue.$$.fragment),ot=P(),X=c("div"),be=c("div"),Se=c("p"),_t=w("X-Overlap"),We=P(),H=c("input"),N=w(`
          (0-1)`),L=P(),G=c("div"),ce=c("span"),De=w(Ce),Xe=w(" \xD7 "),rt=w(ze),Ge=w(" mm."),os=P(),Ve=c("span"),Dt=w(wt),rs=w(" columns of "),Vt=w(yt),is=w(" bundles."),us=P(),Ie=c("span"),At=w(zt),fs=P(),_e&&_e.c(),ps=P(),Re=c("section"),ct=c("h2"),_s=w("Focus"),cs=P(),Ye=c("div"),Je=c("div"),it=c("div"),dt=c("p"),ds=w("Z Tilt"),ms=P(),Ke=c("div"),ke=c("input"),hs=P(),Q(Ae.$$.fragment),vs=P(),ut=c("div"),mt=c("p"),gs=w("Z Objective"),bs=P(),Qe=c("span"),Ee=c("input"),ks=P(),Q(Ue.$$.fragment),Es=P(),xe=c("div"),et=c("label"),Oe=c("input"),$s=P(),Me=c("div"),tt=c("div"),ws=w("Z-Stack"),ys=P(),pe&&pe.c(),zs=P(),le=c("div"),Be=c("span"),Is=w("Spacing"),Ns=P(),ae=c("input"),Ps=P(),qe=c("span"),Ts=w("From"),Os=P(),ne=c("input"),Ss=P(),je=c("span"),Cs=w("To"),Ds=P(),oe=c("input"),this.h()},l(k){t=d(k,"DIV",{id:!0,class:!0,style:!0});var C=h(t);s=d(C,"SECTION",{class:!0});var Le=h(s);n=d(Le,"P",{class:!0});var It=h(n);r=y(It,"Name"),It.forEach(f),o=T(Le),p=d(Le,"DIV",{class:!0});var Nt=h(p);a=d(Nt,"INPUT",{type:!0,class:!0}),Nt.forEach(f),v=T(Le),fe&&fe.l(Le),Le.forEach(f),i=T(C),$=d(C,"SECTION",{class:!0});var ft=h($);g=d(ft,"H2",{class:!0});var Pt=h(g);b=y(Pt,"Laser and Channels"),Pt.forEach(f),z=T(ft),I=d(ft,"DIV",{class:!0});var pt=h(I);x(E.$$.fragment,pt),_=T(pt),x(m.$$.fragment,pt),pt.forEach(f),ft.forEach(f),q=T(C),D=d(C,"SECTION",{class:!0});var jt=h(D);S=d(jt,"H2",{class:!0});var Ls=h(S);M=y(Ls,"Positions"),Ls.forEach(f),j=T(jt),F=d(jt,"DIV",{class:!0});var ht=h(F);R=d(ht,"DIV",{});var Lt=h(R);re=d(Lt,"P",{class:!0});var Fs=h(re);A=y(Fs,"\u{1F4CC} Corner 1"),Fs.forEach(f),Pe=T(Lt),x(K.$$.fragment,Lt),Lt.forEach(f),at=T(ht),ie=d(ht,"DIV",{});var Ft=h(ie);Te=d(Ft,"P",{class:!0});var Hs=h(Te);ge=y(Hs,"\u{1F4CD} Corner 2"),Hs.forEach(f),nt=T(Ft),x(ue.$$.fragment,Ft),Ft.forEach(f),ot=T(ht),X=d(ht,"DIV",{class:!0});var Ht=h(X);be=d(Ht,"DIV",{});var Tt=h(be);Se=d(Tt,"P",{class:!0});var Zs=h(Se);_t=y(Zs,"X-Overlap"),Zs.forEach(f),We=T(Tt),H=d(Tt,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),N=y(Tt,`
          (0-1)`),Tt.forEach(f),L=T(Ht),G=d(Ht,"DIV",{class:!0});var vt=h(G);ce=d(vt,"SPAN",{class:!0});var Ot=h(ce);De=y(Ot,Ce),Xe=y(Ot," \xD7 "),rt=y(Ot,ze),Ge=y(Ot," mm."),Ot.forEach(f),os=T(vt),Ve=d(vt,"SPAN",{class:!0});var St=h(Ve);Dt=y(St,wt),rs=y(St," columns of "),Vt=y(St,yt),is=y(St," bundles."),St.forEach(f),us=T(vt),Ie=d(vt,"SPAN",{class:!0});var Zt=h(Ie);At=y(Zt,zt),fs=T(Zt),_e&&_e.l(Zt),Zt.forEach(f),vt.forEach(f),Ht.forEach(f),ht.forEach(f),jt.forEach(f),ps=T(C),Re=d(C,"SECTION",{class:!0});var Wt=h(Re);ct=d(Wt,"H2",{class:!0});var Ws=h(ct);_s=y(Ws,"Focus"),Ws.forEach(f),cs=T(Wt),Ye=d(Wt,"DIV",{class:!0});var Xt=h(Ye);Je=d(Xt,"DIV",{class:!0});var Gt=h(Je);it=d(Gt,"DIV",{});var Rt=h(it);dt=d(Rt,"P",{class:!0});var Xs=h(dt);ds=y(Xs,"Z Tilt"),Xs.forEach(f),ms=T(Rt),Ke=d(Rt,"DIV",{class:!0});var Yt=h(Ke);ke=d(Yt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),hs=T(Yt),x(Ae.$$.fragment,Yt),Yt.forEach(f),Rt.forEach(f),vs=T(Gt),ut=d(Gt,"DIV",{});var Jt=h(ut);mt=d(Jt,"P",{class:!0});var Gs=h(mt);gs=y(Gs,"Z Objective"),Gs.forEach(f),bs=T(Jt),Qe=d(Jt,"SPAN",{class:!0});var Kt=h(Qe);Ee=d(Kt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),ks=T(Kt),x(Ue.$$.fragment,Kt),Kt.forEach(f),Jt.forEach(f),Gt.forEach(f),Es=T(Xt),xe=d(Xt,"DIV",{class:!0});var Qt=h(xe);et=d(Qt,"LABEL",{class:!0});var xt=h(et);Oe=d(xt,"INPUT",{type:!0,class:!0}),$s=T(xt),Me=d(xt,"DIV",{class:!0});var es=h(Me);tt=d(es,"DIV",{class:!0});var Rs=h(tt);ws=y(Rs,"Z-Stack"),Rs.forEach(f),ys=T(es),pe&&pe.l(es),es.forEach(f),xt.forEach(f),zs=T(Qt),le=d(Qt,"DIV",{class:!0,id:!0});var $e=h(le);Be=d($e,"SPAN",{class:!0});var Ys=h(Be);Is=y(Ys,"Spacing"),Ys.forEach(f),Ns=T($e),ae=d($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ps=T($e),qe=d($e,"SPAN",{class:!0});var Js=h(qe);Ts=y(Js,"From"),Js.forEach(f),Os=T($e),ne=d($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ss=T($e),je=d($e,"SPAN",{class:!0});var Ks=h(je);Cs=y(Ks,"To"),Ks.forEach(f),Ds=T($e),oe=d($e,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),$e.forEach(f),Qt.forEach(f),Xt.forEach(f),Wt.forEach(f),C.forEach(f),this.h()},h(){u(n,"class","mt-1 text-lg svelte-1m4l8fo"),u(a,"type","text"),u(a,"class","flex-grow h-12 mb-4 text-lg pretty"),O(a,"invalid",e[7](e[0].name)),u(p,"class","flex-grow flex gap-x-2 max-w-[470px]"),u(s,"class","flex flex-col text-lg font-medium"),u(g,"class","svelte-1m4l8fo"),u(I,"class","grid grid-cols-2 min-w-[600px]"),O(I,"opacity-70",e[4].block),u($,"class","font-medium leading-10 "),u(S,"class","svelte-1m4l8fo"),u(re,"class","svelte-1m4l8fo"),u(Te,"class","svelte-1m4l8fo"),u(Se,"class","svelte-1m4l8fo"),u(H,"type","number"),u(H,"class","w-20 pr-2 pretty"),u(H,"step","0.01"),u(H,"min","0"),u(H,"max","0.99"),u(ce,"class","tabular-nums"),u(Ve,"class","tabular-nums"),u(Ie,"class","tabular-nums"),O(Ie,"font-semibold",!e[2]),u(G,"class","flex flex-col justify-center font-normal"),u(X,"class","flex gap-8"),u(F,"class","-mt-1 space-y-4"),u(D,"class","flex flex-col gap-2"),O(D,"-mt-20",e[3]),u(ct,"class","svelte-1m4l8fo"),u(dt,"class","svelte-1m4l8fo"),u(ke,"type","number"),u(ke,"class","w-28 pretty"),u(ke,"min","0"),u(ke,"max","25000"),u(Ke,"class","flex gap-2"),u(mt,"class","svelte-1m4l8fo"),u(Ee,"type","number"),u(Ee,"class","w-28 pretty"),u(Ee,"min","0"),u(Ee,"max","60000"),u(Qe,"class","flex gap-2"),u(Je,"class","flex space-x-8"),u(Oe,"type","checkbox"),u(Oe,"class","mr-1 rounded focus:ring-blue-600"),Oe.disabled=Ut=e[4].block==="capturing",u(tt,"class","pr-2"),O(tt,"font-medium",e[2]),u(Me,"class","flex divide-x-2"),u(et,"class","flex items-center gap-x-1"),u(Be,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),O(Be,"span-disabled",e[4].block||!e[2]),u(ae,"type","number"),u(ae,"min","1"),u(ae,"max","60000"),u(ae,"step","1"),u(ae,"class","z-10 h-10 text-center rounded-none pretty w-28"),ae.disabled=Mt=e[4].block||!e[2],O(ae,"disabled",e[4].block||!e[2]),u(qe,"class","flex items-center color-group svelte-1m4l8fo"),O(qe,"span-disabled",e[4].block||!e[2]),u(ne,"type","number"),u(ne,"min","-100"),u(ne,"max","100"),u(ne,"step","1"),u(ne,"class","z-10 w-16 h-10 text-center rounded-none pretty"),ne.disabled=Bt=e[4].block||!e[2],O(ne,"disabled",e[4].block||!e[2]),u(je,"class","flex items-center color-group svelte-1m4l8fo"),O(je,"span-disabled",e[4].block||!e[2]),u(oe,"type","number"),u(oe,"min","-100"),u(oe,"max","100"),u(oe,"step","1"),u(oe,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),oe.disabled=qt=e[4].block||!e[2],O(oe,"disabled",e[4].block||!e[2]),u(le,"class","flex font-medium"),u(le,"id","zBox"),u(xe,"class","space-y-2"),u(Ye,"class","-mt-1 space-y-4"),u(Re,"class","flex flex-col gap-2"),u(t,"id","control"),u(t,"class","grid gap-y-6"),Pl(t,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(k,C){U(k,t,C),l(t,s),l(s,n),l(n,r),l(s,o),l(s,p),l(p,a),W(a,e[0].name),l(s,v),fe&&fe.m(s,null),l(t,i),l(t,$),l($,g),l(g,b),l($,z),l($,I),ee(E,I,null),l(I,_),ee(m,I,null),l(t,q),l(t,D),l(D,S),l(S,M),l(D,j),l(D,F),l(F,R),l(R,re),l(re,A),l(R,Pe),ee(K,R,null),l(F,at),l(F,ie),l(ie,Te),l(Te,ge),l(ie,nt),ee(ue,ie,null),l(F,ot),l(F,X),l(X,be),l(be,Se),l(Se,_t),l(be,We),l(be,H),W(H,e[0].overlap),l(be,N),l(X,L),l(X,G),l(G,ce),l(ce,De),l(ce,Xe),l(ce,rt),l(ce,Ge),l(G,os),l(G,Ve),l(Ve,Dt),l(Ve,rs),l(Ve,Vt),l(Ve,is),l(G,us),l(G,Ie),l(Ie,At),l(Ie,fs),_e&&_e.m(Ie,null),l(t,ps),l(t,Re),l(Re,ct),l(ct,_s),l(Re,cs),l(Re,Ye),l(Ye,Je),l(Je,it),l(it,dt),l(dt,ds),l(it,ms),l(it,Ke),l(Ke,ke),W(ke,e[0].z_tilt),l(Ke,hs),ee(Ae,Ke,null),l(Je,vs),l(Je,ut),l(ut,mt),l(mt,gs),l(ut,bs),l(ut,Qe),l(Qe,Ee),W(Ee,e[0].z_obj),l(Qe,ks),ee(Ue,Qe,null),l(Ye,Es),l(Ye,xe),l(xe,et),l(et,Oe),Oe.checked=e[2],l(et,$s),l(et,Me),l(Me,tt),l(tt,ws),l(Me,ys),pe&&pe.m(Me,null),l(xe,zs),l(xe,le),l(le,Be),l(Be,Is),l(le,Ns),l(le,ae),W(ae,e[0].z_spacing),l(le,Ps),l(le,qe),l(qe,Ts),l(le,Os),l(le,ne),W(ne,e[0].z_from),l(le,Ss),l(le,je),l(je,Cs),l(le,Ds),l(le,oe),W(oe,e[0].z_to),ve=!0,Vs||(Us=[Z(a,"input",e[9]),Z(H,"input",e[15]),we(Fe.call(null,H,[.01,.99])),Z(ke,"input",e[16]),we(Fe.call(null,ke,[0,25e3])),Z(Ee,"input",e[18]),we(Fe.call(null,Ee,[0,6e4])),Z(Oe,"change",e[20]),we(As.call(null,Be,"Nyquist is 232.")),Z(ae,"input",e[21]),we(Fe.call(null,ae,[1,6e4])),we(As.call(null,qe,"Multiple of Spacing")),Z(ne,"input",e[22]),we(Fe.call(null,ne,[-100,100])),we(As.call(null,je,"Multiple of Spacing")),Z(oe,"input",e[23]),we(Fe.call(null,oe,[-100,100]))],Vs=!0)},p(k,[C]){C&1&&a.value!==k[0].name&&W(a,k[0].name),C&129&&O(a,"invalid",k[7](k[0].name)),k[3]?fe&&(fe.d(1),fe=null):fe?fe.p(k,C):(fe=rl(k),fe.c(),fe.m(s,null));const Le={};!B&&C&1&&(B=!0,Le.params=k[0],ls(()=>B=!1)),E.$set(Le);const It={};!V&&C&1&&(V=!0,It.params=k[0],ls(()=>V=!1)),m.$set(It),C&16&&O(I,"opacity-70",k[4].block);const Nt={};!he&&C&1&&(he=!0,Nt.xy=k[0].xy0,ls(()=>he=!1)),K.$set(Nt);const ft={};!Ze&&C&1&&(Ze=!0,ft.xy=k[0].xy1,ls(()=>Ze=!1)),ue.$set(ft),C&1&&se(H.value)!==k[0].overlap&&W(H,k[0].overlap),(!ve||C&2)&&Ce!==(Ce=k[1].width.toFixed(2)+"")&&me(De,Ce),(!ve||C&2)&&ze!==(ze=k[1].height.toFixed(2)+"")&&me(rt,ze),(!ve||C&2)&&wt!==(wt=k[1].n_cols+"")&&me(Dt,wt),(!ve||C&2)&&yt!==(yt=k[1].n_bundles+"")&&me(Vt,yt),(!ve||C&2)&&zt!==(zt=bt(k[1].time)+"")&&me(At,zt),k[2]?_e||(_e=il(),_e.c(),_e.m(Ie,null)):_e&&(_e.d(1),_e=null),C&4&&O(Ie,"font-semibold",!k[2]),C&8&&O(D,"-mt-20",k[3]),C&1&&se(ke.value)!==k[0].z_tilt&&W(ke,k[0].z_tilt);const Pt={};C&16&&(Pt.disabled=k[4].block),Ae.$set(Pt),C&1&&se(Ee.value)!==k[0].z_obj&&W(Ee,k[0].z_obj);const pt={};C&16&&(pt.disabled=k[4].block),Ue.$set(pt),(!ve||C&16&&Ut!==(Ut=k[4].block==="capturing"))&&(Oe.disabled=Ut),C&4&&(Oe.checked=k[2]),C&4&&O(tt,"font-medium",k[2]),k[2]?pe?pe.p(k,C):(pe=ul(k),pe.c(),pe.m(Me,null)):pe&&(pe.d(1),pe=null),C&20&&O(Be,"span-disabled",k[4].block||!k[2]),(!ve||C&20&&Mt!==(Mt=k[4].block||!k[2]))&&(ae.disabled=Mt),C&1&&se(ae.value)!==k[0].z_spacing&&W(ae,k[0].z_spacing),C&20&&O(ae,"disabled",k[4].block||!k[2]),C&20&&O(qe,"span-disabled",k[4].block||!k[2]),(!ve||C&20&&Bt!==(Bt=k[4].block||!k[2]))&&(ne.disabled=Bt),C&1&&se(ne.value)!==k[0].z_from&&W(ne,k[0].z_from),C&20&&O(ne,"disabled",k[4].block||!k[2]),C&20&&O(je,"span-disabled",k[4].block||!k[2]),(!ve||C&20&&qt!==(qt=k[4].block||!k[2]))&&(oe.disabled=qt),C&1&&se(oe.value)!==k[0].z_to&&W(oe,k[0].z_to),C&20&&O(oe,"disabled",k[4].block||!k[2])},i(k){ve||(Y(E.$$.fragment,k),Y(m.$$.fragment,k),Y(K.$$.fragment,k),Y(ue.$$.fragment,k),Y(Ae.$$.fragment,k),Y(Ue.$$.fragment,k),ve=!0)},o(k){J(E.$$.fragment,k),J(m.$$.fragment,k),J(K.$$.fragment,k),J(ue.$$.fragment,k),J(Ae.$$.fragment,k),J(Ue.$$.fragment,k),ve=!1},d(k){k&&f(t),fe&&fe.d(),te(E),te(m),te(K),te(ue),_e&&_e.d(),te(Ae),te(Ue),pe&&pe.d(),Vs=!1,ns(Us)}}}function na(e,t){e&&(e.querySelectorAll("input").forEach(s=>s.disabled=t),e.querySelectorAll("select").forEach(s=>s.disabled=t),e.querySelectorAll("button").forEach(s=>s.disabled=t))}function bt(e){const t=new Date(e*1e3).toISOString();return e>3600?`${t.substring(11,19)} hrs`:`${t.substring(14,19)} mins`}function oa(e,t,s){let n,r,o;ye(e,Ct,A=>s(4,n=A)),ye(e,He,A=>s(24,r=A)),ye(e,st,A=>s(5,o=A));let{inAuto:p=!0}=t,{params:a}=t,{stats:v={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=t,{z_stack:i=!1}=t,{fc_:$=0}=t;function g(){Ne(He,r.image_params.xy0=a.xy0,r),Ne(He,r.image_params.xy1=a.xy1,r)}function b(A){if(!A)return!0;if(!p)return!1;const Pe=r.exps[$].cmds.filter(K=>K.cmd.op==="takeimage").map(K=>K.cmd.name);return Ol(Pe)[A]>1}function z(){a.name=this.value,s(0,a)}function I(){a.path=this.value,s(0,a)}function E(A){a=A,s(0,a)}function B(A){a=A,s(0,a)}function _(A){e.$$.not_equal(a.xy0,A)&&(a.xy0=A,s(0,a))}function m(A){e.$$.not_equal(a.xy1,A)&&(a.xy1=A,s(0,a))}function V(){a.overlap=se(this.value),s(0,a)}function q(){a.z_tilt=se(this.value),s(0,a)}const D=()=>Ne(st,o={move:{z_tilt:a.z_tilt}},o);function S(){a.z_obj=se(this.value),s(0,a)}const M=()=>Ne(st,o={move:{z_obj:a.z_obj}},o);function j(){i=this.checked,s(2,i)}function F(){a.z_spacing=se(this.value),s(0,a)}function R(){a.z_from=se(this.value),s(0,a)}function re(){a.z_to=se(this.value),s(0,a)}return e.$$set=A=>{"inAuto"in A&&s(3,p=A.inAuto),"params"in A&&s(0,a=A.params),"stats"in A&&s(1,v=A.stats),"z_stack"in A&&s(2,i=A.z_stack),"fc_"in A&&s(8,$=A.fc_)},e.$$.update=()=>{e.$$.dirty&16&&na(document.getElementById("control"),n.block),e.$$.dirty&1&&s(1,v.height=Math.max(a.xy1[1],a.xy0[1])-Math.min(a.xy1[1],a.xy0[1]),v),e.$$.dirty&1&&s(1,v.width=Math.max(a.xy1[0],a.xy0[0])-Math.min(a.xy1[0],a.xy0[0]),v),e.$$.dirty&3&&s(1,v.n_cols=v.width==0?1:Math.ceil(v.width/(.768*(1-a.overlap))),v),e.$$.dirty&2&&s(1,v.n_bundles=Math.ceil(v.height/.048),v),e.$$.dirty&2&&s(1,v.time=v.n_bundles*v.n_cols/20,v),e.$$.dirty&1&&s(1,v.n_z=Math.abs(a.z_to-a.z_from)+1,v)},[a,v,i,p,n,o,g,b,$,z,I,E,B,_,m,V,q,D,S,M,j,F,R,re]}class ca extends kt{constructor(t){super();Et(this,t,oa,aa,$t,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{_a as P,ca as T,pa as a};
