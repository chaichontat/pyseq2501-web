import{S as pt,i as _t,s as dt,e as m,c as h,a as g,d as f,b as i,aq as pe,g as U,X as Z,n as bs,o as q,p as gs,q as W,aa as cs,F as Ul,I as Ml,J as Bl,K as Ll,w as K,x as Q,y as x,M as ps,B as ee,t as $,h as z,k as P,P as ls,m as T,Q as ss,W as A,H as a,a3 as X,T as we,a4 as le,Y as al,N as Oe,O as Ie,j as me,V as Et,Z as el,f as vs,_ as tl,at as ks,aC as Es,av as ys,az as ws,U as $s,v as zs,aD as Is,aA as Ns,aB as ll,aE as Ps,aF as Ts,aG as Os}from"./vendor-a90c65dd.js";import{r as Ss}from"./coords-813c65ab.js";import{a as He,s as sl,u as tt,c as lt,b as Cs,l as Ds}from"./utils-65b45b1b.js";import{S as Vs,t as Al}from"./tooltip-c2d569da.js";function As(t){let e,l;const s=t[7].default,r=Ul(s,t,t[6],null),n=r||Ms();return{c(){e=m("div"),n&&n.c(),this.h()},l(c){e=h(c,"DIV",{class:!0});var o=g(e);n&&n.l(o),o.forEach(f),this.h()},h(){i(e,"class","mx-auto")},m(c,o){U(c,e,o),n&&n.m(e,null),l=!0},p(c,o){r&&r.p&&(!l||o&64)&&Ml(r,s,c,c[6],l?Ll(s,c[6],o,null):Bl(c[6]),null)},i(c){l||(W(n,c),l=!0)},o(c){q(n,c),l=!1},d(c){c&&f(e),n&&n.d(c)}}}function Us(t){let e,l,s;return l=new Vs({props:{color:"black"}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=g(e);Q(l.$$.fragment,n),n.forEach(f),this.h()},h(){i(e,"class","mx-auto opacity-40")},m(r,n){U(r,e,n),x(l,e,null),s=!0},p:ps,i(r){s||(W(l.$$.fragment,r),s=!0)},o(r){q(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function Ms(t){let e;return{c(){e=$("Go")},l(l){e=z(l,"Go")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function Bs(t){let e,l,s,r,n,c,o;const p=[Us,As],u=[];function E(_,d){return _[1]?0:1}return l=E(t),s=u[l]=p[l](t),{c(){e=m("button"),s.c(),this.h()},l(_){e=h(_,"BUTTON",{type:!0,class:!0,tabindex:!0});var d=g(e);s.l(d),d.forEach(f),this.h()},h(){i(e,"type","button"),i(e,"class",r=pe(`white-button rounded-lg px-4 py-1 text-sm font-semibold transition-all duration-100 ${t[5][t[2]]} disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 ${t[3]}`)+" svelte-1rnzpdo"),i(e,"tabindex","0"),e.disabled=t[0]},m(_,d){U(_,e,d),u[l].m(e,null),n=!0,c||(o=Z(e,"click",t[8]),c=!0)},p(_,[d]){let y=l;l=E(_),l===y?u[l].p(_,d):(bs(),q(u[y],1,1,()=>{u[y]=null}),gs(),s=u[l],s?s.p(_,d):(s=u[l]=p[l](_),s.c()),W(s,1),s.m(e,null)),(!n||d&12&&r!==(r=pe(`white-button rounded-lg px-4 py-1 text-sm font-semibold transition-all duration-100 ${_[5][_[2]]} disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 ${_[3]}`)+" svelte-1rnzpdo"))&&i(e,"class",r),(!n||d&1)&&(e.disabled=_[0])},i(_){n||(W(s),n=!0)},o(_){q(s),n=!1},d(_){_&&f(e),u[l].d(),c=!1,o()}}}function Ls(t,e,l){let{$$slots:s={},$$scope:r}=e,{disabled:n=!1}=e,{spin:c=!1}=e,{color:o="indigo"}=e,{cl:p=""}=e;const u=cs(),E={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},_=()=>u("click");return t.$$set=d=>{"disabled"in d&&l(0,n=d.disabled),"spin"in d&&l(1,c=d.spin),"color"in d&&l(2,o=d.color),"cl"in d&&l(3,p=d.cl),"$$scope"in d&&l(6,r=d.$$scope)},[n,c,o,p,u,E,r,s,_]}class nl extends pt{constructor(e){super();_t(this,e,Ls,Bs,dt,{disabled:0,spin:1,color:2,cl:3})}}function js(t){let e;return{c(){e=$("Preview")},l(l){e=z(l,"Preview")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function Fs(t){let e,l,s,r,n,c,o,p,u,E,_,d,y,I,w,S,b,v,N,L,V;return v=new nl({props:{color:"sky",disabled:t[3],$$slots:{default:[js]},$$scope:{ctx:t}}}),v.$on("click",t[11]),{c(){e=m("div"),l=m("div"),s=m("span"),r=$("X"),n=P(),c=m("input"),o=P(),p=m("span"),u=$("Y"),E=P(),_=m("input"),d=P(),y=m("button"),I=ls("svg"),w=ls("path"),S=$(`\r
    Current`),b=P(),K(v.$$.fragment),this.h()},l(C){e=h(C,"DIV",{class:!0});var B=g(e);l=h(B,"DIV",{class:!0});var j=g(l);s=h(j,"SPAN",{class:!0});var F=g(s);r=z(F,"X"),F.forEach(f),n=T(j),c=h(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),o=T(j),p=h(j,"SPAN",{class:!0});var J=g(p);u=z(J,"Y"),J.forEach(f),E=T(j),_=h(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(f),d=T(B),y=h(B,"BUTTON",{type:!0,class:!0});var re=g(y);I=ss(re,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var M=g(I);w=ss(M,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(w).forEach(f),M.forEach(f),S=z(re,`\r
    Current`),re.forEach(f),b=T(B),Q(v.$$.fragment,B),B.forEach(f),this.h()},h(){i(s,"class","color-group flex items-center rounded-l-lg border-l svelte-awp8a4"),A(s,"span-disabled",t[2].block),i(c,"type","number"),i(c,"min","-5"),i(c,"max","30"),i(c,"step","0.01"),i(c,"class","pretty z-10 h-10 w-24 rounded-none text-center"),c.disabled=t[3],i(p,"class","color-group flex items-center svelte-awp8a4"),A(p,"span-disabled",t[2].block),i(_,"type","number"),i(_,"min","-5"),i(_,"max","80"),i(_,"step","0.01"),i(_,"class","pretty z-10 h-10 w-24 rounded-l-none rounded-r-lg text-center"),_.disabled=t[3],i(l,"class","flex font-medium"),i(w,"stroke-linecap","round"),i(w,"stroke-linejoin","round"),i(w,"stroke-width","2"),i(w,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),i(I,"xmlns","http://www.w3.org/2000/svg"),i(I,"class","mr-1 h-5 w-5"),i(I,"fill","none"),i(I,"viewBox","0 0 24 24"),i(I,"stroke","currentColor"),i(y,"type","button"),i(y,"class","white-button rounded-lg px-3 py-1 text-sm font-medium text-gray-900 disabled:bg-gray-50 disabled:text-gray-500 disabled:hover:bg-gray-50 disabled:active:bg-gray-50"),y.disabled=t[3],i(e,"class","flex gap-x-2")},m(C,B){U(C,e,B),a(e,l),a(l,s),a(s,r),a(l,n),a(l,c),X(c,t[0][0]),a(l,o),a(l,p),a(p,u),a(l,E),a(l,_),X(_,t[0][1]),a(e,d),a(e,y),a(y,I),a(I,w),a(y,S),a(e,b),x(v,e,null),N=!0,L||(V=[Z(c,"input",t[7]),Z(c,"change",t[8]),we(He.call(null,c,[-5,30])),Z(_,"input",t[9]),Z(_,"change",t[10]),we(He.call(null,_,[-5,80])),Z(y,"click",t[6])],L=!0)},p(C,[B]){B&4&&A(s,"span-disabled",C[2].block),(!N||B&8)&&(c.disabled=C[3]),B&1&&le(c.value)!==C[0][0]&&X(c,C[0][0]),B&4&&A(p,"span-disabled",C[2].block),(!N||B&8)&&(_.disabled=C[3]),B&1&&le(_.value)!==C[0][1]&&X(_,C[0][1]),(!N||B&8)&&(y.disabled=C[3]);const j={};B&8&&(j.disabled=C[3]),B&8192&&(j.$$scope={dirty:B,ctx:C}),v.$set(j)},i(C){N||(W(v.$$.fragment,C),N=!0)},o(C){q(v.$$.fragment,C),N=!1},d(C){C&&f(e),ee(v),L=!1,al(V)}}}function Hs(t,e,l){let s,r,n;Oe(t,sl,S=>l(2,s=S)),Oe(t,tt,S=>l(12,r=S)),Oe(t,lt,S=>l(4,n=S));const c=cs();let{i:o}=e,{xy:p=[-1,-1]}=e;function u(){const{x:S,y:b}=Ss(r.image_params.fc,s.x,s.y);l(0,p[0]=Math.round((S+Number.EPSILON)*100)/100,p),l(0,p[1]=Math.round((b+Number.EPSILON)*100)/100,p)}let E=!1;function _(){p[0]=le(this.value),l(0,p)}const d=()=>c("change");function y(){p[1]=le(this.value),l(0,p)}const I=()=>c("change"),w=()=>{Ie(lt,n={cmd:`preview${o}`},n),Ie(sl,s.block="previewing",s)};return t.$$set=S=>{"i"in S&&l(1,o=S.i),"xy"in S&&l(0,p=S.xy)},t.$$.update=()=>{t.$$.dirty&4&&l(3,E=Boolean(s.block))},[p,o,s,E,n,c,u,_,d,y,I,w]}class ns extends pt{constructor(e){super();_t(this,e,Hs,Fs,dt,{i:1,xy:0})}}function Zs(t){let e;return{c(){e=$("Set")},l(l){e=z(l,"Set")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function qs(t){let e,l,s,r,n,c,o,p,u,E,_,d,y,I,w,S;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("0.2"),n=m("option"),c=$("0.5"),o=m("option"),p=$("0.6"),u=m("option"),E=$("1.0"),_=m("option"),d=$("2.4"),y=m("option"),I=$("4.0"),w=m("option"),S=$("Closed"),this.h()},l(b){e=h(b,"OPTION",{});var v=g(e);l=z(v,"Open"),v.forEach(f),s=h(b,"OPTION",{});var N=g(s);r=z(N,"0.2"),N.forEach(f),n=h(b,"OPTION",{});var L=g(n);c=z(L,"0.5"),L.forEach(f),o=h(b,"OPTION",{});var V=g(o);p=z(V,"0.6"),V.forEach(f),u=h(b,"OPTION",{});var C=g(u);E=z(C,"1.0"),C.forEach(f),_=h(b,"OPTION",{});var B=g(_);d=z(B,"2.4"),B.forEach(f),y=h(b,"OPTION",{});var j=g(y);I=z(j,"4.0"),j.forEach(f),w=h(b,"OPTION",{});var F=g(w);S=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="0.2",s.value=s.__value,n.__value="0.5",n.value=n.__value,o.__value="0.6",o.value=o.__value,u.__value="1.0",u.value=u.__value,_.__value="2.4",_.value=_.__value,y.__value="4.0",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(b,v){U(b,e,v),a(e,l),U(b,s,v),a(s,r),U(b,n,v),a(n,c),U(b,o,v),a(o,p),U(b,u,v),a(u,E),U(b,_,v),a(_,d),U(b,y,v),a(y,I),U(b,w,v),a(w,S)},d(b){b&&f(e),b&&f(s),b&&f(n),b&&f(o),b&&f(u),b&&f(_),b&&f(y),b&&f(w)}}}function Ws(t){let e,l,s,r,n,c,o,p,u,E,_,d,y,I,w,S;return{c(){e=m("option"),l=$("Open"),s=m("option"),r=$("1.0"),n=m("option"),c=$("2.0"),o=m("option"),p=$("3.5"),u=m("option"),E=$("3.8"),_=m("option"),d=$("4.0"),y=m("option"),I=$("4.5"),w=m("option"),S=$("Closed"),this.h()},l(b){e=h(b,"OPTION",{});var v=g(e);l=z(v,"Open"),v.forEach(f),s=h(b,"OPTION",{});var N=g(s);r=z(N,"1.0"),N.forEach(f),n=h(b,"OPTION",{});var L=g(n);c=z(L,"2.0"),L.forEach(f),o=h(b,"OPTION",{});var V=g(o);p=z(V,"3.5"),V.forEach(f),u=h(b,"OPTION",{});var C=g(u);E=z(C,"3.8"),C.forEach(f),_=h(b,"OPTION",{});var B=g(_);d=z(B,"4.0"),B.forEach(f),y=h(b,"OPTION",{});var j=g(y);I=z(j,"4.5"),j.forEach(f),w=h(b,"OPTION",{});var F=g(w);S=z(F,"Closed"),F.forEach(f),this.h()},h(){e.__value="Open",e.value=e.__value,s.__value="1.0",s.value=s.__value,n.__value="2.0",n.value=n.__value,o.__value="3.5",o.value=o.__value,u.__value="3.8",u.value=u.__value,_.__value="4.0",_.value=_.__value,y.__value="4.5",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(b,v){U(b,e,v),a(e,l),U(b,s,v),a(s,r),U(b,n,v),a(n,c),U(b,o,v),a(o,p),U(b,u,v),a(u,E),U(b,_,v),a(_,d),U(b,y,v),a(y,I),U(b,w,v),a(w,S)},d(b){b&&f(e),b&&f(s),b&&f(n),b&&f(o),b&&f(u),b&&f(_),b&&f(y),b&&f(w)}}}function Gs(t){let e,l,s,r,n,c,o,p=(t[1]?660:532)+"",u,E,_,d,y,I,w,S,b,v,N,L,V=2*t[1]+"",C,B,j,F,J,re,M=2*t[1]+1+"",Ne,te,he,nt,ie,Pe,ge,at,ue=(Number(t[0].od[t[1]]!=-1)*t[0].lasers[t[1]]*Math.pow(10,-t[0].od[t[1]])).toFixed(4)+"",Ze,ot,R,ve,Se;w=new nl({props:{disabled:t[4].block,$$slots:{default:[Zs]},$$scope:{ctx:t}}}),w.$on("click",t[8]);function mt(O,H){return O[1]==0?Ws:qs}let qe=mt(t),G=qe(t);return{c(){e=m("p"),l=m("span"),s=m("label"),r=m("input"),c=P(),o=m("div"),u=$(p),E=$(" nm"),_=P(),d=m("input"),I=$(`\r
    mW\r
    `),K(w.$$.fragment),S=P(),b=m("label"),v=m("input"),L=$(`\r
    Channel `),C=$(V),B=P(),j=m("label"),F=m("input"),re=$(`\r
    Channel `),Ne=$(M),te=P(),he=m("span"),nt=$(`Filter OD\r
    `),ie=m("select"),G.c(),Pe=P(),ge=m("p"),at=$("Effective: "),Ze=$(ue),ot=$(" mW"),this.h()},l(O){e=h(O,"P",{class:!0});var H=g(e);l=h(H,"SPAN",{class:!0});var Y=g(l);s=h(Y,"LABEL",{});var de=g(s);r=h(de,"INPUT",{type:!0,class:!0}),c=T(de),o=h(de,"DIV",{class:!0});var Ce=g(o);u=z(Ce,p),E=z(Ce," nm"),Ce.forEach(f),de.forEach(f),_=T(Y),d=h(Y,"INPUT",{type:!0,class:!0,min:!0,max:!0}),I=z(Y,`\r
    mW\r
    `),Q(w.$$.fragment,Y),Y.forEach(f),S=T(H),b=h(H,"LABEL",{class:!0});var De=g(b);v=h(De,"INPUT",{type:!0,class:!0}),L=z(De,`\r
    Channel `),C=z(De,V),De.forEach(f),B=T(H),j=h(H,"LABEL",{class:!0});var We=g(j);F=h(We,"INPUT",{type:!0,class:!0}),re=z(We,`\r
    Channel `),Ne=z(We,M),We.forEach(f),te=T(H),he=h(H,"SPAN",{class:!0});var $e=g(he);nt=z($e,`Filter OD\r
    `),ie=h($e,"SELECT",{class:!0});var rt=g(ie);G.l(rt),rt.forEach(f),Pe=T($e),ge=h($e,"P",{class:!0});var Ge=g(ge);at=z(Ge,"Effective: "),Ze=z(Ge,ue),ot=z(Ge," mW"),Ge.forEach(f),$e.forEach(f),H.forEach(f),this.h()},h(){i(r,"type","checkbox"),i(r,"class",n=pe(`mr-1 rounded ${t[1]?"rounded text-red-600 focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),i(o,"class","inline font-semibold"),A(o,"text-green-800",t[0].laser_onoff[t[1]]&&!t[1]),A(o,"text-red-800",t[0].laser_onoff[t[1]]&&t[1]),i(d,"type","number"),i(d,"class","pretty h-8 w-[4.5rem] pr-2"),i(d,"min","0"),i(d,"max","500"),d.disabled=y=!t[0].laser_onoff[t[1]],A(d,"pretty-disabled",!t[0].laser_onoff[0]),i(l,"class","flex items-center gap-x-2"),A(l,"text-gray-400",!t[0].laser_onoff[t[1]]),i(v,"type","checkbox"),i(v,"class",N=pe(`mr-1 rounded ${t[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),i(b,"class","channel rounded-lg ring-red-500 svelte-6ipz4o"),i(F,"type","checkbox"),i(F,"class",J=pe(`mr-1 rounded ${t[1]?"text-amber-900 focus:ring-amber-700":"rounded text-orange-600 focus:ring-orange-300"}`)+" svelte-6ipz4o"),i(j,"class","channel svelte-6ipz4o"),i(ie,"class","rounded-lg border-gray-400 py-1 text-sm focus:ring focus:ring-blue-200 focus:ring-opacity-50 disabled:border-gray-300"),i(ge,"class","ml-3 text-sm font-medium"),i(he,"class","opacity-85 ml-8 font-normal"),i(e,"class","flex flex-col")},m(O,H){U(O,e,H),a(e,l),a(l,s),a(s,r),r.checked=t[0].laser_onoff[t[1]],a(s,c),a(s,o),a(o,u),a(o,E),a(l,_),a(l,d),X(d,t[0].lasers[t[1]]),a(l,I),x(w,l,null),a(e,S),a(e,b),a(b,v),v.checked=t[0].channels[2*t[1]],a(b,L),a(b,C),a(e,B),a(e,j),a(j,F),F.checked=t[0].channels[2*t[1]+1],a(j,re),a(j,Ne),a(e,te),a(e,he),a(he,nt),a(he,ie),G.m(ie,null),a(he,Pe),a(he,ge),a(ge,at),a(ge,Ze),a(ge,ot),R=!0,ve||(Se=[Z(r,"change",t[6]),Z(d,"input",t[7]),we(He.call(null,d,[0,500])),Z(v,"change",t[9]),Z(F,"change",t[10]),Z(ie,"change",t[5])],ve=!0)},p(O,[H]){(!R||H&2&&n!==(n=pe(`mr-1 rounded ${O[1]?"rounded text-red-600 focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&i(r,"class",n),H&3&&(r.checked=O[0].laser_onoff[O[1]]),(!R||H&2)&&p!==(p=(O[1]?660:532)+"")&&me(u,p),H&3&&A(o,"text-green-800",O[0].laser_onoff[O[1]]&&!O[1]),H&3&&A(o,"text-red-800",O[0].laser_onoff[O[1]]&&O[1]),(!R||H&3&&y!==(y=!O[0].laser_onoff[O[1]]))&&(d.disabled=y),H&3&&le(d.value)!==O[0].lasers[O[1]]&&X(d,O[0].lasers[O[1]]),H&1&&A(d,"pretty-disabled",!O[0].laser_onoff[0]);const Y={};H&16&&(Y.disabled=O[4].block),H&2048&&(Y.$$scope={dirty:H,ctx:O}),w.$set(Y),H&3&&A(l,"text-gray-400",!O[0].laser_onoff[O[1]]),(!R||H&2&&N!==(N=pe(`mr-1 rounded ${O[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&i(v,"class",N),H&3&&(v.checked=O[0].channels[2*O[1]]),(!R||H&2)&&V!==(V=2*O[1]+"")&&me(C,V),(!R||H&2&&J!==(J=pe(`mr-1 rounded ${O[1]?"text-amber-900 focus:ring-amber-700":"rounded text-orange-600 focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&i(F,"class",J),H&3&&(F.checked=O[0].channels[2*O[1]+1]),(!R||H&2)&&M!==(M=2*O[1]+1+"")&&me(Ne,M),qe!==(qe=mt(O))&&(G.d(1),G=qe(O),G&&(G.c(),G.m(ie,null))),(!R||H&3)&&ue!==(ue=(Number(O[0].od[O[1]]!=-1)*O[0].lasers[O[1]]*Math.pow(10,-O[0].od[O[1]])).toFixed(4)+"")&&me(Ze,ue)},i(O){R||(W(w.$$.fragment,O),R=!0)},o(O){q(w.$$.fragment,O),R=!1},d(O){O&&f(e),ee(w),G.d(),ve=!1,al(Se)}}}function Xs(t,e,l){let s,r,n;Oe(t,lt,I=>l(2,s=I)),Oe(t,tt,I=>l(3,r=I)),Oe(t,sl,I=>l(4,n=I));let{params:c}=e,{i:o}=e;function p(I){let w;switch(I.currentTarget.value){case"Open":w=0;break;case"Closed":w=-1;break;default:w=Number(I.currentTarget.value)}l(0,c.od[o]=w,c),Ie(tt,r.image_params.od[o]=c.od[o],r),Ie(lt,s={move:{od:o===0?[c.od[o],void 0]:[void 0,c.od[o]]}},s)}function u(){c.laser_onoff[o]=this.checked,l(0,c)}function E(){c.lasers[o]=le(this.value),l(0,c)}const _=()=>{Ie(tt,r.image_params.laser_onoff[o]=c.laser_onoff[o],r),Ie(tt,r.image_params.lasers[o]=c.lasers[o],r),Ie(lt,s={move:{lasers:o===0?[c.lasers[o],void 0]:[void 0,c.lasers[o]],laser_onoff:o===0?[c.laser_onoff[o],void 0]:[void 0,c.laser_onoff[o]]}},s)};function d(){c.channels[2*o]=this.checked,l(0,c)}function y(){c.channels[2*o+1]=this.checked,l(0,c)}return t.$$set=I=>{"params"in I&&l(0,c=I.params),"i"in I&&l(1,o=I.i)},[c,o,s,r,n,p,u,E,_,d,y]}class as extends pt{constructor(e){super();_t(this,e,Xs,Gs,dt,{params:0,i:1})}}function os(t){let e,l,s,r,n,c;return{c(){e=m("p"),l=$("Image Path"),s=P(),r=m("input"),this.h()},l(o){e=h(o,"P",{class:!0});var p=g(e);l=z(p,"Image Path"),p.forEach(f),s=T(o),r=h(o,"INPUT",{type:!0,class:!0}),this.h()},h(){i(e,"class","text-lg svelte-1m4l8fo"),i(r,"type","text"),i(r,"class","pretty mb-4 max-w-[470px] flex-grow"),A(r,"invalid",!t[0].path)},m(o,p){U(o,e,p),a(e,l),U(o,s,p),U(o,r,p),X(r,t[0].path),n||(c=Z(r,"input",t[10]),n=!0)},p(o,p){p&1&&r.value!==o[0].path&&X(r,o[0].path),p&1&&A(r,"invalid",!o[0].path)},d(o){o&&f(e),o&&f(s),o&&f(r),n=!1,c()}}}function rs(t){let e;return{c(){e=$("per z-stack.")},l(l){e=z(l,"per z-stack.")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function is(t){let e,l=t[1].n_z+"",s,r,n,c=t[0].z_obj+t[0].z_from*t[0].z_spacing+"",o,p,u=t[0].z_obj+t[0].z_to*t[0].z_spacing+"",E,_,d,y,I=(t[1].n_z?yt(t[1].n_z*t[1].time):yt(t[1].time))+"",w,S,b=t[1].n_z>1&&us();return{c(){e=m("div"),s=$(l),r=$(" Z step"),b&&b.c(),n=$(" from "),o=$(c),p=$(" to "),E=$(u),_=P(),d=m("div"),y=$("Total time: "),w=$(I),S=$("."),this.h()},l(v){e=h(v,"DIV",{class:!0});var N=g(e);s=z(N,l),r=z(N," Z step"),b&&b.l(N),n=z(N," from "),o=z(N,c),p=z(N," to "),E=z(N,u),N.forEach(f),_=T(v),d=h(v,"DIV",{class:!0});var L=g(d);y=z(L,"Total time: "),w=z(L,I),S=z(L,"."),L.forEach(f),this.h()},h(){i(e,"class","font-base px-2"),i(d,"class","px-2 font-semibold")},m(v,N){U(v,e,N),a(e,s),a(e,r),b&&b.m(e,null),a(e,n),a(e,o),a(e,p),a(e,E),U(v,_,N),U(v,d,N),a(d,y),a(d,w),a(d,S)},p(v,N){N&2&&l!==(l=v[1].n_z+"")&&me(s,l),v[1].n_z>1?b||(b=us(),b.c(),b.m(e,n)):b&&(b.d(1),b=null),N&1&&c!==(c=v[0].z_obj+v[0].z_from*v[0].z_spacing+"")&&me(o,c),N&1&&u!==(u=v[0].z_obj+v[0].z_to*v[0].z_spacing+"")&&me(E,u),N&2&&I!==(I=(v[1].n_z?yt(v[1].n_z*v[1].time):yt(v[1].time))+"")&&me(w,I)},d(v){v&&f(e),b&&b.d(),v&&f(_),v&&f(d)}}}function us(t){let e;return{c(){e=$("s")},l(l){e=z(l,"s")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function Rs(t){let e,l,s,r,n,c,o,p,u,E,_,d,y,I,w,S,b,v,N,L,V,C,B,j,F,J,re,M,Ne,te,he,nt,ie,Pe,ge,at,ue,Ze,ot,R,ve,Se,mt,qe,G,O,H,Y,de,Ce=t[1].width.toFixed(2)+"",De,We,$e=t[1].height.toFixed(2)+"",rt,Ge,ol,Ve,wt=t[1].n_cols+"",Ct,rl,$t=t[1].n_bundles+"",Dt,il,ul,ze,zt=yt(t[1].time)+"",Vt,fl,cl,Xe,ht,pl,_l,Re,Ye,it,bt,dl,ml,Je,ke,hl,Ae,bl,ut,gt,gl,vl,Ke,Ee,kl,Ue,El,Qe,xe,Te,At,yl,Me,et,wl,$l,zl,se,Be,Il,Nl,ne,Ut,Pl,Le,Tl,Ol,ae,Mt,Sl,je,Cl,Dl,oe,Bt,be,Vl,jl,fe=!t[3]&&os(t);function _s(k){t[11](k)}let Fl={i:0};t[0]!==void 0&&(Fl.params=t[0]),w=new as({props:Fl}),Et.push(()=>el(w,"params",_s));function ds(k){t[12](k)}let Hl={i:1};t[0]!==void 0&&(Hl.params=t[0]),v=new as({props:Hl}),Et.push(()=>el(v,"params",ds));function ms(k){t[13](k)}let Zl={i:0};t[0].xy0!==void 0&&(Zl.xy=t[0].xy0),te=new ns({props:Zl}),Et.push(()=>el(te,"xy",ms)),te.$on("change",t[6]);function hs(k){t[14](k)}let ql={i:1};t[0].xy1!==void 0&&(ql.xy=t[0].xy1),ue=new ns({props:ql}),Et.push(()=>el(ue,"xy",hs)),ue.$on("change",t[6]);let _e=t[2]&&rs();Ae=new nl({props:{disabled:t[4].block}}),Ae.$on("click",t[17]),Ue=new nl({props:{disabled:t[4].block}}),Ue.$on("click",t[19]);let ce=t[2]&&is(t);return{c(){e=m("div"),l=m("section"),s=m("p"),r=$("Name"),n=P(),c=m("div"),o=m("input"),p=P(),fe&&fe.c(),u=P(),E=m("section"),_=m("h2"),d=$("Laser and Channels"),y=P(),I=m("div"),K(w.$$.fragment),b=P(),K(v.$$.fragment),L=P(),V=m("section"),C=m("h2"),B=$("Positions"),j=P(),F=m("div"),J=m("div"),re=m("p"),M=$("\u{1F4CC} Corner 1"),Ne=P(),K(te.$$.fragment),nt=P(),ie=m("div"),Pe=m("p"),ge=$("\u{1F4CD} Corner 2"),at=P(),K(ue.$$.fragment),ot=P(),R=m("div"),ve=m("div"),Se=m("p"),mt=$("X-Overlap"),qe=P(),G=m("input"),O=$(`\r
          (0-1)`),H=P(),Y=m("div"),de=m("span"),De=$(Ce),We=$(" \xD7 "),rt=$($e),Ge=$(" mm."),ol=P(),Ve=m("span"),Ct=$(wt),rl=$(" columns of "),Dt=$($t),il=$(" bundles."),ul=P(),ze=m("span"),Vt=$(zt),fl=P(),_e&&_e.c(),cl=P(),Xe=m("section"),ht=m("h2"),pl=$("Focus"),_l=P(),Re=m("div"),Ye=m("div"),it=m("div"),bt=m("p"),dl=$("Z Tilt"),ml=P(),Je=m("div"),ke=m("input"),hl=P(),K(Ae.$$.fragment),bl=P(),ut=m("div"),gt=m("p"),gl=$("Z Objective"),vl=P(),Ke=m("span"),Ee=m("input"),kl=P(),K(Ue.$$.fragment),El=P(),Qe=m("div"),xe=m("label"),Te=m("input"),yl=P(),Me=m("div"),et=m("div"),wl=$("Z-Stack"),$l=P(),ce&&ce.c(),zl=P(),se=m("div"),Be=m("span"),Il=$("Spacing"),Nl=P(),ne=m("input"),Pl=P(),Le=m("span"),Tl=$("From"),Ol=P(),ae=m("input"),Sl=P(),je=m("span"),Cl=$("To"),Dl=P(),oe=m("input"),this.h()},l(k){e=h(k,"DIV",{id:!0,class:!0,style:!0});var D=g(e);l=h(D,"SECTION",{class:!0});var Fe=g(l);s=h(Fe,"P",{class:!0});var It=g(s);r=z(It,"Name"),It.forEach(f),n=T(Fe),c=h(Fe,"DIV",{class:!0});var Nt=g(c);o=h(Nt,"INPUT",{type:!0,class:!0}),Nt.forEach(f),p=T(Fe),fe&&fe.l(Fe),Fe.forEach(f),u=T(D),E=h(D,"SECTION",{class:!0});var ft=g(E);_=h(ft,"H2",{class:!0});var Pt=g(_);d=z(Pt,"Laser and Channels"),Pt.forEach(f),y=T(ft),I=h(ft,"DIV",{class:!0});var ct=g(I);Q(w.$$.fragment,ct),b=T(ct),Q(v.$$.fragment,ct),ct.forEach(f),ft.forEach(f),L=T(D),V=h(D,"SECTION",{class:!0});var Lt=g(V);C=h(Lt,"H2",{class:!0});var Wl=g(C);B=z(Wl,"Positions"),Wl.forEach(f),j=T(Lt),F=h(Lt,"DIV",{class:!0});var vt=g(F);J=h(vt,"DIV",{});var jt=g(J);re=h(jt,"P",{class:!0});var Gl=g(re);M=z(Gl,"\u{1F4CC} Corner 1"),Gl.forEach(f),Ne=T(jt),Q(te.$$.fragment,jt),jt.forEach(f),nt=T(vt),ie=h(vt,"DIV",{});var Ft=g(ie);Pe=h(Ft,"P",{class:!0});var Xl=g(Pe);ge=z(Xl,"\u{1F4CD} Corner 2"),Xl.forEach(f),at=T(Ft),Q(ue.$$.fragment,Ft),Ft.forEach(f),ot=T(vt),R=h(vt,"DIV",{class:!0});var Ht=g(R);ve=h(Ht,"DIV",{});var Tt=g(ve);Se=h(Tt,"P",{class:!0});var Rl=g(Se);mt=z(Rl,"X-Overlap"),Rl.forEach(f),qe=T(Tt),G=h(Tt,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),O=z(Tt,`\r
          (0-1)`),Tt.forEach(f),H=T(Ht),Y=h(Ht,"DIV",{class:!0});var kt=g(Y);de=h(kt,"SPAN",{class:!0});var Ot=g(de);De=z(Ot,Ce),We=z(Ot," \xD7 "),rt=z(Ot,$e),Ge=z(Ot," mm."),Ot.forEach(f),ol=T(kt),Ve=h(kt,"SPAN",{class:!0});var St=g(Ve);Ct=z(St,wt),rl=z(St," columns of "),Dt=z(St,$t),il=z(St," bundles."),St.forEach(f),ul=T(kt),ze=h(kt,"SPAN",{class:!0});var Zt=g(ze);Vt=z(Zt,zt),fl=T(Zt),_e&&_e.l(Zt),Zt.forEach(f),kt.forEach(f),Ht.forEach(f),vt.forEach(f),Lt.forEach(f),cl=T(D),Xe=h(D,"SECTION",{class:!0});var qt=g(Xe);ht=h(qt,"H2",{class:!0});var Yl=g(ht);pl=z(Yl,"Focus"),Yl.forEach(f),_l=T(qt),Re=h(qt,"DIV",{class:!0});var Wt=g(Re);Ye=h(Wt,"DIV",{class:!0});var Gt=g(Ye);it=h(Gt,"DIV",{});var Xt=g(it);bt=h(Xt,"P",{class:!0});var Jl=g(bt);dl=z(Jl,"Z Tilt"),Jl.forEach(f),ml=T(Xt),Je=h(Xt,"DIV",{class:!0});var Rt=g(Je);ke=h(Rt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),hl=T(Rt),Q(Ae.$$.fragment,Rt),Rt.forEach(f),Xt.forEach(f),bl=T(Gt),ut=h(Gt,"DIV",{});var Yt=g(ut);gt=h(Yt,"P",{class:!0});var Kl=g(gt);gl=z(Kl,"Z Objective"),Kl.forEach(f),vl=T(Yt),Ke=h(Yt,"SPAN",{class:!0});var Jt=g(Ke);Ee=h(Jt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),kl=T(Jt),Q(Ue.$$.fragment,Jt),Jt.forEach(f),Yt.forEach(f),Gt.forEach(f),El=T(Wt),Qe=h(Wt,"DIV",{class:!0});var Kt=g(Qe);xe=h(Kt,"LABEL",{class:!0});var Qt=g(xe);Te=h(Qt,"INPUT",{type:!0,class:!0}),yl=T(Qt),Me=h(Qt,"DIV",{class:!0});var xt=g(Me);et=h(xt,"DIV",{class:!0});var Ql=g(et);wl=z(Ql,"Z-Stack"),Ql.forEach(f),$l=T(xt),ce&&ce.l(xt),xt.forEach(f),Qt.forEach(f),zl=T(Kt),se=h(Kt,"DIV",{class:!0,id:!0});var ye=g(se);Be=h(ye,"SPAN",{class:!0});var xl=g(Be);Il=z(xl,"Spacing"),xl.forEach(f),Nl=T(ye),ne=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Pl=T(ye),Le=h(ye,"SPAN",{class:!0});var es=g(Le);Tl=z(es,"From"),es.forEach(f),Ol=T(ye),ae=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Sl=T(ye),je=h(ye,"SPAN",{class:!0});var ts=g(je);Cl=z(ts,"To"),ts.forEach(f),Dl=T(ye),oe=h(ye,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ye.forEach(f),Kt.forEach(f),Wt.forEach(f),qt.forEach(f),D.forEach(f),this.h()},h(){i(s,"class","mt-1 text-lg svelte-1m4l8fo"),i(o,"type","text"),i(o,"class","pretty mb-4 h-12 flex-grow text-lg"),A(o,"invalid",t[7](t[0].name)),i(c,"class","flex max-w-[470px] flex-grow gap-x-2"),i(l,"class","flex flex-col text-lg font-medium"),i(_,"class","svelte-1m4l8fo"),i(I,"class","grid min-w-[600px] grid-cols-2"),A(I,"opacity-70",t[4].block),i(E,"class","font-medium leading-10 "),i(C,"class","svelte-1m4l8fo"),i(re,"class","svelte-1m4l8fo"),i(Pe,"class","svelte-1m4l8fo"),i(Se,"class","svelte-1m4l8fo"),i(G,"type","number"),i(G,"class","pretty w-20 pr-2"),i(G,"step","0.01"),i(G,"min","0"),i(G,"max","0.99"),i(de,"class","tabular-nums"),i(Ve,"class","tabular-nums"),i(ze,"class","tabular-nums"),A(ze,"font-semibold",!t[2]),i(Y,"class","flex flex-col justify-center font-normal"),i(R,"class","flex gap-8"),i(F,"class","-mt-1 space-y-4"),i(V,"class","flex flex-col gap-2"),A(V,"-mt-20",t[3]),i(ht,"class","svelte-1m4l8fo"),i(bt,"class","svelte-1m4l8fo"),i(ke,"type","number"),i(ke,"class","pretty w-28"),i(ke,"min","0"),i(ke,"max","25000"),i(Je,"class","flex gap-2"),i(gt,"class","svelte-1m4l8fo"),i(Ee,"type","number"),i(Ee,"class","pretty w-28"),i(Ee,"min","0"),i(Ee,"max","60000"),i(Ke,"class","flex gap-2"),i(Ye,"class","flex space-x-8"),i(Te,"type","checkbox"),i(Te,"class","mr-1 rounded focus:ring-blue-600"),Te.disabled=At=t[4].block==="capturing",i(et,"class","pr-2"),A(et,"font-medium",t[2]),i(Me,"class","flex divide-x-2"),i(xe,"class","flex items-center gap-x-1"),i(Be,"class","color-group flex items-center rounded-l-lg border-l svelte-1m4l8fo"),A(Be,"span-disabled",t[4].block||!t[2]),i(ne,"type","number"),i(ne,"min","1"),i(ne,"max","60000"),i(ne,"step","1"),i(ne,"class","pretty z-10 h-10 w-28 rounded-none text-center"),ne.disabled=Ut=t[4].block||!t[2],A(ne,"disabled",t[4].block||!t[2]),i(Le,"class","color-group flex items-center svelte-1m4l8fo"),A(Le,"span-disabled",t[4].block||!t[2]),i(ae,"type","number"),i(ae,"min","-100"),i(ae,"max","100"),i(ae,"step","1"),i(ae,"class","pretty z-10 h-10 w-16 rounded-none text-center"),ae.disabled=Mt=t[4].block||!t[2],A(ae,"disabled",t[4].block||!t[2]),i(je,"class","color-group flex items-center svelte-1m4l8fo"),A(je,"span-disabled",t[4].block||!t[2]),i(oe,"type","number"),i(oe,"min","-100"),i(oe,"max","100"),i(oe,"step","1"),i(oe,"class","pretty z-10 h-10 w-16 rounded-l-none rounded-r-lg text-center"),oe.disabled=Bt=t[4].block||!t[2],A(oe,"disabled",t[4].block||!t[2]),i(se,"class","flex font-medium"),i(se,"id","zBox"),i(Qe,"class","space-y-2"),i(Re,"class","-mt-1 space-y-4"),i(Xe,"class","flex flex-col gap-2"),i(e,"id","control"),i(e,"class","grid gap-y-6"),vs(e,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(k,D){U(k,e,D),a(e,l),a(l,s),a(s,r),a(l,n),a(l,c),a(c,o),X(o,t[0].name),a(l,p),fe&&fe.m(l,null),a(e,u),a(e,E),a(E,_),a(_,d),a(E,y),a(E,I),x(w,I,null),a(I,b),x(v,I,null),a(e,L),a(e,V),a(V,C),a(C,B),a(V,j),a(V,F),a(F,J),a(J,re),a(re,M),a(J,Ne),x(te,J,null),a(F,nt),a(F,ie),a(ie,Pe),a(Pe,ge),a(ie,at),x(ue,ie,null),a(F,ot),a(F,R),a(R,ve),a(ve,Se),a(Se,mt),a(ve,qe),a(ve,G),X(G,t[0].overlap),a(ve,O),a(R,H),a(R,Y),a(Y,de),a(de,De),a(de,We),a(de,rt),a(de,Ge),a(Y,ol),a(Y,Ve),a(Ve,Ct),a(Ve,rl),a(Ve,Dt),a(Ve,il),a(Y,ul),a(Y,ze),a(ze,Vt),a(ze,fl),_e&&_e.m(ze,null),a(e,cl),a(e,Xe),a(Xe,ht),a(ht,pl),a(Xe,_l),a(Xe,Re),a(Re,Ye),a(Ye,it),a(it,bt),a(bt,dl),a(it,ml),a(it,Je),a(Je,ke),X(ke,t[0].z_tilt),a(Je,hl),x(Ae,Je,null),a(Ye,bl),a(Ye,ut),a(ut,gt),a(gt,gl),a(ut,vl),a(ut,Ke),a(Ke,Ee),X(Ee,t[0].z_obj),a(Ke,kl),x(Ue,Ke,null),a(Re,El),a(Re,Qe),a(Qe,xe),a(xe,Te),Te.checked=t[2],a(xe,yl),a(xe,Me),a(Me,et),a(et,wl),a(Me,$l),ce&&ce.m(Me,null),a(Qe,zl),a(Qe,se),a(se,Be),a(Be,Il),a(se,Nl),a(se,ne),X(ne,t[0].z_spacing),a(se,Pl),a(se,Le),a(Le,Tl),a(se,Ol),a(se,ae),X(ae,t[0].z_from),a(se,Sl),a(se,je),a(je,Cl),a(se,Dl),a(se,oe),X(oe,t[0].z_to),be=!0,Vl||(jl=[Z(o,"input",t[9]),Z(G,"input",t[15]),we(He.call(null,G,[.01,.99])),Z(ke,"input",t[16]),we(He.call(null,ke,[0,25e3])),Z(Ee,"input",t[18]),we(He.call(null,Ee,[0,6e4])),Z(Te,"change",t[20]),we(Al.call(null,Be,"Nyquist is 232.")),Z(ne,"input",t[21]),we(He.call(null,ne,[1,6e4])),we(Al.call(null,Le,"Multiple of Spacing")),Z(ae,"input",t[22]),we(He.call(null,ae,[-100,100])),we(Al.call(null,je,"Multiple of Spacing")),Z(oe,"input",t[23]),we(He.call(null,oe,[-100,100]))],Vl=!0)},p(k,[D]){D&1&&o.value!==k[0].name&&X(o,k[0].name),D&129&&A(o,"invalid",k[7](k[0].name)),k[3]?fe&&(fe.d(1),fe=null):fe?fe.p(k,D):(fe=os(k),fe.c(),fe.m(l,null));const Fe={};!S&&D&1&&(S=!0,Fe.params=k[0],tl(()=>S=!1)),w.$set(Fe);const It={};!N&&D&1&&(N=!0,It.params=k[0],tl(()=>N=!1)),v.$set(It),D&16&&A(I,"opacity-70",k[4].block);const Nt={};!he&&D&1&&(he=!0,Nt.xy=k[0].xy0,tl(()=>he=!1)),te.$set(Nt);const ft={};!Ze&&D&1&&(Ze=!0,ft.xy=k[0].xy1,tl(()=>Ze=!1)),ue.$set(ft),D&1&&le(G.value)!==k[0].overlap&&X(G,k[0].overlap),(!be||D&2)&&Ce!==(Ce=k[1].width.toFixed(2)+"")&&me(De,Ce),(!be||D&2)&&$e!==($e=k[1].height.toFixed(2)+"")&&me(rt,$e),(!be||D&2)&&wt!==(wt=k[1].n_cols+"")&&me(Ct,wt),(!be||D&2)&&$t!==($t=k[1].n_bundles+"")&&me(Dt,$t),(!be||D&2)&&zt!==(zt=yt(k[1].time)+"")&&me(Vt,zt),k[2]?_e||(_e=rs(),_e.c(),_e.m(ze,null)):_e&&(_e.d(1),_e=null),D&4&&A(ze,"font-semibold",!k[2]),D&8&&A(V,"-mt-20",k[3]),D&1&&le(ke.value)!==k[0].z_tilt&&X(ke,k[0].z_tilt);const Pt={};D&16&&(Pt.disabled=k[4].block),Ae.$set(Pt),D&1&&le(Ee.value)!==k[0].z_obj&&X(Ee,k[0].z_obj);const ct={};D&16&&(ct.disabled=k[4].block),Ue.$set(ct),(!be||D&16&&At!==(At=k[4].block==="capturing"))&&(Te.disabled=At),D&4&&(Te.checked=k[2]),D&4&&A(et,"font-medium",k[2]),k[2]?ce?ce.p(k,D):(ce=is(k),ce.c(),ce.m(Me,null)):ce&&(ce.d(1),ce=null),D&20&&A(Be,"span-disabled",k[4].block||!k[2]),(!be||D&20&&Ut!==(Ut=k[4].block||!k[2]))&&(ne.disabled=Ut),D&1&&le(ne.value)!==k[0].z_spacing&&X(ne,k[0].z_spacing),D&20&&A(ne,"disabled",k[4].block||!k[2]),D&20&&A(Le,"span-disabled",k[4].block||!k[2]),(!be||D&20&&Mt!==(Mt=k[4].block||!k[2]))&&(ae.disabled=Mt),D&1&&le(ae.value)!==k[0].z_from&&X(ae,k[0].z_from),D&20&&A(ae,"disabled",k[4].block||!k[2]),D&20&&A(je,"span-disabled",k[4].block||!k[2]),(!be||D&20&&Bt!==(Bt=k[4].block||!k[2]))&&(oe.disabled=Bt),D&1&&le(oe.value)!==k[0].z_to&&X(oe,k[0].z_to),D&20&&A(oe,"disabled",k[4].block||!k[2])},i(k){be||(W(w.$$.fragment,k),W(v.$$.fragment,k),W(te.$$.fragment,k),W(ue.$$.fragment,k),W(Ae.$$.fragment,k),W(Ue.$$.fragment,k),be=!0)},o(k){q(w.$$.fragment,k),q(v.$$.fragment,k),q(te.$$.fragment,k),q(ue.$$.fragment,k),q(Ae.$$.fragment,k),q(Ue.$$.fragment,k),be=!1},d(k){k&&f(e),fe&&fe.d(),ee(w),ee(v),ee(te),ee(ue),_e&&_e.d(),ee(Ae),ee(Ue),ce&&ce.d(),Vl=!1,al(jl)}}}function Ys(t,e){t&&(t.querySelectorAll("input").forEach(l=>l.disabled=e),t.querySelectorAll("select").forEach(l=>l.disabled=e),t.querySelectorAll("button").forEach(l=>l.disabled=e))}function yt(t){const e=new Date(t*1e3).toISOString();return t>3600?`${e.substring(11,19)} hrs`:`${e.substring(14,19)} mins`}function Js(t,e,l){let s,r,n;Oe(t,sl,M=>l(4,s=M)),Oe(t,tt,M=>l(24,r=M)),Oe(t,lt,M=>l(5,n=M));let{inAuto:c=!0}=e,{params:o}=e,{stats:p={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=e,{z_stack:u=!1}=e,{fc_:E=0}=e;function _(){Ie(tt,r.image_params.xy0=o.xy0,r),Ie(tt,r.image_params.xy1=o.xy1,r)}function d(M){if(!M)return!0;if(!c)return!1;const Ne=r.exps[E].cmds.filter(te=>te.cmd.op==="takeimage").map(te=>te.cmd.name);return Cs(Ne)[M]>1}function y(){o.name=this.value,l(0,o)}function I(){o.path=this.value,l(0,o)}function w(M){o=M,l(0,o)}function S(M){o=M,l(0,o)}function b(M){t.$$.not_equal(o.xy0,M)&&(o.xy0=M,l(0,o))}function v(M){t.$$.not_equal(o.xy1,M)&&(o.xy1=M,l(0,o))}function N(){o.overlap=le(this.value),l(0,o)}function L(){o.z_tilt=le(this.value),l(0,o)}const V=()=>Ie(lt,n={move:{z_tilt:o.z_tilt}},n);function C(){o.z_obj=le(this.value),l(0,o)}const B=()=>Ie(lt,n={move:{z_obj:o.z_obj}},n);function j(){u=this.checked,l(2,u)}function F(){o.z_spacing=le(this.value),l(0,o)}function J(){o.z_from=le(this.value),l(0,o)}function re(){o.z_to=le(this.value),l(0,o)}return t.$$set=M=>{"inAuto"in M&&l(3,c=M.inAuto),"params"in M&&l(0,o=M.params),"stats"in M&&l(1,p=M.stats),"z_stack"in M&&l(2,u=M.z_stack),"fc_"in M&&l(8,E=M.fc_)},t.$$.update=()=>{t.$$.dirty&16&&Ys(document.getElementById("control"),s.block),t.$$.dirty&1&&l(1,p.height=Math.max(o.xy1[1],o.xy0[1])-Math.min(o.xy1[1],o.xy0[1]),p),t.$$.dirty&1&&l(1,p.width=Math.max(o.xy1[0],o.xy0[0])-Math.min(o.xy1[0],o.xy0[0]),p),t.$$.dirty&3&&l(1,p.n_cols=p.width==0?1:Math.ceil(p.width/(.768*(1-o.overlap))),p),t.$$.dirty&2&&l(1,p.n_bundles=Math.ceil(p.height/.048),p),t.$$.dirty&2&&l(1,p.time=p.n_bundles*p.n_cols/20,p),t.$$.dirty&1&&l(1,p.n_z=Math.abs(o.z_to-o.z_from)+1,p)},[o,p,u,c,s,n,_,d,E,y,I,w,S,b,v,N,L,V,C,B,j,F,J,re]}class kn extends pt{constructor(e){super();_t(this,e,Js,Rs,dt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}function Ks(t){let e;return{c(){e=m("div"),this.h()},l(l){e=h(l,"DIV",{class:!0}),g(e).forEach(f),this.h()},h(){i(e,"class","absolute bottom-6 h-[90%] w-full bg-blue-800 opacity-60")},m(l,s){U(l,e,s)},d(l){l&&f(e)}}}function Qs(t){let e,l=t[3]+"",s;return{c(){e=m("span"),s=$(l),this.h()},l(r){e=h(r,"SPAN",{class:!0});var n=g(e);s=z(n,l),n.forEach(f),this.h()},h(){i(e,"class","vert absolute bottom-0 right-0 translate-x-1 text-center text-sm svelte-b05ewu")},m(r,n){U(r,e,n),a(e,s)},p(r,n){n&8&&l!==(l=r[3]+"")&&me(s,l)},d(r){r&&f(e)}}}function xs(t){let e,l,s,r;return e=new Es({props:{data:t[1],width:80,$$slots:{default:[Ks]},$$scope:{ctx:t}}}),s=new ys({props:{vertical:!0,count:5,$$slots:{default:[Qs,({value:n})=>({3:n}),({value:n})=>n?8:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment)},l(n){Q(e.$$.fragment,n),l=T(n),Q(s.$$.fragment,n)},m(n,c){x(e,n,c),U(n,l,c),x(s,n,c),r=!0},p(n,c){const o={};c&2&&(o.data=n[1]),c&16&&(o.$$scope={dirty:c,ctx:n}),e.$set(o);const p={};c&24&&(p.$$scope={dirty:c,ctx:n}),s.$set(p)},i(n){r||(W(e.$$.fragment,n),W(s.$$.fragment,n),r=!0)},o(n){q(e.$$.fragment,n),q(s.$$.fragment,n),r=!1},d(n){ee(e,n),n&&f(l),ee(s,n)}}}function en(t){let e,l,s;return l=new ks({props:{x1:-10,x2:4096+10,y1:0,y2:t[0],$$slots:{default:[xs]},$$scope:{ctx:t}}}),{c(){e=m("div"),K(l.$$.fragment),this.h()},l(r){e=h(r,"DIV",{class:!0});var n=g(e);Q(l.$$.fragment,n),n.forEach(f),this.h()},h(){i(e,"class","box-border h-full w-full")},m(r,n){U(r,e,n),x(l,e,null),s=!0},p(r,[n]){const c={};n&1&&(c.y2=r[0]),n&18&&(c.$$scope={dirty:n,ctx:r}),l.$set(c)},i(r){s||(W(l.$$.fragment,r),s=!0)},o(r){q(l.$$.fragment,r),s=!1},d(r){r&&f(e),ee(l)}}}function tn(t,e){return t.map((l,s)=>({x:l,y:e[s]}))}function ln(t,e,l){let{hist:s}=e,r,n=[{x:0,y:0},{x:2e3,y:10}];return t.$$set=c=>{"hist"in c&&l(2,s=c.hist)},t.$$.update=()=>{t.$$.dirty&4&&s&&(l(1,n=tn(s.bin_edges,s.counts)),l(0,r=Math.max(...s.counts)))},[r,n,s]}class sn extends pt{constructor(e){super();_t(this,e,ln,en,dt,{hist:2})}}function nn(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 0"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=g(e);l=z(n,"Channel 0"),n.forEach(f),this.h()},h(){i(e,"class",s=pe(st("green",t[16],t[1].img.channels[0]))+" svelte-17prul8"),A(e,"bg-green-600",t[16])},m(r,n){U(r,e,n),a(e,l)},p(r,n){n&65538&&s!==(s=pe(st("green",r[16],r[1].img.channels[0]))+" svelte-17prul8")&&i(e,"class",s),n&65538&&A(e,"bg-green-600",r[16])},d(r){r&&f(e)}}}function an(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 1"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=g(e);l=z(n,"Channel 1"),n.forEach(f),this.h()},h(){i(e,"class",s=pe(st("orange",t[16],t[1].img.channels[1]))+" svelte-17prul8"),A(e,"bg-orange-500",t[16])},m(r,n){U(r,e,n),a(e,l)},p(r,n){n&65538&&s!==(s=pe(st("orange",r[16],r[1].img.channels[1]))+" svelte-17prul8")&&i(e,"class",s),n&65538&&A(e,"bg-orange-500",r[16])},d(r){r&&f(e)}}}function on(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 2"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=g(e);l=z(n,"Channel 2"),n.forEach(f),this.h()},h(){i(e,"class",s=pe(st("rose",t[16],t[1].img.channels[2]))+" svelte-17prul8"),A(e,"bg-rose-600",t[16])},m(r,n){U(r,e,n),a(e,l)},p(r,n){n&65538&&s!==(s=pe(st("rose",r[16],r[1].img.channels[2]))+" svelte-17prul8")&&i(e,"class",s),n&65538&&A(e,"bg-rose-600",r[16])},d(r){r&&f(e)}}}function rn(t){let e,l,s;return{c(){e=m("button"),l=$("Channel 3"),this.h()},l(r){e=h(r,"BUTTON",{class:!0});var n=g(e);l=z(n,"Channel 3"),n.forEach(f),this.h()},h(){i(e,"class",s=pe(st("amber",t[16],t[1].img.channels[3]))+" svelte-17prul8"),A(e,"bg-amber-800",t[16])},m(r,n){U(r,e,n),a(e,l)},p(r,n){n&65538&&s!==(s=pe(st("amber",r[16],r[1].img.channels[3]))+" svelte-17prul8")&&i(e,"class",s),n&65538&&A(e,"bg-amber-800",r[16])},d(r){r&&f(e)}}}function un(t){let e,l,s,r,n,c,o,p;return e=new ll({props:{disabled:!t[1].img.channels[0],$$slots:{default:[nn,({selected:u})=>({16:u}),({selected:u})=>u?65536:0]},$$scope:{ctx:t}}}),s=new ll({props:{disabled:!t[1].img.channels[1],$$slots:{default:[an,({selected:u})=>({16:u}),({selected:u})=>u?65536:0]},$$scope:{ctx:t}}}),n=new ll({props:{disabled:!t[1].img.channels[2],$$slots:{default:[on,({selected:u})=>({16:u}),({selected:u})=>u?65536:0]},$$scope:{ctx:t}}}),o=new ll({props:{disabled:!t[1].img.channels[3],$$slots:{default:[rn,({selected:u})=>({16:u}),({selected:u})=>u?65536:0]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment),l=P(),K(s.$$.fragment),r=P(),K(n.$$.fragment),c=P(),K(o.$$.fragment)},l(u){Q(e.$$.fragment,u),l=T(u),Q(s.$$.fragment,u),r=T(u),Q(n.$$.fragment,u),c=T(u),Q(o.$$.fragment,u)},m(u,E){x(e,u,E),U(u,l,E),x(s,u,E),U(u,r,E),x(n,u,E),U(u,c,E),x(o,u,E),p=!0},p(u,E){const _={};E&2&&(_.disabled=!u[1].img.channels[0]),E&196610&&(_.$$scope={dirty:E,ctx:u}),e.$set(_);const d={};E&2&&(d.disabled=!u[1].img.channels[1]),E&196610&&(d.$$scope={dirty:E,ctx:u}),s.$set(d);const y={};E&2&&(y.disabled=!u[1].img.channels[2]),E&196610&&(y.$$scope={dirty:E,ctx:u}),n.$set(y);const I={};E&2&&(I.disabled=!u[1].img.channels[3]),E&196610&&(I.$$scope={dirty:E,ctx:u}),o.$set(I)},i(u){p||(W(e.$$.fragment,u),W(s.$$.fragment,u),W(n.$$.fragment,u),W(o.$$.fragment,u),p=!0)},o(u){q(e.$$.fragment,u),q(s.$$.fragment,u),q(n.$$.fragment,u),q(o.$$.fragment,u),p=!1},d(u){ee(e,u),u&&f(l),ee(s,u),u&&f(r),ee(n,u),u&&f(c),ee(o,u)}}}function fn(t){let e,l;return e=new Ns({props:{class:"grid grid-cols-4 space-x-1 rounded-xl bg-white p-1 opacity-90 shadow",$$slots:{default:[un]},$$scope:{ctx:t}}}),{c(){K(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,r){x(e,s,r),l=!0},p(s,r){const n={};r&131074&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){l||(W(e.$$.fragment,s),l=!0)},o(s){q(e.$$.fragment,s),l=!1},d(s){ee(e,s)}}}function cn(t){let e,l,s,r,n,c,o,p,u,E,_,d,y,I,w,S,b,v,N;return n=new ws({props:{$$slots:{default:[fn]},$$scope:{ctx:t}}}),n.$on("change",t[10]),S=new sn({props:{hist:t[1].img.hist[t[0]]}}),{c(){e=m("div"),l=m("canvas"),s=P(),r=m("div"),K(n.$$.fragment),c=P(),o=m("button"),p=$("Center"),u=P(),E=m("div"),_=m("label"),d=m("input"),y=$(`\r
      Show Histogram`),I=P(),w=m("div"),K(S.$$.fragment),this.h()},l(L){e=h(L,"DIV",{id:!0,class:!0});var V=g(e);l=h(V,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),g(l).forEach(f),s=T(V),r=h(V,"DIV",{class:!0});var C=g(r);Q(n.$$.fragment,C),C.forEach(f),c=T(V),o=h(V,"BUTTON",{class:!0});var B=g(o);p=z(B,"Center"),B.forEach(f),u=T(V),E=h(V,"DIV",{class:!0});var j=g(E);_=h(j,"LABEL",{class:!0});var F=g(_);d=h(F,"INPUT",{type:!0,class:!0}),y=z(F,`\r
      Show Histogram`),F.forEach(f),j.forEach(f),I=T(V),w=h(V,"DIV",{id:!0,class:!0});var J=g(w);Q(S.$$.fragment,J),J.forEach(f),V.forEach(f),this.h()},h(){i(l,"id","canvas"),i(l,"width",2048),i(l,"height",128),i(l,"class","svelte-17prul8"),i(r,"class","absolute top-4 left-4 z-40 h-10 w-2/5"),i(o,"class","white-button absolute top-4 right-56 z-40 inline-flex h-10 items-center rounded-lg border bg-white px-4 font-medium opacity-90 shadow-lg"),i(d,"type","checkbox"),i(d,"class","mr-1 rounded text-blue-500 focus:ring-blue-300"),i(_,"class","mx-4 cursor-pointer font-medium"),i(E,"class","absolute top-4 right-8 z-40 inline-flex h-10 items-center rounded-lg border bg-white opacity-90 shadow-lg"),i(w,"id","histogram"),i(w,"class","absolute bottom-8 right-8 z-30 h-[300px] w-[400px] rounded-lg bg-white p-6 pb-3 opacity-90 shadow-lg shadow-gray-500"),A(w,"hidden",!t[5]),i(e,"id","frame"),i(e,"class","relative z-10 mx-auto mt-4 min-h-[60vh] w-11/12 resize-y rounded-md border border-gray-300 svelte-17prul8")},m(L,V){U(L,e,V),a(e,l),t[8](l),a(e,s),a(e,r),x(n,r,null),a(e,c),a(e,o),a(o,p),a(e,u),a(e,E),a(E,_),a(_,d),d.checked=t[5],a(_,y),a(e,I),a(e,w),x(S,w,null),t[14](e),b=!0,v||(N=[Z(l,"wheel",function(){$s(t[4].zoomWithWheel)&&t[4].zoomWithWheel.apply(this,arguments)}),Z(l,"click",t[9]),Z(o,"click",t[11]),Z(d,"change",t[12]),Z(d,"click",t[13])],v=!0)},p(L,[V]){t=L;const C={};V&131074&&(C.$$scope={dirty:V,ctx:t}),n.$set(C),V&32&&(d.checked=t[5]);const B={};V&3&&(B.hist=t[1].img.hist[t[0]]),S.$set(B),V&32&&A(w,"hidden",!t[5])},i(L){b||(W(n.$$.fragment,L),W(S.$$.fragment,L),b=!0)},o(L){q(n.$$.fragment,L),q(S.$$.fragment,L),b=!1},d(L){L&&f(e),t[8](null),ee(n),ee(S),t[14](null),v=!1,al(N)}}}function st(t,e,l){return`tab-button ${e?"text-white font-semibold":`${l?`font-semibold text-gray-700 hover:text-black bg-white hover:bg-${t}-300`:"text-gray-400 cursor-default"}`}`}function pn(t,e,l){let s;Oe(t,Ds,N=>l(1,s=N));let r,n,c,o,p,u=!0,E=0,_=[0,1,2,3];zs(()=>{l(6,p=n.getContext("2d")),l(4,o=Is(n,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),c=new Image,c.onload=()=>p==null?void 0:p.drawImage(c,0,0);function d(N){Et[N?"unshift":"push"](()=>{n=N,l(3,n)})}const y=()=>l(0,E=1),I=N=>l(0,E=N.detail),w=()=>{o.pan(0,0)};function S(){u=this.checked,l(5,u)}const b=()=>l(5,u=!u);function v(N){Et[N?"unshift":"push"](()=>{r=N,l(2,r),l(6,p),l(1,s),l(0,E),l(7,_)})}return t.$$.update=()=>{if(t.$$.dirty&195&&p&&s.img){if(l(7,_=s.img.channels.flatMap((N,L)=>N?[L]:[])),l(6,p.canvas.height=s.img.dim[0],p),l(6,p.canvas.width=s.img.dim[1],p),l(2,r.style.height=`${Math.min(512,s.img.dim[0])}px`,r),console.log(s.img.channels),!s.img.channels[E]){const N=s.img.channels.findIndex(Boolean);console.log(N),N!==-1&&l(0,E=N)}c.src=s.img.img[_.findIndex(N=>N===E)]}},[E,s,r,n,o,u,p,_,d,y,I,w,S,b,v]}class En extends pt{constructor(e){super();_t(this,e,pn,cn,dt,{})}}const _n=t=>({}),fs=t=>({});function dn(t){let e,l,s,r,n,c,o;const p=t[3].buttons,u=Ul(p,t,t[2],fs),E=t[3].default,_=Ul(E,t,t[2],null);return{c(){e=m("span"),u&&u.c(),l=P(),s=m("content"),_&&_.c(),r=P(),n=m("div"),c=m("progress"),this.h()},l(d){e=h(d,"SPAN",{class:!0});var y=g(e);u&&u.l(y),l=T(y),s=h(y,"CONTENT",{class:!0});var I=g(s);_&&_.l(I),r=T(I),n=h(I,"DIV",{class:!0});var w=g(n);c=h(w,"PROGRESS",{class:!0}),g(c).forEach(f),w.forEach(f),I.forEach(f),y.forEach(f),this.h()},h(){i(c,"class","relative h-2 w-full appearance-none overflow-hidden rounded-lg shadow svelte-ica9vh"),c.value=t[1],i(n,"class","mt-1"),i(s,"class","flex-grow rounded-lg border border-base-300 bg-white/60 px-4 py-2"),i(e,"class","z-40 flex w-full space-x-2")},m(d,y){U(d,e,y),u&&u.m(e,null),a(e,l),a(e,s),_&&_.m(s,null),a(s,r),a(s,n),a(n,c),o=!0},p(d,[y]){u&&u.p&&(!o||y&4)&&Ml(u,p,d,d[2],o?Ll(p,d[2],y,_n):Bl(d[2]),fs),_&&_.p&&(!o||y&4)&&Ml(_,E,d,d[2],o?Ll(E,d[2],y,null):Bl(d[2]),null),(!o||y&2)&&(c.value=d[1])},i(d){o||(W(u,d),W(_,d),o=!0)},o(d){q(u,d),q(_,d),o=!1},d(d){d&&f(e),u&&u.d(d),_&&_.d(d)}}}function mn(t,e,l){let s,r=ps,n=()=>(r(),r=Ts(p,u=>l(1,s=u)),p);t.$$.on_destroy.push(()=>r());let{$$slots:c={},$$scope:o}=e;const p=Ps(0,{duration:400,easing:Os});return n(),t.$$set=u=>{"$$scope"in u&&l(2,o=u.$$scope)},[p,s,o,c]}class yn extends pt{constructor(e){super();_t(this,e,mn,dn,dt,{progress:0})}get progress(){return this.$$.ctx[0]}}export{En as P,kn as T,yn as a};
