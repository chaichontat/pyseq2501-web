import"./vendor-88195046.js";const u=[2e3,5e3,1e4,3e4,6e4];function a(s,m=void 0,p=o=>o){let o,r,i,c=0;const n=new Set;function S(){const e=c;return c++,u[e>=u.length-1?u.length-1:e]}function d(){i&&clearTimeout(i),o&&(o.close(),o=void 0)}function w(){d(),n.size>0&&(i=setTimeout(()=>l(),S()))}async function l(){return i&&(clearTimeout(i),i=void 0),r||(o=new WebSocket(s),o.onmessage=e=>{n.forEach(t=>{t(p(e.data))})},o.onclose=e=>{n.forEach(t=>{t(void 0)}),w()},r=new Promise((e,t)=>{o&&(o.onerror=f=>{t(f),r=void 0},o.onopen=f=>{c=0,e(!0),r=void 0})}),r)}return{set(e){if(o){const t=typeof e=="object"?()=>o.send(JSON.stringify(e)):()=>o.send(e);o.readyState!==WebSocket.OPEN?l().then(t):t()}n.forEach(t=>{t(e)})},update(e){console.log("update")},subscribe(e){return l(),e(m),n.add(e),()=>{n.delete(e),n.size===0&&d()}}}}let g={x:-1,y:-1,z_tilt:[-1,-1,-1],z_obj:-1,laser_r:-1,laser_g:-1,shutter:!1,moving:!1,msg:""},h={n:8,x:0,y:0,z_tilt:19850,z_obj:32e3,laser_r:5,laser_g:5,flowcell:!1},_={n:0,img:""};const O=a(`ws://${window.location.hostname}:8000/img`,_,s=>JSON.parse(JSON.parse(s))),J=a(`ws://${window.location.hostname}:8000/status`,g,s=>JSON.parse(JSON.parse(s))),b=a(`ws://${window.location.hostname}:8000/user`,h,s=>JSON.parse(JSON.parse(s))),v=a(`ws://${window.location.hostname}:8000/cmd`,void 0,s=>JSON.parse(JSON.parse(s)));export{v as c,O as i,J as s,b as u};
