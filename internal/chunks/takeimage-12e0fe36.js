import{S as $t,i as wt,s as yt,ac as vl,e as c,w as J,c as d,a as m,x as K,d as f,b as u,g as M,y as Q,q as H,o as W,B as x,ad as bl,ae as kl,k as P,m as T,t as $,h as w,H as l,j as me,af as El,W as D,X,U as $l,Y as os,N as ze,v as wl,ag as yl,ah as zl,V as kt,ai as ls,a7 as de,F as el,I as tl,J as sl,K as ll,aj as Il,ak as Nl,M as Pl,al as Tl,P as al,Q as nl,a3 as G,T as ye,a4 as ee,a8 as Ol,O as Oe,Z as as,f as Sl,n as Cl,p as Dl,_ as ns}from"./vendor-86a163ee.js";import{l as Vl,u as Re,a as Ge,s as Dt,c as nt,b as Al}from"./utils-2dc1caf8.js";import{G as Vt,r as Ul}from"./go-cd27acc0.js";import{t as Ms}from"./tooltip-8c168986.js";function Ml(e){let t;return{c(){t=c("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(f),this.h()},h(){u(t,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(s,a){M(s,t,a)},d(s){s&&f(t)}}}function Bl(e){let t,s=e[3]+"",a;return{c(){t=c("span"),a=$(s),this.h()},l(r){t=d(r,"SPAN",{class:!0});var o=m(t);a=w(o,s),o.forEach(f),this.h()},h(){u(t,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(r,o){M(r,t,o),l(t,a)},p(r,o){o&8&&s!==(s=r[3]+"")&&me(a,s)},d(r){r&&f(t)}}}function ql(e){let t,s,a,r;return t=new bl({props:{data:e[1],width:80,$$slots:{default:[Ml]},$$scope:{ctx:e}}}),a=new kl({props:{vertical:!0,count:5,$$slots:{default:[Bl,({value:o})=>({3:o}),({value:o})=>o?8:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),s=P(),J(a.$$.fragment)},l(o){K(t.$$.fragment,o),s=T(o),K(a.$$.fragment,o)},m(o,p){Q(t,o,p),M(o,s,p),Q(a,o,p),r=!0},p(o,p){const n={};p&2&&(n.data=o[1]),p&16&&(n.$$scope={dirty:p,ctx:o}),t.$set(n);const v={};p&24&&(v.$$scope={dirty:p,ctx:o}),a.$set(v)},i(o){r||(H(t.$$.fragment,o),H(a.$$.fragment,o),r=!0)},o(o){W(t.$$.fragment,o),W(a.$$.fragment,o),r=!1},d(o){x(t,o),o&&f(s),x(a,o)}}}function jl(e){let t,s,a;return s=new vl({props:{x1:-10,x2:4096+10,y1:0,y2:e[0],$$slots:{default:[ql]},$$scope:{ctx:e}}}),{c(){t=c("div"),J(s.$$.fragment),this.h()},l(r){t=d(r,"DIV",{class:!0});var o=m(t);K(s.$$.fragment,o),o.forEach(f),this.h()},h(){u(t,"class","w-full h-full box-border")},m(r,o){M(r,t,o),Q(s,t,null),a=!0},p(r,[o]){const p={};o&1&&(p.y2=r[0]),o&18&&(p.$$scope={dirty:o,ctx:r}),s.$set(p)},i(r){a||(H(s.$$.fragment,r),a=!0)},o(r){W(s.$$.fragment,r),a=!1},d(r){r&&f(t),x(s)}}}function Ll(e,t){return e.map((s,a)=>({x:s,y:t[a]}))}function Fl(e,t,s){let{hist:a}=t,r,o=[{x:0,y:0},{x:2e3,y:10}];return e.$$set=p=>{"hist"in p&&s(2,a=p.hist)},e.$$.update=()=>{e.$$.dirty&4&&a&&(s(1,o=Ll(a.bin_edges,a.counts)),s(0,r=Math.max(...a.counts)))},[r,o,a]}class Hl extends $t{constructor(t){super();wt(this,t,Fl,jl,yt,{hist:2})}}function Zl(e){let t,s,a;return{c(){t=c("button"),s=$("Channel 0"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);s=w(o,"Channel 0"),o.forEach(f),this.h()},h(){u(t,"class",a=de(ot("green",e[15],e[6].image_params.channels[0]))+" svelte-132l8kq"),D(t,"bg-green-600",e[15])},m(r,o){M(r,t,o),l(t,s)},p(r,o){o&32832&&a!==(a=de(ot("green",r[15],r[6].image_params.channels[0]))+" svelte-132l8kq")&&u(t,"class",a),o&32832&&D(t,"bg-green-600",r[15])},d(r){r&&f(t)}}}function Wl(e){let t,s,a;return{c(){t=c("button"),s=$("Channel 1"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);s=w(o,"Channel 1"),o.forEach(f),this.h()},h(){u(t,"class",a=de(ot("orange",e[15],e[6].image_params.channels[1]))+" svelte-132l8kq"),D(t,"bg-orange-500",e[15])},m(r,o){M(r,t,o),l(t,s)},p(r,o){o&32832&&a!==(a=de(ot("orange",r[15],r[6].image_params.channels[1]))+" svelte-132l8kq")&&u(t,"class",a),o&32832&&D(t,"bg-orange-500",r[15])},d(r){r&&f(t)}}}function Xl(e){let t,s,a;return{c(){t=c("button"),s=$("Channel 2"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);s=w(o,"Channel 2"),o.forEach(f),this.h()},h(){u(t,"class",a=de(ot("rose",e[15],e[6].image_params.channels[2]))+" svelte-132l8kq"),D(t,"bg-rose-600",e[15])},m(r,o){M(r,t,o),l(t,s)},p(r,o){o&32832&&a!==(a=de(ot("rose",r[15],r[6].image_params.channels[2]))+" svelte-132l8kq")&&u(t,"class",a),o&32832&&D(t,"bg-rose-600",r[15])},d(r){r&&f(t)}}}function Gl(e){let t,s,a;return{c(){t=c("button"),s=$("Channel 3"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);s=w(o,"Channel 3"),o.forEach(f),this.h()},h(){u(t,"class",a=de(ot("amber",e[15],e[6].image_params.channels[3]))+" svelte-132l8kq"),D(t,"bg-amber-800",e[15])},m(r,o){M(r,t,o),l(t,s)},p(r,o){o&32832&&a!==(a=de(ot("amber",r[15],r[6].image_params.channels[3]))+" svelte-132l8kq")&&u(t,"class",a),o&32832&&D(t,"bg-amber-800",r[15])},d(r){r&&f(t)}}}function Rl(e){let t,s,a,r,o,p,n,v;return t=new ls({props:{disabled:!e[6].image_params.channels[0],$$slots:{default:[Zl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),a=new ls({props:{disabled:!e[6].image_params.channels[1],$$slots:{default:[Wl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),o=new ls({props:{disabled:!e[6].image_params.channels[2],$$slots:{default:[Xl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),n=new ls({props:{disabled:!e[6].image_params.channels[3],$$slots:{default:[Gl,({selected:i})=>({15:i}),({selected:i})=>i?32768:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),s=P(),J(a.$$.fragment),r=P(),J(o.$$.fragment),p=P(),J(n.$$.fragment)},l(i){K(t.$$.fragment,i),s=T(i),K(a.$$.fragment,i),r=T(i),K(o.$$.fragment,i),p=T(i),K(n.$$.fragment,i)},m(i,z){Q(t,i,z),M(i,s,z),Q(a,i,z),M(i,r,z),Q(o,i,z),M(i,p,z),Q(n,i,z),v=!0},p(i,z){const h={};z&64&&(h.disabled=!i[6].image_params.channels[0]),z&98368&&(h.$$scope={dirty:z,ctx:i}),t.$set(h);const g={};z&64&&(g.disabled=!i[6].image_params.channels[1]),z&98368&&(g.$$scope={dirty:z,ctx:i}),a.$set(g);const y={};z&64&&(y.disabled=!i[6].image_params.channels[2]),z&98368&&(y.$$scope={dirty:z,ctx:i}),o.$set(y);const N={};z&64&&(N.disabled=!i[6].image_params.channels[3]),z&98368&&(N.$$scope={dirty:z,ctx:i}),n.$set(N)},i(i){v||(H(t.$$.fragment,i),H(a.$$.fragment,i),H(o.$$.fragment,i),H(n.$$.fragment,i),v=!0)},o(i){W(t.$$.fragment,i),W(a.$$.fragment,i),W(o.$$.fragment,i),W(n.$$.fragment,i),v=!1},d(i){x(t,i),i&&f(s),x(a,i),i&&f(r),x(o,i),i&&f(p),x(n,i)}}}function Yl(e){let t,s;return t=new zl({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[Rl]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(a){K(t.$$.fragment,a)},m(a,r){Q(t,a,r),s=!0},p(a,r){const o={};r&65600&&(o.$$scope={dirty:r,ctx:a}),t.$set(o)},i(a){s||(H(t.$$.fragment,a),s=!0)},o(a){W(t.$$.fragment,a),s=!1},d(a){x(t,a)}}}function Jl(e){let t,s,a,r,o,p,n,v,i,z,h,g,y,N,E,O,_,k,S;return o=new El({props:{$$slots:{default:[Yl]},$$scope:{ctx:e}}}),o.$on("change",e[9]),O=new Hl({props:{hist:e[1].img.hist[e[0]]}}),{c(){t=c("div"),s=c("canvas"),a=P(),r=c("div"),J(o.$$.fragment),p=P(),n=c("button"),v=$("Center"),i=P(),z=c("div"),h=c("label"),g=c("input"),y=$(`
      Show Histogram`),N=P(),E=c("div"),J(O.$$.fragment),this.h()},l(q){t=d(q,"DIV",{id:!0,class:!0});var B=m(t);s=d(B,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),m(s).forEach(f),a=T(B),r=d(B,"DIV",{class:!0});var C=m(r);K(o.$$.fragment,C),C.forEach(f),p=T(B),n=d(B,"BUTTON",{class:!0});var U=m(n);v=w(U,"Center"),U.forEach(f),i=T(B),z=d(B,"DIV",{class:!0});var j=m(z);h=d(j,"LABEL",{class:!0});var F=m(h);g=d(F,"INPUT",{type:!0,class:!0}),y=w(F,`
      Show Histogram`),F.forEach(f),j.forEach(f),N=T(B),E=d(B,"DIV",{id:!0,class:!0});var Z=m(E);K(O.$$.fragment,Z),Z.forEach(f),B.forEach(f),this.h()},h(){u(s,"id","canvas"),u(s,"width",2048),u(s,"height",128),u(s,"class","svelte-132l8kq"),u(r,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),u(n,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),u(g,"type","checkbox"),u(g,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),u(h,"class","mx-4 font-medium cursor-pointer"),u(z,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),u(E,"id","histogram"),u(E,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),D(E,"hidden",!e[5]),u(t,"id","frame"),u(t,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(q,B){M(q,t,B),l(t,s),e[8](s),l(t,a),l(t,r),Q(o,r,null),l(t,p),l(t,n),l(n,v),l(t,i),l(t,z),l(z,h),l(h,g),g.checked=e[5],l(h,y),l(t,N),l(t,E),Q(O,E,null),e[13](t),_=!0,k||(S=[X(s,"wheel",function(){$l(e[4].zoomWithWheel)&&e[4].zoomWithWheel.apply(this,arguments)}),X(n,"click",e[10]),X(g,"change",e[11]),X(g,"click",e[12])],k=!0)},p(q,[B]){e=q;const C={};B&65600&&(C.$$scope={dirty:B,ctx:e}),o.$set(C),B&32&&(g.checked=e[5]);const U={};B&3&&(U.hist=e[1].img.hist[e[0]]),O.$set(U),B&32&&D(E,"hidden",!e[5])},i(q){_||(H(o.$$.fragment,q),H(O.$$.fragment,q),_=!0)},o(q){W(o.$$.fragment,q),W(O.$$.fragment,q),_=!1},d(q){q&&f(t),e[8](null),x(o),x(O),e[13](null),k=!1,os(S)}}}function ot(e,t,s){return`tab-button ${t?"text-white":`${s?`text-gray-700 hover:text-black bg-white hover:bg-${e}-300`:"text-gray-400"}`}`}function Kl(e,t,s){let a,r;ze(e,Vl,k=>s(1,a=k)),ze(e,Re,k=>s(6,r=k));let o,p,n,v,i,z=!0,h=0;wl(()=>{s(7,i=p.getContext("2d")),s(4,v=yl(p,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),n=new Image,n.onload=()=>i==null?void 0:i.drawImage(n,0,0);function g(k){kt[k?"unshift":"push"](()=>{p=k,s(3,p)})}const y=k=>s(0,h=k.detail),N=()=>{v.pan(0,0)};function E(){z=this.checked,s(5,z)}const O=()=>s(5,z=!z);function _(k){kt[k?"unshift":"push"](()=>{o=k,s(2,o),s(7,i),s(1,a)})}return e.$$.update=()=>{e.$$.dirty&3&&(n.src=a.img.img[h]),e.$$.dirty&130&&i&&a.img&&(s(7,i.canvas.height=a.img.dim[0],i),s(7,i.canvas.width=a.img.dim[1],i),s(2,o.style.height=`${Math.min(512,a.img.dim[0])}px`,o))},[h,a,o,p,v,z,r,i,g,y,N,E,O,_]}class ha extends $t{constructor(t){super();wt(this,t,Kl,Jl,yt,{})}}const Ql=e=>({}),ol=e=>({});function xl(e){let t,s,a,r,o,p,n;const v=e[3].buttons,i=el(v,e,e[2],ol),z=e[3].default,h=el(z,e,e[2],null);return{c(){t=c("span"),i&&i.c(),s=P(),a=c("content"),h&&h.c(),r=P(),o=c("div"),p=c("progress"),this.h()},l(g){t=d(g,"SPAN",{class:!0});var y=m(t);i&&i.l(y),s=T(y),a=d(y,"CONTENT",{class:!0});var N=m(a);h&&h.l(N),r=T(N),o=d(N,"DIV",{class:!0});var E=m(o);p=d(E,"PROGRESS",{class:!0}),m(p).forEach(f),E.forEach(f),N.forEach(f),y.forEach(f),this.h()},h(){u(p,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),p.value=e[1],u(o,"class","mt-1"),u(a,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),u(t,"class","z-40 flex w-full space-x-2")},m(g,y){M(g,t,y),i&&i.m(t,null),l(t,s),l(t,a),h&&h.m(a,null),l(a,r),l(a,o),l(o,p),n=!0},p(g,[y]){i&&i.p&&(!n||y&4)&&tl(i,v,g,g[2],n?ll(v,g[2],y,Ql):sl(g[2]),ol),h&&h.p&&(!n||y&4)&&tl(h,z,g,g[2],n?ll(z,g[2],y,null):sl(g[2]),null),(!n||y&2)&&(p.value=g[1])},i(g){n||(H(i,g),H(h,g),n=!0)},o(g){W(i,g),W(h,g),n=!1},d(g){g&&f(t),i&&i.d(g),h&&h.d(g)}}}function ea(e,t,s){let a,r=Pl,o=()=>(r(),r=Nl(v,i=>s(1,a=i)),v);e.$$.on_destroy.push(()=>r());let{$$slots:p={},$$scope:n}=t;const v=Il(0,{duration:400,easing:Tl});return o(),e.$$set=i=>{"$$scope"in i&&s(2,n=i.$$scope)},[v,a,n,p]}class ga extends $t{constructor(t){super();wt(this,t,ea,xl,yt,{progress:0})}get progress(){return this.$$.ctx[0]}}function ta(e){let t,s,a,r,o,p,n,v,i,z,h,g,y,N,E,O,_,k,S,q,B;return y=new Vt({props:{disabled:e[3]}}),y.$on("click",e[11]),{c(){t=c("div"),s=c("div"),a=c("span"),r=$("X"),o=P(),p=c("input"),n=P(),v=c("span"),i=$("Y"),z=P(),h=c("input"),g=P(),J(y.$$.fragment),N=P(),E=c("button"),O=al("svg"),_=al("path"),k=$(`
    Current`),this.h()},l(C){t=d(C,"DIV",{class:!0});var U=m(t);s=d(U,"DIV",{class:!0});var j=m(s);a=d(j,"SPAN",{class:!0});var F=m(a);r=w(F,"X"),F.forEach(f),o=T(j),p=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),n=T(j),v=d(j,"SPAN",{class:!0});var Z=m(v);i=w(Z,"Y"),Z.forEach(f),z=T(j),h=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(f),g=T(U),K(y.$$.fragment,U),N=T(U),E=d(U,"BUTTON",{type:!0,class:!0});var te=m(E);O=nl(te,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var A=m(O);_=nl(A,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(_).forEach(f),A.forEach(f),k=w(te,`
    Current`),te.forEach(f),U.forEach(f),this.h()},h(){u(a,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),D(a,"span-disabled",e[2].block),u(p,"type","number"),u(p,"min","-5"),u(p,"max","30"),u(p,"step","0.01"),u(p,"class","z-10 h-10 text-center rounded-none pretty w-28"),p.disabled=e[3],u(v,"class","flex items-center color-group svelte-awp8a4"),D(v,"span-disabled",e[2].block),u(h,"type","number"),u(h,"min","-5"),u(h,"max","80"),u(h,"step","0.01"),u(h,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),h.disabled=e[3],u(s,"class","flex font-medium"),u(_,"stroke-linecap","round"),u(_,"stroke-linejoin","round"),u(_,"stroke-width","2"),u(_,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),u(O,"xmlns","http://www.w3.org/2000/svg"),u(O,"class","w-5 h-5 mr-1"),u(O,"fill","none"),u(O,"viewBox","0 0 24 24"),u(O,"stroke","currentColor"),u(E,"type","button"),u(E,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),E.disabled=e[3],u(t,"class","flex gap-x-2")},m(C,U){M(C,t,U),l(t,s),l(s,a),l(a,r),l(s,o),l(s,p),G(p,e[0][0]),l(s,n),l(s,v),l(v,i),l(s,z),l(s,h),G(h,e[0][1]),l(t,g),Q(y,t,null),l(t,N),l(t,E),l(E,O),l(O,_),l(E,k),S=!0,q||(B=[X(p,"input",e[7]),X(p,"change",e[8]),ye(Ge.call(null,p,[-5,30])),X(h,"input",e[9]),X(h,"change",e[10]),ye(Ge.call(null,h,[-5,80])),X(E,"click",e[6])],q=!0)},p(C,[U]){U&4&&D(a,"span-disabled",C[2].block),(!S||U&8)&&(p.disabled=C[3]),U&1&&ee(p.value)!==C[0][0]&&G(p,C[0][0]),U&4&&D(v,"span-disabled",C[2].block),(!S||U&8)&&(h.disabled=C[3]),U&1&&ee(h.value)!==C[0][1]&&G(h,C[0][1]);const j={};U&8&&(j.disabled=C[3]),y.$set(j),(!S||U&8)&&(E.disabled=C[3])},i(C){S||(H(y.$$.fragment,C),S=!0)},o(C){W(y.$$.fragment,C),S=!1},d(C){C&&f(t),x(y),q=!1,os(B)}}}function sa(e,t,s){let a,r,o,p;ze(e,Dt,_=>s(2,a=_)),ze(e,Dt,_=>s(12,r=_)),ze(e,Re,_=>s(13,o=_)),ze(e,nt,_=>s(4,p=_));const n=Ol();let{i:v}=t,{xy:i=[-1,-1]}=t;function z(){const{x:_,y:k}=Ul(o.image_params.fc,r.x,r.y);s(0,i[0]=Math.round((_+Number.EPSILON)*100)/100,i),s(0,i[1]=Math.round((k+Number.EPSILON)*100)/100,i)}let h=!1;function g(){i[0]=ee(this.value),s(0,i)}const y=()=>n("change");function N(){i[1]=ee(this.value),s(0,i)}const E=()=>n("change"),O=()=>{Oe(Dt,a.block="moving",a),Oe(nt,p={move:v===0?{xy0:i}:{xy1:i}},p)};return e.$$set=_=>{"i"in _&&s(1,v=_.i),"xy"in _&&s(0,i=_.xy)},e.$$.update=()=>{e.$$.dirty&4&&s(3,h=Boolean(a.block))},[i,v,a,h,p,n,z,g,y,N,E,O]}class rl extends $t{constructor(t){super();wt(this,t,sa,ta,yt,{i:1,xy:0})}}function la(e){let t;return{c(){t=$("Set")},l(s){t=w(s,"Set")},m(s,a){M(s,t,a)},d(s){s&&f(t)}}}function aa(e){let t,s,a,r,o,p,n,v,i,z,h,g,y,N,E,O;return{c(){t=c("option"),s=$("Open"),a=c("option"),r=$("0.2"),o=c("option"),p=$("0.5"),n=c("option"),v=$("0.6"),i=c("option"),z=$("1.0"),h=c("option"),g=$("2.4"),y=c("option"),N=$("4.0"),E=c("option"),O=$("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var k=m(t);s=w(k,"Open"),k.forEach(f),a=d(_,"OPTION",{});var S=m(a);r=w(S,"0.2"),S.forEach(f),o=d(_,"OPTION",{});var q=m(o);p=w(q,"0.5"),q.forEach(f),n=d(_,"OPTION",{});var B=m(n);v=w(B,"0.6"),B.forEach(f),i=d(_,"OPTION",{});var C=m(i);z=w(C,"1.0"),C.forEach(f),h=d(_,"OPTION",{});var U=m(h);g=w(U,"2.4"),U.forEach(f),y=d(_,"OPTION",{});var j=m(y);N=w(j,"4.0"),j.forEach(f),E=d(_,"OPTION",{});var F=m(E);O=w(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,a.__value="0.2",a.value=a.__value,o.__value="0.5",o.value=o.__value,n.__value="0.6",n.value=n.__value,i.__value="1.0",i.value=i.__value,h.__value="2.4",h.value=h.__value,y.__value="4.0",y.value=y.__value,E.__value="Closed",E.value=E.__value},m(_,k){M(_,t,k),l(t,s),M(_,a,k),l(a,r),M(_,o,k),l(o,p),M(_,n,k),l(n,v),M(_,i,k),l(i,z),M(_,h,k),l(h,g),M(_,y,k),l(y,N),M(_,E,k),l(E,O)},d(_){_&&f(t),_&&f(a),_&&f(o),_&&f(n),_&&f(i),_&&f(h),_&&f(y),_&&f(E)}}}function na(e){let t,s,a,r,o,p,n,v,i,z,h,g,y,N,E,O;return{c(){t=c("option"),s=$("Open"),a=c("option"),r=$("1.0"),o=c("option"),p=$("2.0"),n=c("option"),v=$("3.5"),i=c("option"),z=$("3.8"),h=c("option"),g=$("4.0"),y=c("option"),N=$("4.5"),E=c("option"),O=$("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var k=m(t);s=w(k,"Open"),k.forEach(f),a=d(_,"OPTION",{});var S=m(a);r=w(S,"1.0"),S.forEach(f),o=d(_,"OPTION",{});var q=m(o);p=w(q,"2.0"),q.forEach(f),n=d(_,"OPTION",{});var B=m(n);v=w(B,"3.5"),B.forEach(f),i=d(_,"OPTION",{});var C=m(i);z=w(C,"3.8"),C.forEach(f),h=d(_,"OPTION",{});var U=m(h);g=w(U,"4.0"),U.forEach(f),y=d(_,"OPTION",{});var j=m(y);N=w(j,"4.5"),j.forEach(f),E=d(_,"OPTION",{});var F=m(E);O=w(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,a.__value="1.0",a.value=a.__value,o.__value="2.0",o.value=o.__value,n.__value="3.5",n.value=n.__value,i.__value="3.8",i.value=i.__value,h.__value="4.0",h.value=h.__value,y.__value="4.5",y.value=y.__value,E.__value="Closed",E.value=E.__value},m(_,k){M(_,t,k),l(t,s),M(_,a,k),l(a,r),M(_,o,k),l(o,p),M(_,n,k),l(n,v),M(_,i,k),l(i,z),M(_,h,k),l(h,g),M(_,y,k),l(y,N),M(_,E,k),l(E,O)},d(_){_&&f(t),_&&f(a),_&&f(o),_&&f(n),_&&f(i),_&&f(h),_&&f(y),_&&f(E)}}}function oa(e){let t,s,a,r,o,p,n,v=(Boolean(e[1])?660:532)+"",i,z,h,g,y,N,E,O,_,k,S,q,B=2*e[1]+"",C,U,j,F,Z,te,A=2*e[1]+1+"",Se,Ie,R,rt,be,Ne,ue,it,Ve=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",fe,ut,oe,ke,Pe;E=new Vt({props:{disabled:e[4].block,$$slots:{default:[la]},$$scope:{ctx:e}}}),E.$on("click",e[8]);function Ae(I,L){return I[1]==0?na:aa}let Ye=Ae(e),he=Ye(e);return{c(){t=c("p"),s=c("span"),a=c("label"),r=c("input"),p=P(),n=c("div"),i=$(v),z=$(" nm"),h=P(),g=c("input"),N=$(`
    mW
    `),J(E.$$.fragment),O=P(),_=c("label"),k=c("input"),q=$(`
    Channel `),C=$(B),U=P(),j=c("label"),F=c("input"),te=$(`
    Channel `),Se=$(A),Ie=P(),R=c("span"),rt=$(`Filter OD
    `),be=c("select"),he.c(),Ne=P(),ue=c("p"),it=$("Effective: "),fe=$(Ve),ut=$(" mW"),this.h()},l(I){t=d(I,"P",{class:!0});var L=m(t);s=d(L,"SPAN",{class:!0});var ce=m(s);a=d(ce,"LABEL",{});var pe=m(a);r=d(pe,"INPUT",{type:!0,class:!0}),p=T(pe),n=d(pe,"DIV",{class:!0});var ge=m(n);i=w(ge,v),z=w(ge," nm"),ge.forEach(f),pe.forEach(f),h=T(ce),g=d(ce,"INPUT",{type:!0,class:!0,min:!0,max:!0}),N=w(ce,`
    mW
    `),K(E.$$.fragment,ce),ce.forEach(f),O=T(L),_=d(L,"LABEL",{class:!0});var Ce=m(_);k=d(Ce,"INPUT",{type:!0,class:!0}),q=w(Ce,`
    Channel `),C=w(Ce,B),Ce.forEach(f),U=T(L),j=d(L,"LABEL",{class:!0});var Ue=m(j);F=d(Ue,"INPUT",{type:!0,class:!0}),te=w(Ue,`
    Channel `),Se=w(Ue,A),Ue.forEach(f),Ie=T(L),R=d(L,"SPAN",{class:!0});var Me=m(R);rt=w(Me,`Filter OD
    `),be=d(Me,"SELECT",{class:!0});var Je=m(be);he.l(Je),Je.forEach(f),Ne=T(Me),ue=d(Me,"P",{class:!0});var Be=m(ue);it=w(Be,"Effective: "),fe=w(Be,Ve),ut=w(Be," mW"),Be.forEach(f),Me.forEach(f),L.forEach(f),this.h()},h(){u(r,"type","checkbox"),u(r,"class",o=de(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),u(n,"class","inline font-semibold"),D(n,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),D(n,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),u(g,"type","number"),u(g,"class","w-[4.5rem] h-8 pr-2 pretty"),u(g,"min","0"),u(g,"max","500"),g.disabled=y=!e[0].laser_onoff[e[1]],D(g,"pretty-disabled",!e[0].laser_onoff[0]),u(s,"class","flex items-center gap-x-2"),D(s,"text-gray-400",!e[0].laser_onoff[e[1]]),u(k,"type","checkbox"),u(k,"class",S=de(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),u(_,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),D(_,"text-gray-400",!e[0].channels[2*e[1]]),u(F,"type","checkbox"),u(F,"class",Z=de(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),u(j,"class","channel svelte-6ipz4o"),D(j,"text-gray-400",!e[0].channels[2*e[1]+1]),u(be,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"),u(ue,"class","ml-3 text-sm font-medium"),u(R,"class","ml-8 font-normal opacity-85"),u(t,"class","flex flex-col")},m(I,L){M(I,t,L),l(t,s),l(s,a),l(a,r),r.checked=e[0].laser_onoff[e[1]],l(a,p),l(a,n),l(n,i),l(n,z),l(s,h),l(s,g),G(g,e[0].lasers[e[1]]),l(s,N),Q(E,s,null),l(t,O),l(t,_),l(_,k),k.checked=e[0].channels[2*e[1]],l(_,q),l(_,C),l(t,U),l(t,j),l(j,F),F.checked=e[0].channels[2*e[1]+1],l(j,te),l(j,Se),l(t,Ie),l(t,R),l(R,rt),l(R,be),he.m(be,null),l(R,Ne),l(R,ue),l(ue,it),l(ue,fe),l(ue,ut),oe=!0,ke||(Pe=[X(r,"change",e[6]),X(g,"input",e[7]),ye(Ge.call(null,g,[0,500])),X(k,"change",e[9]),X(F,"change",e[10]),X(be,"change",e[5])],ke=!0)},p(I,[L]){(!oe||L&2&&o!==(o=de(`rounded mr-1 ${I[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&u(r,"class",o),L&3&&(r.checked=I[0].laser_onoff[I[1]]),(!oe||L&2)&&v!==(v=(Boolean(I[1])?660:532)+"")&&me(i,v),L&3&&D(n,"text-green-800",I[0].laser_onoff[I[1]]&&!I[1]),L&3&&D(n,"text-red-800",I[0].laser_onoff[I[1]]&&I[1]),(!oe||L&3&&y!==(y=!I[0].laser_onoff[I[1]]))&&(g.disabled=y),L&3&&ee(g.value)!==I[0].lasers[I[1]]&&G(g,I[0].lasers[I[1]]),L&1&&D(g,"pretty-disabled",!I[0].laser_onoff[0]);const ce={};L&16&&(ce.disabled=I[4].block),L&2048&&(ce.$$scope={dirty:L,ctx:I}),E.$set(ce),L&3&&D(s,"text-gray-400",!I[0].laser_onoff[I[1]]),(!oe||L&2&&S!==(S=de(`mr-1 rounded ${I[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&u(k,"class",S),L&3&&(k.checked=I[0].channels[2*I[1]]),(!oe||L&2)&&B!==(B=2*I[1]+"")&&me(C,B),L&3&&D(_,"text-gray-400",!I[0].channels[2*I[1]]),(!oe||L&2&&Z!==(Z=de(`mr-1 rounded ${I[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&u(F,"class",Z),L&3&&(F.checked=I[0].channels[2*I[1]+1]),(!oe||L&2)&&A!==(A=2*I[1]+1+"")&&me(Se,A),L&3&&D(j,"text-gray-400",!I[0].channels[2*I[1]+1]),Ye!==(Ye=Ae(I))&&(he.d(1),he=Ye(I),he&&(he.c(),he.m(be,null))),(!oe||L&3)&&Ve!==(Ve=(Number(I[0].od[I[1]]!=-1)*I[0].lasers[I[1]]*Math.pow(10,-I[0].od[I[1]])).toFixed(4)+"")&&me(fe,Ve)},i(I){oe||(H(E.$$.fragment,I),oe=!0)},o(I){W(E.$$.fragment,I),oe=!1},d(I){I&&f(t),x(E),he.d(),ke=!1,os(Pe)}}}function ra(e,t,s){let a,r,o;ze(e,nt,N=>s(2,a=N)),ze(e,Re,N=>s(3,r=N)),ze(e,Dt,N=>s(4,o=N));let{params:p}=t,{i:n}=t;function v(N){let E;switch(N.currentTarget.value){case"Open":E=0;break;case"Closed":E=-1;break;default:E=Number(N.currentTarget.value)}s(0,p.od[n]=E,p),Oe(Re,r.image_params.od[n]=p.od[n],r),Oe(nt,a={move:{od:n===0?[p.od[n],void 0]:[void 0,p.od[n]]}},a)}function i(){p.laser_onoff[n]=this.checked,s(0,p)}function z(){p.lasers[n]=ee(this.value),s(0,p)}const h=()=>{Oe(Re,r.image_params.laser_onoff[n]=p.laser_onoff[n],r),Oe(Re,r.image_params.lasers[n]=p.lasers[n],r),Oe(nt,a={move:{lasers:n===0?[p.lasers[n],void 0]:[void 0,p.lasers[n]],laser_onoff:n===0?[p.laser_onoff[n],void 0]:[void 0,p.laser_onoff[n]]}},a)};function g(){p.channels[2*n]=this.checked,s(0,p)}function y(){p.channels[2*n+1]=this.checked,s(0,p)}return e.$$set=N=>{"params"in N&&s(0,p=N.params),"i"in N&&s(1,n=N.i)},[p,n,a,r,o,v,i,z,h,g,y]}class il extends $t{constructor(t){super();wt(this,t,ra,oa,yt,{params:0,i:1})}}function ul(e){let t,s;return t=new Vt({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[ia]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(a){K(t.$$.fragment,a)},m(a,r){Q(t,a,r),s=!0},i(a){s||(H(t.$$.fragment,a),s=!0)},o(a){W(t.$$.fragment,a),s=!1},d(a){x(t,a)}}}function ia(e){let t;return{c(){t=$("Preview")},l(s){t=w(s,"Preview")},m(s,a){M(s,t,a)},d(s){s&&f(t)}}}function fl(e){let t,s,a,r,o,p;return{c(){t=c("p"),s=$("Image Path"),a=P(),r=c("input"),this.h()},l(n){t=d(n,"P",{class:!0});var v=m(t);s=w(v,"Image Path"),v.forEach(f),a=T(n),r=d(n,"INPUT",{type:!0,class:!0}),this.h()},h(){u(t,"class","text-lg svelte-1m4l8fo"),u(r,"type","text"),u(r,"class","flex-grow max-w-[470px] mb-4 pretty"),D(r,"invalid",!e[0].path)},m(n,v){M(n,t,v),l(t,s),M(n,a,v),M(n,r,v),G(r,e[0].path),o||(p=X(r,"input",e[10]),o=!0)},p(n,v){v&1&&r.value!==n[0].path&&G(r,n[0].path),v&1&&D(r,"invalid",!n[0].path)},d(n){n&&f(t),n&&f(a),n&&f(r),o=!1,p()}}}function pl(e){let t;return{c(){t=$("per z-stack.")},l(s){t=w(s,"per z-stack.")},m(s,a){M(s,t,a)},d(s){s&&f(t)}}}function _l(e){let t,s=e[1].n_z+"",a,r,o,p=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",n,v,i=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",z,h,g,y,N=(e[1].n_z?Et(e[1].n_z*e[1].time):Et(e[1].time))+"",E,O,_=e[1].n_z>1&&cl();return{c(){t=c("div"),a=$(s),r=$(" Z step"),_&&_.c(),o=$(" from "),n=$(p),v=$(" to "),z=$(i),h=P(),g=c("div"),y=$("Total time: "),E=$(N),O=$("."),this.h()},l(k){t=d(k,"DIV",{class:!0});var S=m(t);a=w(S,s),r=w(S," Z step"),_&&_.l(S),o=w(S," from "),n=w(S,p),v=w(S," to "),z=w(S,i),S.forEach(f),h=T(k),g=d(k,"DIV",{class:!0});var q=m(g);y=w(q,"Total time: "),E=w(q,N),O=w(q,"."),q.forEach(f),this.h()},h(){u(t,"class","px-2 font-base"),u(g,"class","px-2 font-semibold")},m(k,S){M(k,t,S),l(t,a),l(t,r),_&&_.m(t,null),l(t,o),l(t,n),l(t,v),l(t,z),M(k,h,S),M(k,g,S),l(g,y),l(g,E),l(g,O)},p(k,S){S&2&&s!==(s=k[1].n_z+"")&&me(a,s),k[1].n_z>1?_||(_=cl(),_.c(),_.m(t,o)):_&&(_.d(1),_=null),S&1&&p!==(p=k[0].z_obj+k[0].z_from*k[0].z_spacing+"")&&me(n,p),S&1&&i!==(i=k[0].z_obj+k[0].z_to*k[0].z_spacing+"")&&me(z,i),S&2&&N!==(N=(k[1].n_z?Et(k[1].n_z*k[1].time):Et(k[1].time))+"")&&me(E,N)},d(k){k&&f(t),_&&_.d(),k&&f(h),k&&f(g)}}}function cl(e){let t;return{c(){t=$("s")},l(s){t=w(s,"s")},m(s,a){M(s,t,a)},d(s){s&&f(t)}}}function ua(e){let t,s,a,r,o,p,n,v,i,z,h,g,y,N,E,O,_,k,S,q,B,C,U,j,F,Z,te,A,Se,Ie,R,rt,be,Ne,ue,it,Ve,fe,ut,oe,ke,Pe,Ae,Ye,he,I,L,ce,pe,ge,Ce=e[1].width.toFixed(2)+"",Ue,Me,Je=e[1].height.toFixed(2)+"",Be,rs,is,qe,zt=e[1].n_cols+"",At,us,It=e[1].n_bundles+"",Ut,fs,ps,Te,Nt=Et(e[1].time)+"",Mt,_s,cs,Ke,mt,ds,ms,Qe,xe,ft,ht,hs,gs,et,Ee,vs,je,bs,pt,gt,ks,Es,tt,$e,$s,Le,ws,st,lt,De,Bt,ys,Fe,at,zs,Is,Ns,se,He,Ps,Ts,le,qt,Os,Ze,Ss,Cs,ae,jt,Ds,We,Vs,As,ne,Lt,ve,Us,Bs,Y=e[3]&&ul(e),re=!e[3]&&fl(e);function dl(b){e[11](b)}let qs={i:0};e[0]!==void 0&&(qs.params=e[0]),O=new il({props:qs}),kt.push(()=>as(O,"params",dl));function ml(b){e[12](b)}let js={i:1};e[0]!==void 0&&(js.params=e[0]),S=new il({props:js}),kt.push(()=>as(S,"params",ml));function hl(b){e[13](b)}let Ls={i:0};e[0].xy0!==void 0&&(Ls.xy=e[0].xy0),R=new rl({props:Ls}),kt.push(()=>as(R,"xy",hl)),R.$on("change",e[6]);function gl(b){e[14](b)}let Fs={i:1};e[0].xy1!==void 0&&(Fs.xy=e[0].xy1),fe=new rl({props:Fs}),kt.push(()=>as(fe,"xy",gl)),fe.$on("change",e[6]);let _e=e[2]&&pl();je=new Vt({props:{disabled:e[4].block}}),je.$on("click",e[17]),Le=new Vt({props:{disabled:e[4].block}}),Le.$on("click",e[19]);let ie=e[2]&&_l(e);return{c(){t=c("div"),s=c("section"),a=c("p"),r=$("Name"),o=P(),p=c("div"),n=c("input"),v=P(),Y&&Y.c(),i=P(),re&&re.c(),z=P(),h=c("section"),g=c("h2"),y=$("Laser and Channels"),N=P(),E=c("div"),J(O.$$.fragment),k=P(),J(S.$$.fragment),B=P(),C=c("section"),U=c("h2"),j=$("Positions"),F=P(),Z=c("div"),te=c("div"),A=c("p"),Se=$("\u{1F4CC} Corner 1"),Ie=P(),J(R.$$.fragment),be=P(),Ne=c("div"),ue=c("p"),it=$("\u{1F4CD} Corner 2"),Ve=P(),J(fe.$$.fragment),oe=P(),ke=c("div"),Pe=c("div"),Ae=c("p"),Ye=$("X-Overlap"),he=P(),I=c("input"),L=$(`
          (0-1)`),ce=P(),pe=c("div"),ge=c("span"),Ue=$(Ce),Me=$(" \xD7 "),Be=$(Je),rs=$(" mm."),is=P(),qe=c("span"),At=$(zt),us=$(" columns of "),Ut=$(It),fs=$(" bundles."),ps=P(),Te=c("span"),Mt=$(Nt),_s=P(),_e&&_e.c(),cs=P(),Ke=c("section"),mt=c("h2"),ds=$("Focus"),ms=P(),Qe=c("div"),xe=c("div"),ft=c("div"),ht=c("p"),hs=$("Z Tilt"),gs=P(),et=c("div"),Ee=c("input"),vs=P(),J(je.$$.fragment),bs=P(),pt=c("div"),gt=c("p"),ks=$("Z Objective"),Es=P(),tt=c("span"),$e=c("input"),$s=P(),J(Le.$$.fragment),ws=P(),st=c("div"),lt=c("label"),De=c("input"),ys=P(),Fe=c("div"),at=c("div"),zs=$("Z-Stack"),Is=P(),ie&&ie.c(),Ns=P(),se=c("div"),He=c("span"),Ps=$("Spacing"),Ts=P(),le=c("input"),Os=P(),Ze=c("span"),Ss=$("From"),Cs=P(),ae=c("input"),Ds=P(),We=c("span"),Vs=$("To"),As=P(),ne=c("input"),this.h()},l(b){t=d(b,"DIV",{id:!0,class:!0,style:!0});var V=m(t);s=d(V,"SECTION",{class:!0});var Xe=m(s);a=d(Xe,"P",{class:!0});var Pt=m(a);r=w(Pt,"Name"),Pt.forEach(f),o=T(Xe),p=d(Xe,"DIV",{class:!0});var _t=m(p);n=d(_t,"INPUT",{type:!0,class:!0}),v=T(_t),Y&&Y.l(_t),_t.forEach(f),i=T(Xe),re&&re.l(Xe),Xe.forEach(f),z=T(V),h=d(V,"SECTION",{class:!0});var ct=m(h);g=d(ct,"H2",{class:!0});var Tt=m(g);y=w(Tt,"Laser and Channels"),Tt.forEach(f),N=T(ct),E=d(ct,"DIV",{class:!0});var dt=m(E);K(O.$$.fragment,dt),k=T(dt),K(S.$$.fragment,dt),dt.forEach(f),ct.forEach(f),B=T(V),C=d(V,"SECTION",{class:!0});var Ft=m(C);U=d(Ft,"H2",{class:!0});var Hs=m(U);j=w(Hs,"Positions"),Hs.forEach(f),F=T(Ft),Z=d(Ft,"DIV",{class:!0});var vt=m(Z);te=d(vt,"DIV",{});var Ht=m(te);A=d(Ht,"P",{class:!0});var Zs=m(A);Se=w(Zs,"\u{1F4CC} Corner 1"),Zs.forEach(f),Ie=T(Ht),K(R.$$.fragment,Ht),Ht.forEach(f),be=T(vt),Ne=d(vt,"DIV",{});var Zt=m(Ne);ue=d(Zt,"P",{class:!0});var Ws=m(ue);it=w(Ws,"\u{1F4CD} Corner 2"),Ws.forEach(f),Ve=T(Zt),K(fe.$$.fragment,Zt),Zt.forEach(f),oe=T(vt),ke=d(vt,"DIV",{class:!0});var Wt=m(ke);Pe=d(Wt,"DIV",{});var Ot=m(Pe);Ae=d(Ot,"P",{class:!0});var Xs=m(Ae);Ye=w(Xs,"X-Overlap"),Xs.forEach(f),he=T(Ot),I=d(Ot,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),L=w(Ot,`
          (0-1)`),Ot.forEach(f),ce=T(Wt),pe=d(Wt,"DIV",{class:!0});var bt=m(pe);ge=d(bt,"SPAN",{class:!0});var St=m(ge);Ue=w(St,Ce),Me=w(St," \xD7 "),Be=w(St,Je),rs=w(St," mm."),St.forEach(f),is=T(bt),qe=d(bt,"SPAN",{class:!0});var Ct=m(qe);At=w(Ct,zt),us=w(Ct," columns of "),Ut=w(Ct,It),fs=w(Ct," bundles."),Ct.forEach(f),ps=T(bt),Te=d(bt,"SPAN",{class:!0});var Xt=m(Te);Mt=w(Xt,Nt),_s=T(Xt),_e&&_e.l(Xt),Xt.forEach(f),bt.forEach(f),Wt.forEach(f),vt.forEach(f),Ft.forEach(f),cs=T(V),Ke=d(V,"SECTION",{class:!0});var Gt=m(Ke);mt=d(Gt,"H2",{class:!0});var Gs=m(mt);ds=w(Gs,"Focus"),Gs.forEach(f),ms=T(Gt),Qe=d(Gt,"DIV",{class:!0});var Rt=m(Qe);xe=d(Rt,"DIV",{class:!0});var Yt=m(xe);ft=d(Yt,"DIV",{});var Jt=m(ft);ht=d(Jt,"P",{class:!0});var Rs=m(ht);hs=w(Rs,"Z Tilt"),Rs.forEach(f),gs=T(Jt),et=d(Jt,"DIV",{class:!0});var Kt=m(et);Ee=d(Kt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),vs=T(Kt),K(je.$$.fragment,Kt),Kt.forEach(f),Jt.forEach(f),bs=T(Yt),pt=d(Yt,"DIV",{});var Qt=m(pt);gt=d(Qt,"P",{class:!0});var Ys=m(gt);ks=w(Ys,"Z Objective"),Ys.forEach(f),Es=T(Qt),tt=d(Qt,"SPAN",{class:!0});var xt=m(tt);$e=d(xt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),$s=T(xt),K(Le.$$.fragment,xt),xt.forEach(f),Qt.forEach(f),Yt.forEach(f),ws=T(Rt),st=d(Rt,"DIV",{class:!0});var es=m(st);lt=d(es,"LABEL",{class:!0});var ts=m(lt);De=d(ts,"INPUT",{type:!0,class:!0}),ys=T(ts),Fe=d(ts,"DIV",{class:!0});var ss=m(Fe);at=d(ss,"DIV",{class:!0});var Js=m(at);zs=w(Js,"Z-Stack"),Js.forEach(f),Is=T(ss),ie&&ie.l(ss),ss.forEach(f),ts.forEach(f),Ns=T(es),se=d(es,"DIV",{class:!0,id:!0});var we=m(se);He=d(we,"SPAN",{class:!0});var Ks=m(He);Ps=w(Ks,"Spacing"),Ks.forEach(f),Ts=T(we),le=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Os=T(we),Ze=d(we,"SPAN",{class:!0});var Qs=m(Ze);Ss=w(Qs,"From"),Qs.forEach(f),Cs=T(we),ae=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ds=T(we),We=d(we,"SPAN",{class:!0});var xs=m(We);Vs=w(xs,"To"),xs.forEach(f),As=T(we),ne=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),we.forEach(f),es.forEach(f),Rt.forEach(f),Gt.forEach(f),V.forEach(f),this.h()},h(){u(a,"class","mt-1 text-lg svelte-1m4l8fo"),u(n,"type","text"),u(n,"class","flex-grow h-12 mb-4 text-lg pretty"),D(n,"invalid",e[7](e[0].name)),u(p,"class","flex-grow flex gap-x-2 max-w-[470px]"),u(s,"class","flex flex-col text-lg font-medium"),u(g,"class","svelte-1m4l8fo"),u(E,"class","grid grid-cols-2 min-w-[600px]"),D(E,"opacity-70",e[4].block),u(h,"class","font-medium leading-10 "),u(U,"class","svelte-1m4l8fo"),u(A,"class","svelte-1m4l8fo"),u(ue,"class","svelte-1m4l8fo"),u(Ae,"class","svelte-1m4l8fo"),u(I,"type","number"),u(I,"class","w-20 pr-2 pretty"),u(I,"step","0.01"),u(I,"min","0"),u(I,"max","0.99"),u(ge,"class","tabular-nums"),u(qe,"class","tabular-nums"),u(Te,"class","tabular-nums"),D(Te,"font-semibold",!e[2]),u(pe,"class","flex flex-col justify-center font-normal"),u(ke,"class","flex gap-8"),u(Z,"class","-mt-1 space-y-4"),u(C,"class","flex flex-col gap-2"),D(C,"-mt-20",e[3]),u(mt,"class","svelte-1m4l8fo"),u(ht,"class","svelte-1m4l8fo"),u(Ee,"type","number"),u(Ee,"class","w-28 pretty"),u(Ee,"min","0"),u(Ee,"max","25000"),u(et,"class","flex gap-2"),u(gt,"class","svelte-1m4l8fo"),u($e,"type","number"),u($e,"class","w-28 pretty"),u($e,"min","0"),u($e,"max","60000"),u(tt,"class","flex gap-2"),u(xe,"class","flex space-x-8"),u(De,"type","checkbox"),u(De,"class","mr-1 rounded focus:ring-blue-600"),De.disabled=Bt=e[4].block==="capturing",u(at,"class","pr-2"),D(at,"font-medium",e[2]),u(Fe,"class","flex divide-x-2"),u(lt,"class","flex items-center gap-x-1"),u(He,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),D(He,"span-disabled",e[4].block||!e[2]),u(le,"type","number"),u(le,"min","1"),u(le,"max","60000"),u(le,"step","1"),u(le,"class","z-10 h-10 text-center rounded-none pretty w-28"),le.disabled=qt=e[4].block||!e[2],D(le,"disabled",e[4].block||!e[2]),u(Ze,"class","flex items-center color-group svelte-1m4l8fo"),D(Ze,"span-disabled",e[4].block||!e[2]),u(ae,"type","number"),u(ae,"min","-100"),u(ae,"max","100"),u(ae,"step","1"),u(ae,"class","z-10 w-16 h-10 text-center rounded-none pretty"),ae.disabled=jt=e[4].block||!e[2],D(ae,"disabled",e[4].block||!e[2]),u(We,"class","flex items-center color-group svelte-1m4l8fo"),D(We,"span-disabled",e[4].block||!e[2]),u(ne,"type","number"),u(ne,"min","-100"),u(ne,"max","100"),u(ne,"step","1"),u(ne,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),ne.disabled=Lt=e[4].block||!e[2],D(ne,"disabled",e[4].block||!e[2]),u(se,"class","flex font-medium"),u(se,"id","zBox"),u(st,"class","space-y-2"),u(Qe,"class","-mt-1 space-y-4"),u(Ke,"class","flex flex-col gap-2"),u(t,"id","control"),u(t,"class","grid gap-y-6"),Sl(t,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(b,V){M(b,t,V),l(t,s),l(s,a),l(a,r),l(s,o),l(s,p),l(p,n),G(n,e[0].name),l(p,v),Y&&Y.m(p,null),l(s,i),re&&re.m(s,null),l(t,z),l(t,h),l(h,g),l(g,y),l(h,N),l(h,E),Q(O,E,null),l(E,k),Q(S,E,null),l(t,B),l(t,C),l(C,U),l(U,j),l(C,F),l(C,Z),l(Z,te),l(te,A),l(A,Se),l(te,Ie),Q(R,te,null),l(Z,be),l(Z,Ne),l(Ne,ue),l(ue,it),l(Ne,Ve),Q(fe,Ne,null),l(Z,oe),l(Z,ke),l(ke,Pe),l(Pe,Ae),l(Ae,Ye),l(Pe,he),l(Pe,I),G(I,e[0].overlap),l(Pe,L),l(ke,ce),l(ke,pe),l(pe,ge),l(ge,Ue),l(ge,Me),l(ge,Be),l(ge,rs),l(pe,is),l(pe,qe),l(qe,At),l(qe,us),l(qe,Ut),l(qe,fs),l(pe,ps),l(pe,Te),l(Te,Mt),l(Te,_s),_e&&_e.m(Te,null),l(t,cs),l(t,Ke),l(Ke,mt),l(mt,ds),l(Ke,ms),l(Ke,Qe),l(Qe,xe),l(xe,ft),l(ft,ht),l(ht,hs),l(ft,gs),l(ft,et),l(et,Ee),G(Ee,e[0].z_tilt),l(et,vs),Q(je,et,null),l(xe,bs),l(xe,pt),l(pt,gt),l(gt,ks),l(pt,Es),l(pt,tt),l(tt,$e),G($e,e[0].z_obj),l(tt,$s),Q(Le,tt,null),l(Qe,ws),l(Qe,st),l(st,lt),l(lt,De),De.checked=e[2],l(lt,ys),l(lt,Fe),l(Fe,at),l(at,zs),l(Fe,Is),ie&&ie.m(Fe,null),l(st,Ns),l(st,se),l(se,He),l(He,Ps),l(se,Ts),l(se,le),G(le,e[0].z_spacing),l(se,Os),l(se,Ze),l(Ze,Ss),l(se,Cs),l(se,ae),G(ae,e[0].z_from),l(se,Ds),l(se,We),l(We,Vs),l(se,As),l(se,ne),G(ne,e[0].z_to),ve=!0,Us||(Bs=[X(n,"input",e[9]),X(I,"input",e[15]),ye(Ge.call(null,I,[.01,.99])),X(Ee,"input",e[16]),ye(Ge.call(null,Ee,[0,25e3])),X($e,"input",e[18]),ye(Ge.call(null,$e,[0,6e4])),X(De,"change",e[20]),ye(Ms.call(null,He,"Nyquist is 232.")),X(le,"input",e[21]),ye(Ge.call(null,le,[1,6e4])),ye(Ms.call(null,Ze,"Multiple of Spacing")),X(ae,"input",e[22]),ye(Ge.call(null,ae,[-100,100])),ye(Ms.call(null,We,"Multiple of Spacing")),X(ne,"input",e[23]),ye(Ge.call(null,ne,[-100,100]))],Us=!0)},p(b,[V]){V&1&&n.value!==b[0].name&&G(n,b[0].name),V&129&&D(n,"invalid",b[7](b[0].name)),b[3]?Y?V&8&&H(Y,1):(Y=ul(b),Y.c(),H(Y,1),Y.m(p,null)):Y&&(Cl(),W(Y,1,1,()=>{Y=null}),Dl()),b[3]?re&&(re.d(1),re=null):re?re.p(b,V):(re=fl(b),re.c(),re.m(s,null));const Xe={};!_&&V&1&&(_=!0,Xe.params=b[0],ns(()=>_=!1)),O.$set(Xe);const Pt={};!q&&V&1&&(q=!0,Pt.params=b[0],ns(()=>q=!1)),S.$set(Pt),V&16&&D(E,"opacity-70",b[4].block);const _t={};!rt&&V&1&&(rt=!0,_t.xy=b[0].xy0,ns(()=>rt=!1)),R.$set(_t);const ct={};!ut&&V&1&&(ut=!0,ct.xy=b[0].xy1,ns(()=>ut=!1)),fe.$set(ct),V&1&&ee(I.value)!==b[0].overlap&&G(I,b[0].overlap),(!ve||V&2)&&Ce!==(Ce=b[1].width.toFixed(2)+"")&&me(Ue,Ce),(!ve||V&2)&&Je!==(Je=b[1].height.toFixed(2)+"")&&me(Be,Je),(!ve||V&2)&&zt!==(zt=b[1].n_cols+"")&&me(At,zt),(!ve||V&2)&&It!==(It=b[1].n_bundles+"")&&me(Ut,It),(!ve||V&2)&&Nt!==(Nt=Et(b[1].time)+"")&&me(Mt,Nt),b[2]?_e||(_e=pl(),_e.c(),_e.m(Te,null)):_e&&(_e.d(1),_e=null),V&4&&D(Te,"font-semibold",!b[2]),V&8&&D(C,"-mt-20",b[3]),V&1&&ee(Ee.value)!==b[0].z_tilt&&G(Ee,b[0].z_tilt);const Tt={};V&16&&(Tt.disabled=b[4].block),je.$set(Tt),V&1&&ee($e.value)!==b[0].z_obj&&G($e,b[0].z_obj);const dt={};V&16&&(dt.disabled=b[4].block),Le.$set(dt),(!ve||V&16&&Bt!==(Bt=b[4].block==="capturing"))&&(De.disabled=Bt),V&4&&(De.checked=b[2]),V&4&&D(at,"font-medium",b[2]),b[2]?ie?ie.p(b,V):(ie=_l(b),ie.c(),ie.m(Fe,null)):ie&&(ie.d(1),ie=null),V&20&&D(He,"span-disabled",b[4].block||!b[2]),(!ve||V&20&&qt!==(qt=b[4].block||!b[2]))&&(le.disabled=qt),V&1&&ee(le.value)!==b[0].z_spacing&&G(le,b[0].z_spacing),V&20&&D(le,"disabled",b[4].block||!b[2]),V&20&&D(Ze,"span-disabled",b[4].block||!b[2]),(!ve||V&20&&jt!==(jt=b[4].block||!b[2]))&&(ae.disabled=jt),V&1&&ee(ae.value)!==b[0].z_from&&G(ae,b[0].z_from),V&20&&D(ae,"disabled",b[4].block||!b[2]),V&20&&D(We,"span-disabled",b[4].block||!b[2]),(!ve||V&20&&Lt!==(Lt=b[4].block||!b[2]))&&(ne.disabled=Lt),V&1&&ee(ne.value)!==b[0].z_to&&G(ne,b[0].z_to),V&20&&D(ne,"disabled",b[4].block||!b[2])},i(b){ve||(H(Y),H(O.$$.fragment,b),H(S.$$.fragment,b),H(R.$$.fragment,b),H(fe.$$.fragment,b),H(je.$$.fragment,b),H(Le.$$.fragment,b),ve=!0)},o(b){W(Y),W(O.$$.fragment,b),W(S.$$.fragment,b),W(R.$$.fragment,b),W(fe.$$.fragment,b),W(je.$$.fragment,b),W(Le.$$.fragment,b),ve=!1},d(b){b&&f(t),Y&&Y.d(),re&&re.d(),x(O),x(S),x(R),x(fe),_e&&_e.d(),x(je),x(Le),ie&&ie.d(),Us=!1,os(Bs)}}}function fa(e,t){e&&(e.querySelectorAll("input").forEach(s=>s.disabled=t),e.querySelectorAll("select").forEach(s=>s.disabled=t),e.querySelectorAll("button").forEach(s=>s.disabled=t))}function Et(e){const t=new Date(e*1e3).toISOString();return e>3600?`${t.substring(11,19)} hrs`:`${t.substring(14,19)} mins`}function pa(e,t,s){let a,r,o;ze(e,Dt,A=>s(4,a=A)),ze(e,Re,A=>s(24,r=A)),ze(e,nt,A=>s(5,o=A));let{inAuto:p=!0}=t,{params:n}=t,{stats:v={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=t,{z_stack:i=!1}=t,{fc_:z=0}=t;function h(){Oe(Re,r.image_params.xy0=n.xy0,r),Oe(Re,r.image_params.xy1=n.xy1,r)}function g(A){if(!A)return!0;if(!p)return!1;const Se=r.exps[z].cmds.filter(Ie=>Ie.cmd.op==="takeimage").map(Ie=>Ie.cmd.name);return Al(Se)[A]>1}function y(){n.name=this.value,s(0,n)}function N(){n.path=this.value,s(0,n)}function E(A){n=A,s(0,n)}function O(A){n=A,s(0,n)}function _(A){e.$$.not_equal(n.xy0,A)&&(n.xy0=A,s(0,n))}function k(A){e.$$.not_equal(n.xy1,A)&&(n.xy1=A,s(0,n))}function S(){n.overlap=ee(this.value),s(0,n)}function q(){n.z_tilt=ee(this.value),s(0,n)}const B=()=>Oe(nt,o={move:{z_tilt:n.z_tilt}},o);function C(){n.z_obj=ee(this.value),s(0,n)}const U=()=>Oe(nt,o={move:{z_obj:n.z_obj}},o);function j(){i=this.checked,s(2,i)}function F(){n.z_spacing=ee(this.value),s(0,n)}function Z(){n.z_from=ee(this.value),s(0,n)}function te(){n.z_to=ee(this.value),s(0,n)}return e.$$set=A=>{"inAuto"in A&&s(3,p=A.inAuto),"params"in A&&s(0,n=A.params),"stats"in A&&s(1,v=A.stats),"z_stack"in A&&s(2,i=A.z_stack),"fc_"in A&&s(8,z=A.fc_)},e.$$.update=()=>{e.$$.dirty&16&&fa(document.getElementById("control"),a.block),e.$$.dirty&1&&s(1,v.height=Math.max(n.xy1[1],n.xy0[1])-Math.min(n.xy1[1],n.xy0[1]),v),e.$$.dirty&1&&s(1,v.width=Math.max(n.xy1[0],n.xy0[0])-Math.min(n.xy1[0],n.xy0[0]),v),e.$$.dirty&3&&s(1,v.n_cols=v.width==0?1:Math.ceil(v.width/(.768*(1-n.overlap))),v),e.$$.dirty&2&&s(1,v.n_bundles=Math.ceil(v.height/.048),v),e.$$.dirty&2&&s(1,v.time=v.n_bundles*v.n_cols/20,v),e.$$.dirty&1&&s(1,v.n_z=Math.abs(n.z_to-n.z_from)+1,v)},[n,v,i,p,a,o,h,g,z,y,N,E,O,_,k,S,q,B,C,U,j,F,Z,te]}class va extends $t{constructor(t){super();wt(this,t,pa,ua,yt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{ga as P,va as T,ha as a};
