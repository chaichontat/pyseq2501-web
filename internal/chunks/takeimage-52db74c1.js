import{S as Dl,i as Al,s as Vl,F as Ht,e as c,k as P,c as d,a as b,m as N,d as r,b as a,g as L,H as s,I as Xt,J as Wt,K as Gt,q as Y,o as le,aj as Ts,ak as Ss,M as ks,al as Cs,af as al,X as G,n as Es,p as zs,am as Is,w as Oe,x as Te,y as Se,B as Ce,t as E,h as z,P as rt,Q as it,W as V,an as q,T as ge,ao as J,Y as Rt,N as Ge,O as Ie,j as pe,V as st,Z as nt,f as Ds,_ as at}from"./vendor-e47a9711.js";import{r as As}from"./coords-813c65ab.js";import{s as ot,u as ol,c as rl}from"./store-41423132.js";import{S as Vs,c as We,t as qt,a as Ms}from"./utils-71f3391f.js";const Us=e=>({}),cs=e=>({});function js(e){let l,t,o,m,f,i,n;const g=e[3].buttons,h=Ht(g,e,e[2],cs),D=e[3].default,p=Ht(D,e,e[2],null);return{c(){l=c("span"),h&&h.c(),t=P(),o=c("content"),p&&p.c(),m=P(),f=c("div"),i=c("progress"),this.h()},l(_){l=d(_,"SPAN",{class:!0});var y=b(l);h&&h.l(y),t=N(y),o=d(y,"CONTENT",{class:!0});var M=b(o);p&&p.l(M),m=N(M),f=d(M,"DIV",{class:!0});var w=b(f);i=d(w,"PROGRESS",{class:!0}),b(i).forEach(r),w.forEach(r),M.forEach(r),y.forEach(r),this.h()},h(){a(i,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),i.value=e[1],a(f,"class","mt-1"),a(o,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),a(l,"class","z-40 flex w-full space-x-2")},m(_,y){L(_,l,y),h&&h.m(l,null),s(l,t),s(l,o),p&&p.m(o,null),s(o,m),s(o,f),s(f,i),n=!0},p(_,[y]){h&&h.p&&(!n||y&4)&&Xt(h,g,_,_[2],n?Gt(g,_[2],y,Us):Wt(_[2]),cs),p&&p.p&&(!n||y&4)&&Xt(p,D,_,_[2],n?Gt(D,_[2],y,null):Wt(_[2]),null),(!n||y&2)&&(i.value=_[1])},i(_){n||(Y(h,_),Y(p,_),n=!0)},o(_){le(h,_),le(p,_),n=!1},d(_){_&&r(l),h&&h.d(_),p&&p.d(_)}}}function Bs(e,l,t){let o,m=ks,f=()=>(m(),m=Ss(g,h=>t(1,o=h)),g);e.$$.on_destroy.push(()=>m());let{$$slots:i={},$$scope:n}=l;const g=Ts(0,{duration:400,easing:Cs});return f(),e.$$set=h=>{"$$scope"in h&&t(2,n=h.$$scope)},[g,o,n,i]}class an extends Dl{constructor(l){super();Al(this,l,Bs,js,Vl,{progress:0})}get progress(){return this.$$.ctx[0]}}function Ls(e){let l,t;const o=e[7].default,m=Ht(o,e,e[6],null),f=m||Zs();return{c(){l=c("div"),f&&f.c(),this.h()},l(i){l=d(i,"DIV",{class:!0});var n=b(l);f&&f.l(n),n.forEach(r),this.h()},h(){a(l,"class","mx-auto")},m(i,n){L(i,l,n),f&&f.m(l,null),t=!0},p(i,n){m&&m.p&&(!t||n&64)&&Xt(m,o,i,i[6],t?Gt(o,i[6],n,null):Wt(i[6]),null)},i(i){t||(Y(f,i),t=!0)},o(i){le(f,i),t=!1},d(i){i&&r(l),f&&f.d(i)}}}function Fs(e){let l,t,o;return t=new Vs({props:{color:"black"}}),{c(){l=c("div"),Oe(t.$$.fragment),this.h()},l(m){l=d(m,"DIV",{class:!0});var f=b(l);Te(t.$$.fragment,f),f.forEach(r),this.h()},h(){a(l,"class","mx-auto opacity-40")},m(m,f){L(m,l,f),Se(t,l,null),o=!0},p:ks,i(m){o||(Y(t.$$.fragment,m),o=!0)},o(m){le(t.$$.fragment,m),o=!1},d(m){m&&r(l),Ce(t)}}}function Zs(e){let l;return{c(){l=E("Go")},l(t){l=z(t,"Go")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function qs(e){let l,t,o,m,f,i,n;const g=[Fs,Ls],h=[];function D(p,_){return p[1]?0:1}return t=D(e),o=h[t]=g[t](e),{c(){l=c("button"),o.c(),this.h()},l(p){l=d(p,"BUTTON",{type:!0,class:!0,tabindex:!0});var _=b(l);o.l(_),_.forEach(r),this.h()},h(){a(l,"type","button"),a(l,"class",m=al(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${e[5][e[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${e[3]}`)+" svelte-1rnzpdo"),a(l,"tabindex","0"),l.disabled=e[0]},m(p,_){L(p,l,_),h[t].m(l,null),f=!0,i||(n=G(l,"click",e[8]),i=!0)},p(p,[_]){let y=t;t=D(p),t===y?h[t].p(p,_):(Es(),le(h[y],1,1,()=>{h[y]=null}),zs(),o=h[t],o?o.p(p,_):(o=h[t]=g[t](p),o.c()),Y(o,1),o.m(l,null)),(!f||_&12&&m!==(m=al(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${p[5][p[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${p[3]}`)+" svelte-1rnzpdo"))&&a(l,"class",m),(!f||_&1)&&(l.disabled=p[0])},i(p){f||(Y(o),f=!0)},o(p){le(o),f=!1},d(p){p&&r(l),h[t].d(),i=!1,n()}}}function Hs(e,l,t){let{$$slots:o={},$$scope:m}=l,{disabled:f=!1}=l,{spin:i=!1}=l,{color:n="indigo"}=l,{cl:g=""}=l;const h=Is(),D={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},p=()=>h("click");return e.$$set=_=>{"disabled"in _&&t(0,f=_.disabled),"spin"in _&&t(1,i=_.spin),"color"in _&&t(2,n=_.color),"cl"in _&&t(3,g=_.cl),"$$scope"in _&&t(6,m=_.$$scope)},[f,i,n,g,h,D,m,o,p]}class Cl extends Dl{constructor(l){super();Al(this,l,Hs,qs,Vl,{disabled:0,spin:1,color:2,cl:3})}}function Xs(e){let l,t,o,m,f,i,n,g,h,D,p,_,y,M,w,A,u,k,O,F,H;return y=new Cl({props:{disabled:e[3]}}),y.$on("click",e[11]),{c(){l=c("div"),t=c("div"),o=c("span"),m=E("X"),f=P(),i=c("input"),n=P(),g=c("span"),h=E("Y"),D=P(),p=c("input"),_=P(),Oe(y.$$.fragment),M=P(),w=c("button"),A=rt("svg"),u=rt("path"),k=E(`
    Current`),this.h()},l(C){l=d(C,"DIV",{class:!0});var U=b(l);t=d(U,"DIV",{class:!0});var B=b(t);o=d(B,"SPAN",{class:!0});var Z=b(o);m=z(Z,"X"),Z.forEach(r),f=N(B),i=d(B,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),n=N(B),g=d(B,"SPAN",{class:!0});var X=b(g);h=z(X,"Y"),X.forEach(r),D=N(B),p=d(B,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),B.forEach(r),_=N(U),Te(y.$$.fragment,U),M=N(U),w=d(U,"BUTTON",{type:!0,class:!0});var K=b(w);A=it(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var T=b(A);u=it(T,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),b(u).forEach(r),T.forEach(r),k=z(K,`
    Current`),K.forEach(r),U.forEach(r),this.h()},h(){a(o,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),V(o,"span-disabled",e[2].block),a(i,"type","number"),a(i,"min","-5"),a(i,"max","30"),a(i,"step","0.01"),a(i,"class","z-10 h-10 text-center rounded-none pretty w-28"),i.disabled=e[3],a(g,"class","flex items-center color-group svelte-awp8a4"),V(g,"span-disabled",e[2].block),a(p,"type","number"),a(p,"min","-5"),a(p,"max","80"),a(p,"step","0.01"),a(p,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),p.disabled=e[3],a(t,"class","flex font-medium"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),a(A,"xmlns","http://www.w3.org/2000/svg"),a(A,"class","w-5 h-5 mr-1"),a(A,"fill","none"),a(A,"viewBox","0 0 24 24"),a(A,"stroke","currentColor"),a(w,"type","button"),a(w,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),w.disabled=e[3],a(l,"class","flex gap-x-2")},m(C,U){L(C,l,U),s(l,t),s(t,o),s(o,m),s(t,f),s(t,i),q(i,e[0][0]),s(t,n),s(t,g),s(g,h),s(t,D),s(t,p),q(p,e[0][1]),s(l,_),Se(y,l,null),s(l,M),s(l,w),s(w,A),s(A,u),s(w,k),O=!0,F||(H=[G(i,"input",e[7]),G(i,"change",e[8]),ge(We.call(null,i,[-5,30])),G(p,"input",e[9]),G(p,"change",e[10]),ge(We.call(null,p,[-5,80])),G(w,"click",e[6])],F=!0)},p(C,[U]){U&4&&V(o,"span-disabled",C[2].block),(!O||U&8)&&(i.disabled=C[3]),U&1&&J(i.value)!==C[0][0]&&q(i,C[0][0]),U&4&&V(g,"span-disabled",C[2].block),(!O||U&8)&&(p.disabled=C[3]),U&1&&J(p.value)!==C[0][1]&&q(p,C[0][1]);const B={};U&8&&(B.disabled=C[3]),y.$set(B),(!O||U&8)&&(w.disabled=C[3])},i(C){O||(Y(y.$$.fragment,C),O=!0)},o(C){le(y.$$.fragment,C),O=!1},d(C){C&&r(l),Ce(y),F=!1,Rt(H)}}}function Ws(e,l,t){let o,m,f,i;Ge(e,ot,u=>t(2,o=u)),Ge(e,ot,u=>t(12,m=u)),Ge(e,ol,u=>t(13,f=u)),Ge(e,rl,u=>t(4,i=u));const n=Is();let{i:g}=l,{xy:h=[-1,-1]}=l;function D(){const{x:u,y:k}=As(f.image_params.fc,m.x,m.y);t(0,h[0]=Math.round((u+Number.EPSILON)*100)/100,h),t(0,h[1]=Math.round((k+Number.EPSILON)*100)/100,h)}let p=!1;function _(){h[0]=J(this.value),t(0,h)}const y=()=>n("change");function M(){h[1]=J(this.value),t(0,h)}const w=()=>n("change"),A=()=>{Ie(ot,o.block="moving",o),Ie(rl,i={move:g===0?{xy0:h}:{xy1:h}},i)};return e.$$set=u=>{"i"in u&&t(1,g=u.i),"xy"in u&&t(0,h=u.xy)},e.$$.update=()=>{e.$$.dirty&4&&t(3,p=Boolean(o.block))},[h,g,o,p,i,n,D,_,y,M,w,A]}class ds extends Dl{constructor(l){super();Al(this,l,Ws,Xs,Vl,{i:1,xy:0})}}function Gs(e){let l;return{c(){l=E("Set")},l(t){l=z(t,"Set")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function Rs(e){let l,t,o,m,f,i,n,g,h,D,p,_,y,M,w,A;return{c(){l=c("option"),t=E("Open"),o=c("option"),m=E("0.2"),f=c("option"),i=E("0.5"),n=c("option"),g=E("0.6"),h=c("option"),D=E("1.0"),p=c("option"),_=E("2.4"),y=c("option"),M=E("4.0"),w=c("option"),A=E("Closed"),this.h()},l(u){l=d(u,"OPTION",{});var k=b(l);t=z(k,"Open"),k.forEach(r),o=d(u,"OPTION",{});var O=b(o);m=z(O,"0.2"),O.forEach(r),f=d(u,"OPTION",{});var F=b(f);i=z(F,"0.5"),F.forEach(r),n=d(u,"OPTION",{});var H=b(n);g=z(H,"0.6"),H.forEach(r),h=d(u,"OPTION",{});var C=b(h);D=z(C,"1.0"),C.forEach(r),p=d(u,"OPTION",{});var U=b(p);_=z(U,"2.4"),U.forEach(r),y=d(u,"OPTION",{});var B=b(y);M=z(B,"4.0"),B.forEach(r),w=d(u,"OPTION",{});var Z=b(w);A=z(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="0.2",o.value=o.__value,f.__value="0.5",f.value=f.__value,n.__value="0.6",n.value=n.__value,h.__value="1.0",h.value=h.__value,p.__value="2.4",p.value=p.__value,y.__value="4.0",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(u,k){L(u,l,k),s(l,t),L(u,o,k),s(o,m),L(u,f,k),s(f,i),L(u,n,k),s(n,g),L(u,h,k),s(h,D),L(u,p,k),s(p,_),L(u,y,k),s(y,M),L(u,w,k),s(w,A)},d(u){u&&r(l),u&&r(o),u&&r(f),u&&r(n),u&&r(h),u&&r(p),u&&r(y),u&&r(w)}}}function Ys(e){let l,t,o,m,f,i,n,g,h,D,p,_,y,M,w,A;return{c(){l=c("option"),t=E("Open"),o=c("option"),m=E("1.0"),f=c("option"),i=E("2.0"),n=c("option"),g=E("3.5"),h=c("option"),D=E("3.8"),p=c("option"),_=E("4.0"),y=c("option"),M=E("4.5"),w=c("option"),A=E("Closed"),this.h()},l(u){l=d(u,"OPTION",{});var k=b(l);t=z(k,"Open"),k.forEach(r),o=d(u,"OPTION",{});var O=b(o);m=z(O,"1.0"),O.forEach(r),f=d(u,"OPTION",{});var F=b(f);i=z(F,"2.0"),F.forEach(r),n=d(u,"OPTION",{});var H=b(n);g=z(H,"3.5"),H.forEach(r),h=d(u,"OPTION",{});var C=b(h);D=z(C,"3.8"),C.forEach(r),p=d(u,"OPTION",{});var U=b(p);_=z(U,"4.0"),U.forEach(r),y=d(u,"OPTION",{});var B=b(y);M=z(B,"4.5"),B.forEach(r),w=d(u,"OPTION",{});var Z=b(w);A=z(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="1.0",o.value=o.__value,f.__value="2.0",f.value=f.__value,n.__value="3.5",n.value=n.__value,h.__value="3.8",h.value=h.__value,p.__value="4.0",p.value=p.__value,y.__value="4.5",y.value=y.__value,w.__value="Closed",w.value=w.__value},m(u,k){L(u,l,k),s(l,t),L(u,o,k),s(o,m),L(u,f,k),s(f,i),L(u,n,k),s(n,g),L(u,h,k),s(h,D),L(u,p,k),s(p,_),L(u,y,k),s(y,M),L(u,w,k),s(w,A)},d(u){u&&r(l),u&&r(o),u&&r(f),u&&r(n),u&&r(h),u&&r(p),u&&r(y),u&&r(w)}}}function Js(e){let l,t,o,m,f,i,n,g=(Boolean(e[1])?660:532)+"",h,D,p,_,y,M,w,A,u,k,O,F,H=2*e[1]+"",C,U,B,Z,X,K,T=2*e[1]+1+"",we,ye,W,il,ce,ke,ae,ul,De=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",oe,fl,te,de,Ee;w=new Cl({props:{$$slots:{default:[Gs]},$$scope:{ctx:e}}}),w.$on("click",e[7]);function Ae(I,j){return I[1]==0?Ys:Rs}let Re=Ae(e),ue=Re(e);return{c(){l=c("p"),t=c("span"),o=c("label"),m=c("input"),i=P(),n=c("div"),h=E(g),D=E(" nm"),p=P(),_=c("input"),M=E(`
    mW
    `),Oe(w.$$.fragment),A=P(),u=c("label"),k=c("input"),F=E(`
    Channel `),C=E(H),U=P(),B=c("label"),Z=c("input"),K=E(`
    Channel `),we=E(T),ye=P(),W=c("span"),il=E(`Filter OD
    `),ce=c("select"),ue.c(),ke=P(),ae=c("p"),ul=E("Effective: "),oe=E(De),fl=E(" mW"),this.h()},l(I){l=d(I,"P",{class:!0});var j=b(l);t=d(j,"SPAN",{class:!0});var fe=b(t);o=d(fe,"LABEL",{});var re=b(o);m=d(re,"INPUT",{type:!0,class:!0}),i=N(re),n=d(re,"DIV",{class:!0});var _e=b(n);h=z(_e,g),D=z(_e," nm"),_e.forEach(r),re.forEach(r),p=N(fe),_=d(fe,"INPUT",{type:!0,class:!0,min:!0,max:!0}),M=z(fe,`
    mW
    `),Te(w.$$.fragment,fe),fe.forEach(r),A=N(j),u=d(j,"LABEL",{class:!0});var Pe=b(u);k=d(Pe,"INPUT",{type:!0,class:!0}),F=z(Pe,`
    Channel `),C=z(Pe,H),Pe.forEach(r),U=N(j),B=d(j,"LABEL",{class:!0});var Ve=b(B);Z=d(Ve,"INPUT",{type:!0,class:!0}),K=z(Ve,`
    Channel `),we=z(Ve,T),Ve.forEach(r),ye=N(j),W=d(j,"SPAN",{class:!0});var Me=b(W);il=z(Me,`Filter OD
    `),ce=d(Me,"SELECT",{class:!0});var Ye=b(ce);ue.l(Ye),Ye.forEach(r),ke=N(Me),ae=d(Me,"P",{class:!0});var Ue=b(ae);ul=z(Ue,"Effective: "),oe=z(Ue,De),fl=z(Ue," mW"),Ue.forEach(r),Me.forEach(r),j.forEach(r),this.h()},h(){a(m,"type","checkbox"),a(m,"class",f=al(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),a(n,"class","inline font-semibold"),V(n,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),V(n,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),a(_,"type","number"),a(_,"class","w-[4.5rem] h-8 pr-2 pretty"),a(_,"min","0"),a(_,"max","500"),_.disabled=y=!e[0].laser_onoff[e[1]],V(_,"pretty-disabled",!e[0].laser_onoff[0]),a(t,"class","flex items-center gap-x-2"),V(t,"text-gray-400",!e[0].laser_onoff[e[1]]),a(k,"type","checkbox"),a(k,"class",O=al(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),a(u,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),V(u,"text-gray-400",!e[0].channels[2*e[1]]),a(Z,"type","checkbox"),a(Z,"class",X=al(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),a(B,"class","channel svelte-6ipz4o"),V(B,"text-gray-400",!e[0].channels[2*e[1]+1]),a(ce,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"),a(ae,"class","ml-3 text-sm font-medium"),a(W,"class","ml-8 font-normal opacity-85"),a(l,"class","flex flex-col")},m(I,j){L(I,l,j),s(l,t),s(t,o),s(o,m),m.checked=e[0].laser_onoff[e[1]],s(o,i),s(o,n),s(n,h),s(n,D),s(t,p),s(t,_),q(_,e[0].lasers[e[1]]),s(t,M),Se(w,t,null),s(l,A),s(l,u),s(u,k),k.checked=e[0].channels[2*e[1]],s(u,F),s(u,C),s(l,U),s(l,B),s(B,Z),Z.checked=e[0].channels[2*e[1]+1],s(B,K),s(B,we),s(l,ye),s(l,W),s(W,il),s(W,ce),ue.m(ce,null),s(W,ke),s(W,ae),s(ae,ul),s(ae,oe),s(ae,fl),te=!0,de||(Ee=[G(m,"change",e[5]),G(_,"input",e[6]),ge(We.call(null,_,[0,500])),G(k,"change",e[8]),G(Z,"change",e[9]),G(ce,"change",e[4])],de=!0)},p(I,[j]){(!te||j&2&&f!==(f=al(`rounded mr-1 ${I[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&a(m,"class",f),j&3&&(m.checked=I[0].laser_onoff[I[1]]),(!te||j&2)&&g!==(g=(Boolean(I[1])?660:532)+"")&&pe(h,g),j&3&&V(n,"text-green-800",I[0].laser_onoff[I[1]]&&!I[1]),j&3&&V(n,"text-red-800",I[0].laser_onoff[I[1]]&&I[1]),(!te||j&3&&y!==(y=!I[0].laser_onoff[I[1]]))&&(_.disabled=y),j&3&&J(_.value)!==I[0].lasers[I[1]]&&q(_,I[0].lasers[I[1]]),j&1&&V(_,"pretty-disabled",!I[0].laser_onoff[0]);const fe={};j&1024&&(fe.$$scope={dirty:j,ctx:I}),w.$set(fe),j&3&&V(t,"text-gray-400",!I[0].laser_onoff[I[1]]),(!te||j&2&&O!==(O=al(`mr-1 rounded ${I[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&a(k,"class",O),j&3&&(k.checked=I[0].channels[2*I[1]]),(!te||j&2)&&H!==(H=2*I[1]+"")&&pe(C,H),j&3&&V(u,"text-gray-400",!I[0].channels[2*I[1]]),(!te||j&2&&X!==(X=al(`mr-1 rounded ${I[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&a(Z,"class",X),j&3&&(Z.checked=I[0].channels[2*I[1]+1]),(!te||j&2)&&T!==(T=2*I[1]+1+"")&&pe(we,T),j&3&&V(B,"text-gray-400",!I[0].channels[2*I[1]+1]),Re!==(Re=Ae(I))&&(ue.d(1),ue=Re(I),ue&&(ue.c(),ue.m(ce,null))),(!te||j&3)&&De!==(De=(Number(I[0].od[I[1]]!=-1)*I[0].lasers[I[1]]*Math.pow(10,-I[0].od[I[1]])).toFixed(4)+"")&&pe(oe,De)},i(I){te||(Y(w.$$.fragment,I),te=!0)},o(I){le(w.$$.fragment,I),te=!1},d(I){I&&r(l),Ce(w),ue.d(),de=!1,Rt(Ee)}}}function Ks(e,l,t){let o,m;Ge(e,rl,y=>t(2,o=y)),Ge(e,ol,y=>t(3,m=y));let{params:f}=l,{i}=l;function n(y){let M;switch(y.currentTarget.value){case"Open":M=0;break;case"Closed":M=-1;break;default:M=Number(y.currentTarget.value)}t(0,f.od[i]=M,f),Ie(ol,m.image_params.od[i]=f.od[i],m),Ie(rl,o={move:{od:i===0?[f.od[i],void 0]:[void 0,f.od[i]]}},o)}function g(){f.laser_onoff[i]=this.checked,t(0,f)}function h(){f.lasers[i]=J(this.value),t(0,f)}const D=()=>{Ie(ol,m.image_params.laser_onoff[i]=f.laser_onoff[i],m),Ie(ol,m.image_params.lasers[i]=f.lasers[i],m),Ie(rl,o={move:{lasers:i===0?[f.lasers[i],void 0]:[void 0,f.lasers[i]],laser_onoff:i===0?[f.laser_onoff[i],void 0]:[void 0,f.laser_onoff[i]]}},o)};function p(){f.channels[2*i]=this.checked,t(0,f)}function _(){f.channels[2*i+1]=this.checked,t(0,f)}return e.$$set=y=>{"params"in y&&t(0,f=y.params),"i"in y&&t(1,i=y.i)},[f,i,o,m,n,g,h,D,p,_]}class ms extends Dl{constructor(l){super();Al(this,l,Ks,Js,Vl,{params:0,i:1})}}function hs(e){let l,t;return l=new Cl({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[Qs]},$$scope:{ctx:e}}}),{c(){Oe(l.$$.fragment)},l(o){Te(l.$$.fragment,o)},m(o,m){Se(l,o,m),t=!0},i(o){t||(Y(l.$$.fragment,o),t=!0)},o(o){le(l.$$.fragment,o),t=!1},d(o){Ce(l,o)}}}function Qs(e){let l;return{c(){l=E("Preview")},l(t){l=z(t,"Preview")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function vs(e){let l,t,o,m,f,i;return{c(){l=c("p"),t=E("Image Path"),o=P(),m=c("input"),this.h()},l(n){l=d(n,"P",{class:!0});var g=b(l);t=z(g,"Image Path"),g.forEach(r),o=N(n),m=d(n,"INPUT",{type:!0,class:!0}),this.h()},h(){a(l,"class","text-lg svelte-1m4l8fo"),a(m,"type","text"),a(m,"class","max-w-md mb-4 pretty"),V(m,"invalid",!e[0].path)},m(n,g){L(n,l,g),s(l,t),L(n,o,g),L(n,m,g),q(m,e[0].path),f||(i=G(m,"input",e[10]),f=!0)},p(n,g){g&1&&m.value!==n[0].path&&q(m,n[0].path),g&1&&V(m,"invalid",!n[0].path)},d(n){n&&r(l),n&&r(o),n&&r(m),f=!1,i()}}}function bs(e){let l;return{c(){l=E("per z-stack.")},l(t){l=z(t,"per z-stack.")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function gs(e){let l,t=e[1].n_z+"",o,m,f,i=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",n,g,h=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",D,p,_,y,M=(e[1].n_z?El(e[1].n_z*e[1].time):El(e[1].time))+"",w,A,u=e[1].n_z>1&&ys();return{c(){l=c("div"),o=E(t),m=E(" Z step"),u&&u.c(),f=E(" from "),n=E(i),g=E(" to "),D=E(h),p=P(),_=c("div"),y=E("Total time: "),w=E(M),A=E("."),this.h()},l(k){l=d(k,"DIV",{class:!0});var O=b(l);o=z(O,t),m=z(O," Z step"),u&&u.l(O),f=z(O," from "),n=z(O,i),g=z(O," to "),D=z(O,h),O.forEach(r),p=N(k),_=d(k,"DIV",{class:!0});var F=b(_);y=z(F,"Total time: "),w=z(F,M),A=z(F,"."),F.forEach(r),this.h()},h(){a(l,"class","px-2 font-base"),a(_,"class","px-2 font-semibold")},m(k,O){L(k,l,O),s(l,o),s(l,m),u&&u.m(l,null),s(l,f),s(l,n),s(l,g),s(l,D),L(k,p,O),L(k,_,O),s(_,y),s(_,w),s(_,A)},p(k,O){O&2&&t!==(t=k[1].n_z+"")&&pe(o,t),k[1].n_z>1?u||(u=ys(),u.c(),u.m(l,f)):u&&(u.d(1),u=null),O&1&&i!==(i=k[0].z_obj+k[0].z_from*k[0].z_spacing+"")&&pe(n,i),O&1&&h!==(h=k[0].z_obj+k[0].z_to*k[0].z_spacing+"")&&pe(D,h),O&2&&M!==(M=(k[1].n_z?El(k[1].n_z*k[1].time):El(k[1].time))+"")&&pe(w,M)},d(k){k&&r(l),u&&u.d(),k&&r(p),k&&r(_)}}}function ys(e){let l;return{c(){l=E("s")},l(t){l=z(t,"s")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function $s(e){let l,t,o,m,f,i,n,g,h,D,p,_,y,M,w,A,u,k,O,F,H,C,U,B,Z,X,K,T,we,ye,W,il,ce,ke,ae,ul,De,oe,fl,te,de,Ee,Ae,Re,ue,I,j,fe,re,_e,Pe=e[1].width.toFixed(2)+"",Ve,Me,Ye=e[1].height.toFixed(2)+"",Ue,ut,ft,je,zl=e[1].n_cols+"",Ml,_t,Il=e[1].n_bundles+"",Ul,pt,ct,ze,wl=El(e[1].time)+"",jl,dt,mt,Je,hl,ht,vt,Ke,Qe,_l,vl,bt,gt,$e,me,yt,xe,kt,pl,bl,Et,zt,Ne,he,It,el,wt,Be,Le,cl,Pt,Pl,Nt,Ot,ll,tl,sl,Tt,Fe,nl,St,Ct,Dt,Q,Ze,At,Vt,$,Bl,Mt,qe,Ut,jt,x,Ll,Bt,He,Lt,Ft,ee,Fl,ve,Zt,Yt,R=e[3]&&hs(e),se=!e[3]&&vs(e);function ws(v){e[11](v)}let Jt={i:0};e[0]!==void 0&&(Jt.params=e[0]),A=new ms({props:Jt}),st.push(()=>nt(A,"params",ws));function Ps(v){e[12](v)}let Kt={i:1};e[0]!==void 0&&(Kt.params=e[0]),O=new ms({props:Kt}),st.push(()=>nt(O,"params",Ps));function Ns(v){e[13](v)}let Qt={i:0};e[0].xy0!==void 0&&(Qt.xy=e[0].xy0),W=new ds({props:Qt}),st.push(()=>nt(W,"xy",Ns)),W.$on("change",e[6]);function Os(v){e[14](v)}let $t={i:1};e[0].xy1!==void 0&&($t.xy=e[0].xy1),oe=new ds({props:$t}),st.push(()=>nt(oe,"xy",Os)),oe.$on("change",e[6]);let ie=e[2]&&bs();xe=new Cl({}),xe.$on("click",e[17]),el=new Cl({}),el.$on("click",e[19]);let ne=e[2]&&gs(e);return{c(){l=c("div"),t=c("section"),o=c("p"),m=E("Name"),f=P(),i=c("div"),n=c("input"),g=P(),R&&R.c(),h=P(),se&&se.c(),D=P(),p=c("section"),_=c("h2"),y=E("Laser and Channels"),M=P(),w=c("div"),Oe(A.$$.fragment),k=P(),Oe(O.$$.fragment),H=P(),C=c("section"),U=c("h2"),B=E("Positions"),Z=P(),X=c("div"),K=c("div"),T=c("p"),we=E("\u{1F4CC} Corner 1"),ye=P(),Oe(W.$$.fragment),ce=P(),ke=c("div"),ae=c("p"),ul=E("\u{1F4CD} Corner 2"),De=P(),Oe(oe.$$.fragment),te=P(),de=c("div"),Ee=c("div"),Ae=c("p"),Re=E("X-Overlap"),ue=P(),I=c("input"),j=E(`
          (0-1)`),fe=P(),re=c("div"),_e=c("span"),Ve=E(Pe),Me=E(" \xD7 "),Ue=E(Ye),ut=E(" mm."),ft=P(),je=c("span"),Ml=E(zl),_t=E(" columns of "),Ul=E(Il),pt=E(" bundles."),ct=P(),ze=c("span"),jl=E(wl),dt=P(),ie&&ie.c(),mt=P(),Je=c("section"),hl=c("h2"),ht=E("Focus"),vt=P(),Ke=c("div"),Qe=c("div"),_l=c("div"),vl=c("p"),bt=E("Z Tilt"),gt=P(),$e=c("div"),me=c("input"),yt=P(),Oe(xe.$$.fragment),kt=P(),pl=c("div"),bl=c("p"),Et=E("Z Objective"),zt=P(),Ne=c("span"),he=c("input"),It=P(),Oe(el.$$.fragment),wt=P(),Be=c("button"),Le=rt("svg"),cl=rt("path"),Pt=P(),Pl=c("span"),Nt=E("Autofocus"),Ot=P(),ll=c("div"),tl=c("label"),sl=c("input"),Tt=P(),Fe=c("div"),nl=c("div"),St=E("Z-Stack"),Ct=P(),ne&&ne.c(),Dt=P(),Q=c("div"),Ze=c("span"),At=E("Spacing"),Vt=P(),$=c("input"),Mt=P(),qe=c("span"),Ut=E("From"),jt=P(),x=c("input"),Bt=P(),He=c("span"),Lt=E("To"),Ft=P(),ee=c("input"),this.h()},l(v){l=d(v,"DIV",{id:!0,class:!0,style:!0});var S=b(l);t=d(S,"SECTION",{class:!0});var Xe=b(t);o=d(Xe,"P",{class:!0});var Nl=b(o);m=z(Nl,"Name"),Nl.forEach(r),f=N(Xe),i=d(Xe,"DIV",{class:!0});var dl=b(i);n=d(dl,"INPUT",{type:!0,class:!0}),g=N(dl),R&&R.l(dl),dl.forEach(r),h=N(Xe),se&&se.l(Xe),Xe.forEach(r),D=N(S),p=d(S,"SECTION",{class:!0});var ml=b(p);_=d(ml,"H2",{class:!0});var xt=b(_);y=z(xt,"Laser and Channels"),xt.forEach(r),M=N(ml),w=d(ml,"DIV",{class:!0});var Zl=b(w);Te(A.$$.fragment,Zl),k=N(Zl),Te(O.$$.fragment,Zl),Zl.forEach(r),ml.forEach(r),H=N(S),C=d(S,"SECTION",{class:!0});var ql=b(C);U=d(ql,"H2",{class:!0});var es=b(U);B=z(es,"Positions"),es.forEach(r),Z=N(ql),X=d(ql,"DIV",{class:!0});var gl=b(X);K=d(gl,"DIV",{});var Hl=b(K);T=d(Hl,"P",{class:!0});var ls=b(T);we=z(ls,"\u{1F4CC} Corner 1"),ls.forEach(r),ye=N(Hl),Te(W.$$.fragment,Hl),Hl.forEach(r),ce=N(gl),ke=d(gl,"DIV",{});var Xl=b(ke);ae=d(Xl,"P",{class:!0});var ts=b(ae);ul=z(ts,"\u{1F4CD} Corner 2"),ts.forEach(r),De=N(Xl),Te(oe.$$.fragment,Xl),Xl.forEach(r),te=N(gl),de=d(gl,"DIV",{class:!0});var Wl=b(de);Ee=d(Wl,"DIV",{});var Ol=b(Ee);Ae=d(Ol,"P",{class:!0});var ss=b(Ae);Re=z(ss,"X-Overlap"),ss.forEach(r),ue=N(Ol),I=d(Ol,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),j=z(Ol,`
          (0-1)`),Ol.forEach(r),fe=N(Wl),re=d(Wl,"DIV",{class:!0});var yl=b(re);_e=d(yl,"SPAN",{class:!0});var Tl=b(_e);Ve=z(Tl,Pe),Me=z(Tl," \xD7 "),Ue=z(Tl,Ye),ut=z(Tl," mm."),Tl.forEach(r),ft=N(yl),je=d(yl,"SPAN",{class:!0});var Sl=b(je);Ml=z(Sl,zl),_t=z(Sl," columns of "),Ul=z(Sl,Il),pt=z(Sl," bundles."),Sl.forEach(r),ct=N(yl),ze=d(yl,"SPAN",{class:!0});var Gl=b(ze);jl=z(Gl,wl),dt=N(Gl),ie&&ie.l(Gl),Gl.forEach(r),yl.forEach(r),Wl.forEach(r),gl.forEach(r),ql.forEach(r),mt=N(S),Je=d(S,"SECTION",{class:!0});var Rl=b(Je);hl=d(Rl,"H2",{class:!0});var ns=b(hl);ht=z(ns,"Focus"),ns.forEach(r),vt=N(Rl),Ke=d(Rl,"DIV",{class:!0});var Yl=b(Ke);Qe=d(Yl,"DIV",{class:!0});var Jl=b(Qe);_l=d(Jl,"DIV",{});var Kl=b(_l);vl=d(Kl,"P",{class:!0});var as=b(vl);bt=z(as,"Z Tilt"),as.forEach(r),gt=N(Kl),$e=d(Kl,"DIV",{class:!0});var Ql=b($e);me=d(Ql,"INPUT",{type:!0,class:!0,min:!0,max:!0}),yt=N(Ql),Te(xe.$$.fragment,Ql),Ql.forEach(r),Kl.forEach(r),kt=N(Jl),pl=d(Jl,"DIV",{});var $l=b(pl);bl=d($l,"P",{class:!0});var os=b(bl);Et=z(os,"Z Objective"),os.forEach(r),zt=N($l),Ne=d($l,"SPAN",{class:!0});var kl=b(Ne);he=d(kl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),It=N(kl),Te(el.$$.fragment,kl),wt=N(kl),Be=d(kl,"BUTTON",{type:!0,class:!0});var xl=b(Be);Le=it(xl,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var rs=b(Le);cl=it(rs,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),b(cl).forEach(r),rs.forEach(r),Pt=N(xl),Pl=d(xl,"SPAN",{});var is=b(Pl);Nt=z(is,"Autofocus"),is.forEach(r),xl.forEach(r),kl.forEach(r),$l.forEach(r),Jl.forEach(r),Ot=N(Yl),ll=d(Yl,"DIV",{class:!0});var et=b(ll);tl=d(et,"LABEL",{class:!0});var lt=b(tl);sl=d(lt,"INPUT",{type:!0,class:!0}),Tt=N(lt),Fe=d(lt,"DIV",{class:!0});var tt=b(Fe);nl=d(tt,"DIV",{class:!0});var us=b(nl);St=z(us,"Z-Stack"),us.forEach(r),Ct=N(tt),ne&&ne.l(tt),tt.forEach(r),lt.forEach(r),Dt=N(et),Q=d(et,"DIV",{class:!0,id:!0});var be=b(Q);Ze=d(be,"SPAN",{class:!0});var fs=b(Ze);At=z(fs,"Spacing"),fs.forEach(r),Vt=N(be),$=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Mt=N(be),qe=d(be,"SPAN",{class:!0});var _s=b(qe);Ut=z(_s,"From"),_s.forEach(r),jt=N(be),x=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Bt=N(be),He=d(be,"SPAN",{class:!0});var ps=b(He);Lt=z(ps,"To"),ps.forEach(r),Ft=N(be),ee=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),be.forEach(r),et.forEach(r),Yl.forEach(r),Rl.forEach(r),S.forEach(r),this.h()},h(){a(o,"class","mt-1 text-lg svelte-1m4l8fo"),a(n,"type","text"),a(n,"class","flex-grow h-12 max-w-md mb-4 text-lg pretty"),V(n,"invalid",e[7](e[0].name)),a(i,"class","flex gap-x-2"),a(t,"class","flex flex-col text-lg font-medium"),a(_,"class","svelte-1m4l8fo"),a(w,"class","grid grid-cols-2 min-w-[600px]"),V(w,"opacity-70",e[4].block),a(p,"class","font-medium leading-10 "),a(U,"class","svelte-1m4l8fo"),a(T,"class","svelte-1m4l8fo"),a(ae,"class","svelte-1m4l8fo"),a(Ae,"class","svelte-1m4l8fo"),a(I,"type","number"),a(I,"class","w-20 pr-2 pretty"),a(I,"step","0.01"),a(I,"min","0"),a(I,"max","0.99"),a(_e,"class","tabular-nums"),a(je,"class","tabular-nums"),a(ze,"class","tabular-nums"),V(ze,"font-semibold",!e[2]),a(re,"class","flex flex-col justify-center font-normal"),a(de,"class","flex gap-8"),a(X,"class","-mt-1 space-y-4"),a(C,"class","flex flex-col gap-2"),V(C,"-mt-20",e[3]),a(hl,"class","svelte-1m4l8fo"),a(vl,"class","svelte-1m4l8fo"),a(me,"type","number"),a(me,"class","w-28 pretty"),a(me,"min","0"),a(me,"max","25000"),a($e,"class","flex gap-2"),a(bl,"class","svelte-1m4l8fo"),a(he,"type","number"),a(he,"class","w-28 pretty"),a(he,"min","0"),a(he,"max","60000"),a(cl,"fill-rule","evenodd"),a(cl,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),a(cl,"clip-rule","evenodd"),a(Le,"xmlns","http://www.w3.org/2000/svg"),a(Le,"class","w-5 h-5 mr-1"),a(Le,"viewBox","0 0 20 20"),a(Le,"fill","currentColor"),a(Be,"type","button"),a(Be,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),a(Ne,"class","flex gap-2"),a(Qe,"class","flex space-x-8"),a(sl,"type","checkbox"),a(sl,"class","mr-1 rounded focus:ring-blue-600"),a(nl,"class","pr-2"),V(nl,"font-medium",e[2]),a(Fe,"class","flex divide-x-2"),a(tl,"class","flex items-center gap-x-1"),a(Ze,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),V(Ze,"span-disabled",e[4].block||!e[2]),a($,"type","number"),a($,"min","1"),a($,"max","60000"),a($,"step","1"),a($,"class","z-10 h-10 text-center rounded-none pretty w-28"),$.disabled=Bl=e[4].block||!e[2],V($,"disabled",e[4].block||!e[2]),a(qe,"class","flex items-center color-group svelte-1m4l8fo"),V(qe,"span-disabled",e[4].block||!e[2]),a(x,"type","number"),a(x,"min","-100"),a(x,"max","100"),a(x,"step","1"),a(x,"class","z-10 w-16 h-10 text-center rounded-none pretty"),x.disabled=Ll=e[4].block||!e[2],V(x,"disabled",e[4].block||!e[2]),a(He,"class","flex items-center color-group svelte-1m4l8fo"),V(He,"span-disabled",e[4].block||!e[2]),a(ee,"type","number"),a(ee,"min","-100"),a(ee,"max","100"),a(ee,"step","1"),a(ee,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),ee.disabled=Fl=e[4].block||!e[2],V(ee,"disabled",e[4].block||!e[2]),a(Q,"class","flex font-medium"),a(Q,"id","zBox"),a(ll,"class","space-y-2"),a(Ke,"class","-mt-1 space-y-4"),a(Je,"class","flex flex-col gap-2"),a(l,"id","control"),a(l,"class","grid gap-y-6"),Ds(l,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(v,S){L(v,l,S),s(l,t),s(t,o),s(o,m),s(t,f),s(t,i),s(i,n),q(n,e[0].name),s(i,g),R&&R.m(i,null),s(t,h),se&&se.m(t,null),s(l,D),s(l,p),s(p,_),s(_,y),s(p,M),s(p,w),Se(A,w,null),s(w,k),Se(O,w,null),s(l,H),s(l,C),s(C,U),s(U,B),s(C,Z),s(C,X),s(X,K),s(K,T),s(T,we),s(K,ye),Se(W,K,null),s(X,ce),s(X,ke),s(ke,ae),s(ae,ul),s(ke,De),Se(oe,ke,null),s(X,te),s(X,de),s(de,Ee),s(Ee,Ae),s(Ae,Re),s(Ee,ue),s(Ee,I),q(I,e[0].overlap),s(Ee,j),s(de,fe),s(de,re),s(re,_e),s(_e,Ve),s(_e,Me),s(_e,Ue),s(_e,ut),s(re,ft),s(re,je),s(je,Ml),s(je,_t),s(je,Ul),s(je,pt),s(re,ct),s(re,ze),s(ze,jl),s(ze,dt),ie&&ie.m(ze,null),s(l,mt),s(l,Je),s(Je,hl),s(hl,ht),s(Je,vt),s(Je,Ke),s(Ke,Qe),s(Qe,_l),s(_l,vl),s(vl,bt),s(_l,gt),s(_l,$e),s($e,me),q(me,e[0].z_tilt),s($e,yt),Se(xe,$e,null),s(Qe,kt),s(Qe,pl),s(pl,bl),s(bl,Et),s(pl,zt),s(pl,Ne),s(Ne,he),q(he,e[0].z_obj),s(Ne,It),Se(el,Ne,null),s(Ne,wt),s(Ne,Be),s(Be,Le),s(Le,cl),s(Be,Pt),s(Be,Pl),s(Pl,Nt),s(Ke,Ot),s(Ke,ll),s(ll,tl),s(tl,sl),sl.checked=e[2],s(tl,Tt),s(tl,Fe),s(Fe,nl),s(nl,St),s(Fe,Ct),ne&&ne.m(Fe,null),s(ll,Dt),s(ll,Q),s(Q,Ze),s(Ze,At),s(Q,Vt),s(Q,$),q($,e[0].z_spacing),s(Q,Mt),s(Q,qe),s(qe,Ut),s(Q,jt),s(Q,x),q(x,e[0].z_from),s(Q,Bt),s(Q,He),s(He,Lt),s(Q,Ft),s(Q,ee),q(ee,e[0].z_to),ve=!0,Zt||(Yt=[G(n,"input",e[9]),G(I,"input",e[15]),ge(We.call(null,I,[.01,.99])),G(me,"input",e[16]),ge(We.call(null,me,[0,25e3])),G(he,"input",e[18]),ge(We.call(null,he,[0,6e4])),G(sl,"change",e[20]),ge(qt.call(null,Ze,"Nyquist is 232.")),G($,"input",e[21]),ge(We.call(null,$,[1,6e4])),ge(qt.call(null,qe,"Multiple of Spacing")),G(x,"input",e[22]),ge(We.call(null,x,[-100,100])),ge(qt.call(null,He,"Multiple of Spacing")),G(ee,"input",e[23]),ge(We.call(null,ee,[-100,100]))],Zt=!0)},p(v,[S]){S&1&&n.value!==v[0].name&&q(n,v[0].name),S&129&&V(n,"invalid",v[7](v[0].name)),v[3]?R?S&8&&Y(R,1):(R=hs(v),R.c(),Y(R,1),R.m(i,null)):R&&(Es(),le(R,1,1,()=>{R=null}),zs()),v[3]?se&&(se.d(1),se=null):se?se.p(v,S):(se=vs(v),se.c(),se.m(t,null));const Xe={};!u&&S&1&&(u=!0,Xe.params=v[0],at(()=>u=!1)),A.$set(Xe);const Nl={};!F&&S&1&&(F=!0,Nl.params=v[0],at(()=>F=!1)),O.$set(Nl),S&16&&V(w,"opacity-70",v[4].block);const dl={};!il&&S&1&&(il=!0,dl.xy=v[0].xy0,at(()=>il=!1)),W.$set(dl);const ml={};!fl&&S&1&&(fl=!0,ml.xy=v[0].xy1,at(()=>fl=!1)),oe.$set(ml),S&1&&J(I.value)!==v[0].overlap&&q(I,v[0].overlap),(!ve||S&2)&&Pe!==(Pe=v[1].width.toFixed(2)+"")&&pe(Ve,Pe),(!ve||S&2)&&Ye!==(Ye=v[1].height.toFixed(2)+"")&&pe(Ue,Ye),(!ve||S&2)&&zl!==(zl=v[1].n_cols+"")&&pe(Ml,zl),(!ve||S&2)&&Il!==(Il=v[1].n_bundles+"")&&pe(Ul,Il),(!ve||S&2)&&wl!==(wl=El(v[1].time)+"")&&pe(jl,wl),v[2]?ie||(ie=bs(),ie.c(),ie.m(ze,null)):ie&&(ie.d(1),ie=null),S&4&&V(ze,"font-semibold",!v[2]),S&8&&V(C,"-mt-20",v[3]),S&1&&J(me.value)!==v[0].z_tilt&&q(me,v[0].z_tilt),S&1&&J(he.value)!==v[0].z_obj&&q(he,v[0].z_obj),S&4&&(sl.checked=v[2]),S&4&&V(nl,"font-medium",v[2]),v[2]?ne?ne.p(v,S):(ne=gs(v),ne.c(),ne.m(Fe,null)):ne&&(ne.d(1),ne=null),S&20&&V(Ze,"span-disabled",v[4].block||!v[2]),(!ve||S&20&&Bl!==(Bl=v[4].block||!v[2]))&&($.disabled=Bl),S&1&&J($.value)!==v[0].z_spacing&&q($,v[0].z_spacing),S&20&&V($,"disabled",v[4].block||!v[2]),S&20&&V(qe,"span-disabled",v[4].block||!v[2]),(!ve||S&20&&Ll!==(Ll=v[4].block||!v[2]))&&(x.disabled=Ll),S&1&&J(x.value)!==v[0].z_from&&q(x,v[0].z_from),S&20&&V(x,"disabled",v[4].block||!v[2]),S&20&&V(He,"span-disabled",v[4].block||!v[2]),(!ve||S&20&&Fl!==(Fl=v[4].block||!v[2]))&&(ee.disabled=Fl),S&1&&J(ee.value)!==v[0].z_to&&q(ee,v[0].z_to),S&20&&V(ee,"disabled",v[4].block||!v[2])},i(v){ve||(Y(R),Y(A.$$.fragment,v),Y(O.$$.fragment,v),Y(W.$$.fragment,v),Y(oe.$$.fragment,v),Y(xe.$$.fragment,v),Y(el.$$.fragment,v),ve=!0)},o(v){le(R),le(A.$$.fragment,v),le(O.$$.fragment,v),le(W.$$.fragment,v),le(oe.$$.fragment,v),le(xe.$$.fragment,v),le(el.$$.fragment,v),ve=!1},d(v){v&&r(l),R&&R.d(),se&&se.d(),Ce(A),Ce(O),Ce(W),Ce(oe),ie&&ie.d(),Ce(xe),Ce(el),ne&&ne.d(),Zt=!1,Rt(Yt)}}}function xs(e,l){e&&(e.querySelectorAll("input").forEach(t=>t.disabled=l),e.querySelectorAll("select").forEach(t=>t.disabled=l),e.querySelectorAll("button").forEach(t=>t.disabled=l))}function El(e){const l=new Date(e*1e3).toISOString();return e>3600?`${l.substring(11,19)} hrs`:`${l.substring(14,19)} mins`}function en(e,l,t){let o,m,f;Ge(e,ot,T=>t(4,o=T)),Ge(e,ol,T=>t(24,m=T)),Ge(e,rl,T=>t(5,f=T));let{inAuto:i=!0}=l,{params:n}=l,{stats:g={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=l,{z_stack:h=!1}=l,{fc_:D=0}=l;function p(){Ie(ol,m.image_params.xy0=n.xy0,m),Ie(ol,m.image_params.xy1=n.xy1,m)}function _(T){if(!T)return!0;if(!i)return!1;const we=m.exps[D].cmds.filter(ye=>ye.cmd.op==="takeimage").map(ye=>ye.cmd.name);return Ms(we)[T]>1}function y(){n.name=this.value,t(0,n)}function M(){n.path=this.value,t(0,n)}function w(T){n=T,t(0,n)}function A(T){n=T,t(0,n)}function u(T){e.$$.not_equal(n.xy0,T)&&(n.xy0=T,t(0,n))}function k(T){e.$$.not_equal(n.xy1,T)&&(n.xy1=T,t(0,n))}function O(){n.overlap=J(this.value),t(0,n)}function F(){n.z_tilt=J(this.value),t(0,n)}const H=()=>Ie(rl,f={move:{z_tilt:n.z_tilt}},f);function C(){n.z_obj=J(this.value),t(0,n)}const U=()=>Ie(rl,f={move:{z_obj:n.z_obj}},f);function B(){h=this.checked,t(2,h)}function Z(){n.z_spacing=J(this.value),t(0,n)}function X(){n.z_from=J(this.value),t(0,n)}function K(){n.z_to=J(this.value),t(0,n)}return e.$$set=T=>{"inAuto"in T&&t(3,i=T.inAuto),"params"in T&&t(0,n=T.params),"stats"in T&&t(1,g=T.stats),"z_stack"in T&&t(2,h=T.z_stack),"fc_"in T&&t(8,D=T.fc_)},e.$$.update=()=>{e.$$.dirty&16&&xs(document.getElementById("control"),o.block),e.$$.dirty&1&&t(1,g.height=Math.max(n.xy1[1],n.xy0[1])-Math.min(n.xy1[1],n.xy0[1]),g),e.$$.dirty&1&&t(1,g.width=Math.max(n.xy1[0],n.xy0[0])-Math.min(n.xy1[0],n.xy0[0]),g),e.$$.dirty&3&&t(1,g.n_cols=g.width==0?1:Math.ceil(g.width/(.768*(1-n.overlap))),g),e.$$.dirty&2&&t(1,g.n_bundles=Math.ceil(g.height/.048),g),e.$$.dirty&2&&t(1,g.time=g.n_bundles*g.n_cols/20,g),e.$$.dirty&1&&t(1,g.n_z=Math.abs(n.z_to-n.z_from)+1,g)},[n,g,h,i,o,f,p,_,D,y,M,w,A,u,k,O,F,H,C,U,B,Z,X,K]}class on extends Dl{constructor(l){super();Al(this,l,en,$s,Vl,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{an as P,on as T};
