import{S as Dl,i as Al,s as Vl,F as Ht,e as p,k as P,c as d,a as v,m as N,d as r,b as a,g as L,H as s,I as Xt,J as Wt,K as Gt,q as Y,o as le,al as Ts,am as Ss,M as ys,an as Cs,a0 as nl,V as G,n as Es,p as zs,_ as Is,w as Oe,x as Te,y as Se,B as Ce,t as E,h as z,O as rt,P as it,U as M,a1 as q,Q as ge,$ as J,W as Rt,N as Ge,X as Ie,j as ce,T as st,Y as nt,Z as at}from"./vendor-aa38cc64.js";import{r as Ds}from"./coords-813c65ab.js";import{s as ot,u as al,c as ol}from"./store-debdb9d8.js";import{S as As,c as We,t as qt,a as Vs}from"./tooltip-35e2c545.js";const Ms=e=>({}),ps=e=>({});function Us(e){let l,t,o,m,f,i,n;const g=e[3].buttons,h=Ht(g,e,e[2],ps),D=e[3].default,c=Ht(D,e,e[2],null);return{c(){l=p("span"),h&&h.c(),t=P(),o=p("content"),c&&c.c(),m=P(),f=p("div"),i=p("progress"),this.h()},l(_){l=d(_,"SPAN",{class:!0});var k=v(l);h&&h.l(k),t=N(k),o=d(k,"CONTENT",{class:!0});var V=v(o);c&&c.l(V),m=N(V),f=d(V,"DIV",{class:!0});var w=v(f);i=d(w,"PROGRESS",{class:!0}),v(i).forEach(r),w.forEach(r),V.forEach(r),k.forEach(r),this.h()},h(){a(i,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),i.value=e[1],a(f,"class","mt-1"),a(o,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),a(l,"class","z-40 flex w-full space-x-2")},m(_,k){L(_,l,k),h&&h.m(l,null),s(l,t),s(l,o),c&&c.m(o,null),s(o,m),s(o,f),s(f,i),n=!0},p(_,[k]){h&&h.p&&(!n||k&4)&&Xt(h,g,_,_[2],n?Gt(g,_[2],k,Ms):Wt(_[2]),ps),c&&c.p&&(!n||k&4)&&Xt(c,D,_,_[2],n?Gt(D,_[2],k,null):Wt(_[2]),null),(!n||k&2)&&(i.value=_[1])},i(_){n||(Y(h,_),Y(c,_),n=!0)},o(_){le(h,_),le(c,_),n=!1},d(_){_&&r(l),h&&h.d(_),c&&c.d(_)}}}function Bs(e,l,t){let o,m=ys,f=()=>(m(),m=Ss(g,h=>t(1,o=h)),g);e.$$.on_destroy.push(()=>m());let{$$slots:i={},$$scope:n}=l;const g=Ts(0,{duration:400,easing:Cs});return f(),e.$$set=h=>{"$$scope"in h&&t(2,n=h.$$scope)},[g,o,n,i]}class nn extends Dl{constructor(l){super();Al(this,l,Bs,Us,Vl,{progress:0})}get progress(){return this.$$.ctx[0]}}function js(e){let l,t;const o=e[7].default,m=Ht(o,e,e[6],null),f=m||Fs();return{c(){l=p("div"),f&&f.c(),this.h()},l(i){l=d(i,"DIV",{class:!0});var n=v(l);f&&f.l(n),n.forEach(r),this.h()},h(){a(l,"class","mx-auto")},m(i,n){L(i,l,n),f&&f.m(l,null),t=!0},p(i,n){m&&m.p&&(!t||n&64)&&Xt(m,o,i,i[6],t?Gt(o,i[6],n,null):Wt(i[6]),null)},i(i){t||(Y(f,i),t=!0)},o(i){le(f,i),t=!1},d(i){i&&r(l),f&&f.d(i)}}}function Ls(e){let l,t,o;return t=new As({props:{color:"black"}}),{c(){l=p("div"),Oe(t.$$.fragment),this.h()},l(m){l=d(m,"DIV",{class:!0});var f=v(l);Te(t.$$.fragment,f),f.forEach(r),this.h()},h(){a(l,"class","mx-auto opacity-40")},m(m,f){L(m,l,f),Se(t,l,null),o=!0},p:ys,i(m){o||(Y(t.$$.fragment,m),o=!0)},o(m){le(t.$$.fragment,m),o=!1},d(m){m&&r(l),Ce(t)}}}function Fs(e){let l;return{c(){l=E("Go")},l(t){l=z(t,"Go")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function Zs(e){let l,t,o,m,f,i,n;const g=[Ls,js],h=[];function D(c,_){return c[1]?0:1}return t=D(e),o=h[t]=g[t](e),{c(){l=p("button"),o.c(),this.h()},l(c){l=d(c,"BUTTON",{type:!0,class:!0,tabindex:!0});var _=v(l);o.l(_),_.forEach(r),this.h()},h(){a(l,"type","button"),a(l,"class",m=nl(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${e[5][e[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${e[3]}`)+" svelte-1rnzpdo"),a(l,"tabindex","0"),l.disabled=e[0]},m(c,_){L(c,l,_),h[t].m(l,null),f=!0,i||(n=G(l,"click",e[8]),i=!0)},p(c,[_]){let k=t;t=D(c),t===k?h[t].p(c,_):(Es(),le(h[k],1,1,()=>{h[k]=null}),zs(),o=h[t],o?o.p(c,_):(o=h[t]=g[t](c),o.c()),Y(o,1),o.m(l,null)),(!f||_&12&&m!==(m=nl(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${c[5][c[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${c[3]}`)+" svelte-1rnzpdo"))&&a(l,"class",m),(!f||_&1)&&(l.disabled=c[0])},i(c){f||(Y(o),f=!0)},o(c){le(o),f=!1},d(c){c&&r(l),h[t].d(),i=!1,n()}}}function qs(e,l,t){let{$$slots:o={},$$scope:m}=l,{disabled:f=!1}=l,{spin:i=!1}=l,{color:n="indigo"}=l,{cl:g=""}=l;const h=Is(),D={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},c=()=>h("click");return e.$$set=_=>{"disabled"in _&&t(0,f=_.disabled),"spin"in _&&t(1,i=_.spin),"color"in _&&t(2,n=_.color),"cl"in _&&t(3,g=_.cl),"$$scope"in _&&t(6,m=_.$$scope)},[f,i,n,g,h,D,m,o,c]}class Cl extends Dl{constructor(l){super();Al(this,l,qs,Zs,Vl,{disabled:0,spin:1,color:2,cl:3})}}function Hs(e){let l,t,o,m,f,i,n,g,h,D,c,_,k,V,w,A,u,y,O,F,H;return k=new Cl({props:{disabled:e[3]}}),k.$on("click",e[11]),{c(){l=p("div"),t=p("div"),o=p("span"),m=E("X"),f=P(),i=p("input"),n=P(),g=p("span"),h=E("Y"),D=P(),c=p("input"),_=P(),Oe(k.$$.fragment),V=P(),w=p("button"),A=rt("svg"),u=rt("path"),y=E(`
    Current`),this.h()},l(S){l=d(S,"DIV",{class:!0});var U=v(l);t=d(U,"DIV",{class:!0});var j=v(t);o=d(j,"SPAN",{class:!0});var Z=v(o);m=z(Z,"X"),Z.forEach(r),f=N(j),i=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),n=N(j),g=d(j,"SPAN",{class:!0});var X=v(g);h=z(X,"Y"),X.forEach(r),D=N(j),c=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(r),_=N(U),Te(k.$$.fragment,U),V=N(U),w=d(U,"BUTTON",{type:!0,class:!0});var K=v(w);A=it(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var T=v(A);u=it(T,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(u).forEach(r),T.forEach(r),y=z(K,`
    Current`),K.forEach(r),U.forEach(r),this.h()},h(){a(o,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),M(o,"span-disabled",e[2].block),a(i,"type","number"),a(i,"min","-5"),a(i,"max","30"),a(i,"step","0.01"),a(i,"class","z-10 h-10 text-center rounded-none pretty w-28"),i.disabled=e[3],a(g,"class","flex items-center color-group svelte-awp8a4"),M(g,"span-disabled",e[2].block),a(c,"type","number"),a(c,"min","-5"),a(c,"max","80"),a(c,"step","0.01"),a(c,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),c.disabled=e[3],a(t,"class","flex font-medium"),a(u,"stroke-linecap","round"),a(u,"stroke-linejoin","round"),a(u,"stroke-width","2"),a(u,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),a(A,"xmlns","http://www.w3.org/2000/svg"),a(A,"class","w-5 h-5 mr-1"),a(A,"fill","none"),a(A,"viewBox","0 0 24 24"),a(A,"stroke","currentColor"),a(w,"type","button"),a(w,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),w.disabled=e[3],a(l,"class","flex gap-x-2")},m(S,U){L(S,l,U),s(l,t),s(t,o),s(o,m),s(t,f),s(t,i),q(i,e[0][0]),s(t,n),s(t,g),s(g,h),s(t,D),s(t,c),q(c,e[0][1]),s(l,_),Se(k,l,null),s(l,V),s(l,w),s(w,A),s(A,u),s(w,y),O=!0,F||(H=[G(i,"input",e[7]),G(i,"change",e[8]),ge(We.call(null,i,[-5,30])),G(c,"input",e[9]),G(c,"change",e[10]),ge(We.call(null,c,[-5,80])),G(w,"click",e[6])],F=!0)},p(S,[U]){U&4&&M(o,"span-disabled",S[2].block),(!O||U&8)&&(i.disabled=S[3]),U&1&&J(i.value)!==S[0][0]&&q(i,S[0][0]),U&4&&M(g,"span-disabled",S[2].block),(!O||U&8)&&(c.disabled=S[3]),U&1&&J(c.value)!==S[0][1]&&q(c,S[0][1]);const j={};U&8&&(j.disabled=S[3]),k.$set(j),(!O||U&8)&&(w.disabled=S[3])},i(S){O||(Y(k.$$.fragment,S),O=!0)},o(S){le(k.$$.fragment,S),O=!1},d(S){S&&r(l),Ce(k),F=!1,Rt(H)}}}function Xs(e,l,t){let o,m,f,i;Ge(e,ot,u=>t(2,o=u)),Ge(e,ot,u=>t(12,m=u)),Ge(e,al,u=>t(13,f=u)),Ge(e,ol,u=>t(4,i=u));const n=Is();let{i:g}=l,{xy:h=[-1,-1]}=l;function D(){const{x:u,y}=Ds(f.image_params.fc,m.x,m.y);t(0,h[0]=Math.round((u+Number.EPSILON)*100)/100,h),t(0,h[1]=Math.round((y+Number.EPSILON)*100)/100,h)}let c=!1;function _(){h[0]=J(this.value),t(0,h)}const k=()=>n("change");function V(){h[1]=J(this.value),t(0,h)}const w=()=>n("change"),A=()=>{Ie(ot,o.block="moving",o),Ie(ol,i={move:g===0?{xy0:h}:{xy1:h}},i)};return e.$$set=u=>{"i"in u&&t(1,g=u.i),"xy"in u&&t(0,h=u.xy)},e.$$.update=()=>{e.$$.dirty&4&&t(3,c=Boolean(o.block))},[h,g,o,c,i,n,D,_,k,V,w,A]}class ds extends Dl{constructor(l){super();Al(this,l,Xs,Hs,Vl,{i:1,xy:0})}}function Ws(e){let l;return{c(){l=E("Set")},l(t){l=z(t,"Set")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function Gs(e){let l,t,o,m,f,i,n,g,h,D,c,_,k,V,w,A;return{c(){l=p("option"),t=E("Open"),o=p("option"),m=E("0.2"),f=p("option"),i=E("0.5"),n=p("option"),g=E("0.6"),h=p("option"),D=E("1.0"),c=p("option"),_=E("2.4"),k=p("option"),V=E("4.0"),w=p("option"),A=E("Closed"),this.h()},l(u){l=d(u,"OPTION",{});var y=v(l);t=z(y,"Open"),y.forEach(r),o=d(u,"OPTION",{});var O=v(o);m=z(O,"0.2"),O.forEach(r),f=d(u,"OPTION",{});var F=v(f);i=z(F,"0.5"),F.forEach(r),n=d(u,"OPTION",{});var H=v(n);g=z(H,"0.6"),H.forEach(r),h=d(u,"OPTION",{});var S=v(h);D=z(S,"1.0"),S.forEach(r),c=d(u,"OPTION",{});var U=v(c);_=z(U,"2.4"),U.forEach(r),k=d(u,"OPTION",{});var j=v(k);V=z(j,"4.0"),j.forEach(r),w=d(u,"OPTION",{});var Z=v(w);A=z(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="0.2",o.value=o.__value,f.__value="0.5",f.value=f.__value,n.__value="0.6",n.value=n.__value,h.__value="1.0",h.value=h.__value,c.__value="2.4",c.value=c.__value,k.__value="4.0",k.value=k.__value,w.__value="Closed",w.value=w.__value},m(u,y){L(u,l,y),s(l,t),L(u,o,y),s(o,m),L(u,f,y),s(f,i),L(u,n,y),s(n,g),L(u,h,y),s(h,D),L(u,c,y),s(c,_),L(u,k,y),s(k,V),L(u,w,y),s(w,A)},d(u){u&&r(l),u&&r(o),u&&r(f),u&&r(n),u&&r(h),u&&r(c),u&&r(k),u&&r(w)}}}function Rs(e){let l,t,o,m,f,i,n,g,h,D,c,_,k,V,w,A;return{c(){l=p("option"),t=E("Open"),o=p("option"),m=E("1.0"),f=p("option"),i=E("2.0"),n=p("option"),g=E("3.5"),h=p("option"),D=E("3.8"),c=p("option"),_=E("4.0"),k=p("option"),V=E("4.5"),w=p("option"),A=E("Closed"),this.h()},l(u){l=d(u,"OPTION",{});var y=v(l);t=z(y,"Open"),y.forEach(r),o=d(u,"OPTION",{});var O=v(o);m=z(O,"1.0"),O.forEach(r),f=d(u,"OPTION",{});var F=v(f);i=z(F,"2.0"),F.forEach(r),n=d(u,"OPTION",{});var H=v(n);g=z(H,"3.5"),H.forEach(r),h=d(u,"OPTION",{});var S=v(h);D=z(S,"3.8"),S.forEach(r),c=d(u,"OPTION",{});var U=v(c);_=z(U,"4.0"),U.forEach(r),k=d(u,"OPTION",{});var j=v(k);V=z(j,"4.5"),j.forEach(r),w=d(u,"OPTION",{});var Z=v(w);A=z(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="1.0",o.value=o.__value,f.__value="2.0",f.value=f.__value,n.__value="3.5",n.value=n.__value,h.__value="3.8",h.value=h.__value,c.__value="4.0",c.value=c.__value,k.__value="4.5",k.value=k.__value,w.__value="Closed",w.value=w.__value},m(u,y){L(u,l,y),s(l,t),L(u,o,y),s(o,m),L(u,f,y),s(f,i),L(u,n,y),s(n,g),L(u,h,y),s(h,D),L(u,c,y),s(c,_),L(u,k,y),s(k,V),L(u,w,y),s(w,A)},d(u){u&&r(l),u&&r(o),u&&r(f),u&&r(n),u&&r(h),u&&r(c),u&&r(k),u&&r(w)}}}function Ys(e){let l,t,o,m,f,i,n,g=(Boolean(e[1])?660:532)+"",h,D,c,_,k,V,w,A,u,y,O,F,H=2*e[1]+"",S,U,j,Z,X,K,T=2*e[1]+1+"",we,ke,W,rl,pe,ye,ae,il,De=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",oe,ul,te,de,Ee;w=new Cl({props:{$$slots:{default:[Ws]},$$scope:{ctx:e}}}),w.$on("click",e[7]);function Ae(I,B){return I[1]==0?Rs:Gs}let Re=Ae(e),ue=Re(e);return{c(){l=p("p"),t=p("span"),o=p("label"),m=p("input"),i=P(),n=p("div"),h=E(g),D=E(" nm"),c=P(),_=p("input"),V=E(`
    mW
    `),Oe(w.$$.fragment),A=P(),u=p("label"),y=p("input"),F=E(`
    Channel `),S=E(H),U=P(),j=p("label"),Z=p("input"),K=E(`
    Channel `),we=E(T),ke=P(),W=p("span"),rl=E(`Filter OD
    `),pe=p("select"),ue.c(),ye=P(),ae=p("p"),il=E("Effective: "),oe=E(De),ul=E(" mW"),this.h()},l(I){l=d(I,"P",{class:!0});var B=v(l);t=d(B,"SPAN",{class:!0});var fe=v(t);o=d(fe,"LABEL",{});var re=v(o);m=d(re,"INPUT",{type:!0,class:!0}),i=N(re),n=d(re,"DIV",{class:!0});var _e=v(n);h=z(_e,g),D=z(_e," nm"),_e.forEach(r),re.forEach(r),c=N(fe),_=d(fe,"INPUT",{type:!0,class:!0,min:!0,max:!0}),V=z(fe,`
    mW
    `),Te(w.$$.fragment,fe),fe.forEach(r),A=N(B),u=d(B,"LABEL",{class:!0});var Pe=v(u);y=d(Pe,"INPUT",{type:!0,class:!0}),F=z(Pe,`
    Channel `),S=z(Pe,H),Pe.forEach(r),U=N(B),j=d(B,"LABEL",{class:!0});var Ve=v(j);Z=d(Ve,"INPUT",{type:!0,class:!0}),K=z(Ve,`
    Channel `),we=z(Ve,T),Ve.forEach(r),ke=N(B),W=d(B,"SPAN",{class:!0});var Me=v(W);rl=z(Me,`Filter OD
    `),pe=d(Me,"SELECT",{class:!0});var Ye=v(pe);ue.l(Ye),Ye.forEach(r),ye=N(Me),ae=d(Me,"P",{class:!0});var Ue=v(ae);il=z(Ue,"Effective: "),oe=z(Ue,De),ul=z(Ue," mW"),Ue.forEach(r),Me.forEach(r),B.forEach(r),this.h()},h(){a(m,"type","checkbox"),a(m,"class",f=nl(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),a(n,"class","inline font-semibold"),M(n,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),M(n,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),a(_,"type","number"),a(_,"class","w-20 h-8 pretty"),a(_,"min","0"),a(_,"max","500"),_.disabled=k=!e[0].laser_onoff[e[1]],M(_,"pretty-disabled",!e[0].laser_onoff[0]),a(t,"class","flex items-center gap-x-2"),M(t,"text-gray-400",!e[0].laser_onoff[e[1]]),a(y,"type","checkbox"),a(y,"class",O=nl(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),a(u,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),M(u,"text-gray-400",!e[0].channels[2*e[1]]),a(Z,"type","checkbox"),a(Z,"class",X=nl(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),a(j,"class","channel svelte-6ipz4o"),M(j,"text-gray-400",!e[0].channels[2*e[1]+1]),a(pe,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300"),a(ae,"class","ml-3 text-sm font-medium"),a(W,"class","ml-8 font-normal opacity-85"),a(l,"class","flex flex-col")},m(I,B){L(I,l,B),s(l,t),s(t,o),s(o,m),m.checked=e[0].laser_onoff[e[1]],s(o,i),s(o,n),s(n,h),s(n,D),s(t,c),s(t,_),q(_,e[0].lasers[e[1]]),s(t,V),Se(w,t,null),s(l,A),s(l,u),s(u,y),y.checked=e[0].channels[2*e[1]],s(u,F),s(u,S),s(l,U),s(l,j),s(j,Z),Z.checked=e[0].channels[2*e[1]+1],s(j,K),s(j,we),s(l,ke),s(l,W),s(W,rl),s(W,pe),ue.m(pe,null),s(W,ye),s(W,ae),s(ae,il),s(ae,oe),s(ae,ul),te=!0,de||(Ee=[G(m,"change",e[5]),G(_,"input",e[6]),ge(We.call(null,_,[0,500])),G(y,"change",e[8]),G(Z,"change",e[9]),G(pe,"change",e[4])],de=!0)},p(I,[B]){(!te||B&2&&f!==(f=nl(`rounded mr-1 ${I[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&a(m,"class",f),B&3&&(m.checked=I[0].laser_onoff[I[1]]),(!te||B&2)&&g!==(g=(Boolean(I[1])?660:532)+"")&&ce(h,g),B&3&&M(n,"text-green-800",I[0].laser_onoff[I[1]]&&!I[1]),B&3&&M(n,"text-red-800",I[0].laser_onoff[I[1]]&&I[1]),(!te||B&3&&k!==(k=!I[0].laser_onoff[I[1]]))&&(_.disabled=k),B&3&&J(_.value)!==I[0].lasers[I[1]]&&q(_,I[0].lasers[I[1]]),B&1&&M(_,"pretty-disabled",!I[0].laser_onoff[0]);const fe={};B&1024&&(fe.$$scope={dirty:B,ctx:I}),w.$set(fe),B&3&&M(t,"text-gray-400",!I[0].laser_onoff[I[1]]),(!te||B&2&&O!==(O=nl(`mr-1 rounded ${I[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&a(y,"class",O),B&3&&(y.checked=I[0].channels[2*I[1]]),(!te||B&2)&&H!==(H=2*I[1]+"")&&ce(S,H),B&3&&M(u,"text-gray-400",!I[0].channels[2*I[1]]),(!te||B&2&&X!==(X=nl(`mr-1 rounded ${I[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&a(Z,"class",X),B&3&&(Z.checked=I[0].channels[2*I[1]+1]),(!te||B&2)&&T!==(T=2*I[1]+1+"")&&ce(we,T),B&3&&M(j,"text-gray-400",!I[0].channels[2*I[1]+1]),Re!==(Re=Ae(I))&&(ue.d(1),ue=Re(I),ue&&(ue.c(),ue.m(pe,null))),(!te||B&3)&&De!==(De=(Number(I[0].od[I[1]]!=-1)*I[0].lasers[I[1]]*Math.pow(10,-I[0].od[I[1]])).toFixed(4)+"")&&ce(oe,De)},i(I){te||(Y(w.$$.fragment,I),te=!0)},o(I){le(w.$$.fragment,I),te=!1},d(I){I&&r(l),Ce(w),ue.d(),de=!1,Rt(Ee)}}}function Js(e,l,t){let o,m;Ge(e,ol,k=>t(2,o=k)),Ge(e,al,k=>t(3,m=k));let{params:f}=l,{i}=l;function n(k){let V;switch(k.currentTarget.value){case"Open":V=0;break;case"Closed":V=-1;break;default:V=Number(k.currentTarget.value)}t(0,f.od[i]=V,f),Ie(al,m.image_params.od[i]=f.od[i],m),Ie(ol,o={move:{od:i===0?[f.od[i],void 0]:[void 0,f.od[i]]}},o)}function g(){f.laser_onoff[i]=this.checked,t(0,f)}function h(){f.lasers[i]=J(this.value),t(0,f)}const D=()=>{Ie(al,m.image_params.laser_onoff[i]=f.laser_onoff[i],m),Ie(al,m.image_params.lasers[i]=f.lasers[i],m),Ie(ol,o={move:{lasers:i===0?[f.lasers[i],void 0]:[void 0,f.lasers[i]],laser_onoff:i===0?[f.laser_onoff[i],void 0]:[void 0,f.laser_onoff[i]]}},o)};function c(){f.channels[2*i]=this.checked,t(0,f)}function _(){f.channels[2*i+1]=this.checked,t(0,f)}return e.$$set=k=>{"params"in k&&t(0,f=k.params),"i"in k&&t(1,i=k.i)},[f,i,o,m,n,g,h,D,c,_]}class ms extends Dl{constructor(l){super();Al(this,l,Js,Ys,Vl,{params:0,i:1})}}function hs(e){let l,t;return l=new Cl({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[Ks]},$$scope:{ctx:e}}}),{c(){Oe(l.$$.fragment)},l(o){Te(l.$$.fragment,o)},m(o,m){Se(l,o,m),t=!0},i(o){t||(Y(l.$$.fragment,o),t=!0)},o(o){le(l.$$.fragment,o),t=!1},d(o){Ce(l,o)}}}function Ks(e){let l;return{c(){l=E("Preview")},l(t){l=z(t,"Preview")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function vs(e){let l,t,o,m,f,i;return{c(){l=p("p"),t=E("Image Path"),o=P(),m=p("input"),this.h()},l(n){l=d(n,"P",{class:!0});var g=v(l);t=z(g,"Image Path"),g.forEach(r),o=N(n),m=d(n,"INPUT",{type:!0,class:!0}),this.h()},h(){a(l,"class","text-lg svelte-1m4l8fo"),a(m,"type","text"),a(m,"class","max-w-md mb-4 pretty"),M(m,"invalid",!e[0].path)},m(n,g){L(n,l,g),s(l,t),L(n,o,g),L(n,m,g),q(m,e[0].path),f||(i=G(m,"input",e[10]),f=!0)},p(n,g){g&1&&m.value!==n[0].path&&q(m,n[0].path),g&1&&M(m,"invalid",!n[0].path)},d(n){n&&r(l),n&&r(o),n&&r(m),f=!1,i()}}}function bs(e){let l;return{c(){l=E("per z-stack.")},l(t){l=z(t,"per z-stack.")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function gs(e){let l,t=e[1].n_z+"",o,m,f,i=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",n,g,h=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",D,c,_,k,V=(e[1].n_z?El(e[1].n_z*e[1].time):El(e[1].time))+"",w,A,u=e[1].n_z>1&&ks();return{c(){l=p("div"),o=E(t),m=E(" Z step"),u&&u.c(),f=E(" from "),n=E(i),g=E(" to "),D=E(h),c=P(),_=p("div"),k=E("Total time: "),w=E(V),A=E("."),this.h()},l(y){l=d(y,"DIV",{class:!0});var O=v(l);o=z(O,t),m=z(O," Z step"),u&&u.l(O),f=z(O," from "),n=z(O,i),g=z(O," to "),D=z(O,h),O.forEach(r),c=N(y),_=d(y,"DIV",{class:!0});var F=v(_);k=z(F,"Total time: "),w=z(F,V),A=z(F,"."),F.forEach(r),this.h()},h(){a(l,"class","px-2 font-base"),a(_,"class","px-2 font-semibold")},m(y,O){L(y,l,O),s(l,o),s(l,m),u&&u.m(l,null),s(l,f),s(l,n),s(l,g),s(l,D),L(y,c,O),L(y,_,O),s(_,k),s(_,w),s(_,A)},p(y,O){O&2&&t!==(t=y[1].n_z+"")&&ce(o,t),y[1].n_z>1?u||(u=ks(),u.c(),u.m(l,f)):u&&(u.d(1),u=null),O&1&&i!==(i=y[0].z_obj+y[0].z_from*y[0].z_spacing+"")&&ce(n,i),O&1&&h!==(h=y[0].z_obj+y[0].z_to*y[0].z_spacing+"")&&ce(D,h),O&2&&V!==(V=(y[1].n_z?El(y[1].n_z*y[1].time):El(y[1].time))+"")&&ce(w,V)},d(y){y&&r(l),u&&u.d(),y&&r(c),y&&r(_)}}}function ks(e){let l;return{c(){l=E("s")},l(t){l=z(t,"s")},m(t,o){L(t,l,o)},d(t){t&&r(l)}}}function Qs(e){let l,t,o,m,f,i,n,g,h,D,c,_,k,V,w,A,u,y,O,F,H,S,U,j,Z,X,K,T,we,ke,W,rl,pe,ye,ae,il,De,oe,ul,te,de,Ee,Ae,Re,ue,I,B,fe,re,_e,Pe=e[1].width.toFixed(2)+"",Ve,Me,Ye=e[1].height.toFixed(2)+"",Ue,ut,ft,Be,zl=e[1].n_cols+"",Ml,_t,Il=e[1].n_bundles+"",Ul,ct,pt,ze,wl=El(e[1].time)+"",Bl,dt,mt,Je,ml,ht,vt,Ke,Qe,fl,hl,bt,gt,$e,me,kt,xe,yt,_l,vl,Et,zt,Ne,he,It,el,wt,je,Le,cl,Pt,Pl,Nt,Ot,ll,tl,sl,Tt,Fe,bl,St,Ct,Dt,Q,Ze,At,Vt,$,jl,Mt,qe,Ut,Bt,x,Ll,jt,He,Lt,Ft,ee,Fl,ve,Zt,Yt,R=e[3]&&hs(e),se=!e[3]&&vs(e);function ws(b){e[11](b)}let Jt={i:0};e[0]!==void 0&&(Jt.params=e[0]),A=new ms({props:Jt}),st.push(()=>nt(A,"params",ws));function Ps(b){e[12](b)}let Kt={i:1};e[0]!==void 0&&(Kt.params=e[0]),O=new ms({props:Kt}),st.push(()=>nt(O,"params",Ps));function Ns(b){e[13](b)}let Qt={i:0};e[0].xy0!==void 0&&(Qt.xy=e[0].xy0),W=new ds({props:Qt}),st.push(()=>nt(W,"xy",Ns)),W.$on("change",e[6]);function Os(b){e[14](b)}let $t={i:1};e[0].xy1!==void 0&&($t.xy=e[0].xy1),oe=new ds({props:$t}),st.push(()=>nt(oe,"xy",Os)),oe.$on("change",e[6]);let ie=e[2]&&bs();xe=new Cl({}),xe.$on("click",e[17]),el=new Cl({}),el.$on("click",e[19]);let ne=e[2]&&gs(e);return{c(){l=p("div"),t=p("section"),o=p("p"),m=E("Name"),f=P(),i=p("div"),n=p("input"),g=P(),R&&R.c(),h=P(),se&&se.c(),D=P(),c=p("section"),_=p("h2"),k=E("Laser and Channels"),V=P(),w=p("div"),Oe(A.$$.fragment),y=P(),Oe(O.$$.fragment),H=P(),S=p("section"),U=p("h2"),j=E("Positions"),Z=P(),X=p("div"),K=p("div"),T=p("p"),we=E("\u{1F4CC} Corner 1"),ke=P(),Oe(W.$$.fragment),pe=P(),ye=p("div"),ae=p("p"),il=E("\u{1F4CD} Corner 2"),De=P(),Oe(oe.$$.fragment),te=P(),de=p("div"),Ee=p("div"),Ae=p("p"),Re=E("X-Overlap"),ue=P(),I=p("input"),B=E(`
          (0-1)`),fe=P(),re=p("div"),_e=p("span"),Ve=E(Pe),Me=E(" \xD7 "),Ue=E(Ye),ut=E(" mm."),ft=P(),Be=p("span"),Ml=E(zl),_t=E(" columns of "),Ul=E(Il),ct=E(" bundles."),pt=P(),ze=p("span"),Bl=E(wl),dt=P(),ie&&ie.c(),mt=P(),Je=p("section"),ml=p("h2"),ht=E("Focus"),vt=P(),Ke=p("div"),Qe=p("div"),fl=p("div"),hl=p("p"),bt=E("Z Tilt"),gt=P(),$e=p("div"),me=p("input"),kt=P(),Oe(xe.$$.fragment),yt=P(),_l=p("div"),vl=p("p"),Et=E("Z Objective"),zt=P(),Ne=p("span"),he=p("input"),It=P(),Oe(el.$$.fragment),wt=P(),je=p("button"),Le=rt("svg"),cl=rt("path"),Pt=P(),Pl=p("span"),Nt=E("Autofocus"),Ot=P(),ll=p("div"),tl=p("label"),sl=p("input"),Tt=P(),Fe=p("div"),bl=p("div"),St=E("Z-Stack"),Ct=P(),ne&&ne.c(),Dt=P(),Q=p("div"),Ze=p("span"),At=E("Spacing"),Vt=P(),$=p("input"),Mt=P(),qe=p("span"),Ut=E("From"),Bt=P(),x=p("input"),jt=P(),He=p("span"),Lt=E("To"),Ft=P(),ee=p("input"),this.h()},l(b){l=d(b,"DIV",{id:!0,class:!0});var C=v(l);t=d(C,"SECTION",{class:!0});var Xe=v(t);o=d(Xe,"P",{class:!0});var Nl=v(o);m=z(Nl,"Name"),Nl.forEach(r),f=N(Xe),i=d(Xe,"DIV",{class:!0});var pl=v(i);n=d(pl,"INPUT",{type:!0,class:!0}),g=N(pl),R&&R.l(pl),pl.forEach(r),h=N(Xe),se&&se.l(Xe),Xe.forEach(r),D=N(C),c=d(C,"SECTION",{class:!0});var dl=v(c);_=d(dl,"H2",{class:!0});var xt=v(_);k=z(xt,"Laser and Channels"),xt.forEach(r),V=N(dl),w=d(dl,"DIV",{class:!0});var Zl=v(w);Te(A.$$.fragment,Zl),y=N(Zl),Te(O.$$.fragment,Zl),Zl.forEach(r),dl.forEach(r),H=N(C),S=d(C,"SECTION",{class:!0});var ql=v(S);U=d(ql,"H2",{class:!0});var es=v(U);j=z(es,"Positions"),es.forEach(r),Z=N(ql),X=d(ql,"DIV",{class:!0});var gl=v(X);K=d(gl,"DIV",{});var Hl=v(K);T=d(Hl,"P",{class:!0});var ls=v(T);we=z(ls,"\u{1F4CC} Corner 1"),ls.forEach(r),ke=N(Hl),Te(W.$$.fragment,Hl),Hl.forEach(r),pe=N(gl),ye=d(gl,"DIV",{});var Xl=v(ye);ae=d(Xl,"P",{class:!0});var ts=v(ae);il=z(ts,"\u{1F4CD} Corner 2"),ts.forEach(r),De=N(Xl),Te(oe.$$.fragment,Xl),Xl.forEach(r),te=N(gl),de=d(gl,"DIV",{class:!0});var Wl=v(de);Ee=d(Wl,"DIV",{});var Ol=v(Ee);Ae=d(Ol,"P",{class:!0});var ss=v(Ae);Re=z(ss,"X-Overlap"),ss.forEach(r),ue=N(Ol),I=d(Ol,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),B=z(Ol,`
          (0-1)`),Ol.forEach(r),fe=N(Wl),re=d(Wl,"DIV",{class:!0});var kl=v(re);_e=d(kl,"SPAN",{class:!0});var Tl=v(_e);Ve=z(Tl,Pe),Me=z(Tl," \xD7 "),Ue=z(Tl,Ye),ut=z(Tl," mm."),Tl.forEach(r),ft=N(kl),Be=d(kl,"SPAN",{class:!0});var Sl=v(Be);Ml=z(Sl,zl),_t=z(Sl," columns of "),Ul=z(Sl,Il),ct=z(Sl," bundles."),Sl.forEach(r),pt=N(kl),ze=d(kl,"SPAN",{class:!0});var Gl=v(ze);Bl=z(Gl,wl),dt=N(Gl),ie&&ie.l(Gl),Gl.forEach(r),kl.forEach(r),Wl.forEach(r),gl.forEach(r),ql.forEach(r),mt=N(C),Je=d(C,"SECTION",{class:!0});var Rl=v(Je);ml=d(Rl,"H2",{class:!0});var ns=v(ml);ht=z(ns,"Focus"),ns.forEach(r),vt=N(Rl),Ke=d(Rl,"DIV",{class:!0});var Yl=v(Ke);Qe=d(Yl,"DIV",{class:!0});var Jl=v(Qe);fl=d(Jl,"DIV",{});var Kl=v(fl);hl=d(Kl,"P",{class:!0});var as=v(hl);bt=z(as,"Z Tilt"),as.forEach(r),gt=N(Kl),$e=d(Kl,"DIV",{class:!0});var Ql=v($e);me=d(Ql,"INPUT",{type:!0,class:!0,min:!0,max:!0}),kt=N(Ql),Te(xe.$$.fragment,Ql),Ql.forEach(r),Kl.forEach(r),yt=N(Jl),_l=d(Jl,"DIV",{});var $l=v(_l);vl=d($l,"P",{class:!0});var os=v(vl);Et=z(os,"Z Objective"),os.forEach(r),zt=N($l),Ne=d($l,"SPAN",{class:!0});var yl=v(Ne);he=d(yl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),It=N(yl),Te(el.$$.fragment,yl),wt=N(yl),je=d(yl,"BUTTON",{type:!0,class:!0});var xl=v(je);Le=it(xl,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var rs=v(Le);cl=it(rs,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(cl).forEach(r),rs.forEach(r),Pt=N(xl),Pl=d(xl,"SPAN",{});var is=v(Pl);Nt=z(is,"Autofocus"),is.forEach(r),xl.forEach(r),yl.forEach(r),$l.forEach(r),Jl.forEach(r),Ot=N(Yl),ll=d(Yl,"DIV",{class:!0});var et=v(ll);tl=d(et,"LABEL",{class:!0});var lt=v(tl);sl=d(lt,"INPUT",{type:!0,class:!0}),Tt=N(lt),Fe=d(lt,"DIV",{class:!0});var tt=v(Fe);bl=d(tt,"DIV",{class:!0});var us=v(bl);St=z(us,"Z-Stack"),us.forEach(r),Ct=N(tt),ne&&ne.l(tt),tt.forEach(r),lt.forEach(r),Dt=N(et),Q=d(et,"DIV",{class:!0,id:!0});var be=v(Q);Ze=d(be,"SPAN",{class:!0});var fs=v(Ze);At=z(fs,"Spacing"),fs.forEach(r),Vt=N(be),$=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Mt=N(be),qe=d(be,"SPAN",{class:!0});var _s=v(qe);Ut=z(_s,"From"),_s.forEach(r),Bt=N(be),x=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),jt=N(be),He=d(be,"SPAN",{class:!0});var cs=v(He);Lt=z(cs,"To"),cs.forEach(r),Ft=N(be),ee=d(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),be.forEach(r),et.forEach(r),Yl.forEach(r),Rl.forEach(r),C.forEach(r),this.h()},h(){a(o,"class","mt-1 text-lg svelte-1m4l8fo"),a(n,"type","text"),a(n,"class","flex-grow mb-4 pretty text-lg h-12"),M(n,"invalid",e[7](e[0].name)),a(i,"class","flex w-full max-w-md gap-x-2"),a(t,"class","flex flex-col text-lg font-medium"),a(_,"class","svelte-1m4l8fo"),a(w,"class","grid grid-cols-2"),M(w,"opacity-70",e[4].block),a(c,"class","font-medium leading-10 "),a(U,"class","svelte-1m4l8fo"),a(T,"class","svelte-1m4l8fo"),a(ae,"class","svelte-1m4l8fo"),a(Ae,"class","svelte-1m4l8fo"),a(I,"type","number"),a(I,"class","w-20 pr-2 pretty"),a(I,"step","0.01"),a(I,"min","0"),a(I,"max","0.99"),a(_e,"class","tabular-nums"),a(Be,"class","tabular-nums"),a(ze,"class","tabular-nums"),M(ze,"font-semibold",!e[2]),a(re,"class","flex flex-col justify-center font-normal"),a(de,"class","flex gap-8"),a(X,"class","-mt-1 space-y-4"),a(S,"class","flex flex-col gap-2"),M(S,"-mt-20",e[3]),a(ml,"class","svelte-1m4l8fo"),a(hl,"class","svelte-1m4l8fo"),a(me,"type","number"),a(me,"class","w-28 pretty"),a(me,"min","0"),a(me,"max","25000"),a($e,"class","flex gap-2"),a(vl,"class","svelte-1m4l8fo"),a(he,"type","number"),a(he,"class","w-28 pretty"),a(he,"min","0"),a(he,"max","60000"),a(cl,"fill-rule","evenodd"),a(cl,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),a(cl,"clip-rule","evenodd"),a(Le,"xmlns","http://www.w3.org/2000/svg"),a(Le,"class","w-5 h-5 mr-1"),a(Le,"viewBox","0 0 20 20"),a(Le,"fill","currentColor"),a(je,"type","button"),a(je,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),a(Ne,"class","flex gap-2"),a(Qe,"class","flex space-x-8"),a(sl,"type","checkbox"),a(sl,"class","mr-1 rounded"),a(bl,"class","pr-2"),a(Fe,"class","flex divide-x-2"),a(tl,"class","flex items-center gap-x-1"),a(Ze,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),M(Ze,"span-disabled",e[4].block||!e[2]),a($,"type","number"),a($,"min","1"),a($,"max","60000"),a($,"step","1"),a($,"class","z-10 h-10 text-center rounded-none pretty w-28"),$.disabled=jl=e[4].block||!e[2],M($,"disabled",e[4].block||!e[2]),a(qe,"class","flex items-center color-group svelte-1m4l8fo"),M(qe,"span-disabled",e[4].block||!e[2]),a(x,"type","number"),a(x,"min","-100"),a(x,"max","100"),a(x,"step","1"),a(x,"class","z-10 w-16 h-10 text-center rounded-none pretty"),x.disabled=Ll=e[4].block||!e[2],M(x,"disabled",e[4].block||!e[2]),a(He,"class","flex items-center color-group svelte-1m4l8fo"),M(He,"span-disabled",e[4].block||!e[2]),a(ee,"type","number"),a(ee,"min","-100"),a(ee,"max","100"),a(ee,"step","1"),a(ee,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),ee.disabled=Fl=e[4].block||!e[2],M(ee,"disabled",e[4].block||!e[2]),a(Q,"class","flex font-medium"),a(Q,"id","zBox"),a(ll,"class","space-y-2"),a(Ke,"class","-mt-1 space-y-4"),a(Je,"class","flex flex-col gap-2"),a(l,"id","control"),a(l,"class","grid grid-cols-2 gap-y-6 gap-x-4")},m(b,C){L(b,l,C),s(l,t),s(t,o),s(o,m),s(t,f),s(t,i),s(i,n),q(n,e[0].name),s(i,g),R&&R.m(i,null),s(t,h),se&&se.m(t,null),s(l,D),s(l,c),s(c,_),s(_,k),s(c,V),s(c,w),Se(A,w,null),s(w,y),Se(O,w,null),s(l,H),s(l,S),s(S,U),s(U,j),s(S,Z),s(S,X),s(X,K),s(K,T),s(T,we),s(K,ke),Se(W,K,null),s(X,pe),s(X,ye),s(ye,ae),s(ae,il),s(ye,De),Se(oe,ye,null),s(X,te),s(X,de),s(de,Ee),s(Ee,Ae),s(Ae,Re),s(Ee,ue),s(Ee,I),q(I,e[0].overlap),s(Ee,B),s(de,fe),s(de,re),s(re,_e),s(_e,Ve),s(_e,Me),s(_e,Ue),s(_e,ut),s(re,ft),s(re,Be),s(Be,Ml),s(Be,_t),s(Be,Ul),s(Be,ct),s(re,pt),s(re,ze),s(ze,Bl),s(ze,dt),ie&&ie.m(ze,null),s(l,mt),s(l,Je),s(Je,ml),s(ml,ht),s(Je,vt),s(Je,Ke),s(Ke,Qe),s(Qe,fl),s(fl,hl),s(hl,bt),s(fl,gt),s(fl,$e),s($e,me),q(me,e[0].z_tilt),s($e,kt),Se(xe,$e,null),s(Qe,yt),s(Qe,_l),s(_l,vl),s(vl,Et),s(_l,zt),s(_l,Ne),s(Ne,he),q(he,e[0].z_obj),s(Ne,It),Se(el,Ne,null),s(Ne,wt),s(Ne,je),s(je,Le),s(Le,cl),s(je,Pt),s(je,Pl),s(Pl,Nt),s(Ke,Ot),s(Ke,ll),s(ll,tl),s(tl,sl),sl.checked=e[2],s(tl,Tt),s(tl,Fe),s(Fe,bl),s(bl,St),s(Fe,Ct),ne&&ne.m(Fe,null),s(ll,Dt),s(ll,Q),s(Q,Ze),s(Ze,At),s(Q,Vt),s(Q,$),q($,e[0].z_spacing),s(Q,Mt),s(Q,qe),s(qe,Ut),s(Q,Bt),s(Q,x),q(x,e[0].z_from),s(Q,jt),s(Q,He),s(He,Lt),s(Q,Ft),s(Q,ee),q(ee,e[0].z_to),ve=!0,Zt||(Yt=[G(n,"input",e[9]),G(I,"input",e[15]),ge(We.call(null,I,[.01,.99])),G(me,"input",e[16]),ge(We.call(null,me,[0,25e3])),G(he,"input",e[18]),ge(We.call(null,he,[0,6e4])),G(sl,"change",e[20]),ge(qt.call(null,Ze,"Nyquist is 232.")),G($,"input",e[21]),ge(We.call(null,$,[1,6e4])),ge(qt.call(null,qe,"Multiple of Spacing")),G(x,"input",e[22]),ge(We.call(null,x,[-100,100])),ge(qt.call(null,He,"Multiple of Spacing")),G(ee,"input",e[23]),ge(We.call(null,ee,[-100,100]))],Zt=!0)},p(b,[C]){C&1&&n.value!==b[0].name&&q(n,b[0].name),C&129&&M(n,"invalid",b[7](b[0].name)),b[3]?R?C&8&&Y(R,1):(R=hs(b),R.c(),Y(R,1),R.m(i,null)):R&&(Es(),le(R,1,1,()=>{R=null}),zs()),b[3]?se&&(se.d(1),se=null):se?se.p(b,C):(se=vs(b),se.c(),se.m(t,null));const Xe={};!u&&C&1&&(u=!0,Xe.params=b[0],at(()=>u=!1)),A.$set(Xe);const Nl={};!F&&C&1&&(F=!0,Nl.params=b[0],at(()=>F=!1)),O.$set(Nl),C&16&&M(w,"opacity-70",b[4].block);const pl={};!rl&&C&1&&(rl=!0,pl.xy=b[0].xy0,at(()=>rl=!1)),W.$set(pl);const dl={};!ul&&C&1&&(ul=!0,dl.xy=b[0].xy1,at(()=>ul=!1)),oe.$set(dl),C&1&&J(I.value)!==b[0].overlap&&q(I,b[0].overlap),(!ve||C&2)&&Pe!==(Pe=b[1].width.toFixed(2)+"")&&ce(Ve,Pe),(!ve||C&2)&&Ye!==(Ye=b[1].height.toFixed(2)+"")&&ce(Ue,Ye),(!ve||C&2)&&zl!==(zl=b[1].n_cols+"")&&ce(Ml,zl),(!ve||C&2)&&Il!==(Il=b[1].n_bundles+"")&&ce(Ul,Il),(!ve||C&2)&&wl!==(wl=El(b[1].time)+"")&&ce(Bl,wl),b[2]?ie||(ie=bs(),ie.c(),ie.m(ze,null)):ie&&(ie.d(1),ie=null),C&4&&M(ze,"font-semibold",!b[2]),C&8&&M(S,"-mt-20",b[3]),C&1&&J(me.value)!==b[0].z_tilt&&q(me,b[0].z_tilt),C&1&&J(he.value)!==b[0].z_obj&&q(he,b[0].z_obj),C&4&&(sl.checked=b[2]),b[2]?ne?ne.p(b,C):(ne=gs(b),ne.c(),ne.m(Fe,null)):ne&&(ne.d(1),ne=null),C&20&&M(Ze,"span-disabled",b[4].block||!b[2]),(!ve||C&20&&jl!==(jl=b[4].block||!b[2]))&&($.disabled=jl),C&1&&J($.value)!==b[0].z_spacing&&q($,b[0].z_spacing),C&20&&M($,"disabled",b[4].block||!b[2]),C&20&&M(qe,"span-disabled",b[4].block||!b[2]),(!ve||C&20&&Ll!==(Ll=b[4].block||!b[2]))&&(x.disabled=Ll),C&1&&J(x.value)!==b[0].z_from&&q(x,b[0].z_from),C&20&&M(x,"disabled",b[4].block||!b[2]),C&20&&M(He,"span-disabled",b[4].block||!b[2]),(!ve||C&20&&Fl!==(Fl=b[4].block||!b[2]))&&(ee.disabled=Fl),C&1&&J(ee.value)!==b[0].z_to&&q(ee,b[0].z_to),C&20&&M(ee,"disabled",b[4].block||!b[2])},i(b){ve||(Y(R),Y(A.$$.fragment,b),Y(O.$$.fragment,b),Y(W.$$.fragment,b),Y(oe.$$.fragment,b),Y(xe.$$.fragment,b),Y(el.$$.fragment,b),ve=!0)},o(b){le(R),le(A.$$.fragment,b),le(O.$$.fragment,b),le(W.$$.fragment,b),le(oe.$$.fragment,b),le(xe.$$.fragment,b),le(el.$$.fragment,b),ve=!1},d(b){b&&r(l),R&&R.d(),se&&se.d(),Ce(A),Ce(O),Ce(W),Ce(oe),ie&&ie.d(),Ce(xe),Ce(el),ne&&ne.d(),Zt=!1,Rt(Yt)}}}function $s(e,l){e&&(e.querySelectorAll("input").forEach(t=>t.disabled=l),e.querySelectorAll("select").forEach(t=>t.disabled=l),e.querySelectorAll("button").forEach(t=>t.disabled=l))}function El(e){const l=new Date(e*1e3).toISOString();return e>3600?`${l.substring(11,19)} hrs`:`${l.substring(14,19)} mins`}function xs(e,l,t){let o,m,f;Ge(e,ot,T=>t(4,o=T)),Ge(e,al,T=>t(24,m=T)),Ge(e,ol,T=>t(5,f=T));let{inAuto:i=!0}=l,{params:n}=l,{stats:g={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=l,{z_stack:h=!1}=l,{fc_:D=0}=l;function c(){Ie(al,m.image_params.xy0=n.xy0,m),Ie(al,m.image_params.xy1=n.xy1,m)}function _(T){if(!T)return!0;if(!i)return!1;const we=m.exps[D].cmds.filter(ke=>ke.cmd.op==="takeimage").map(ke=>ke.cmd.name);return Vs(we)[T]>1}function k(){n.name=this.value,t(0,n)}function V(){n.path=this.value,t(0,n)}function w(T){n=T,t(0,n)}function A(T){n=T,t(0,n)}function u(T){e.$$.not_equal(n.xy0,T)&&(n.xy0=T,t(0,n))}function y(T){e.$$.not_equal(n.xy1,T)&&(n.xy1=T,t(0,n))}function O(){n.overlap=J(this.value),t(0,n)}function F(){n.z_tilt=J(this.value),t(0,n)}const H=()=>Ie(ol,f={move:{z_tilt:n.z_tilt}},f);function S(){n.z_obj=J(this.value),t(0,n)}const U=()=>Ie(ol,f={move:{z_obj:n.z_obj}},f);function j(){h=this.checked,t(2,h)}function Z(){n.z_spacing=J(this.value),t(0,n)}function X(){n.z_from=J(this.value),t(0,n)}function K(){n.z_to=J(this.value),t(0,n)}return e.$$set=T=>{"inAuto"in T&&t(3,i=T.inAuto),"params"in T&&t(0,n=T.params),"stats"in T&&t(1,g=T.stats),"z_stack"in T&&t(2,h=T.z_stack),"fc_"in T&&t(8,D=T.fc_)},e.$$.update=()=>{e.$$.dirty&16&&$s(document.getElementById("control"),o.block),e.$$.dirty&1&&t(1,g.height=Math.max(n.xy1[1],n.xy0[1])-Math.min(n.xy1[1],n.xy0[1]),g),e.$$.dirty&1&&t(1,g.width=Math.max(n.xy1[0],n.xy0[0])-Math.min(n.xy1[0],n.xy0[0]),g),e.$$.dirty&3&&t(1,g.n_cols=g.width==0?1:Math.ceil(g.width/(.768*(1-n.overlap))),g),e.$$.dirty&2&&t(1,g.n_bundles=Math.ceil(g.height/.048),g),e.$$.dirty&2&&t(1,g.time=g.n_bundles*g.n_cols/20,g),e.$$.dirty&1&&t(1,g.n_z=Math.abs(n.z_to-n.z_from)+1,g)},[n,g,h,i,o,f,c,_,D,k,V,w,A,u,y,O,F,H,S,U,j,Z,X,K]}class an extends Dl{constructor(l){super();Al(this,l,xs,Qs,Vl,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{nn as P,an as T};
