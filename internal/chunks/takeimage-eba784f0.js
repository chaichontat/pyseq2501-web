import{S as ot,i as rt,s as it,e as _,c as p,a as m,d as r,b as n,a0 as al,g as L,V as G,n as ms,o as ie,p as hs,q as se,_ as vs,F as Es,I as zs,J as Is,K as ws,w as Oe,x as Te,y as Se,M as Ps,B as Ce,t as k,h as y,k as O,O as at,m as T,P as nt,U as A,H as t,a1 as q,Q as pe,$ as R,W as ut,N as cl,X as Ie,j as de,R as Ns,T as et,Y as lt,Z as tt}from"./vendor-9417e0b8.js";import{u as Ge,s as Os,c as nl}from"./store-c68bb769.js";import{r as Ts}from"./preview.svelte_svelte_type_style_lang-df4526fd.js";import{S as Ss,c as We,t as st,a as Cs}from"./tooltip-d1460923.js";function Ds(e){let l,s;const o=e[7].default,h=Es(o,e,e[6],null),i=h||Vs();return{c(){l=_("div"),i&&i.c(),this.h()},l(a){l=p(a,"DIV",{class:!0});var f=m(l);i&&i.l(f),f.forEach(r),this.h()},h(){n(l,"class","mx-auto")},m(a,f){L(a,l,f),i&&i.m(l,null),s=!0},p(a,f){h&&h.p&&(!s||f&64)&&zs(h,o,a,a[6],s?ws(o,a[6],f,null):Is(a[6]),null)},i(a){s||(se(i,a),s=!0)},o(a){ie(i,a),s=!1},d(a){a&&r(l),i&&i.d(a)}}}function As(e){let l,s,o;return s=new Ss({props:{color:"black"}}),{c(){l=_("div"),Oe(s.$$.fragment),this.h()},l(h){l=p(h,"DIV",{class:!0});var i=m(l);Te(s.$$.fragment,i),i.forEach(r),this.h()},h(){n(l,"class","mx-auto opacity-40")},m(h,i){L(h,l,i),Se(s,l,null),o=!0},p:Ps,i(h){o||(se(s.$$.fragment,h),o=!0)},o(h){ie(s.$$.fragment,h),o=!1},d(h){h&&r(l),Ce(s)}}}function Vs(e){let l;return{c(){l=k("Go")},l(s){l=y(s,"Go")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Ms(e){let l,s,o,h,i,a,f;const v=[As,Ds],g=[];function V(c,b){return c[1]?0:1}return s=V(e),o=g[s]=v[s](e),{c(){l=_("button"),o.c(),this.h()},l(c){l=p(c,"BUTTON",{type:!0,class:!0,tabindex:!0});var b=m(l);o.l(b),b.forEach(r),this.h()},h(){n(l,"type","button"),n(l,"class",h=al(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${e[5][e[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${e[3]}`)+" svelte-1rnzpdo"),n(l,"tabindex","0"),l.disabled=e[0]},m(c,b){L(c,l,b),g[s].m(l,null),i=!0,a||(f=G(l,"click",e[8]),a=!0)},p(c,[b]){let I=s;s=V(c),s===I?g[s].p(c,b):(ms(),ie(g[I],1,1,()=>{g[I]=null}),hs(),o=g[s],o?o.p(c,b):(o=g[s]=v[s](c),o.c()),se(o,1),o.m(l,null)),(!i||b&12&&h!==(h=al(`px-4 py-1 text-sm font-semibold rounded-lg white-button ${c[5][c[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500 ${c[3]}`)+" svelte-1rnzpdo"))&&n(l,"class",h),(!i||b&1)&&(l.disabled=c[0])},i(c){i||(se(o),i=!0)},o(c){ie(o),i=!1},d(c){c&&r(l),g[s].d(),a=!1,f()}}}function Us(e,l,s){let{$$slots:o={},$$scope:h}=l,{disabled:i=!1}=l,{spin:a=!1}=l,{color:f="indigo"}=l,{cl:v=""}=l;const g=vs(),V={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50",green:"text-green-800 border-green-300 hover:bg-green-100 active:bg-green-200 bg-green-50",sky:"text-sky-800 border-sky-300 hover:bg-sky-100 active:bg-sky-200 bg-sky-50"},c=()=>g("click");return e.$$set=b=>{"disabled"in b&&s(0,i=b.disabled),"spin"in b&&s(1,a=b.spin),"color"in b&&s(2,f=b.color),"cl"in b&&s(3,v=b.cl),"$$scope"in b&&s(6,h=b.$$scope)},[i,a,f,v,g,V,h,o,c]}class Cl extends ot{constructor(l){super();rt(this,l,Us,Ms,it,{disabled:0,spin:1,color:2,cl:3})}}function js(e){let l,s,o,h,i,a,f,v,g,V,c,b,I,j,w,P,u,E,N,F,H;return I=new Cl({props:{disabled:e[3]}}),I.$on("click",e[11]),{c(){l=_("div"),s=_("div"),o=_("span"),h=k("X"),i=O(),a=_("input"),f=O(),v=_("span"),g=k("Y"),V=O(),c=_("input"),b=O(),Oe(I.$$.fragment),j=O(),w=_("button"),P=at("svg"),u=at("path"),E=k(`
    Current`),this.h()},l(C){l=p(C,"DIV",{class:!0});var M=m(l);s=p(M,"DIV",{class:!0});var B=m(s);o=p(B,"SPAN",{class:!0});var Z=m(o);h=y(Z,"X"),Z.forEach(r),i=T(B),a=p(B,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f=T(B),v=p(B,"SPAN",{class:!0});var X=m(v);g=y(X,"Y"),X.forEach(r),V=T(B),c=p(B,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),B.forEach(r),b=T(M),Te(I.$$.fragment,M),j=T(M),w=p(M,"BUTTON",{type:!0,class:!0});var J=m(w);P=nt(J,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var S=m(P);u=nt(S,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(u).forEach(r),S.forEach(r),E=y(J,`
    Current`),J.forEach(r),M.forEach(r),this.h()},h(){n(o,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),A(o,"span-disabled",e[2].block),n(a,"type","number"),n(a,"min","-5"),n(a,"max","30"),n(a,"step","0.01"),n(a,"class","z-10 h-10 text-center rounded-none pretty w-28"),a.disabled=e[3],n(v,"class","flex items-center color-group svelte-awp8a4"),A(v,"span-disabled",e[2].block),n(c,"type","number"),n(c,"min","-5"),n(c,"max","80"),n(c,"step","0.01"),n(c,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),c.disabled=e[3],n(s,"class","flex font-medium"),n(u,"stroke-linecap","round"),n(u,"stroke-linejoin","round"),n(u,"stroke-width","2"),n(u,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),n(P,"xmlns","http://www.w3.org/2000/svg"),n(P,"class","w-5 h-5 mr-1"),n(P,"fill","none"),n(P,"viewBox","0 0 24 24"),n(P,"stroke","currentColor"),n(w,"type","button"),n(w,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),w.disabled=e[3],n(l,"class","flex gap-x-2")},m(C,M){L(C,l,M),t(l,s),t(s,o),t(o,h),t(s,i),t(s,a),q(a,e[0][0]),t(s,f),t(s,v),t(v,g),t(s,V),t(s,c),q(c,e[0][1]),t(l,b),Se(I,l,null),t(l,j),t(l,w),t(w,P),t(P,u),t(w,E),N=!0,F||(H=[G(a,"input",e[7]),G(a,"change",e[8]),pe(We.call(null,a,[-5,30])),G(c,"input",e[9]),G(c,"change",e[10]),pe(We.call(null,c,[-5,80])),G(w,"click",e[6])],F=!0)},p(C,[M]){M&4&&A(o,"span-disabled",C[2].block),(!N||M&8)&&(a.disabled=C[3]),M&1&&R(a.value)!==C[0][0]&&q(a,C[0][0]),M&4&&A(v,"span-disabled",C[2].block),(!N||M&8)&&(c.disabled=C[3]),M&1&&R(c.value)!==C[0][1]&&q(c,C[0][1]);const B={};M&8&&(B.disabled=C[3]),I.$set(B),(!N||M&8)&&(w.disabled=C[3])},i(C){N||(se(I.$$.fragment,C),N=!0)},o(C){ie(I.$$.fragment,C),N=!1},d(C){C&&r(l),Ce(I),F=!1,ut(H)}}}function Bs(e,l,s){let o,h,i;cl(e,Ge,P=>s(2,o=P)),cl(e,Os,P=>s(12,h=P)),cl(e,nl,P=>s(4,i=P));const a=vs();let{i:f}=l,{xy:v=[-1,-1]}=l;function g(){const{x:P,y:u}=Ts(o.image_params.fc,h.x,h.y);s(0,v[0]=Math.round((P+Number.EPSILON)*100)/100,v),s(0,v[1]=Math.round((u+Number.EPSILON)*100)/100,v)}let V=!1;function c(){v[0]=R(this.value),s(0,v)}const b=()=>a("change");function I(){v[1]=R(this.value),s(0,v)}const j=()=>a("change"),w=()=>{Ie(Ge,o.block="moving",o),Ie(nl,i={move:f===0?{xy0:v}:{xy1:v}},i)};return e.$$set=P=>{"i"in P&&s(1,f=P.i),"xy"in P&&s(0,v=P.xy)},e.$$.update=()=>{e.$$.dirty&4&&s(3,V=Boolean(o.block))},[v,f,o,V,i,a,g,c,b,I,j,w]}class is extends ot{constructor(l){super();rt(this,l,Bs,js,it,{i:1,xy:0})}}function Ls(e){let l;return{c(){l=k("Set")},l(s){l=y(s,"Set")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Fs(e){let l,s,o,h,i,a,f,v,g,V,c,b,I,j,w,P;return{c(){l=_("option"),s=k("Open"),o=_("option"),h=k("0.2"),i=_("option"),a=k("0.5"),f=_("option"),v=k("0.6"),g=_("option"),V=k("1.0"),c=_("option"),b=k("2.4"),I=_("option"),j=k("4.0"),w=_("option"),P=k("Closed"),this.h()},l(u){l=p(u,"OPTION",{});var E=m(l);s=y(E,"Open"),E.forEach(r),o=p(u,"OPTION",{});var N=m(o);h=y(N,"0.2"),N.forEach(r),i=p(u,"OPTION",{});var F=m(i);a=y(F,"0.5"),F.forEach(r),f=p(u,"OPTION",{});var H=m(f);v=y(H,"0.6"),H.forEach(r),g=p(u,"OPTION",{});var C=m(g);V=y(C,"1.0"),C.forEach(r),c=p(u,"OPTION",{});var M=m(c);b=y(M,"2.4"),M.forEach(r),I=p(u,"OPTION",{});var B=m(I);j=y(B,"4.0"),B.forEach(r),w=p(u,"OPTION",{});var Z=m(w);P=y(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="0.2",o.value=o.__value,i.__value="0.5",i.value=i.__value,f.__value="0.6",f.value=f.__value,g.__value="1.0",g.value=g.__value,c.__value="2.4",c.value=c.__value,I.__value="4.0",I.value=I.__value,w.__value="Closed",w.value=w.__value},m(u,E){L(u,l,E),t(l,s),L(u,o,E),t(o,h),L(u,i,E),t(i,a),L(u,f,E),t(f,v),L(u,g,E),t(g,V),L(u,c,E),t(c,b),L(u,I,E),t(I,j),L(u,w,E),t(w,P)},d(u){u&&r(l),u&&r(o),u&&r(i),u&&r(f),u&&r(g),u&&r(c),u&&r(I),u&&r(w)}}}function Zs(e){let l,s,o,h,i,a,f,v,g,V,c,b,I,j,w,P;return{c(){l=_("option"),s=k("Open"),o=_("option"),h=k("1.0"),i=_("option"),a=k("2.0"),f=_("option"),v=k("3.5"),g=_("option"),V=k("3.8"),c=_("option"),b=k("4.0"),I=_("option"),j=k("4.5"),w=_("option"),P=k("Closed"),this.h()},l(u){l=p(u,"OPTION",{});var E=m(l);s=y(E,"Open"),E.forEach(r),o=p(u,"OPTION",{});var N=m(o);h=y(N,"1.0"),N.forEach(r),i=p(u,"OPTION",{});var F=m(i);a=y(F,"2.0"),F.forEach(r),f=p(u,"OPTION",{});var H=m(f);v=y(H,"3.5"),H.forEach(r),g=p(u,"OPTION",{});var C=m(g);V=y(C,"3.8"),C.forEach(r),c=p(u,"OPTION",{});var M=m(c);b=y(M,"4.0"),M.forEach(r),I=p(u,"OPTION",{});var B=m(I);j=y(B,"4.5"),B.forEach(r),w=p(u,"OPTION",{});var Z=m(w);P=y(Z,"Closed"),Z.forEach(r),this.h()},h(){l.__value="Open",l.value=l.__value,o.__value="1.0",o.value=o.__value,i.__value="2.0",i.value=i.__value,f.__value="3.5",f.value=f.__value,g.__value="3.8",g.value=g.__value,c.__value="4.0",c.value=c.__value,I.__value="4.5",I.value=I.__value,w.__value="Closed",w.value=w.__value},m(u,E){L(u,l,E),t(l,s),L(u,o,E),t(o,h),L(u,i,E),t(i,a),L(u,f,E),t(f,v),L(u,g,E),t(g,V),L(u,c,E),t(c,b),L(u,I,E),t(I,j),L(u,w,E),t(w,P)},d(u){u&&r(l),u&&r(o),u&&r(i),u&&r(f),u&&r(g),u&&r(c),u&&r(I),u&&r(w)}}}function qs(e){let l,s,o,h,i,a,f,v=(Boolean(e[1])?660:532)+"",g,V,c,b,I,j,w,P,u,E,N,F,H=2*e[1]+"",C,M,B,Z,X,J,S=2*e[1]+1+"",we,ke,W,ol,ce,ye,ae,rl,De=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",ne,il,ee,me,Ee;w=new Cl({props:{$$slots:{default:[Ls]},$$scope:{ctx:e}}}),w.$on("click",e[7]);function Ae(z,U){return z[1]==0?Zs:Fs}let Ye=Ae(e),ue=Ye(e);return{c(){l=_("p"),s=_("span"),o=_("label"),h=_("input"),a=O(),f=_("div"),g=k(v),V=k(" nm"),c=O(),b=_("input"),j=k(`
    mW
    `),Oe(w.$$.fragment),P=O(),u=_("label"),E=_("input"),F=k(`
    Channel `),C=k(H),M=O(),B=_("label"),Z=_("input"),J=k(`
    Channel `),we=k(S),ke=O(),W=_("span"),ol=k(`Filter OD
    `),ce=_("select"),ue.c(),ye=O(),ae=_("p"),rl=k("Effective: "),ne=k(De),il=k(" mW"),this.h()},l(z){l=p(z,"P",{class:!0});var U=m(l);s=p(U,"SPAN",{class:!0});var fe=m(s);o=p(fe,"LABEL",{});var oe=m(o);h=p(oe,"INPUT",{type:!0,class:!0}),a=T(oe),f=p(oe,"DIV",{class:!0});var _e=m(f);g=y(_e,v),V=y(_e," nm"),_e.forEach(r),oe.forEach(r),c=T(fe),b=p(fe,"INPUT",{type:!0,class:!0,min:!0,max:!0}),j=y(fe,`
    mW
    `),Te(w.$$.fragment,fe),fe.forEach(r),P=T(U),u=p(U,"LABEL",{class:!0});var Pe=m(u);E=p(Pe,"INPUT",{type:!0,class:!0}),F=y(Pe,`
    Channel `),C=y(Pe,H),Pe.forEach(r),M=T(U),B=p(U,"LABEL",{class:!0});var Ve=m(B);Z=p(Ve,"INPUT",{type:!0,class:!0}),J=y(Ve,`
    Channel `),we=y(Ve,S),Ve.forEach(r),ke=T(U),W=p(U,"SPAN",{class:!0});var Me=m(W);ol=y(Me,`Filter OD
    `),ce=p(Me,"SELECT",{class:!0});var Re=m(ce);ue.l(Re),Re.forEach(r),ye=T(Me),ae=p(Me,"P",{class:!0});var Ue=m(ae);rl=y(Ue,"Effective: "),ne=y(Ue,De),il=y(Ue," mW"),Ue.forEach(r),Me.forEach(r),U.forEach(r),this.h()},h(){n(h,"type","checkbox"),n(h,"class",i=al(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),n(f,"class","inline font-semibold"),A(f,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),A(f,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),n(b,"type","number"),n(b,"class","w-20 h-8 pretty"),n(b,"min","0"),n(b,"max","500"),b.disabled=I=!e[0].laser_onoff[e[1]],A(b,"pretty-disabled",!e[0].laser_onoff[0]),n(s,"class","flex items-center gap-x-2"),A(s,"text-gray-400",!e[0].laser_onoff[e[1]]),n(E,"type","checkbox"),n(E,"class",N=al(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),n(u,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),A(u,"text-gray-400",!e[0].channels[2*e[1]]),n(Z,"type","checkbox"),n(Z,"class",X=al(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),n(B,"class","channel svelte-6ipz4o"),A(B,"text-gray-400",!e[0].channels[2*e[1]+1]),n(ce,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300"),n(ae,"class","ml-3 text-sm font-medium"),n(W,"class","ml-8 font-normal opacity-85"),n(l,"class","flex flex-col")},m(z,U){L(z,l,U),t(l,s),t(s,o),t(o,h),h.checked=e[0].laser_onoff[e[1]],t(o,a),t(o,f),t(f,g),t(f,V),t(s,c),t(s,b),q(b,e[0].lasers[e[1]]),t(s,j),Se(w,s,null),t(l,P),t(l,u),t(u,E),E.checked=e[0].channels[2*e[1]],t(u,F),t(u,C),t(l,M),t(l,B),t(B,Z),Z.checked=e[0].channels[2*e[1]+1],t(B,J),t(B,we),t(l,ke),t(l,W),t(W,ol),t(W,ce),ue.m(ce,null),t(W,ye),t(W,ae),t(ae,rl),t(ae,ne),t(ae,il),ee=!0,me||(Ee=[G(h,"change",e[5]),G(b,"input",e[6]),pe(We.call(null,b,[0,500])),G(E,"change",e[8]),G(Z,"change",e[9]),G(ce,"change",e[4])],me=!0)},p(z,[U]){(!ee||U&2&&i!==(i=al(`rounded mr-1 ${z[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&n(h,"class",i),U&3&&(h.checked=z[0].laser_onoff[z[1]]),(!ee||U&2)&&v!==(v=(Boolean(z[1])?660:532)+"")&&de(g,v),U&3&&A(f,"text-green-800",z[0].laser_onoff[z[1]]&&!z[1]),U&3&&A(f,"text-red-800",z[0].laser_onoff[z[1]]&&z[1]),(!ee||U&3&&I!==(I=!z[0].laser_onoff[z[1]]))&&(b.disabled=I),U&3&&R(b.value)!==z[0].lasers[z[1]]&&q(b,z[0].lasers[z[1]]),U&1&&A(b,"pretty-disabled",!z[0].laser_onoff[0]);const fe={};U&1024&&(fe.$$scope={dirty:U,ctx:z}),w.$set(fe),U&3&&A(s,"text-gray-400",!z[0].laser_onoff[z[1]]),(!ee||U&2&&N!==(N=al(`mr-1 rounded ${z[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&n(E,"class",N),U&3&&(E.checked=z[0].channels[2*z[1]]),(!ee||U&2)&&H!==(H=2*z[1]+"")&&de(C,H),U&3&&A(u,"text-gray-400",!z[0].channels[2*z[1]]),(!ee||U&2&&X!==(X=al(`mr-1 rounded ${z[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&n(Z,"class",X),U&3&&(Z.checked=z[0].channels[2*z[1]+1]),(!ee||U&2)&&S!==(S=2*z[1]+1+"")&&de(we,S),U&3&&A(B,"text-gray-400",!z[0].channels[2*z[1]+1]),Ye!==(Ye=Ae(z))&&(ue.d(1),ue=Ye(z),ue&&(ue.c(),ue.m(ce,null))),(!ee||U&3)&&De!==(De=(Number(z[0].od[z[1]]!=-1)*z[0].lasers[z[1]]*Math.pow(10,-z[0].od[z[1]])).toFixed(4)+"")&&de(ne,De)},i(z){ee||(se(w.$$.fragment,z),ee=!0)},o(z){ie(w.$$.fragment,z),ee=!1},d(z){z&&r(l),Ce(w),ue.d(),me=!1,ut(Ee)}}}function Hs(e,l,s){let o,h;cl(e,nl,I=>s(2,o=I)),cl(e,Ge,I=>s(3,h=I));let{params:i}=l,{i:a}=l;function f(I){let j;switch(I.currentTarget.value){case"Open":j=0;break;case"Closed":j=-1;break;default:j=Number(I.currentTarget.value)}s(0,i.od[a]=j,i),Ie(Ge,h.image_params.od[a]=i.od[a],h),Ie(nl,o={move:{od:a===0?[i.od[a],void 0]:[void 0,i.od[a]]}},o)}function v(){i.laser_onoff[a]=this.checked,s(0,i)}function g(){i.lasers[a]=R(this.value),s(0,i)}const V=()=>{Ie(Ge,h.image_params.laser_onoff[a]=i.laser_onoff[a],h),Ie(Ge,h.image_params.lasers[a]=i.lasers[a],h),Ie(nl,o={move:{lasers:a===0?[i.lasers[a],void 0]:[void 0,i.lasers[a]],laser_onoff:a===0?[i.laser_onoff[a],void 0]:[void 0,i.laser_onoff[a]]}},o)};function c(){i.channels[2*a]=this.checked,s(0,i)}function b(){i.channels[2*a+1]=this.checked,s(0,i)}return e.$$set=I=>{"params"in I&&s(0,i=I.params),"i"in I&&s(1,a=I.i)},[i,a,o,h,f,v,g,V,c,b]}class us extends ot{constructor(l){super();rt(this,l,Hs,qs,it,{params:0,i:1})}}function fs(e){let l,s;return l=new Cl({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[Xs]},$$scope:{ctx:e}}}),{c(){Oe(l.$$.fragment)},l(o){Te(l.$$.fragment,o)},m(o,h){Se(l,o,h),s=!0},i(o){s||(se(l.$$.fragment,o),s=!0)},o(o){ie(l.$$.fragment,o),s=!1},d(o){Ce(l,o)}}}function Xs(e){let l;return{c(){l=k("Preview")},l(s){l=y(s,"Preview")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function _s(e){let l,s,o,h,i,a,f;return{c(){l=_("p"),s=k("Image Path"),h=O(),i=_("input"),this.h()},l(v){l=p(v,"P",{class:!0});var g=m(l);s=y(g,"Image Path"),g.forEach(r),h=T(v),i=p(v,"INPUT",{type:!0,class:!0}),this.h()},h(){n(l,"class","text-lg svelte-1m4l8fo"),n(i,"type","text"),n(i,"class","max-w-md mb-4 pretty"),A(i,"invalid",!e[0].path)},m(v,g){L(v,l,g),t(l,s),L(v,h,g),L(v,i,g),q(i,e[0].path),a||(f=[pe(o=st.call(null,l,e[5])),G(i,"input",e[11])],a=!0)},p(v,g){o&&Ns(o.update)&&g&32&&o.update.call(null,v[5]),g&1&&i.value!==v[0].path&&q(i,v[0].path),g&1&&A(i,"invalid",!v[0].path)},d(v){v&&r(l),v&&r(h),v&&r(i),a=!1,ut(f)}}}function ps(e){let l;return{c(){l=k("per z-stack.")},l(s){l=y(s,"per z-stack.")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function ds(e){let l,s=e[1].n_z+"",o,h,i,a=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",f,v,g=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",V,c,b,I,j=(e[1].n_z?El(e[1].n_z*e[1].time):El(e[1].time))+"",w,P,u=e[1].n_z>1&&cs();return{c(){l=_("div"),o=k(s),h=k(" Z step"),u&&u.c(),i=k(" from "),f=k(a),v=k(" to "),V=k(g),c=O(),b=_("div"),I=k("Total time: "),w=k(j),P=k("."),this.h()},l(E){l=p(E,"DIV",{class:!0});var N=m(l);o=y(N,s),h=y(N," Z step"),u&&u.l(N),i=y(N," from "),f=y(N,a),v=y(N," to "),V=y(N,g),N.forEach(r),c=T(E),b=p(E,"DIV",{class:!0});var F=m(b);I=y(F,"Total time: "),w=y(F,j),P=y(F,"."),F.forEach(r),this.h()},h(){n(l,"class","px-2 font-base"),n(b,"class","px-2 font-semibold")},m(E,N){L(E,l,N),t(l,o),t(l,h),u&&u.m(l,null),t(l,i),t(l,f),t(l,v),t(l,V),L(E,c,N),L(E,b,N),t(b,I),t(b,w),t(b,P)},p(E,N){N&2&&s!==(s=E[1].n_z+"")&&de(o,s),E[1].n_z>1?u||(u=cs(),u.c(),u.m(l,i)):u&&(u.d(1),u=null),N&1&&a!==(a=E[0].z_obj+E[0].z_from*E[0].z_spacing+"")&&de(f,a),N&1&&g!==(g=E[0].z_obj+E[0].z_to*E[0].z_spacing+"")&&de(V,g),N&2&&j!==(j=(E[1].n_z?El(E[1].n_z*E[1].time):El(E[1].time))+"")&&de(w,j)},d(E){E&&r(l),u&&u.d(),E&&r(c),E&&r(b)}}}function cs(e){let l;return{c(){l=k("s")},l(s){l=y(s,"s")},m(s,o){L(s,l,o)},d(s){s&&r(l)}}}function Ws(e){let l,s,o,h,i,a,f,v,g,V,c,b,I,j,w,P,u,E,N,F,H,C,M,B,Z,X,J,S,we,ke,W,ol,ce,ye,ae,rl,De,ne,il,ee,me,Ee,Ae,Ye,ue,z,U,fe,oe,_e,Pe=e[1].width.toFixed(2)+"",Ve,Me,Re=e[1].height.toFixed(2)+"",Ue,ft,_t,je,zl=e[1].n_cols+"",Dl,pt,Il=e[1].n_bundles+"",Al,dt,ct,ze,wl=El(e[1].time)+"",Vl,mt,ht,Je,ml,vt,bt,Ke,Qe,ul,hl,gt,kt,$e,he,yt,xe,Et,fl,vl,zt,It,Ne,ve,wt,el,Pt,Be,Le,_l,Nt,Pl,Ot,Tt,ll,tl,sl,St,Fe,bl,Ct,Dt,At,K,Ze,Vt,Mt,Q,Ml,Ut,qe,jt,Bt,$,Ul,Lt,He,Ft,Zt,x,jl,be,qt,Ht,Y=e[3]&&fs(e),le=!e[3]&&_s(e);function bs(d){e[12](d)}let Xt={i:0};e[0]!==void 0&&(Xt.params=e[0]),P=new us({props:Xt}),et.push(()=>lt(P,"params",bs));function gs(d){e[13](d)}let Wt={i:1};e[0]!==void 0&&(Wt.params=e[0]),N=new us({props:Wt}),et.push(()=>lt(N,"params",gs));function ks(d){e[14](d)}let Gt={i:0};e[0].xy0!==void 0&&(Gt.xy=e[0].xy0),W=new is({props:Gt}),et.push(()=>lt(W,"xy",ks)),W.$on("change",e[7]);function ys(d){e[15](d)}let Yt={i:1};e[0].xy1!==void 0&&(Yt.xy=e[0].xy1),ne=new is({props:Yt}),et.push(()=>lt(ne,"xy",ys)),ne.$on("change",e[7]);let re=e[2]&&ps();xe=new Cl({}),xe.$on("click",e[18]),el=new Cl({}),el.$on("click",e[20]);let te=e[2]&&ds(e);return{c(){l=_("div"),s=_("section"),o=_("p"),h=k("Name"),i=O(),a=_("div"),f=_("input"),v=O(),Y&&Y.c(),g=O(),le&&le.c(),V=O(),c=_("section"),b=_("h2"),I=k("Laser and Channels"),j=O(),w=_("div"),Oe(P.$$.fragment),E=O(),Oe(N.$$.fragment),H=O(),C=_("section"),M=_("h2"),B=k("Positions"),Z=O(),X=_("div"),J=_("div"),S=_("p"),we=k("\u{1F4CC} Corner 1"),ke=O(),Oe(W.$$.fragment),ce=O(),ye=_("div"),ae=_("p"),rl=k("\u{1F4CD} Corner 2"),De=O(),Oe(ne.$$.fragment),ee=O(),me=_("div"),Ee=_("div"),Ae=_("p"),Ye=k("X-Overlap"),ue=O(),z=_("input"),U=k(`
          (0-1)`),fe=O(),oe=_("div"),_e=_("span"),Ve=k(Pe),Me=k(" \xD7 "),Ue=k(Re),ft=k(" mm."),_t=O(),je=_("span"),Dl=k(zl),pt=k(" columns of "),Al=k(Il),dt=k(" bundles."),ct=O(),ze=_("span"),Vl=k(wl),mt=O(),re&&re.c(),ht=O(),Je=_("section"),ml=_("h2"),vt=k("Focus"),bt=O(),Ke=_("div"),Qe=_("div"),ul=_("div"),hl=_("p"),gt=k("Z Tilt"),kt=O(),$e=_("div"),he=_("input"),yt=O(),Oe(xe.$$.fragment),Et=O(),fl=_("div"),vl=_("p"),zt=k("Z Objective"),It=O(),Ne=_("span"),ve=_("input"),wt=O(),Oe(el.$$.fragment),Pt=O(),Be=_("button"),Le=at("svg"),_l=at("path"),Nt=O(),Pl=_("span"),Ot=k("Autofocus"),Tt=O(),ll=_("div"),tl=_("label"),sl=_("input"),St=O(),Fe=_("div"),bl=_("div"),Ct=k("Z-Stack"),Dt=O(),te&&te.c(),At=O(),K=_("div"),Ze=_("span"),Vt=k("Spacing"),Mt=O(),Q=_("input"),Ut=O(),qe=_("span"),jt=k("From"),Bt=O(),$=_("input"),Lt=O(),He=_("span"),Ft=k("To"),Zt=O(),x=_("input"),this.h()},l(d){l=p(d,"DIV",{id:!0,class:!0});var D=m(l);s=p(D,"SECTION",{class:!0});var Xe=m(s);o=p(Xe,"P",{class:!0});var Nl=m(o);h=y(Nl,"Name"),Nl.forEach(r),i=T(Xe),a=p(Xe,"DIV",{class:!0});var pl=m(a);f=p(pl,"INPUT",{type:!0,class:!0}),v=T(pl),Y&&Y.l(pl),pl.forEach(r),g=T(Xe),le&&le.l(Xe),Xe.forEach(r),V=T(D),c=p(D,"SECTION",{class:!0});var dl=m(c);b=p(dl,"H2",{class:!0});var Rt=m(b);I=y(Rt,"Laser and Channels"),Rt.forEach(r),j=T(dl),w=p(dl,"DIV",{class:!0});var Bl=m(w);Te(P.$$.fragment,Bl),E=T(Bl),Te(N.$$.fragment,Bl),Bl.forEach(r),dl.forEach(r),H=T(D),C=p(D,"SECTION",{class:!0});var Ll=m(C);M=p(Ll,"H2",{class:!0});var Jt=m(M);B=y(Jt,"Positions"),Jt.forEach(r),Z=T(Ll),X=p(Ll,"DIV",{class:!0});var gl=m(X);J=p(gl,"DIV",{});var Fl=m(J);S=p(Fl,"P",{class:!0});var Kt=m(S);we=y(Kt,"\u{1F4CC} Corner 1"),Kt.forEach(r),ke=T(Fl),Te(W.$$.fragment,Fl),Fl.forEach(r),ce=T(gl),ye=p(gl,"DIV",{});var Zl=m(ye);ae=p(Zl,"P",{class:!0});var Qt=m(ae);rl=y(Qt,"\u{1F4CD} Corner 2"),Qt.forEach(r),De=T(Zl),Te(ne.$$.fragment,Zl),Zl.forEach(r),ee=T(gl),me=p(gl,"DIV",{class:!0});var ql=m(me);Ee=p(ql,"DIV",{});var Ol=m(Ee);Ae=p(Ol,"P",{class:!0});var $t=m(Ae);Ye=y($t,"X-Overlap"),$t.forEach(r),ue=T(Ol),z=p(Ol,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),U=y(Ol,`
          (0-1)`),Ol.forEach(r),fe=T(ql),oe=p(ql,"DIV",{class:!0});var kl=m(oe);_e=p(kl,"SPAN",{class:!0});var Tl=m(_e);Ve=y(Tl,Pe),Me=y(Tl," \xD7 "),Ue=y(Tl,Re),ft=y(Tl," mm."),Tl.forEach(r),_t=T(kl),je=p(kl,"SPAN",{class:!0});var Sl=m(je);Dl=y(Sl,zl),pt=y(Sl," columns of "),Al=y(Sl,Il),dt=y(Sl," bundles."),Sl.forEach(r),ct=T(kl),ze=p(kl,"SPAN",{class:!0});var Hl=m(ze);Vl=y(Hl,wl),mt=T(Hl),re&&re.l(Hl),Hl.forEach(r),kl.forEach(r),ql.forEach(r),gl.forEach(r),Ll.forEach(r),ht=T(D),Je=p(D,"SECTION",{class:!0});var Xl=m(Je);ml=p(Xl,"H2",{class:!0});var xt=m(ml);vt=y(xt,"Focus"),xt.forEach(r),bt=T(Xl),Ke=p(Xl,"DIV",{class:!0});var Wl=m(Ke);Qe=p(Wl,"DIV",{class:!0});var Gl=m(Qe);ul=p(Gl,"DIV",{});var Yl=m(ul);hl=p(Yl,"P",{class:!0});var es=m(hl);gt=y(es,"Z Tilt"),es.forEach(r),kt=T(Yl),$e=p(Yl,"DIV",{class:!0});var Rl=m($e);he=p(Rl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),yt=T(Rl),Te(xe.$$.fragment,Rl),Rl.forEach(r),Yl.forEach(r),Et=T(Gl),fl=p(Gl,"DIV",{});var Jl=m(fl);vl=p(Jl,"P",{class:!0});var ls=m(vl);zt=y(ls,"Z Objective"),ls.forEach(r),It=T(Jl),Ne=p(Jl,"SPAN",{class:!0});var yl=m(Ne);ve=p(yl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),wt=T(yl),Te(el.$$.fragment,yl),Pt=T(yl),Be=p(yl,"BUTTON",{type:!0,class:!0});var Kl=m(Be);Le=nt(Kl,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var ts=m(Le);_l=nt(ts,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(_l).forEach(r),ts.forEach(r),Nt=T(Kl),Pl=p(Kl,"SPAN",{});var ss=m(Pl);Ot=y(ss,"Autofocus"),ss.forEach(r),Kl.forEach(r),yl.forEach(r),Jl.forEach(r),Gl.forEach(r),Tt=T(Wl),ll=p(Wl,"DIV",{class:!0});var Ql=m(ll);tl=p(Ql,"LABEL",{class:!0});var $l=m(tl);sl=p($l,"INPUT",{type:!0,class:!0}),St=T($l),Fe=p($l,"DIV",{class:!0});var xl=m(Fe);bl=p(xl,"DIV",{class:!0});var as=m(bl);Ct=y(as,"Z-Stack"),as.forEach(r),Dt=T(xl),te&&te.l(xl),xl.forEach(r),$l.forEach(r),At=T(Ql),K=p(Ql,"DIV",{class:!0,id:!0});var ge=m(K);Ze=p(ge,"SPAN",{class:!0});var ns=m(Ze);Vt=y(ns,"Spacing"),ns.forEach(r),Mt=T(ge),Q=p(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ut=T(ge),qe=p(ge,"SPAN",{class:!0});var os=m(qe);jt=y(os,"From"),os.forEach(r),Bt=T(ge),$=p(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Lt=T(ge),He=p(ge,"SPAN",{class:!0});var rs=m(He);Ft=y(rs,"To"),rs.forEach(r),Zt=T(ge),x=p(ge,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ge.forEach(r),Ql.forEach(r),Wl.forEach(r),Xl.forEach(r),D.forEach(r),this.h()},h(){n(o,"class","mt-1 text-lg svelte-1m4l8fo"),n(f,"type","text"),n(f,"class","flex-grow mb-4 pretty text-lg h-12"),A(f,"invalid",e[8](e[0].name)),n(a,"class","flex w-full max-w-md gap-x-2"),n(s,"class","flex flex-col text-lg font-medium"),n(b,"class","svelte-1m4l8fo"),n(w,"class","grid grid-cols-2"),A(w,"opacity-70",e[4].block),n(c,"class","font-medium leading-10 "),n(M,"class","svelte-1m4l8fo"),n(S,"class","svelte-1m4l8fo"),n(ae,"class","svelte-1m4l8fo"),n(Ae,"class","svelte-1m4l8fo"),n(z,"type","number"),n(z,"class","w-20 pr-2 pretty"),n(z,"step","0.01"),n(z,"min","0"),n(z,"max","0.99"),n(_e,"class","tabular-nums"),n(je,"class","tabular-nums"),n(ze,"class","tabular-nums"),A(ze,"font-semibold",!e[2]),n(oe,"class","flex flex-col justify-center font-normal"),n(me,"class","flex gap-8"),n(X,"class","-mt-1 space-y-4"),n(C,"class","flex flex-col gap-2"),A(C,"-mt-20",e[3]),n(ml,"class","svelte-1m4l8fo"),n(hl,"class","svelte-1m4l8fo"),n(he,"type","number"),n(he,"class","w-28 pretty"),n(he,"min","0"),n(he,"max","25000"),n($e,"class","flex gap-2"),n(vl,"class","svelte-1m4l8fo"),n(ve,"type","number"),n(ve,"class","w-28 pretty"),n(ve,"min","0"),n(ve,"max","60000"),n(_l,"fill-rule","evenodd"),n(_l,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),n(_l,"clip-rule","evenodd"),n(Le,"xmlns","http://www.w3.org/2000/svg"),n(Le,"class","w-5 h-5 mr-1"),n(Le,"viewBox","0 0 20 20"),n(Le,"fill","currentColor"),n(Be,"type","button"),n(Be,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),n(Ne,"class","flex gap-2"),n(Qe,"class","flex space-x-8"),n(sl,"type","checkbox"),n(sl,"class","mr-1 rounded"),n(bl,"class","pr-2"),n(Fe,"class","flex divide-x-2"),n(tl,"class","flex items-center gap-x-1"),n(Ze,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),A(Ze,"span-disabled",e[4].block||!e[2]),n(Q,"type","number"),n(Q,"min","1"),n(Q,"max","60000"),n(Q,"step","1"),n(Q,"class","z-10 h-10 text-center rounded-none pretty w-28"),Q.disabled=Ml=e[4].block||!e[2],A(Q,"disabled",e[4].block||!e[2]),n(qe,"class","flex items-center color-group svelte-1m4l8fo"),A(qe,"span-disabled",e[4].block||!e[2]),n($,"type","number"),n($,"min","-100"),n($,"max","100"),n($,"step","1"),n($,"class","z-10 w-16 h-10 text-center rounded-none pretty"),$.disabled=Ul=e[4].block||!e[2],A($,"disabled",e[4].block||!e[2]),n(He,"class","flex items-center color-group svelte-1m4l8fo"),A(He,"span-disabled",e[4].block||!e[2]),n(x,"type","number"),n(x,"min","-100"),n(x,"max","100"),n(x,"step","1"),n(x,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),x.disabled=jl=e[4].block||!e[2],A(x,"disabled",e[4].block||!e[2]),n(K,"class","flex font-medium"),n(K,"id","zBox"),n(ll,"class","space-y-2"),n(Ke,"class","-mt-1 space-y-4"),n(Je,"class","flex flex-col gap-2"),n(l,"id","control"),n(l,"class","grid grid-cols-2 gap-y-6 gap-x-4")},m(d,D){L(d,l,D),t(l,s),t(s,o),t(o,h),t(s,i),t(s,a),t(a,f),q(f,e[0].name),t(a,v),Y&&Y.m(a,null),t(s,g),le&&le.m(s,null),t(l,V),t(l,c),t(c,b),t(b,I),t(c,j),t(c,w),Se(P,w,null),t(w,E),Se(N,w,null),t(l,H),t(l,C),t(C,M),t(M,B),t(C,Z),t(C,X),t(X,J),t(J,S),t(S,we),t(J,ke),Se(W,J,null),t(X,ce),t(X,ye),t(ye,ae),t(ae,rl),t(ye,De),Se(ne,ye,null),t(X,ee),t(X,me),t(me,Ee),t(Ee,Ae),t(Ae,Ye),t(Ee,ue),t(Ee,z),q(z,e[0].overlap),t(Ee,U),t(me,fe),t(me,oe),t(oe,_e),t(_e,Ve),t(_e,Me),t(_e,Ue),t(_e,ft),t(oe,_t),t(oe,je),t(je,Dl),t(je,pt),t(je,Al),t(je,dt),t(oe,ct),t(oe,ze),t(ze,Vl),t(ze,mt),re&&re.m(ze,null),t(l,ht),t(l,Je),t(Je,ml),t(ml,vt),t(Je,bt),t(Je,Ke),t(Ke,Qe),t(Qe,ul),t(ul,hl),t(hl,gt),t(ul,kt),t(ul,$e),t($e,he),q(he,e[0].z_tilt),t($e,yt),Se(xe,$e,null),t(Qe,Et),t(Qe,fl),t(fl,vl),t(vl,zt),t(fl,It),t(fl,Ne),t(Ne,ve),q(ve,e[0].z_obj),t(Ne,wt),Se(el,Ne,null),t(Ne,Pt),t(Ne,Be),t(Be,Le),t(Le,_l),t(Be,Nt),t(Be,Pl),t(Pl,Ot),t(Ke,Tt),t(Ke,ll),t(ll,tl),t(tl,sl),sl.checked=e[2],t(tl,St),t(tl,Fe),t(Fe,bl),t(bl,Ct),t(Fe,Dt),te&&te.m(Fe,null),t(ll,At),t(ll,K),t(K,Ze),t(Ze,Vt),t(K,Mt),t(K,Q),q(Q,e[0].z_spacing),t(K,Ut),t(K,qe),t(qe,jt),t(K,Bt),t(K,$),q($,e[0].z_from),t(K,Lt),t(K,He),t(He,Ft),t(K,Zt),t(K,x),q(x,e[0].z_to),be=!0,qt||(Ht=[G(f,"input",e[10]),G(z,"input",e[16]),pe(We.call(null,z,[.01,.99])),G(he,"input",e[17]),pe(We.call(null,he,[0,25e3])),G(ve,"input",e[19]),pe(We.call(null,ve,[0,6e4])),G(sl,"change",e[21]),pe(st.call(null,Ze,"Nyquist is 232.")),G(Q,"input",e[22]),pe(We.call(null,Q,[1,6e4])),pe(st.call(null,qe,"Multiple of Spacing")),G($,"input",e[23]),pe(We.call(null,$,[-100,100])),pe(st.call(null,He,"Multiple of Spacing")),G(x,"input",e[24]),pe(We.call(null,x,[-100,100]))],qt=!0)},p(d,[D]){D&1&&f.value!==d[0].name&&q(f,d[0].name),D&257&&A(f,"invalid",d[8](d[0].name)),d[3]?Y?D&8&&se(Y,1):(Y=fs(d),Y.c(),se(Y,1),Y.m(a,null)):Y&&(ms(),ie(Y,1,1,()=>{Y=null}),hs()),d[3]?le&&(le.d(1),le=null):le?le.p(d,D):(le=_s(d),le.c(),le.m(s,null));const Xe={};!u&&D&1&&(u=!0,Xe.params=d[0],tt(()=>u=!1)),P.$set(Xe);const Nl={};!F&&D&1&&(F=!0,Nl.params=d[0],tt(()=>F=!1)),N.$set(Nl),D&16&&A(w,"opacity-70",d[4].block);const pl={};!ol&&D&1&&(ol=!0,pl.xy=d[0].xy0,tt(()=>ol=!1)),W.$set(pl);const dl={};!il&&D&1&&(il=!0,dl.xy=d[0].xy1,tt(()=>il=!1)),ne.$set(dl),D&1&&R(z.value)!==d[0].overlap&&q(z,d[0].overlap),(!be||D&2)&&Pe!==(Pe=d[1].width.toFixed(2)+"")&&de(Ve,Pe),(!be||D&2)&&Re!==(Re=d[1].height.toFixed(2)+"")&&de(Ue,Re),(!be||D&2)&&zl!==(zl=d[1].n_cols+"")&&de(Dl,zl),(!be||D&2)&&Il!==(Il=d[1].n_bundles+"")&&de(Al,Il),(!be||D&2)&&wl!==(wl=El(d[1].time)+"")&&de(Vl,wl),d[2]?re||(re=ps(),re.c(),re.m(ze,null)):re&&(re.d(1),re=null),D&4&&A(ze,"font-semibold",!d[2]),D&8&&A(C,"-mt-20",d[3]),D&1&&R(he.value)!==d[0].z_tilt&&q(he,d[0].z_tilt),D&1&&R(ve.value)!==d[0].z_obj&&q(ve,d[0].z_obj),D&4&&(sl.checked=d[2]),d[2]?te?te.p(d,D):(te=ds(d),te.c(),te.m(Fe,null)):te&&(te.d(1),te=null),D&20&&A(Ze,"span-disabled",d[4].block||!d[2]),(!be||D&20&&Ml!==(Ml=d[4].block||!d[2]))&&(Q.disabled=Ml),D&1&&R(Q.value)!==d[0].z_spacing&&q(Q,d[0].z_spacing),D&20&&A(Q,"disabled",d[4].block||!d[2]),D&20&&A(qe,"span-disabled",d[4].block||!d[2]),(!be||D&20&&Ul!==(Ul=d[4].block||!d[2]))&&($.disabled=Ul),D&1&&R($.value)!==d[0].z_from&&q($,d[0].z_from),D&20&&A($,"disabled",d[4].block||!d[2]),D&20&&A(He,"span-disabled",d[4].block||!d[2]),(!be||D&20&&jl!==(jl=d[4].block||!d[2]))&&(x.disabled=jl),D&1&&R(x.value)!==d[0].z_to&&q(x,d[0].z_to),D&20&&A(x,"disabled",d[4].block||!d[2])},i(d){be||(se(Y),se(P.$$.fragment,d),se(N.$$.fragment,d),se(W.$$.fragment,d),se(ne.$$.fragment,d),se(xe.$$.fragment,d),se(el.$$.fragment,d),be=!0)},o(d){ie(Y),ie(P.$$.fragment,d),ie(N.$$.fragment,d),ie(W.$$.fragment,d),ie(ne.$$.fragment,d),ie(xe.$$.fragment,d),ie(el.$$.fragment,d),be=!1},d(d){d&&r(l),Y&&Y.d(),le&&le.d(),Ce(P),Ce(N),Ce(W),Ce(ne),re&&re.d(),Ce(xe),Ce(el),te&&te.d(),qt=!1,ut(Ht)}}}function Gs(e,l){e&&(e.querySelectorAll("input").forEach(s=>s.disabled=l),e.querySelectorAll("select").forEach(s=>s.disabled=l),e.querySelectorAll("button").forEach(s=>s.disabled=l))}function El(e){const l=new Date(e*1e3).toISOString();return e>3600?`${l.substring(11,19)} hrs`:`${l.substring(14,19)} mins`}function Ys(e,l,s){let o,h;cl(e,Ge,S=>s(4,o=S)),cl(e,nl,S=>s(6,h=S));let{inAuto:i=!0}=l,{params:a}=l,{stats:f={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=l,{z_stack:v=!1}=l,{fc_:g=0}=l,V="";fetch(`http://${window.location.hostname}:8000/path`).then(S=>S.json()).then(S=>s(5,V=S.path));function c(){Ie(Ge,o.image_params.xy0=a.xy0,o),Ie(Ge,o.image_params.xy1=a.xy1,o)}function b(S){if(!S)return!0;if(!i)return!1;const we=o.exps[g].cmds.filter(ke=>ke.cmd.op==="takeimage").map(ke=>ke.cmd.name);return Cs(we)[S]>1}function I(){a.name=this.value,s(0,a)}function j(){a.path=this.value,s(0,a)}function w(S){a=S,s(0,a)}function P(S){a=S,s(0,a)}function u(S){e.$$.not_equal(a.xy0,S)&&(a.xy0=S,s(0,a))}function E(S){e.$$.not_equal(a.xy1,S)&&(a.xy1=S,s(0,a))}function N(){a.overlap=R(this.value),s(0,a)}function F(){a.z_tilt=R(this.value),s(0,a)}const H=()=>Ie(nl,h={move:{z_tilt:a.z_tilt}},h);function C(){a.z_obj=R(this.value),s(0,a)}const M=()=>Ie(nl,h={move:{z_obj:a.z_obj}},h);function B(){v=this.checked,s(2,v)}function Z(){a.z_spacing=R(this.value),s(0,a)}function X(){a.z_from=R(this.value),s(0,a)}function J(){a.z_to=R(this.value),s(0,a)}return e.$$set=S=>{"inAuto"in S&&s(3,i=S.inAuto),"params"in S&&s(0,a=S.params),"stats"in S&&s(1,f=S.stats),"z_stack"in S&&s(2,v=S.z_stack),"fc_"in S&&s(9,g=S.fc_)},e.$$.update=()=>{e.$$.dirty&16&&Gs(document.getElementById("control"),o.block),e.$$.dirty&1&&s(1,f.height=Math.max(a.xy1[1],a.xy0[1])-Math.min(a.xy1[1],a.xy0[1]),f),e.$$.dirty&1&&s(1,f.width=Math.max(a.xy1[0],a.xy0[0])-Math.min(a.xy1[0],a.xy0[0]),f),e.$$.dirty&3&&s(1,f.n_cols=Math.ceil(f.width/(.768*(1-a.overlap))),f),e.$$.dirty&2&&s(1,f.n_bundles=Math.ceil(f.height/.048),f),e.$$.dirty&2&&s(1,f.time=f.n_bundles*f.n_cols/20,f),e.$$.dirty&1&&s(1,f.n_z=Math.abs(a.z_to-a.z_from)+1,f)},[a,f,v,i,o,V,h,c,b,g,I,j,w,P,u,E,N,F,H,C,M,B,Z,X,J]}class $s extends ot{constructor(l){super();rt(this,l,Ys,Ws,it,{inAuto:3,params:0,stats:1,z_stack:2,fc_:9})}}export{$s as T};
