import{S as It,i as Nt,s as Pt,ac as Ts,e as c,w as J,c as d,a as m,x as K,d as f,b as i,g as B,y as Q,q as H,o as W,B as x,ad as Os,ae as Ss,k as P,m as T,t as E,h as w,H as s,j as he,af as Cs,W as D,X,U as Ds,Y as dl,N as ze,v as Vs,ag as As,ah as Us,V as yt,ai as ul,a6 as me,F as cs,I as ds,J as ms,K as hs,aj as Bs,ak as Ms,M as qs,al as js,P as _l,Q as cl,a3 as G,T as ye,a4 as ee,a7 as Ls,O as Se,Z as fl,f as Fs,n as Hs,p as Zs,_ as pl}from"./vendor-8e1ae6ee.js";import{l as Ws,u as Ke,a as Je,s as Mt,c as rt,b as Xs}from"./utils-ef7584fe.js";import{G as qt,r as Gs}from"./go-33291011.js";import{t as Rl}from"./tooltip-58adbb05.js";function Rs(e){let t;return{c(){t=c("div"),this.h()},l(l){t=d(l,"DIV",{class:!0}),m(t).forEach(f),this.h()},h(){i(t,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(l,a){B(l,t,a)},d(l){l&&f(t)}}}function Ys(e){let t,l=e[3]+"",a;return{c(){t=c("span"),a=E(l),this.h()},l(r){t=d(r,"SPAN",{class:!0});var o=m(t);a=w(o,l),o.forEach(f),this.h()},h(){i(t,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(r,o){B(r,t,o),s(t,a)},p(r,o){o&8&&l!==(l=r[3]+"")&&he(a,l)},d(r){r&&f(t)}}}function Js(e){let t,l,a,r;return t=new Os({props:{data:e[1],width:80,$$slots:{default:[Rs]},$$scope:{ctx:e}}}),a=new Ss({props:{vertical:!0,count:5,$$slots:{default:[Ys,({value:o})=>({3:o}),({value:o})=>o?8:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),l=P(),J(a.$$.fragment)},l(o){K(t.$$.fragment,o),l=T(o),K(a.$$.fragment,o)},m(o,p){Q(t,o,p),B(o,l,p),Q(a,o,p),r=!0},p(o,p){const n={};p&2&&(n.data=o[1]),p&16&&(n.$$scope={dirty:p,ctx:o}),t.$set(n);const g={};p&24&&(g.$$scope={dirty:p,ctx:o}),a.$set(g)},i(o){r||(H(t.$$.fragment,o),H(a.$$.fragment,o),r=!0)},o(o){W(t.$$.fragment,o),W(a.$$.fragment,o),r=!1},d(o){x(t,o),o&&f(l),x(a,o)}}}function Ks(e){let t,l,a;return l=new Ts({props:{x1:-10,x2:4096+10,y1:0,y2:e[0],$$slots:{default:[Js]},$$scope:{ctx:e}}}),{c(){t=c("div"),J(l.$$.fragment),this.h()},l(r){t=d(r,"DIV",{class:!0});var o=m(t);K(l.$$.fragment,o),o.forEach(f),this.h()},h(){i(t,"class","w-full h-full box-border")},m(r,o){B(r,t,o),Q(l,t,null),a=!0},p(r,[o]){const p={};o&1&&(p.y2=r[0]),o&18&&(p.$$scope={dirty:o,ctx:r}),l.$set(p)},i(r){a||(H(l.$$.fragment,r),a=!0)},o(r){W(l.$$.fragment,r),a=!1},d(r){r&&f(t),x(l)}}}function Qs(e,t){return e.map((l,a)=>({x:l,y:t[a]}))}function xs(e,t,l){let{hist:a}=t,r,o=[{x:0,y:0},{x:2e3,y:10}];return e.$$set=p=>{"hist"in p&&l(2,a=p.hist)},e.$$.update=()=>{e.$$.dirty&4&&a&&(l(1,o=Qs(a.bin_edges,a.counts)),l(0,r=Math.max(...a.counts)))},[r,o,a]}class ea extends It{constructor(t){super();Nt(this,t,xs,Ks,Pt,{hist:2})}}function ta(e){let t,l,a;return{c(){t=c("button"),l=E("Channel 0"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);l=w(o,"Channel 0"),o.forEach(f),this.h()},h(){i(t,"class",a=me(it("green",e[15],e[6].image_params.channels[0]))+" svelte-132l8kq"),D(t,"bg-green-600",e[15])},m(r,o){B(r,t,o),s(t,l)},p(r,o){o&32832&&a!==(a=me(it("green",r[15],r[6].image_params.channels[0]))+" svelte-132l8kq")&&i(t,"class",a),o&32832&&D(t,"bg-green-600",r[15])},d(r){r&&f(t)}}}function la(e){let t,l,a;return{c(){t=c("button"),l=E("Channel 1"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);l=w(o,"Channel 1"),o.forEach(f),this.h()},h(){i(t,"class",a=me(it("orange",e[15],e[6].image_params.channels[1]))+" svelte-132l8kq"),D(t,"bg-orange-500",e[15])},m(r,o){B(r,t,o),s(t,l)},p(r,o){o&32832&&a!==(a=me(it("orange",r[15],r[6].image_params.channels[1]))+" svelte-132l8kq")&&i(t,"class",a),o&32832&&D(t,"bg-orange-500",r[15])},d(r){r&&f(t)}}}function sa(e){let t,l,a;return{c(){t=c("button"),l=E("Channel 2"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);l=w(o,"Channel 2"),o.forEach(f),this.h()},h(){i(t,"class",a=me(it("rose",e[15],e[6].image_params.channels[2]))+" svelte-132l8kq"),D(t,"bg-rose-600",e[15])},m(r,o){B(r,t,o),s(t,l)},p(r,o){o&32832&&a!==(a=me(it("rose",r[15],r[6].image_params.channels[2]))+" svelte-132l8kq")&&i(t,"class",a),o&32832&&D(t,"bg-rose-600",r[15])},d(r){r&&f(t)}}}function aa(e){let t,l,a;return{c(){t=c("button"),l=E("Channel 3"),this.h()},l(r){t=d(r,"BUTTON",{class:!0});var o=m(t);l=w(o,"Channel 3"),o.forEach(f),this.h()},h(){i(t,"class",a=me(it("amber",e[15],e[6].image_params.channels[3]))+" svelte-132l8kq"),D(t,"bg-amber-800",e[15])},m(r,o){B(r,t,o),s(t,l)},p(r,o){o&32832&&a!==(a=me(it("amber",r[15],r[6].image_params.channels[3]))+" svelte-132l8kq")&&i(t,"class",a),o&32832&&D(t,"bg-amber-800",r[15])},d(r){r&&f(t)}}}function na(e){let t,l,a,r,o,p,n,g;return t=new ul({props:{disabled:!e[6].image_params.channels[0],$$slots:{default:[ta,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:e}}}),a=new ul({props:{disabled:!e[6].image_params.channels[1],$$slots:{default:[la,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:e}}}),o=new ul({props:{disabled:!e[6].image_params.channels[2],$$slots:{default:[sa,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:e}}}),n=new ul({props:{disabled:!e[6].image_params.channels[3],$$slots:{default:[aa,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),l=P(),J(a.$$.fragment),r=P(),J(o.$$.fragment),p=P(),J(n.$$.fragment)},l(u){K(t.$$.fragment,u),l=T(u),K(a.$$.fragment,u),r=T(u),K(o.$$.fragment,u),p=T(u),K(n.$$.fragment,u)},m(u,z){Q(t,u,z),B(u,l,z),Q(a,u,z),B(u,r,z),Q(o,u,z),B(u,p,z),Q(n,u,z),g=!0},p(u,z){const h={};z&64&&(h.disabled=!u[6].image_params.channels[0]),z&98368&&(h.$$scope={dirty:z,ctx:u}),t.$set(h);const v={};z&64&&(v.disabled=!u[6].image_params.channels[1]),z&98368&&(v.$$scope={dirty:z,ctx:u}),a.$set(v);const y={};z&64&&(y.disabled=!u[6].image_params.channels[2]),z&98368&&(y.$$scope={dirty:z,ctx:u}),o.$set(y);const N={};z&64&&(N.disabled=!u[6].image_params.channels[3]),z&98368&&(N.$$scope={dirty:z,ctx:u}),n.$set(N)},i(u){g||(H(t.$$.fragment,u),H(a.$$.fragment,u),H(o.$$.fragment,u),H(n.$$.fragment,u),g=!0)},o(u){W(t.$$.fragment,u),W(a.$$.fragment,u),W(o.$$.fragment,u),W(n.$$.fragment,u),g=!1},d(u){x(t,u),u&&f(l),x(a,u),u&&f(r),x(o,u),u&&f(p),x(n,u)}}}function oa(e){let t,l;return t=new Us({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[na]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(a){K(t.$$.fragment,a)},m(a,r){Q(t,a,r),l=!0},p(a,r){const o={};r&65600&&(o.$$scope={dirty:r,ctx:a}),t.$set(o)},i(a){l||(H(t.$$.fragment,a),l=!0)},o(a){W(t.$$.fragment,a),l=!1},d(a){x(t,a)}}}function ra(e){let t,l,a,r,o,p,n,g,u,z,h,v,y,N,$,O,_,k,S;return o=new Cs({props:{$$slots:{default:[oa]},$$scope:{ctx:e}}}),o.$on("change",e[9]),O=new ea({props:{hist:e[1].img.hist[e[0]]}}),{c(){t=c("div"),l=c("canvas"),a=P(),r=c("div"),J(o.$$.fragment),p=P(),n=c("button"),g=E("Center"),u=P(),z=c("div"),h=c("label"),v=c("input"),y=E(`
      Show Histogram`),N=P(),$=c("div"),J(O.$$.fragment),this.h()},l(q){t=d(q,"DIV",{id:!0,class:!0});var M=m(t);l=d(M,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),m(l).forEach(f),a=T(M),r=d(M,"DIV",{class:!0});var C=m(r);K(o.$$.fragment,C),C.forEach(f),p=T(M),n=d(M,"BUTTON",{class:!0});var U=m(n);g=w(U,"Center"),U.forEach(f),u=T(M),z=d(M,"DIV",{class:!0});var j=m(z);h=d(j,"LABEL",{class:!0});var F=m(h);v=d(F,"INPUT",{type:!0,class:!0}),y=w(F,`
      Show Histogram`),F.forEach(f),j.forEach(f),N=T(M),$=d(M,"DIV",{id:!0,class:!0});var Z=m($);K(O.$$.fragment,Z),Z.forEach(f),M.forEach(f),this.h()},h(){i(l,"id","canvas"),i(l,"width",2048),i(l,"height",128),i(l,"class","svelte-132l8kq"),i(r,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),i(n,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),i(v,"type","checkbox"),i(v,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),i(h,"class","mx-4 font-medium cursor-pointer"),i(z,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),i($,"id","histogram"),i($,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),D($,"hidden",!e[5]),i(t,"id","frame"),i(t,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(q,M){B(q,t,M),s(t,l),e[8](l),s(t,a),s(t,r),Q(o,r,null),s(t,p),s(t,n),s(n,g),s(t,u),s(t,z),s(z,h),s(h,v),v.checked=e[5],s(h,y),s(t,N),s(t,$),Q(O,$,null),e[13](t),_=!0,k||(S=[X(l,"wheel",function(){Ds(e[4].zoomWithWheel)&&e[4].zoomWithWheel.apply(this,arguments)}),X(n,"click",e[10]),X(v,"change",e[11]),X(v,"click",e[12])],k=!0)},p(q,[M]){e=q;const C={};M&65600&&(C.$$scope={dirty:M,ctx:e}),o.$set(C),M&32&&(v.checked=e[5]);const U={};M&3&&(U.hist=e[1].img.hist[e[0]]),O.$set(U),M&32&&D($,"hidden",!e[5])},i(q){_||(H(o.$$.fragment,q),H(O.$$.fragment,q),_=!0)},o(q){W(o.$$.fragment,q),W(O.$$.fragment,q),_=!1},d(q){q&&f(t),e[8](null),x(o),x(O),e[13](null),k=!1,dl(S)}}}function it(e,t,l){return`tab-button ${t?"text-white":`${l?`text-gray-700 hover:text-black bg-white hover:bg-${e}-300`:"text-gray-400"}`}`}function ia(e,t,l){let a,r;ze(e,Ws,k=>l(1,a=k)),ze(e,Ke,k=>l(6,r=k));let o,p,n,g,u,z=!0,h=0;Vs(()=>{l(7,u=p.getContext("2d")),l(4,g=As(p,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),n=new Image,n.onload=()=>u==null?void 0:u.drawImage(n,0,0);function v(k){yt[k?"unshift":"push"](()=>{p=k,l(3,p)})}const y=k=>l(0,h=k.detail),N=()=>{g.pan(0,0)};function $(){z=this.checked,l(5,z)}const O=()=>l(5,z=!z);function _(k){yt[k?"unshift":"push"](()=>{o=k,l(2,o)})}return e.$$.update=()=>{e.$$.dirty&3&&(n.src=a.img.img[h]),e.$$.dirty&130&&u&&a.img&&(l(7,u.canvas.height=Math.max(a.img.dim[0],512),u),l(7,u.canvas.width=a.img.dim[1],u))},[h,a,o,p,g,z,r,u,v,y,N,$,O,_]}class Na extends It{constructor(t){super();Nt(this,t,ia,ra,Pt,{})}}const ua=e=>({}),vs=e=>({});function fa(e){let t,l,a,r,o,p,n;const g=e[3].buttons,u=cs(g,e,e[2],vs),z=e[3].default,h=cs(z,e,e[2],null);return{c(){t=c("span"),u&&u.c(),l=P(),a=c("content"),h&&h.c(),r=P(),o=c("div"),p=c("progress"),this.h()},l(v){t=d(v,"SPAN",{class:!0});var y=m(t);u&&u.l(y),l=T(y),a=d(y,"CONTENT",{class:!0});var N=m(a);h&&h.l(N),r=T(N),o=d(N,"DIV",{class:!0});var $=m(o);p=d($,"PROGRESS",{class:!0}),m(p).forEach(f),$.forEach(f),N.forEach(f),y.forEach(f),this.h()},h(){i(p,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-ica9vh"),p.value=e[1],i(o,"class","mt-1"),i(a,"class","flex-grow px-4 py-2 border rounded-lg border-base-300 bg-white/60"),i(t,"class","z-40 flex w-full space-x-2")},m(v,y){B(v,t,y),u&&u.m(t,null),s(t,l),s(t,a),h&&h.m(a,null),s(a,r),s(a,o),s(o,p),n=!0},p(v,[y]){u&&u.p&&(!n||y&4)&&ds(u,g,v,v[2],n?hs(g,v[2],y,ua):ms(v[2]),vs),h&&h.p&&(!n||y&4)&&ds(h,z,v,v[2],n?hs(z,v[2],y,null):ms(v[2]),null),(!n||y&2)&&(p.value=v[1])},i(v){n||(H(u,v),H(h,v),n=!0)},o(v){W(u,v),W(h,v),n=!1},d(v){v&&f(t),u&&u.d(v),h&&h.d(v)}}}function pa(e,t,l){let a,r=qs,o=()=>(r(),r=Ms(g,u=>l(1,a=u)),g);e.$$.on_destroy.push(()=>r());let{$$slots:p={},$$scope:n}=t;const g=Bs(0,{duration:400,easing:js});return o(),e.$$set=u=>{"$$scope"in u&&l(2,n=u.$$scope)},[g,a,n,p]}class Pa extends It{constructor(t){super();Nt(this,t,pa,fa,Pt,{progress:0})}get progress(){return this.$$.ctx[0]}}function _a(e){let t,l,a,r,o,p,n,g,u,z,h,v,y,N,$,O,_,k,S,q,M;return y=new qt({props:{disabled:e[3]}}),y.$on("click",e[11]),{c(){t=c("div"),l=c("div"),a=c("span"),r=E("X"),o=P(),p=c("input"),n=P(),g=c("span"),u=E("Y"),z=P(),h=c("input"),v=P(),J(y.$$.fragment),N=P(),$=c("button"),O=_l("svg"),_=_l("path"),k=E(`
    Current`),this.h()},l(C){t=d(C,"DIV",{class:!0});var U=m(t);l=d(U,"DIV",{class:!0});var j=m(l);a=d(j,"SPAN",{class:!0});var F=m(a);r=w(F,"X"),F.forEach(f),o=T(j),p=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),n=T(j),g=d(j,"SPAN",{class:!0});var Z=m(g);u=w(Z,"Y"),Z.forEach(f),z=T(j),h=d(j,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),j.forEach(f),v=T(U),K(y.$$.fragment,U),N=T(U),$=d(U,"BUTTON",{type:!0,class:!0});var te=m($);O=cl(te,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var A=m(O);_=cl(A,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(_).forEach(f),A.forEach(f),k=w(te,`
    Current`),te.forEach(f),U.forEach(f),this.h()},h(){i(a,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),D(a,"span-disabled",e[2].block),i(p,"type","number"),i(p,"min","-5"),i(p,"max","30"),i(p,"step","0.01"),i(p,"class","z-10 h-10 text-center rounded-none pretty w-28"),p.disabled=e[3],i(g,"class","flex items-center color-group svelte-awp8a4"),D(g,"span-disabled",e[2].block),i(h,"type","number"),i(h,"min","-5"),i(h,"max","80"),i(h,"step","0.01"),i(h,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),h.disabled=e[3],i(l,"class","flex font-medium"),i(_,"stroke-linecap","round"),i(_,"stroke-linejoin","round"),i(_,"stroke-width","2"),i(_,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),i(O,"xmlns","http://www.w3.org/2000/svg"),i(O,"class","w-5 h-5 mr-1"),i(O,"fill","none"),i(O,"viewBox","0 0 24 24"),i(O,"stroke","currentColor"),i($,"type","button"),i($,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),$.disabled=e[3],i(t,"class","flex gap-x-2")},m(C,U){B(C,t,U),s(t,l),s(l,a),s(a,r),s(l,o),s(l,p),G(p,e[0][0]),s(l,n),s(l,g),s(g,u),s(l,z),s(l,h),G(h,e[0][1]),s(t,v),Q(y,t,null),s(t,N),s(t,$),s($,O),s(O,_),s($,k),S=!0,q||(M=[X(p,"input",e[7]),X(p,"change",e[8]),ye(Je.call(null,p,[-5,30])),X(h,"input",e[9]),X(h,"change",e[10]),ye(Je.call(null,h,[-5,80])),X($,"click",e[6])],q=!0)},p(C,[U]){U&4&&D(a,"span-disabled",C[2].block),(!S||U&8)&&(p.disabled=C[3]),U&1&&ee(p.value)!==C[0][0]&&G(p,C[0][0]),U&4&&D(g,"span-disabled",C[2].block),(!S||U&8)&&(h.disabled=C[3]),U&1&&ee(h.value)!==C[0][1]&&G(h,C[0][1]);const j={};U&8&&(j.disabled=C[3]),y.$set(j),(!S||U&8)&&($.disabled=C[3])},i(C){S||(H(y.$$.fragment,C),S=!0)},o(C){W(y.$$.fragment,C),S=!1},d(C){C&&f(t),x(y),q=!1,dl(M)}}}function ca(e,t,l){let a,r,o,p;ze(e,Mt,_=>l(2,a=_)),ze(e,Mt,_=>l(12,r=_)),ze(e,Ke,_=>l(13,o=_)),ze(e,rt,_=>l(4,p=_));const n=Ls();let{i:g}=t,{xy:u=[-1,-1]}=t;function z(){const{x:_,y:k}=Gs(o.image_params.fc,r.x,r.y);l(0,u[0]=Math.round((_+Number.EPSILON)*100)/100,u),l(0,u[1]=Math.round((k+Number.EPSILON)*100)/100,u)}let h=!1;function v(){u[0]=ee(this.value),l(0,u)}const y=()=>n("change");function N(){u[1]=ee(this.value),l(0,u)}const $=()=>n("change"),O=()=>{Se(Mt,a.block="moving",a),Se(rt,p={move:g===0?{xy0:u}:{xy1:u}},p)};return e.$$set=_=>{"i"in _&&l(1,g=_.i),"xy"in _&&l(0,u=_.xy)},e.$$.update=()=>{e.$$.dirty&4&&l(3,h=Boolean(a.block))},[u,g,a,h,p,n,z,v,y,N,$,O]}class gs extends It{constructor(t){super();Nt(this,t,ca,_a,Pt,{i:1,xy:0})}}function da(e){let t;return{c(){t=E("Set")},l(l){t=w(l,"Set")},m(l,a){B(l,t,a)},d(l){l&&f(t)}}}function ma(e){let t,l,a,r,o,p,n,g,u,z,h,v,y,N,$,O;return{c(){t=c("option"),l=E("Open"),a=c("option"),r=E("0.2"),o=c("option"),p=E("0.5"),n=c("option"),g=E("0.6"),u=c("option"),z=E("1.0"),h=c("option"),v=E("2.4"),y=c("option"),N=E("4.0"),$=c("option"),O=E("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var k=m(t);l=w(k,"Open"),k.forEach(f),a=d(_,"OPTION",{});var S=m(a);r=w(S,"0.2"),S.forEach(f),o=d(_,"OPTION",{});var q=m(o);p=w(q,"0.5"),q.forEach(f),n=d(_,"OPTION",{});var M=m(n);g=w(M,"0.6"),M.forEach(f),u=d(_,"OPTION",{});var C=m(u);z=w(C,"1.0"),C.forEach(f),h=d(_,"OPTION",{});var U=m(h);v=w(U,"2.4"),U.forEach(f),y=d(_,"OPTION",{});var j=m(y);N=w(j,"4.0"),j.forEach(f),$=d(_,"OPTION",{});var F=m($);O=w(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,a.__value="0.2",a.value=a.__value,o.__value="0.5",o.value=o.__value,n.__value="0.6",n.value=n.__value,u.__value="1.0",u.value=u.__value,h.__value="2.4",h.value=h.__value,y.__value="4.0",y.value=y.__value,$.__value="Closed",$.value=$.__value},m(_,k){B(_,t,k),s(t,l),B(_,a,k),s(a,r),B(_,o,k),s(o,p),B(_,n,k),s(n,g),B(_,u,k),s(u,z),B(_,h,k),s(h,v),B(_,y,k),s(y,N),B(_,$,k),s($,O)},d(_){_&&f(t),_&&f(a),_&&f(o),_&&f(n),_&&f(u),_&&f(h),_&&f(y),_&&f($)}}}function ha(e){let t,l,a,r,o,p,n,g,u,z,h,v,y,N,$,O;return{c(){t=c("option"),l=E("Open"),a=c("option"),r=E("1.0"),o=c("option"),p=E("2.0"),n=c("option"),g=E("3.5"),u=c("option"),z=E("3.8"),h=c("option"),v=E("4.0"),y=c("option"),N=E("4.5"),$=c("option"),O=E("Closed"),this.h()},l(_){t=d(_,"OPTION",{});var k=m(t);l=w(k,"Open"),k.forEach(f),a=d(_,"OPTION",{});var S=m(a);r=w(S,"1.0"),S.forEach(f),o=d(_,"OPTION",{});var q=m(o);p=w(q,"2.0"),q.forEach(f),n=d(_,"OPTION",{});var M=m(n);g=w(M,"3.5"),M.forEach(f),u=d(_,"OPTION",{});var C=m(u);z=w(C,"3.8"),C.forEach(f),h=d(_,"OPTION",{});var U=m(h);v=w(U,"4.0"),U.forEach(f),y=d(_,"OPTION",{});var j=m(y);N=w(j,"4.5"),j.forEach(f),$=d(_,"OPTION",{});var F=m($);O=w(F,"Closed"),F.forEach(f),this.h()},h(){t.__value="Open",t.value=t.__value,a.__value="1.0",a.value=a.__value,o.__value="2.0",o.value=o.__value,n.__value="3.5",n.value=n.__value,u.__value="3.8",u.value=u.__value,h.__value="4.0",h.value=h.__value,y.__value="4.5",y.value=y.__value,$.__value="Closed",$.value=$.__value},m(_,k){B(_,t,k),s(t,l),B(_,a,k),s(a,r),B(_,o,k),s(o,p),B(_,n,k),s(n,g),B(_,u,k),s(u,z),B(_,h,k),s(h,v),B(_,y,k),s(y,N),B(_,$,k),s($,O)},d(_){_&&f(t),_&&f(a),_&&f(o),_&&f(n),_&&f(u),_&&f(h),_&&f(y),_&&f($)}}}function va(e){let t,l,a,r,o,p,n,g=(Boolean(e[1])?660:532)+"",u,z,h,v,y,N,$,O,_,k,S,q,M=2*e[1]+"",C,U,j,F,Z,te,A=2*e[1]+1+"",Ce,Ie,R,ut,be,Ne,ue,ft,Ue=(Number(e[0].od[e[1]]!=-1)*e[0].lasers[e[1]]*Math.pow(10,-e[0].od[e[1]])).toFixed(4)+"",fe,pt,oe,ke,Pe;$=new qt({props:{disabled:e[4].block,$$slots:{default:[da]},$$scope:{ctx:e}}}),$.$on("click",e[8]);function Be(I,L){return I[1]==0?ha:ma}let Qe=Be(e),ve=Qe(e);return{c(){t=c("p"),l=c("span"),a=c("label"),r=c("input"),p=P(),n=c("div"),u=E(g),z=E(" nm"),h=P(),v=c("input"),N=E(`
    mW
    `),J($.$$.fragment),O=P(),_=c("label"),k=c("input"),q=E(`
    Channel `),C=E(M),U=P(),j=c("label"),F=c("input"),te=E(`
    Channel `),Ce=E(A),Ie=P(),R=c("span"),ut=E(`Filter OD
    `),be=c("select"),ve.c(),Ne=P(),ue=c("p"),ft=E("Effective: "),fe=E(Ue),pt=E(" mW"),this.h()},l(I){t=d(I,"P",{class:!0});var L=m(t);l=d(L,"SPAN",{class:!0});var ce=m(l);a=d(ce,"LABEL",{});var pe=m(a);r=d(pe,"INPUT",{type:!0,class:!0}),p=T(pe),n=d(pe,"DIV",{class:!0});var ge=m(n);u=w(ge,g),z=w(ge," nm"),ge.forEach(f),pe.forEach(f),h=T(ce),v=d(ce,"INPUT",{type:!0,class:!0,min:!0,max:!0}),N=w(ce,`
    mW
    `),K($.$$.fragment,ce),ce.forEach(f),O=T(L),_=d(L,"LABEL",{class:!0});var De=m(_);k=d(De,"INPUT",{type:!0,class:!0}),q=w(De,`
    Channel `),C=w(De,M),De.forEach(f),U=T(L),j=d(L,"LABEL",{class:!0});var Me=m(j);F=d(Me,"INPUT",{type:!0,class:!0}),te=w(Me,`
    Channel `),Ce=w(Me,A),Me.forEach(f),Ie=T(L),R=d(L,"SPAN",{class:!0});var qe=m(R);ut=w(qe,`Filter OD
    `),be=d(qe,"SELECT",{class:!0});var xe=m(be);ve.l(xe),xe.forEach(f),Ne=T(qe),ue=d(qe,"P",{class:!0});var je=m(ue);ft=w(je,"Effective: "),fe=w(je,Ue),pt=w(je," mW"),je.forEach(f),qe.forEach(f),L.forEach(f),this.h()},h(){i(r,"type","checkbox"),i(r,"class",o=me(`rounded mr-1 ${e[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),i(n,"class","inline font-semibold"),D(n,"text-green-800",e[0].laser_onoff[e[1]]&&!e[1]),D(n,"text-red-800",e[0].laser_onoff[e[1]]&&e[1]),i(v,"type","number"),i(v,"class","w-[4.5rem] h-8 pr-2 pretty"),i(v,"min","0"),i(v,"max","500"),v.disabled=y=!e[0].laser_onoff[e[1]],D(v,"pretty-disabled",!e[0].laser_onoff[0]),i(l,"class","flex items-center gap-x-2"),D(l,"text-gray-400",!e[0].laser_onoff[e[1]]),i(k,"type","checkbox"),i(k,"class",S=me(`mr-1 rounded ${e[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),i(_,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),D(_,"text-gray-400",!e[0].channels[2*e[1]]),i(F,"type","checkbox"),i(F,"class",Z=me(`mr-1 rounded ${e[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),i(j,"class","channel svelte-6ipz4o"),D(j,"text-gray-400",!e[0].channels[2*e[1]+1]),i(be,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"),i(ue,"class","ml-3 text-sm font-medium"),i(R,"class","ml-8 font-normal opacity-85"),i(t,"class","flex flex-col")},m(I,L){B(I,t,L),s(t,l),s(l,a),s(a,r),r.checked=e[0].laser_onoff[e[1]],s(a,p),s(a,n),s(n,u),s(n,z),s(l,h),s(l,v),G(v,e[0].lasers[e[1]]),s(l,N),Q($,l,null),s(t,O),s(t,_),s(_,k),k.checked=e[0].channels[2*e[1]],s(_,q),s(_,C),s(t,U),s(t,j),s(j,F),F.checked=e[0].channels[2*e[1]+1],s(j,te),s(j,Ce),s(t,Ie),s(t,R),s(R,ut),s(R,be),ve.m(be,null),s(R,Ne),s(R,ue),s(ue,ft),s(ue,fe),s(ue,pt),oe=!0,ke||(Pe=[X(r,"change",e[6]),X(v,"input",e[7]),ye(Je.call(null,v,[0,500])),X(k,"change",e[9]),X(F,"change",e[10]),X(be,"change",e[5])],ke=!0)},p(I,[L]){(!oe||L&2&&o!==(o=me(`rounded mr-1 ${I[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&i(r,"class",o),L&3&&(r.checked=I[0].laser_onoff[I[1]]),(!oe||L&2)&&g!==(g=(Boolean(I[1])?660:532)+"")&&he(u,g),L&3&&D(n,"text-green-800",I[0].laser_onoff[I[1]]&&!I[1]),L&3&&D(n,"text-red-800",I[0].laser_onoff[I[1]]&&I[1]),(!oe||L&3&&y!==(y=!I[0].laser_onoff[I[1]]))&&(v.disabled=y),L&3&&ee(v.value)!==I[0].lasers[I[1]]&&G(v,I[0].lasers[I[1]]),L&1&&D(v,"pretty-disabled",!I[0].laser_onoff[0]);const ce={};L&16&&(ce.disabled=I[4].block),L&2048&&(ce.$$scope={dirty:L,ctx:I}),$.$set(ce),L&3&&D(l,"text-gray-400",!I[0].laser_onoff[I[1]]),(!oe||L&2&&S!==(S=me(`mr-1 rounded ${I[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&i(k,"class",S),L&3&&(k.checked=I[0].channels[2*I[1]]),(!oe||L&2)&&M!==(M=2*I[1]+"")&&he(C,M),L&3&&D(_,"text-gray-400",!I[0].channels[2*I[1]]),(!oe||L&2&&Z!==(Z=me(`mr-1 rounded ${I[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&i(F,"class",Z),L&3&&(F.checked=I[0].channels[2*I[1]+1]),(!oe||L&2)&&A!==(A=2*I[1]+1+"")&&he(Ce,A),L&3&&D(j,"text-gray-400",!I[0].channels[2*I[1]+1]),Qe!==(Qe=Be(I))&&(ve.d(1),ve=Qe(I),ve&&(ve.c(),ve.m(be,null))),(!oe||L&3)&&Ue!==(Ue=(Number(I[0].od[I[1]]!=-1)*I[0].lasers[I[1]]*Math.pow(10,-I[0].od[I[1]])).toFixed(4)+"")&&he(fe,Ue)},i(I){oe||(H($.$$.fragment,I),oe=!0)},o(I){W($.$$.fragment,I),oe=!1},d(I){I&&f(t),x($),ve.d(),ke=!1,dl(Pe)}}}function ga(e,t,l){let a,r,o;ze(e,rt,N=>l(2,a=N)),ze(e,Ke,N=>l(3,r=N)),ze(e,Mt,N=>l(4,o=N));let{params:p}=t,{i:n}=t;function g(N){let $;switch(N.currentTarget.value){case"Open":$=0;break;case"Closed":$=-1;break;default:$=Number(N.currentTarget.value)}l(0,p.od[n]=$,p),Se(Ke,r.image_params.od[n]=p.od[n],r),Se(rt,a={move:{od:n===0?[p.od[n],void 0]:[void 0,p.od[n]]}},a)}function u(){p.laser_onoff[n]=this.checked,l(0,p)}function z(){p.lasers[n]=ee(this.value),l(0,p)}const h=()=>{Se(Ke,r.image_params.laser_onoff[n]=p.laser_onoff[n],r),Se(Ke,r.image_params.lasers[n]=p.lasers[n],r),Se(rt,a={move:{lasers:n===0?[p.lasers[n],void 0]:[void 0,p.lasers[n]],laser_onoff:n===0?[p.laser_onoff[n],void 0]:[void 0,p.laser_onoff[n]]}},a)};function v(){p.channels[2*n]=this.checked,l(0,p)}function y(){p.channels[2*n+1]=this.checked,l(0,p)}return e.$$set=N=>{"params"in N&&l(0,p=N.params),"i"in N&&l(1,n=N.i)},[p,n,a,r,o,g,u,z,h,v,y]}class bs extends It{constructor(t){super();Nt(this,t,ga,va,Pt,{params:0,i:1})}}function ks(e){let t,l;return t=new qt({props:{color:"sky",cl:"text-lg font-semibold shadow-md shadow-sky-700/10 h-12",$$slots:{default:[ba]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(a){K(t.$$.fragment,a)},m(a,r){Q(t,a,r),l=!0},i(a){l||(H(t.$$.fragment,a),l=!0)},o(a){W(t.$$.fragment,a),l=!1},d(a){x(t,a)}}}function ba(e){let t;return{c(){t=E("Preview")},l(l){t=w(l,"Preview")},m(l,a){B(l,t,a)},d(l){l&&f(t)}}}function $s(e){let t,l,a,r,o,p;return{c(){t=c("p"),l=E("Image Path"),a=P(),r=c("input"),this.h()},l(n){t=d(n,"P",{class:!0});var g=m(t);l=w(g,"Image Path"),g.forEach(f),a=T(n),r=d(n,"INPUT",{type:!0,class:!0}),this.h()},h(){i(t,"class","text-lg svelte-1m4l8fo"),i(r,"type","text"),i(r,"class","max-w-md mb-4 pretty"),D(r,"invalid",!e[0].path)},m(n,g){B(n,t,g),s(t,l),B(n,a,g),B(n,r,g),G(r,e[0].path),o||(p=X(r,"input",e[10]),o=!0)},p(n,g){g&1&&r.value!==n[0].path&&G(r,n[0].path),g&1&&D(r,"invalid",!n[0].path)},d(n){n&&f(t),n&&f(a),n&&f(r),o=!1,p()}}}function Es(e){let t;return{c(){t=E("per z-stack.")},l(l){t=w(l,"per z-stack.")},m(l,a){B(l,t,a)},d(l){l&&f(t)}}}function ws(e){let t,l=e[1].n_z+"",a,r,o,p=e[0].z_obj+e[0].z_from*e[0].z_spacing+"",n,g,u=e[0].z_obj+e[0].z_to*e[0].z_spacing+"",z,h,v,y,N=(e[1].n_z?zt(e[1].n_z*e[1].time):zt(e[1].time))+"",$,O,_=e[1].n_z>1&&ys();return{c(){t=c("div"),a=E(l),r=E(" Z step"),_&&_.c(),o=E(" from "),n=E(p),g=E(" to "),z=E(u),h=P(),v=c("div"),y=E("Total time: "),$=E(N),O=E("."),this.h()},l(k){t=d(k,"DIV",{class:!0});var S=m(t);a=w(S,l),r=w(S," Z step"),_&&_.l(S),o=w(S," from "),n=w(S,p),g=w(S," to "),z=w(S,u),S.forEach(f),h=T(k),v=d(k,"DIV",{class:!0});var q=m(v);y=w(q,"Total time: "),$=w(q,N),O=w(q,"."),q.forEach(f),this.h()},h(){i(t,"class","px-2 font-base"),i(v,"class","px-2 font-semibold")},m(k,S){B(k,t,S),s(t,a),s(t,r),_&&_.m(t,null),s(t,o),s(t,n),s(t,g),s(t,z),B(k,h,S),B(k,v,S),s(v,y),s(v,$),s(v,O)},p(k,S){S&2&&l!==(l=k[1].n_z+"")&&he(a,l),k[1].n_z>1?_||(_=ys(),_.c(),_.m(t,o)):_&&(_.d(1),_=null),S&1&&p!==(p=k[0].z_obj+k[0].z_from*k[0].z_spacing+"")&&he(n,p),S&1&&u!==(u=k[0].z_obj+k[0].z_to*k[0].z_spacing+"")&&he(z,u),S&2&&N!==(N=(k[1].n_z?zt(k[1].n_z*k[1].time):zt(k[1].time))+"")&&he($,N)},d(k){k&&f(t),_&&_.d(),k&&f(h),k&&f(v)}}}function ys(e){let t;return{c(){t=E("s")},l(l){t=w(l,"s")},m(l,a){B(l,t,a)},d(l){l&&f(t)}}}function ka(e){let t,l,a,r,o,p,n,g,u,z,h,v,y,N,$,O,_,k,S,q,M,C,U,j,F,Z,te,A,Ce,Ie,R,ut,be,Ne,ue,ft,Ue,fe,pt,oe,ke,Pe,Be,Qe,ve,I,L,ce,pe,ge,De=e[1].width.toFixed(2)+"",Me,qe,xe=e[1].height.toFixed(2)+"",je,ml,hl,Le,Tt=e[1].n_cols+"",jt,vl,Ot=e[1].n_bundles+"",Lt,gl,bl,Te,St=zt(e[1].time)+"",Ft,kl,$l,et,gt,El,wl,tt,lt,_t,bt,yl,zl,st,$e,Il,Fe,Nl,ct,kt,Pl,Tl,Ve,Ee,Ol,He,Sl,Oe,Ze,dt,Cl,Ct,Dl,Ht,Vl,at,nt,Ae,Zt,Al,We,ot,Ul,Bl,Ml,le,Xe,ql,jl,se,Wt,Ll,Ge,Fl,Hl,ae,Xt,Zl,Re,Wl,Xl,ne,Gt,de,Gl,Yl,Y=e[3]&&ks(e),re=!e[3]&&$s(e);function zs(b){e[11](b)}let Jl={i:0};e[0]!==void 0&&(Jl.params=e[0]),O=new bs({props:Jl}),yt.push(()=>fl(O,"params",zs));function Is(b){e[12](b)}let Kl={i:1};e[0]!==void 0&&(Kl.params=e[0]),S=new bs({props:Kl}),yt.push(()=>fl(S,"params",Is));function Ns(b){e[13](b)}let Ql={i:0};e[0].xy0!==void 0&&(Ql.xy=e[0].xy0),R=new gs({props:Ql}),yt.push(()=>fl(R,"xy",Ns)),R.$on("change",e[6]);function Ps(b){e[14](b)}let xl={i:1};e[0].xy1!==void 0&&(xl.xy=e[0].xy1),fe=new gs({props:xl}),yt.push(()=>fl(fe,"xy",Ps)),fe.$on("change",e[6]);let _e=e[2]&&Es();Fe=new qt({props:{disabled:e[4].block}}),Fe.$on("click",e[17]),He=new qt({props:{disabled:e[4].block}}),He.$on("click",e[19]);let ie=e[2]&&ws(e);return{c(){t=c("div"),l=c("section"),a=c("p"),r=E("Name"),o=P(),p=c("div"),n=c("input"),g=P(),Y&&Y.c(),u=P(),re&&re.c(),z=P(),h=c("section"),v=c("h2"),y=E("Laser and Channels"),N=P(),$=c("div"),J(O.$$.fragment),k=P(),J(S.$$.fragment),M=P(),C=c("section"),U=c("h2"),j=E("Positions"),F=P(),Z=c("div"),te=c("div"),A=c("p"),Ce=E("\u{1F4CC} Corner 1"),Ie=P(),J(R.$$.fragment),be=P(),Ne=c("div"),ue=c("p"),ft=E("\u{1F4CD} Corner 2"),Ue=P(),J(fe.$$.fragment),oe=P(),ke=c("div"),Pe=c("div"),Be=c("p"),Qe=E("X-Overlap"),ve=P(),I=c("input"),L=E(`
          (0-1)`),ce=P(),pe=c("div"),ge=c("span"),Me=E(De),qe=E(" \xD7 "),je=E(xe),ml=E(" mm."),hl=P(),Le=c("span"),jt=E(Tt),vl=E(" columns of "),Lt=E(Ot),gl=E(" bundles."),bl=P(),Te=c("span"),Ft=E(St),kl=P(),_e&&_e.c(),$l=P(),et=c("section"),gt=c("h2"),El=E("Focus"),wl=P(),tt=c("div"),lt=c("div"),_t=c("div"),bt=c("p"),yl=E("Z Tilt"),zl=P(),st=c("div"),$e=c("input"),Il=P(),J(Fe.$$.fragment),Nl=P(),ct=c("div"),kt=c("p"),Pl=E("Z Objective"),Tl=P(),Ve=c("span"),Ee=c("input"),Ol=P(),J(He.$$.fragment),Sl=P(),Oe=c("button"),Ze=_l("svg"),dt=_l("path"),Cl=P(),Ct=c("span"),Dl=E("Autofocus"),Vl=P(),at=c("div"),nt=c("label"),Ae=c("input"),Al=P(),We=c("div"),ot=c("div"),Ul=E("Z-Stack"),Bl=P(),ie&&ie.c(),Ml=P(),le=c("div"),Xe=c("span"),ql=E("Spacing"),jl=P(),se=c("input"),Ll=P(),Ge=c("span"),Fl=E("From"),Hl=P(),ae=c("input"),Zl=P(),Re=c("span"),Wl=E("To"),Xl=P(),ne=c("input"),this.h()},l(b){t=d(b,"DIV",{id:!0,class:!0,style:!0});var V=m(t);l=d(V,"SECTION",{class:!0});var Ye=m(l);a=d(Ye,"P",{class:!0});var Dt=m(a);r=w(Dt,"Name"),Dt.forEach(f),o=T(Ye),p=d(Ye,"DIV",{class:!0});var mt=m(p);n=d(mt,"INPUT",{type:!0,class:!0}),g=T(mt),Y&&Y.l(mt),mt.forEach(f),u=T(Ye),re&&re.l(Ye),Ye.forEach(f),z=T(V),h=d(V,"SECTION",{class:!0});var ht=m(h);v=d(ht,"H2",{class:!0});var Vt=m(v);y=w(Vt,"Laser and Channels"),Vt.forEach(f),N=T(ht),$=d(ht,"DIV",{class:!0});var vt=m($);K(O.$$.fragment,vt),k=T(vt),K(S.$$.fragment,vt),vt.forEach(f),ht.forEach(f),M=T(V),C=d(V,"SECTION",{class:!0});var Rt=m(C);U=d(Rt,"H2",{class:!0});var es=m(U);j=w(es,"Positions"),es.forEach(f),F=T(Rt),Z=d(Rt,"DIV",{class:!0});var $t=m(Z);te=d($t,"DIV",{});var Yt=m(te);A=d(Yt,"P",{class:!0});var ts=m(A);Ce=w(ts,"\u{1F4CC} Corner 1"),ts.forEach(f),Ie=T(Yt),K(R.$$.fragment,Yt),Yt.forEach(f),be=T($t),Ne=d($t,"DIV",{});var Jt=m(Ne);ue=d(Jt,"P",{class:!0});var ls=m(ue);ft=w(ls,"\u{1F4CD} Corner 2"),ls.forEach(f),Ue=T(Jt),K(fe.$$.fragment,Jt),Jt.forEach(f),oe=T($t),ke=d($t,"DIV",{class:!0});var Kt=m(ke);Pe=d(Kt,"DIV",{});var At=m(Pe);Be=d(At,"P",{class:!0});var ss=m(Be);Qe=w(ss,"X-Overlap"),ss.forEach(f),ve=T(At),I=d(At,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),L=w(At,`
          (0-1)`),At.forEach(f),ce=T(Kt),pe=d(Kt,"DIV",{class:!0});var Et=m(pe);ge=d(Et,"SPAN",{class:!0});var Ut=m(ge);Me=w(Ut,De),qe=w(Ut," \xD7 "),je=w(Ut,xe),ml=w(Ut," mm."),Ut.forEach(f),hl=T(Et),Le=d(Et,"SPAN",{class:!0});var Bt=m(Le);jt=w(Bt,Tt),vl=w(Bt," columns of "),Lt=w(Bt,Ot),gl=w(Bt," bundles."),Bt.forEach(f),bl=T(Et),Te=d(Et,"SPAN",{class:!0});var Qt=m(Te);Ft=w(Qt,St),kl=T(Qt),_e&&_e.l(Qt),Qt.forEach(f),Et.forEach(f),Kt.forEach(f),$t.forEach(f),Rt.forEach(f),$l=T(V),et=d(V,"SECTION",{class:!0});var xt=m(et);gt=d(xt,"H2",{class:!0});var as=m(gt);El=w(as,"Focus"),as.forEach(f),wl=T(xt),tt=d(xt,"DIV",{class:!0});var el=m(tt);lt=d(el,"DIV",{class:!0});var tl=m(lt);_t=d(tl,"DIV",{});var ll=m(_t);bt=d(ll,"P",{class:!0});var ns=m(bt);yl=w(ns,"Z Tilt"),ns.forEach(f),zl=T(ll),st=d(ll,"DIV",{class:!0});var sl=m(st);$e=d(sl,"INPUT",{type:!0,class:!0,min:!0,max:!0}),Il=T(sl),K(Fe.$$.fragment,sl),sl.forEach(f),ll.forEach(f),Nl=T(tl),ct=d(tl,"DIV",{});var al=m(ct);kt=d(al,"P",{class:!0});var os=m(kt);Pl=w(os,"Z Objective"),os.forEach(f),Tl=T(al),Ve=d(al,"SPAN",{class:!0});var wt=m(Ve);Ee=d(wt,"INPUT",{type:!0,class:!0,min:!0,max:!0}),Ol=T(wt),K(He.$$.fragment,wt),Sl=T(wt),Oe=d(wt,"BUTTON",{type:!0,class:!0});var nl=m(Oe);Ze=cl(nl,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var rs=m(Ze);dt=cl(rs,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(dt).forEach(f),rs.forEach(f),Cl=T(nl),Ct=d(nl,"SPAN",{});var is=m(Ct);Dl=w(is,"Autofocus"),is.forEach(f),nl.forEach(f),wt.forEach(f),al.forEach(f),tl.forEach(f),Vl=T(el),at=d(el,"DIV",{class:!0});var ol=m(at);nt=d(ol,"LABEL",{class:!0});var rl=m(nt);Ae=d(rl,"INPUT",{type:!0,class:!0}),Al=T(rl),We=d(rl,"DIV",{class:!0});var il=m(We);ot=d(il,"DIV",{class:!0});var us=m(ot);Ul=w(us,"Z-Stack"),us.forEach(f),Bl=T(il),ie&&ie.l(il),il.forEach(f),rl.forEach(f),Ml=T(ol),le=d(ol,"DIV",{class:!0,id:!0});var we=m(le);Xe=d(we,"SPAN",{class:!0});var fs=m(Xe);ql=w(fs,"Spacing"),fs.forEach(f),jl=T(we),se=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ll=T(we),Ge=d(we,"SPAN",{class:!0});var ps=m(Ge);Fl=w(ps,"From"),ps.forEach(f),Hl=T(we),ae=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Zl=T(we),Re=d(we,"SPAN",{class:!0});var _s=m(Re);Wl=w(_s,"To"),_s.forEach(f),Xl=T(we),ne=d(we,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),we.forEach(f),ol.forEach(f),el.forEach(f),xt.forEach(f),V.forEach(f),this.h()},h(){i(a,"class","mt-1 text-lg svelte-1m4l8fo"),i(n,"type","text"),i(n,"class","flex-grow h-12 mb-4 text-lg pretty"),D(n,"invalid",e[7](e[0].name)),i(p,"class","flex-grow flex gap-x-2 max-w-[470px]"),i(l,"class","flex flex-col text-lg font-medium"),i(v,"class","svelte-1m4l8fo"),i($,"class","grid grid-cols-2 min-w-[600px]"),D($,"opacity-70",e[4].block),i(h,"class","font-medium leading-10 "),i(U,"class","svelte-1m4l8fo"),i(A,"class","svelte-1m4l8fo"),i(ue,"class","svelte-1m4l8fo"),i(Be,"class","svelte-1m4l8fo"),i(I,"type","number"),i(I,"class","w-20 pr-2 pretty"),i(I,"step","0.01"),i(I,"min","0"),i(I,"max","0.99"),i(ge,"class","tabular-nums"),i(Le,"class","tabular-nums"),i(Te,"class","tabular-nums"),D(Te,"font-semibold",!e[2]),i(pe,"class","flex flex-col justify-center font-normal"),i(ke,"class","flex gap-8"),i(Z,"class","-mt-1 space-y-4"),i(C,"class","flex flex-col gap-2"),D(C,"-mt-20",e[3]),i(gt,"class","svelte-1m4l8fo"),i(bt,"class","svelte-1m4l8fo"),i($e,"type","number"),i($e,"class","w-28 pretty"),i($e,"min","0"),i($e,"max","25000"),i(st,"class","flex gap-2"),i(kt,"class","svelte-1m4l8fo"),i(Ee,"type","number"),i(Ee,"class","w-28 pretty"),i(Ee,"min","0"),i(Ee,"max","60000"),i(dt,"fill-rule","evenodd"),i(dt,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),i(dt,"clip-rule","evenodd"),i(Ze,"xmlns","http://www.w3.org/2000/svg"),i(Ze,"class","w-5 h-5 mr-1"),i(Ze,"viewBox","0 0 20 20"),i(Ze,"fill","currentColor"),i(Oe,"type","button"),Oe.disabled=Ht=e[4].block,i(Oe,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),i(Ve,"class","flex gap-2"),i(lt,"class","flex space-x-8"),i(Ae,"type","checkbox"),i(Ae,"class","mr-1 rounded focus:ring-blue-600"),Ae.disabled=Zt=e[4].block==="capturing",i(ot,"class","pr-2"),D(ot,"font-medium",e[2]),i(We,"class","flex divide-x-2"),i(nt,"class","flex items-center gap-x-1"),i(Xe,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),D(Xe,"span-disabled",e[4].block||!e[2]),i(se,"type","number"),i(se,"min","1"),i(se,"max","60000"),i(se,"step","1"),i(se,"class","z-10 h-10 text-center rounded-none pretty w-28"),se.disabled=Wt=e[4].block||!e[2],D(se,"disabled",e[4].block||!e[2]),i(Ge,"class","flex items-center color-group svelte-1m4l8fo"),D(Ge,"span-disabled",e[4].block||!e[2]),i(ae,"type","number"),i(ae,"min","-100"),i(ae,"max","100"),i(ae,"step","1"),i(ae,"class","z-10 w-16 h-10 text-center rounded-none pretty"),ae.disabled=Xt=e[4].block||!e[2],D(ae,"disabled",e[4].block||!e[2]),i(Re,"class","flex items-center color-group svelte-1m4l8fo"),D(Re,"span-disabled",e[4].block||!e[2]),i(ne,"type","number"),i(ne,"min","-100"),i(ne,"max","100"),i(ne,"step","1"),i(ne,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),ne.disabled=Gt=e[4].block||!e[2],D(ne,"disabled",e[4].block||!e[2]),i(le,"class","flex font-medium"),i(le,"id","zBox"),i(at,"class","space-y-2"),i(tt,"class","-mt-1 space-y-4"),i(et,"class","flex flex-col gap-2"),i(t,"id","control"),i(t,"class","grid gap-y-6"),Fs(t,"grid-template-columns","minmax(500px, 1fr) 1fr")},m(b,V){B(b,t,V),s(t,l),s(l,a),s(a,r),s(l,o),s(l,p),s(p,n),G(n,e[0].name),s(p,g),Y&&Y.m(p,null),s(l,u),re&&re.m(l,null),s(t,z),s(t,h),s(h,v),s(v,y),s(h,N),s(h,$),Q(O,$,null),s($,k),Q(S,$,null),s(t,M),s(t,C),s(C,U),s(U,j),s(C,F),s(C,Z),s(Z,te),s(te,A),s(A,Ce),s(te,Ie),Q(R,te,null),s(Z,be),s(Z,Ne),s(Ne,ue),s(ue,ft),s(Ne,Ue),Q(fe,Ne,null),s(Z,oe),s(Z,ke),s(ke,Pe),s(Pe,Be),s(Be,Qe),s(Pe,ve),s(Pe,I),G(I,e[0].overlap),s(Pe,L),s(ke,ce),s(ke,pe),s(pe,ge),s(ge,Me),s(ge,qe),s(ge,je),s(ge,ml),s(pe,hl),s(pe,Le),s(Le,jt),s(Le,vl),s(Le,Lt),s(Le,gl),s(pe,bl),s(pe,Te),s(Te,Ft),s(Te,kl),_e&&_e.m(Te,null),s(t,$l),s(t,et),s(et,gt),s(gt,El),s(et,wl),s(et,tt),s(tt,lt),s(lt,_t),s(_t,bt),s(bt,yl),s(_t,zl),s(_t,st),s(st,$e),G($e,e[0].z_tilt),s(st,Il),Q(Fe,st,null),s(lt,Nl),s(lt,ct),s(ct,kt),s(kt,Pl),s(ct,Tl),s(ct,Ve),s(Ve,Ee),G(Ee,e[0].z_obj),s(Ve,Ol),Q(He,Ve,null),s(Ve,Sl),s(Ve,Oe),s(Oe,Ze),s(Ze,dt),s(Oe,Cl),s(Oe,Ct),s(Ct,Dl),s(tt,Vl),s(tt,at),s(at,nt),s(nt,Ae),Ae.checked=e[2],s(nt,Al),s(nt,We),s(We,ot),s(ot,Ul),s(We,Bl),ie&&ie.m(We,null),s(at,Ml),s(at,le),s(le,Xe),s(Xe,ql),s(le,jl),s(le,se),G(se,e[0].z_spacing),s(le,Ll),s(le,Ge),s(Ge,Fl),s(le,Hl),s(le,ae),G(ae,e[0].z_from),s(le,Zl),s(le,Re),s(Re,Wl),s(le,Xl),s(le,ne),G(ne,e[0].z_to),de=!0,Gl||(Yl=[X(n,"input",e[9]),X(I,"input",e[15]),ye(Je.call(null,I,[.01,.99])),X($e,"input",e[16]),ye(Je.call(null,$e,[0,25e3])),X(Ee,"input",e[18]),ye(Je.call(null,Ee,[0,6e4])),X(Ae,"change",e[20]),ye(Rl.call(null,Xe,"Nyquist is 232.")),X(se,"input",e[21]),ye(Je.call(null,se,[1,6e4])),ye(Rl.call(null,Ge,"Multiple of Spacing")),X(ae,"input",e[22]),ye(Je.call(null,ae,[-100,100])),ye(Rl.call(null,Re,"Multiple of Spacing")),X(ne,"input",e[23]),ye(Je.call(null,ne,[-100,100]))],Gl=!0)},p(b,[V]){V&1&&n.value!==b[0].name&&G(n,b[0].name),V&129&&D(n,"invalid",b[7](b[0].name)),b[3]?Y?V&8&&H(Y,1):(Y=ks(b),Y.c(),H(Y,1),Y.m(p,null)):Y&&(Hs(),W(Y,1,1,()=>{Y=null}),Zs()),b[3]?re&&(re.d(1),re=null):re?re.p(b,V):(re=$s(b),re.c(),re.m(l,null));const Ye={};!_&&V&1&&(_=!0,Ye.params=b[0],pl(()=>_=!1)),O.$set(Ye);const Dt={};!q&&V&1&&(q=!0,Dt.params=b[0],pl(()=>q=!1)),S.$set(Dt),V&16&&D($,"opacity-70",b[4].block);const mt={};!ut&&V&1&&(ut=!0,mt.xy=b[0].xy0,pl(()=>ut=!1)),R.$set(mt);const ht={};!pt&&V&1&&(pt=!0,ht.xy=b[0].xy1,pl(()=>pt=!1)),fe.$set(ht),V&1&&ee(I.value)!==b[0].overlap&&G(I,b[0].overlap),(!de||V&2)&&De!==(De=b[1].width.toFixed(2)+"")&&he(Me,De),(!de||V&2)&&xe!==(xe=b[1].height.toFixed(2)+"")&&he(je,xe),(!de||V&2)&&Tt!==(Tt=b[1].n_cols+"")&&he(jt,Tt),(!de||V&2)&&Ot!==(Ot=b[1].n_bundles+"")&&he(Lt,Ot),(!de||V&2)&&St!==(St=zt(b[1].time)+"")&&he(Ft,St),b[2]?_e||(_e=Es(),_e.c(),_e.m(Te,null)):_e&&(_e.d(1),_e=null),V&4&&D(Te,"font-semibold",!b[2]),V&8&&D(C,"-mt-20",b[3]),V&1&&ee($e.value)!==b[0].z_tilt&&G($e,b[0].z_tilt);const Vt={};V&16&&(Vt.disabled=b[4].block),Fe.$set(Vt),V&1&&ee(Ee.value)!==b[0].z_obj&&G(Ee,b[0].z_obj);const vt={};V&16&&(vt.disabled=b[4].block),He.$set(vt),(!de||V&16&&Ht!==(Ht=b[4].block))&&(Oe.disabled=Ht),(!de||V&16&&Zt!==(Zt=b[4].block==="capturing"))&&(Ae.disabled=Zt),V&4&&(Ae.checked=b[2]),V&4&&D(ot,"font-medium",b[2]),b[2]?ie?ie.p(b,V):(ie=ws(b),ie.c(),ie.m(We,null)):ie&&(ie.d(1),ie=null),V&20&&D(Xe,"span-disabled",b[4].block||!b[2]),(!de||V&20&&Wt!==(Wt=b[4].block||!b[2]))&&(se.disabled=Wt),V&1&&ee(se.value)!==b[0].z_spacing&&G(se,b[0].z_spacing),V&20&&D(se,"disabled",b[4].block||!b[2]),V&20&&D(Ge,"span-disabled",b[4].block||!b[2]),(!de||V&20&&Xt!==(Xt=b[4].block||!b[2]))&&(ae.disabled=Xt),V&1&&ee(ae.value)!==b[0].z_from&&G(ae,b[0].z_from),V&20&&D(ae,"disabled",b[4].block||!b[2]),V&20&&D(Re,"span-disabled",b[4].block||!b[2]),(!de||V&20&&Gt!==(Gt=b[4].block||!b[2]))&&(ne.disabled=Gt),V&1&&ee(ne.value)!==b[0].z_to&&G(ne,b[0].z_to),V&20&&D(ne,"disabled",b[4].block||!b[2])},i(b){de||(H(Y),H(O.$$.fragment,b),H(S.$$.fragment,b),H(R.$$.fragment,b),H(fe.$$.fragment,b),H(Fe.$$.fragment,b),H(He.$$.fragment,b),de=!0)},o(b){W(Y),W(O.$$.fragment,b),W(S.$$.fragment,b),W(R.$$.fragment,b),W(fe.$$.fragment,b),W(Fe.$$.fragment,b),W(He.$$.fragment,b),de=!1},d(b){b&&f(t),Y&&Y.d(),re&&re.d(),x(O),x(S),x(R),x(fe),_e&&_e.d(),x(Fe),x(He),ie&&ie.d(),Gl=!1,dl(Yl)}}}function $a(e,t){e&&(e.querySelectorAll("input").forEach(l=>l.disabled=t),e.querySelectorAll("select").forEach(l=>l.disabled=t),e.querySelectorAll("button").forEach(l=>l.disabled=t))}function zt(e){const t=new Date(e*1e3).toISOString();return e>3600?`${t.substring(11,19)} hrs`:`${t.substring(14,19)} mins`}function Ea(e,t,l){let a,r,o;ze(e,Mt,A=>l(4,a=A)),ze(e,Ke,A=>l(24,r=A)),ze(e,rt,A=>l(5,o=A));let{inAuto:p=!0}=t,{params:n}=t,{stats:g={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=t,{z_stack:u=!1}=t,{fc_:z=0}=t;function h(){Se(Ke,r.image_params.xy0=n.xy0,r),Se(Ke,r.image_params.xy1=n.xy1,r)}function v(A){if(!A)return!0;if(!p)return!1;const Ce=r.exps[z].cmds.filter(Ie=>Ie.cmd.op==="takeimage").map(Ie=>Ie.cmd.name);return Xs(Ce)[A]>1}function y(){n.name=this.value,l(0,n)}function N(){n.path=this.value,l(0,n)}function $(A){n=A,l(0,n)}function O(A){n=A,l(0,n)}function _(A){e.$$.not_equal(n.xy0,A)&&(n.xy0=A,l(0,n))}function k(A){e.$$.not_equal(n.xy1,A)&&(n.xy1=A,l(0,n))}function S(){n.overlap=ee(this.value),l(0,n)}function q(){n.z_tilt=ee(this.value),l(0,n)}const M=()=>Se(rt,o={move:{z_tilt:n.z_tilt}},o);function C(){n.z_obj=ee(this.value),l(0,n)}const U=()=>Se(rt,o={move:{z_obj:n.z_obj}},o);function j(){u=this.checked,l(2,u)}function F(){n.z_spacing=ee(this.value),l(0,n)}function Z(){n.z_from=ee(this.value),l(0,n)}function te(){n.z_to=ee(this.value),l(0,n)}return e.$$set=A=>{"inAuto"in A&&l(3,p=A.inAuto),"params"in A&&l(0,n=A.params),"stats"in A&&l(1,g=A.stats),"z_stack"in A&&l(2,u=A.z_stack),"fc_"in A&&l(8,z=A.fc_)},e.$$.update=()=>{e.$$.dirty&16&&$a(document.getElementById("control"),a.block),e.$$.dirty&1&&l(1,g.height=Math.max(n.xy1[1],n.xy0[1])-Math.min(n.xy1[1],n.xy0[1]),g),e.$$.dirty&1&&l(1,g.width=Math.max(n.xy1[0],n.xy0[0])-Math.min(n.xy1[0],n.xy0[0]),g),e.$$.dirty&3&&l(1,g.n_cols=g.width==0?1:Math.ceil(g.width/(.768*(1-n.overlap))),g),e.$$.dirty&2&&l(1,g.n_bundles=Math.ceil(g.height/.048),g),e.$$.dirty&2&&l(1,g.time=g.n_bundles*g.n_cols/20,g),e.$$.dirty&1&&l(1,g.n_z=Math.abs(n.z_to-n.z_from)+1,g)},[n,g,u,p,a,o,h,v,z,y,N,$,O,_,k,S,q,M,C,U,j,F,Z,te]}class Ta extends It{constructor(t){super();Nt(this,t,Ea,ka,Pt,{inAuto:3,params:0,stats:1,z_stack:2,fc_:8})}}export{Pa as P,Ta as T,Na as a};
