var N=Object.defineProperty;var w=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var _=(e,s,n)=>s in e?N(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,c=(e,s)=>{for(var n in s||(s={}))O.call(s,n)&&_(e,n,s[n]);if(w)for(var n of w(s))y.call(s,n)&&_(e,n,s[n]);return e};import"./vendor-d2ee3b07.js";const J={name:"",port:1,v_pull:100,v_prime:200,v_push:2e3,wait:26},b={pump:{reagent:"",volume:0,op:"pump"},prime:{reagent:"",volume:0,op:"prime"},temp:{temp:25,op:"temp"},hold:{time:0,temp:25,op:"hold"},move:{xy:[0,0],op:"move"},image:{xy_start:[0,0],xy_end:[0,0],z_tilt:2e4,channels:[!0,!0,!0,!0],laser_onoff:[!0,!0],lasers:[50,50],autofocus:!0,op:"image"}},d=[2e3,5e3,1e4,3e4,6e4];function u(e,s=void 0,n=o=>o){let o,a,i,m=0;const l=new Set;function h(){const t=m;return m++,d[t>=d.length-1?d.length-1:t]}function f(){i&&clearTimeout(i),o&&(o.close(),o=void 0)}function v(){f(),l.size>0&&(i=setTimeout(()=>p(),h()))}async function p(){return i&&(clearTimeout(i),i=void 0),a||(o=new WebSocket(e),o.onmessage=t=>{l.forEach(r=>{r(n(t.data))})},o.onclose=t=>{v()},a=new Promise((t,r)=>{o&&(o.onerror=g=>{r(g),a=void 0},o.onopen=g=>{m=0,t(!0),a=void 0})}),a)}return{set(t){if(o){const r=typeof t=="object"?()=>o.send(JSON.stringify(t)):()=>o.send(t);o.readyState!==WebSocket.OPEN?p().then(r):r()}l.forEach(r=>{r(t)})},update(t){console.log("update")},subscribe(t){return p(),t(s),l.add(t),()=>{l.delete(t),l.size===0&&f()}}}}let x={x:-1,y:-1,z_tilt:[-1,-1,-1],z_obj:-1,laser_r:-1,laser_g:-1,shutter:!1,moving:!1,msg:""};const S={reagents:[{uid:0,reagent:c({},J)}],cmds:[{uid:0,cmd:c({},b.image)}]},z={n:16,x:0,y:0,z_tilt:19850,z_obj:32e3,laser_r:5,laser_g:5,flowcell:!1,max_uid:2,mode:"automatic",recipes:[c({name:"",flowcell:0},S),c({name:"",flowcell:1},S)]};let T={n:0,img:"",hist:{counts:[10],bin_edges:[0]}};const $=u(`ws://${window.location.hostname}:8000/img`,T,e=>JSON.parse(JSON.parse(e))),D=u(`ws://${window.location.hostname}:8000/status`,x,e=>JSON.parse(JSON.parse(e))),E=u(`ws://${window.location.hostname}:8000/user`,z,e=>JSON.parse(JSON.parse(e))),P=u(`ws://${window.location.hostname}:8000/cmd`,void 0,e=>JSON.parse(JSON.parse(e)));export{S as a,P as c,b as d,$ as i,J as r,D as s,E as u};
