var vs=Object.defineProperty;var ns=Object.getOwnPropertySymbols;var hs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable;var as=(t,l,s)=>l in t?vs(t,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[l]=s,Ll=(t,l)=>{for(var s in l||(l={}))hs.call(l,s)&&as(t,s,l[s]);if(ns)for(var s of ns(l))ms.call(l,s)&&as(t,s,l[s]);return t};import{af as bs,S as tl,i as ll,s as sl,e as u,k as O,O as We,t as h,c as f,a as c,d as o,m as T,P as Ge,h as m,b as n,R as B,g as V,H as e,a0 as $t,T as ee,j as te,M as Fl,U as wl,N as Ct,ag as gs,ah as ks,V as ft,_ as yt,n as Es,o as De,p as ys,q as Ve,F as ws,I as Ps,J as Ns,K as Is,w as ot,x as rt,y as it,B as ut,$ as x,Z as ie,Y as zs,Q as kl,W as El,X as yl}from"./vendor-de2b3913.js";import{u as At,c as wt,s as Os}from"./store-16a70ae1.js";import{S as Ts}from"./spinning-a5be6584.js";import{r as Ss}from"./coords-813c65ab.js";var xt=(t,l,s)=>{t.setAttribute("aria-label",l),t.title="";const a=bs(t,Ll({content:l,delay:[100,0]},s));return{update:p=>a.setProps(Ll({},p)),destroy:()=>a.destroy()}};function Cs(t){let l,s,a,p;return{c(){l=We("svg"),s=We("path"),a=We("path"),p=h(`
          Capture`),this.h()},l(_){l=Ge(_,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var r=c(l);s=Ge(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(o),a=Ge(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(a).forEach(o),r.forEach(o),p=m(_,`
          Capture`),this.h()},h(){n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","2"),n(a,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),n(l,"xmlns","http://www.w3.org/2000/svg"),n(l,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),n(l,"fill","none"),n(l,"viewBox","0 0 24 24"),n(l,"stroke","currentColor")},m(_,r){V(_,l,r),e(l,s),e(l,a),V(_,p,r)},d(_){_&&o(l),_&&o(p)}}}function As(t){let l,s,a,p,_,r;return{c(){l=We("svg"),s=We("path"),a=We("path"),p=O(),_=u("p"),r=h("Stop"),this.h()},l(i){l=Ge(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=c(l);s=Ge(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(o),a=Ge(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(a).forEach(o),g.forEach(o),p=T(i),_=f(i,"P",{class:!0});var v=c(_);r=m(v,"Stop"),v.forEach(o),this.h()},h(){n(s,"stroke-linecap","round"),n(s,"stroke-linejoin","round"),n(s,"stroke-width","2"),n(s,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","2"),n(a,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),n(l,"xmlns","http://www.w3.org/2000/svg"),n(l,"class","w-6 h-6 mr-1"),n(l,"fill","none"),n(l,"viewBox","0 0 24 24"),n(l,"stroke","currentColor"),n(_,"class","flex-grow")},m(i,g){V(i,l,g),e(l,s),e(l,a),V(i,p,g),V(i,_,g),e(_,r)},d(i){i&&o(l),i&&o(p),i&&o(_)}}}function Ds(t){let l,s,a,p,_,r,i,g,v,S,k,I,w,A,z,N,d,P,L=t[1][0]+"",Z,W,F,U=t[0].n_bundles+"",j,E,H,M,G,R,ne,Q=t[1][1]+"",le,ce,ke,$=t[0].n_z+"",me,Se,Be,Y,J,de,ae,ue=t[1][2]+"",_e,fe,y,C=t[0].n_cols+"",oe,Me,re,K,se,Ee,je=t[0].n_bundles*t[0].n_cols/10+"",be,bt,Pt,Ue,Ce,Re=t[0].n_bundles*t[0].n_cols/10+"",pt,Nt,ct,Ye,Je,It,ye;function gt(X,q){return X[2].block?As:Cs}let dt=gt(t),Ae=dt(t);return{c(){l=u("span"),s=u("div"),a=u("button"),p=u("div"),Ae.c(),_=O(),r=u("button"),i=u("div"),g=We("svg"),v=We("path"),S=h(`
        Preview`),I=O(),w=u("content"),A=u("div"),z=u("section"),N=u("div"),d=u("span"),P=u("span"),Z=h(L),W=h(`
            /
            `),F=u("span"),j=h(U),E=h(`
        Bundles taken`),H=O(),M=u("section"),G=u("div"),R=u("span"),ne=u("span"),le=h(Q),ce=h(`
            /
            `),ke=u("span"),me=h($),Se=h(`
        Z-steps taken`),Be=O(),Y=u("section"),J=u("div"),de=u("span"),ae=u("span"),_e=h(ue),fe=h(`
            /
            `),y=u("span"),oe=h(C),Me=h(`
        Columns taken`),re=O(),K=u("section"),se=u("span"),Ee=h("Elapsed time: "),be=h(je),bt=h(" s"),Pt=O(),Ue=u("span"),Ce=h("Total time: "),pt=h(Re),Nt=h(" s"),ct=O(),Ye=u("div"),Je=u("progress"),this.h()},l(X){l=f(X,"SPAN",{class:!0});var q=c(l);s=f(q,"DIV",{class:!0});var Ke=c(s);a=f(Ke,"BUTTON",{type:!0,class:!0});var Dt=c(a);p=f(Dt,"DIV",{class:!0});var Vt=c(p);Ae.l(Vt),Vt.forEach(o),Dt.forEach(o),_=T(Ke),r=f(Ke,"BUTTON",{type:!0,id:!0,class:!0});var Qe=c(r);i=f(Qe,"DIV",{class:!0});var Le=c(i);g=Ge(Le,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var lt=c(g);v=Ge(lt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(v).forEach(o),lt.forEach(o),S=m(Le,`
        Preview`),Le.forEach(o),Qe.forEach(o),Ke.forEach(o),I=T(q),w=f(q,"CONTENT",{class:!0});var $e=c(w);A=f($e,"DIV",{class:!0});var Fe=c(A);z=f(Fe,"SECTION",{class:!0});var zt=c(z);N=f(zt,"DIV",{class:!0});var xe=c(N);d=f(xe,"SPAN",{class:!0});var we=c(d);P=f(we,"SPAN",{class:!0});var Bt=c(P);Z=m(Bt,L),Bt.forEach(o),W=m(we,`
            /
            `),F=f(we,"SPAN",{class:!0});var st=c(F);j=m(st,U),st.forEach(o),we.forEach(o),xe.forEach(o),E=m(zt,`
        Bundles taken`),zt.forEach(o),H=T(Fe),M=f(Fe,"SECTION",{class:!0});var Ot=c(M);G=f(Ot,"DIV",{class:!0});var nt=c(G);R=f(nt,"SPAN",{class:!0});var et=c(R);ne=f(et,"SPAN",{class:!0});var Mt=c(ne);le=m(Mt,Q),Mt.forEach(o),ce=m(et,`
            /
            `),ke=f(et,"SPAN",{class:!0});var jt=c(ke);me=m(jt,$),jt.forEach(o),et.forEach(o),nt.forEach(o),Se=m(Ot,`
        Z-steps taken`),Ot.forEach(o),Be=T(Fe),Y=f(Fe,"SECTION",{class:!0});var Pe=c(Y);J=f(Pe,"DIV",{class:!0});var qe=c(J);de=f(qe,"SPAN",{class:!0});var kt=c(de);ae=f(kt,"SPAN",{class:!0});var at=c(ae);_e=m(at,ue),at.forEach(o),fe=m(kt,`
            /
            `),y=f(kt,"SPAN",{class:!0});var Ut=c(y);oe=m(Ut,C),Ut.forEach(o),kt.forEach(o),qe.forEach(o),Me=m(Pe,`
        Columns taken`),Pe.forEach(o),re=T(Fe),K=f(Fe,"SECTION",{class:!0});var Ne=c(K);se=f(Ne,"SPAN",{class:!0});var Ie=c(se);Ee=m(Ie,"Elapsed time: "),be=m(Ie,je),bt=m(Ie," s"),Ie.forEach(o),Pt=T(Ne),Ue=f(Ne,"SPAN",{class:!0});var Ze=c(Ue);Ce=m(Ze,"Total time: "),pt=m(Ze,Re),Nt=m(Ze," s"),Ze.forEach(o),Ne.forEach(o),Fe.forEach(o),ct=T($e),Ye=f($e,"DIV",{class:!0});var Lt=c(Ye);Je=f(Lt,"PROGRESS",{class:!0}),c(Je).forEach(o),Lt.forEach(o),$e.forEach(o),q.forEach(o),this.h()},h(){n(p,"class","flex items-center h-12 text-lg"),n(a,"type","button"),n(a,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-130q06g"),B(a,"focus:ring-blue-300",!t[2].block),B(a,"focus:ring-orange-300",t[2].block),B(a,"start",!t[2].block),B(a,"stop",t[2].block),n(v,"stroke-linecap","round"),n(v,"stroke-linejoin","round"),n(v,"stroke-width","2"),n(v,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),n(g,"xmlns","http://www.w3.org/2000/svg"),n(g,"class","w-6 h-6 mr-1"),n(g,"fill","none"),n(g,"viewBox","0 0 24 24"),n(g,"stroke","currentColor"),n(i,"class","flex items-center"),n(r,"type","button"),n(r,"id","preview"),n(r,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-130q06g"),r.disabled=k=Boolean(t[2].block),n(s,"class","grid grid-flow-row w-36"),n(P,"class","font-mono"),n(F,"class","w-32 px-2 font-mono text-4xl font-bold "),n(d,"class","text-4xl font-bold"),n(N,"class","flex items-center"),n(z,"class","flex flex-col gap-y-1"),n(ne,"class","font-mono"),n(ke,"class","w-32 px-2 font-mono text-4xl font-bold "),n(R,"class","text-4xl font-bold"),n(G,"class","flex items-center"),n(M,"class","flex flex-col gap-y-1"),n(ae,"class","font-mono"),n(y,"class","w-32 px-2 font-mono text-4xl font-bold "),n(de,"class","text-4xl font-bold"),n(J,"class","flex items-center"),n(Y,"class","flex flex-col gap-y-1"),n(se,"class","text-lg font-medium"),n(Ue,"class","text-lg font-medium"),n(K,"class","flex flex-col"),n(A,"class","grid max-w-4xl grid-cols-4 mt-1"),n(Je,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-130q06g"),Je.value=t[3],n(Ye,"class","mt-1"),n(w,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),n(l,"class","z-40 flex w-full space-x-2")},m(X,q){V(X,l,q),e(l,s),e(s,a),e(a,p),Ae.m(p,null),e(s,_),e(s,r),e(r,i),e(i,g),e(g,v),e(i,S),e(l,I),e(l,w),e(w,A),e(A,z),e(z,N),e(N,d),e(d,P),e(P,Z),e(d,W),e(d,F),e(F,j),e(z,E),e(A,H),e(A,M),e(M,G),e(G,R),e(R,ne),e(ne,le),e(R,ce),e(R,ke),e(ke,me),e(M,Se),e(A,Be),e(A,Y),e(Y,J),e(J,de),e(de,ae),e(ae,_e),e(de,fe),e(de,y),e(y,oe),e(Y,Me),e(A,re),e(A,K),e(K,se),e(se,Ee),e(se,be),e(se,bt),e(K,Pt),e(K,Ue),e(Ue,Ce),e(Ue,pt),e(Ue,Nt),e(w,ct),e(w,Ye),e(Ye,Je),It||(ye=[$t(xt.call(null,a,"Take image and save.")),ee(a,"click",t[5]),$t(xt.call(null,r,"Take a 16-bundle image based on the current position without saving.")),ee(r,"click",t[6])],It=!0)},p(X,[q]){dt!==(dt=gt(X))&&(Ae.d(1),Ae=dt(X),Ae&&(Ae.c(),Ae.m(p,null))),q&4&&B(a,"focus:ring-blue-300",!X[2].block),q&4&&B(a,"focus:ring-orange-300",X[2].block),q&4&&B(a,"start",!X[2].block),q&4&&B(a,"stop",X[2].block),q&4&&k!==(k=Boolean(X[2].block))&&(r.disabled=k),q&2&&L!==(L=X[1][0]+"")&&te(Z,L),q&1&&U!==(U=X[0].n_bundles+"")&&te(j,U),q&2&&Q!==(Q=X[1][1]+"")&&te(le,Q),q&1&&$!==($=X[0].n_z+"")&&te(me,$),q&2&&ue!==(ue=X[1][2]+"")&&te(_e,ue),q&1&&C!==(C=X[0].n_cols+"")&&te(oe,C),q&1&&je!==(je=X[0].n_bundles*X[0].n_cols/10+"")&&te(be,je),q&1&&Re!==(Re=X[0].n_bundles*X[0].n_cols/10+"")&&te(pt,Re),q&8&&(Je.value=X[3])},i:Fl,o:Fl,d(X){X&&o(l),Ae.d(),It=!1,wl(ye)}}}function Vs(t,l,s){let a,p,_;Ct(t,At,k=>s(2,a=k)),Ct(t,wt,k=>s(7,p=k));let r=[0,0,0],{stats:i}=l;const g=gs(0,{duration:400,easing:ks});Ct(t,g,k=>s(3,_=k));function v(){a.block==="capturing"?ft(wt,p="stop",p):(ft(wt,p="capture",p),ft(At,a.block="capturing",a))}function S(){a.block==="previewing"?ft(wt,p="stop",p):(ft(wt,p="preview",p),ft(At,a.block="previewing",a))}return t.$$set=k=>{"stats"in k&&s(0,i=k.stats)},t.$$.update=()=>{t.$$.dirty&131&&(p==null?void 0:p.step)&&(s(1,r=p.step),g.set((r[2]*(i.n_z*i.n_bundles)+r[1]*i.n_bundles+r[0])/(i.n_bundles*i.n_cols*i.n_z)))},[i,r,a,_,g,v,S,p]}class ln extends tl{constructor(l){super();ll(this,l,Vs,Ds,sl,{stats:0})}}function Bs(t){let l,s;const a=t[5].default,p=ws(a,t,t[4],null),_=p||js();return{c(){l=u("div"),_&&_.c(),this.h()},l(r){l=f(r,"DIV",{class:!0});var i=c(l);_&&_.l(i),i.forEach(o),this.h()},h(){n(l,"class","mx-auto")},m(r,i){V(r,l,i),_&&_.m(l,null),s=!0},p(r,i){p&&p.p&&(!s||i&16)&&Ps(p,a,r,r[4],s?Is(a,r[4],i,null):Ns(r[4]),null)},i(r){s||(Ve(_,r),s=!0)},o(r){De(_,r),s=!1},d(r){r&&o(l),_&&_.d(r)}}}function Ms(t){let l,s,a;return s=new Ts({props:{color:"black"}}),{c(){l=u("div"),ot(s.$$.fragment),this.h()},l(p){l=f(p,"DIV",{class:!0});var _=c(l);rt(s.$$.fragment,_),_.forEach(o),this.h()},h(){n(l,"class","mx-auto opacity-40")},m(p,_){V(p,l,_),it(s,l,null),a=!0},p:Fl,i(p){a||(Ve(s.$$.fragment,p),a=!0)},o(p){De(s.$$.fragment,p),a=!1},d(p){p&&o(l),ut(s)}}}function js(t){let l;return{c(){l=h("Go")},l(s){l=m(s,"Go")},m(s,a){V(s,l,a)},d(s){s&&o(l)}}}function Us(t){let l,s,a,p,_;const r=[Ms,Bs],i=[];function g(v,S){return v[1]?0:1}return s=g(t),a=i[s]=r[s](t),{c(){l=u("button"),a.c(),this.h()},l(v){l=f(v,"BUTTON",{type:!0,class:!0,tabindex:!0});var S=c(l);a.l(S),S.forEach(o),this.h()},h(){n(l,"type","button"),n(l,"class",p=yt(`px-4 py-1 text-sm font-medium blue rounded-lg white-button ${t[3][t[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500`)+" svelte-1rnzpdo"),n(l,"tabindex","0"),l.disabled=t[0]},m(v,S){V(v,l,S),i[s].m(l,null),_=!0},p(v,[S]){let k=s;s=g(v),s===k?i[s].p(v,S):(Es(),De(i[k],1,1,()=>{i[k]=null}),ys(),a=i[s],a?a.p(v,S):(a=i[s]=r[s](v),a.c()),Ve(a,1),a.m(l,null)),(!_||S&4&&p!==(p=yt(`px-4 py-1 text-sm font-medium blue rounded-lg white-button ${v[3][v[2]]} disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500`)+" svelte-1rnzpdo"))&&n(l,"class",p),(!_||S&1)&&(l.disabled=v[0])},i(v){_||(Ve(a),_=!0)},o(v){De(a),_=!1},d(v){v&&o(l),i[s].d()}}}function Ls(t,l,s){let{$$slots:a={},$$scope:p}=l,{disabled:_=!1}=l,{spin:r=!1}=l,{color:i="blue"}=l;const g={blue:"text-blue-800 border-blue-300 hover:bg-blue-100 active:bg-blue-200 bg-blue-50",indigo:"text-indigo-800 border-indigo-300 hover:bg-indigo-100 active:bg-indigo-200 bg-indigo-50"};return t.$$set=v=>{"disabled"in v&&s(0,_=v.disabled),"spin"in v&&s(1,r=v.spin),"color"in v&&s(2,i=v.color),"$$scope"in v&&s(4,p=v.$$scope)},[_,r,i,g,p,a]}class el extends tl{constructor(l){super();ll(this,l,Ls,Us,sl,{disabled:0,spin:1,color:2})}}function Fs(t){let l,s,a,p,_,r,i,g,v,S,k,I,w,A,z,N,d,P,L,Z,W,F,U,j;return z=new el({props:{disabled:t[1].block}}),z.$on("click",t[8]),{c(){l=u("div"),s=u("div"),a=u("span"),p=h("X"),_=O(),r=u("input"),g=O(),v=u("span"),S=h("Y"),k=O(),I=u("input"),A=O(),ot(z.$$.fragment),N=O(),d=u("button"),P=We("svg"),L=We("path"),Z=h(`
    Current`),this.h()},l(E){l=f(E,"DIV",{class:!0});var H=c(l);s=f(H,"DIV",{class:!0});var M=c(s);a=f(M,"SPAN",{class:!0});var G=c(a);p=m(G,"X"),G.forEach(o),_=T(M),r=f(M,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),g=T(M),v=f(M,"SPAN",{class:!0});var R=c(v);S=m(R,"Y"),R.forEach(o),k=T(M),I=f(M,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),M.forEach(o),A=T(H),rt(z.$$.fragment,H),N=T(H),d=f(H,"BUTTON",{type:!0,class:!0});var ne=c(d);P=Ge(ne,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Q=c(P);L=Ge(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(L).forEach(o),Q.forEach(o),Z=m(ne,`
    Current`),ne.forEach(o),H.forEach(o),this.h()},h(){n(a,"class","flex items-center border-l rounded-l-lg color-group svelte-awp8a4"),B(a,"span-disabled",t[1].block),n(r,"type","number"),n(r,"min","-5"),n(r,"max","30"),n(r,"step","0.01"),n(r,"class","z-10 h-10 text-center rounded-none pretty w-28"),r.disabled=i=t[1].block,n(v,"class","flex items-center color-group svelte-awp8a4"),B(v,"span-disabled",t[1].block),n(I,"type","number"),n(I,"min","-5"),n(I,"max","80"),n(I,"step","0.01"),n(I,"class","z-10 h-10 text-center rounded-l-none rounded-r-lg pretty w-28"),I.disabled=w=t[1].block,n(s,"class","flex font-medium"),n(L,"stroke-linecap","round"),n(L,"stroke-linejoin","round"),n(L,"stroke-width","2"),n(L,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),n(P,"xmlns","http://www.w3.org/2000/svg"),n(P,"class","w-5 h-5 mr-1"),n(P,"fill","none"),n(P,"viewBox","0 0 24 24"),n(P,"stroke","currentColor"),n(d,"type","button"),n(d,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),d.disabled=W=t[1].block,n(l,"class","flex gap-x-2")},m(E,H){V(E,l,H),e(l,s),e(s,a),e(a,p),e(s,_),e(s,r),x(r,t[0][0]),e(s,g),e(s,v),e(v,S),e(s,k),e(s,I),x(I,t[0][1]),e(l,A),it(z,l,null),e(l,N),e(l,d),e(d,P),e(P,L),e(d,Z),F=!0,U||(j=[ee(r,"input",t[4]),ee(r,"change",t[5]),ee(I,"input",t[6]),ee(I,"change",t[7]),ee(d,"click",t[3])],U=!0)},p(E,[H]){H&2&&B(a,"span-disabled",E[1].block),(!F||H&2&&i!==(i=E[1].block))&&(r.disabled=i),H&1&&ie(r.value)!==E[0][0]&&x(r,E[0][0]),H&2&&B(v,"span-disabled",E[1].block),(!F||H&2&&w!==(w=E[1].block))&&(I.disabled=w),H&1&&ie(I.value)!==E[0][1]&&x(I,E[0][1]);const M={};H&2&&(M.disabled=E[1].block),z.$set(M),(!F||H&2&&W!==(W=E[1].block))&&(d.disabled=W)},i(E){F||(Ve(z.$$.fragment,E),F=!0)},o(E){De(z.$$.fragment,E),F=!1},d(E){E&&o(l),ut(z),U=!1,wl(j)}}}function qs(t,l,s){let a,p;Ct(t,Os,w=>s(9,a=w)),Ct(t,At,w=>s(1,p=w));let{xy:_=[-1,-1]}=l;const r=zs();function i(){const{x:w,y:A}=Ss(p.image_params.fc,a.x,a.y);s(0,_[0]=Math.round((w+Number.EPSILON)*100)/100,_),s(0,_[1]=Math.round((A+Number.EPSILON)*100)/100,_)}function g(){_[0]=ie(this.value),s(0,_)}const v=()=>r("change");function S(){_[1]=ie(this.value),s(0,_)}const k=()=>r("change"),I=()=>r("go");return t.$$set=w=>{"xy"in w&&s(0,_=w.xy)},[_,p,r,i,g,v,S,k,I]}class os extends tl{constructor(l){super();ll(this,l,qs,Fs,sl,{xy:0})}}function Zs(t){let l;return{c(){l=h("Set")},l(s){l=m(s,"Set")},m(s,a){V(s,l,a)},d(s){s&&o(l)}}}function Hs(t){let l,s,a,p,_,r,i,g,v,S,k,I,w,A,z,N;return{c(){l=u("option"),s=h("Open"),a=u("option"),p=h("0.2"),_=u("option"),r=h("0.5"),i=u("option"),g=h("0.6"),v=u("option"),S=h("1.0"),k=u("option"),I=h("2.4"),w=u("option"),A=h("4.0"),z=u("option"),N=h("Closed"),this.h()},l(d){l=f(d,"OPTION",{});var P=c(l);s=m(P,"Open"),P.forEach(o),a=f(d,"OPTION",{});var L=c(a);p=m(L,"0.2"),L.forEach(o),_=f(d,"OPTION",{});var Z=c(_);r=m(Z,"0.5"),Z.forEach(o),i=f(d,"OPTION",{});var W=c(i);g=m(W,"0.6"),W.forEach(o),v=f(d,"OPTION",{});var F=c(v);S=m(F,"1.0"),F.forEach(o),k=f(d,"OPTION",{});var U=c(k);I=m(U,"2.4"),U.forEach(o),w=f(d,"OPTION",{});var j=c(w);A=m(j,"4.0"),j.forEach(o),z=f(d,"OPTION",{});var E=c(z);N=m(E,"Closed"),E.forEach(o),this.h()},h(){l.__value="Open",l.value=l.__value,a.__value="0.2",a.value=a.__value,_.__value="0.5",_.value=_.__value,i.__value="0.6",i.value=i.__value,v.__value="1.0",v.value=v.__value,k.__value="2.4",k.value=k.__value,w.__value="4.0",w.value=w.__value,z.__value="Closed",z.value=z.__value},m(d,P){V(d,l,P),e(l,s),V(d,a,P),e(a,p),V(d,_,P),e(_,r),V(d,i,P),e(i,g),V(d,v,P),e(v,S),V(d,k,P),e(k,I),V(d,w,P),e(w,A),V(d,z,P),e(z,N)},d(d){d&&o(l),d&&o(a),d&&o(_),d&&o(i),d&&o(v),d&&o(k),d&&o(w),d&&o(z)}}}function Xs(t){let l,s,a,p,_,r,i,g,v,S,k,I,w,A,z,N;return{c(){l=u("option"),s=h("Open"),a=u("option"),p=h("1.0"),_=u("option"),r=h("2.0"),i=u("option"),g=h("3.5"),v=u("option"),S=h("3.8"),k=u("option"),I=h("4.0"),w=u("option"),A=h("4.5"),z=u("option"),N=h("Closed"),this.h()},l(d){l=f(d,"OPTION",{});var P=c(l);s=m(P,"Open"),P.forEach(o),a=f(d,"OPTION",{});var L=c(a);p=m(L,"1.0"),L.forEach(o),_=f(d,"OPTION",{});var Z=c(_);r=m(Z,"2.0"),Z.forEach(o),i=f(d,"OPTION",{});var W=c(i);g=m(W,"3.5"),W.forEach(o),v=f(d,"OPTION",{});var F=c(v);S=m(F,"3.8"),F.forEach(o),k=f(d,"OPTION",{});var U=c(k);I=m(U,"4.0"),U.forEach(o),w=f(d,"OPTION",{});var j=c(w);A=m(j,"4.5"),j.forEach(o),z=f(d,"OPTION",{});var E=c(z);N=m(E,"Closed"),E.forEach(o),this.h()},h(){l.__value="Open",l.value=l.__value,a.__value="1.0",a.value=a.__value,_.__value="2.0",_.value=_.__value,i.__value="3.5",i.value=i.__value,v.__value="3.8",v.value=v.__value,k.__value="4.0",k.value=k.__value,w.__value="4.5",w.value=w.__value,z.__value="Closed",z.value=z.__value},m(d,P){V(d,l,P),e(l,s),V(d,a,P),e(a,p),V(d,_,P),e(_,r),V(d,i,P),e(i,g),V(d,v,P),e(v,S),V(d,k,P),e(k,I),V(d,w,P),e(w,A),V(d,z,P),e(z,N)},d(d){d&&o(l),d&&o(a),d&&o(_),d&&o(i),d&&o(v),d&&o(k),d&&o(w),d&&o(z)}}}function Ws(t){let l,s,a,p,_,r,i,g=(Boolean(t[1])?660:532)+"",v,S,k,I,w,A,z,N,d,P,L,Z,W=2*t[1]+"",F,U,j,E,H,M,G=2*t[1]+1+"",R,ne,Q,le,ce,ke,$,me,Se=(Number(t[0].od[t[1]]!=-1)*t[0].lasers[t[1]]*Math.pow(10,-t[0].od[t[1]])).toFixed(4)+"",Be,Y,J,de,ae;z=new el({props:{$$slots:{default:[Zs]},$$scope:{ctx:t}}});function ue(y,C){return y[1]==0?Xs:Hs}let _e=ue(t),fe=_e(t);return{c(){l=u("p"),s=u("span"),a=u("label"),p=u("input"),r=O(),i=u("div"),v=h(g),S=h(" nm"),k=O(),I=u("input"),A=h(`
    mW
    `),ot(z.$$.fragment),N=O(),d=u("label"),P=u("input"),Z=h(`
    Channel `),F=h(W),U=O(),j=u("label"),E=u("input"),M=h(`
    Channel `),R=h(G),ne=O(),Q=u("span"),le=h(`Filter OD
    `),ce=u("select"),fe.c(),ke=O(),$=u("p"),me=h("Effective: "),Be=h(Se),Y=h(" mW"),this.h()},l(y){l=f(y,"P",{class:!0});var C=c(l);s=f(C,"SPAN",{class:!0});var oe=c(s);a=f(oe,"LABEL",{});var Me=c(a);p=f(Me,"INPUT",{type:!0,class:!0}),r=T(Me),i=f(Me,"DIV",{class:!0});var re=c(i);v=m(re,g),S=m(re," nm"),re.forEach(o),Me.forEach(o),k=T(oe),I=f(oe,"INPUT",{type:!0,class:!0}),A=m(oe,`
    mW
    `),rt(z.$$.fragment,oe),oe.forEach(o),N=T(C),d=f(C,"LABEL",{class:!0});var K=c(d);P=f(K,"INPUT",{type:!0,class:!0}),Z=m(K,`
    Channel `),F=m(K,W),K.forEach(o),U=T(C),j=f(C,"LABEL",{class:!0});var se=c(j);E=f(se,"INPUT",{type:!0,class:!0}),M=m(se,`
    Channel `),R=m(se,G),se.forEach(o),ne=T(C),Q=f(C,"SPAN",{class:!0});var Ee=c(Q);le=m(Ee,`Filter OD
    `),ce=f(Ee,"SELECT",{class:!0});var je=c(ce);fe.l(je),je.forEach(o),ke=T(Ee),$=f(Ee,"P",{class:!0});var be=c($);me=m(be,"Effective: "),Be=m(be,Se),Y=m(be," mW"),be.forEach(o),Ee.forEach(o),C.forEach(o),this.h()},h(){n(p,"type","checkbox"),n(p,"class",_=yt(`rounded mr-1 ${t[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"),n(i,"class","inline font-semibold"),B(i,"text-green-800",t[0].laser_onoff[t[1]]&&!t[1]),B(i,"text-red-800",t[0].laser_onoff[t[1]]&&t[1]),n(I,"type","number"),n(I,"class","w-20 h-8 pretty"),I.disabled=w=!t[0].laser_onoff[t[1]],B(I,"pretty-disabled",!t[0].laser_onoff[0]),n(s,"class","flex items-center gap-x-2"),B(s,"text-gray-400",!t[0].laser_onoff[t[1]]),n(P,"type","checkbox"),n(P,"class",L=yt(`mr-1 rounded ${t[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"),n(d,"class","rounded-lg channel ring-red-500 svelte-6ipz4o"),B(d,"text-gray-400",!t[0].channels[2*t[1]]),n(E,"type","checkbox"),n(E,"class",H=yt(`mr-1 rounded ${t[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"),n(j,"class","channel svelte-6ipz4o"),B(j,"text-gray-400",!t[0].channels[2*t[1]+1]),n(ce,"class","py-1 text-sm border-gray-400 rounded-lg disabled:border-gray-300"),n($,"class","ml-3 text-sm font-medium"),n(Q,"class","ml-8 font-normal opacity-85"),n(l,"class","flex flex-col")},m(y,C){V(y,l,C),e(l,s),e(s,a),e(a,p),p.checked=t[0].laser_onoff[t[1]],e(a,r),e(a,i),e(i,v),e(i,S),e(s,k),e(s,I),x(I,t[0].lasers[t[1]]),e(s,A),it(z,s,null),e(l,N),e(l,d),e(d,P),P.checked=t[0].channels[2*t[1]],e(d,Z),e(d,F),e(l,U),e(l,j),e(j,E),E.checked=t[0].channels[2*t[1]+1],e(j,M),e(j,R),e(l,ne),e(l,Q),e(Q,le),e(Q,ce),fe.m(ce,null),e(Q,ke),e(Q,$),e($,me),e($,Be),e($,Y),J=!0,de||(ae=[ee(p,"change",t[3]),ee(I,"input",t[4]),ee(P,"change",t[5]),ee(E,"change",t[6]),ee(ce,"change",t[2])],de=!0)},p(y,[C]){(!J||C&2&&_!==(_=yt(`rounded mr-1 ${y[1]?"text-red-600 rounded focus:ring-red-300":"text-lime-500 focus:ring-lime-300"}`)+" svelte-6ipz4o"))&&n(p,"class",_),C&3&&(p.checked=y[0].laser_onoff[y[1]]),(!J||C&2)&&g!==(g=(Boolean(y[1])?660:532)+"")&&te(v,g),C&3&&B(i,"text-green-800",y[0].laser_onoff[y[1]]&&!y[1]),C&3&&B(i,"text-red-800",y[0].laser_onoff[y[1]]&&y[1]),(!J||C&3&&w!==(w=!y[0].laser_onoff[y[1]]))&&(I.disabled=w),C&3&&ie(I.value)!==y[0].lasers[y[1]]&&x(I,y[0].lasers[y[1]]),C&1&&B(I,"pretty-disabled",!y[0].laser_onoff[0]);const oe={};C&128&&(oe.$$scope={dirty:C,ctx:y}),z.$set(oe),C&3&&B(s,"text-gray-400",!y[0].laser_onoff[y[1]]),(!J||C&2&&L!==(L=yt(`mr-1 rounded ${y[1]?"text-rose-700 focus:ring-rose-500":"text-green-500 focus:ring-green-300"}`)+" svelte-6ipz4o"))&&n(P,"class",L),C&3&&(P.checked=y[0].channels[2*y[1]]),(!J||C&2)&&W!==(W=2*y[1]+"")&&te(F,W),C&3&&B(d,"text-gray-400",!y[0].channels[2*y[1]]),(!J||C&2&&H!==(H=yt(`mr-1 rounded ${y[1]?"text-amber-900 focus:ring-amber-700":"text-orange-600 rounded focus:ring-orange-300"}`)+" svelte-6ipz4o"))&&n(E,"class",H),C&3&&(E.checked=y[0].channels[2*y[1]+1]),(!J||C&2)&&G!==(G=2*y[1]+1+"")&&te(R,G),C&3&&B(j,"text-gray-400",!y[0].channels[2*y[1]+1]),_e!==(_e=ue(y))&&(fe.d(1),fe=_e(y),fe&&(fe.c(),fe.m(ce,null))),(!J||C&3)&&Se!==(Se=(Number(y[0].od[y[1]]!=-1)*y[0].lasers[y[1]]*Math.pow(10,-y[0].od[y[1]])).toFixed(4)+"")&&te(Be,Se)},i(y){J||(Ve(z.$$.fragment,y),J=!0)},o(y){De(z.$$.fragment,y),J=!1},d(y){y&&o(l),ut(z),fe.d(),de=!1,wl(ae)}}}function Gs(t,l,s){let{params:a}=l,{i:p}=l;function _(S){let k;switch(S.currentTarget.value){case"Open":k=0;break;case"Closed":k=-1;break;default:k=Number(S.currentTarget.value)}s(0,a.od[p]=k,a)}function r(){a.laser_onoff[p]=this.checked,s(0,a)}function i(){a.lasers[p]=ie(this.value),s(0,a)}function g(){a.channels[2*p]=this.checked,s(0,a)}function v(){a.channels[2*p+1]=this.checked,s(0,a)}return t.$$set=S=>{"params"in S&&s(0,a=S.params),"i"in S&&s(1,p=S.i)},[a,p,_,r,i,g,v]}class rs extends tl{constructor(l){super();ll(this,l,Gs,Ws,sl,{params:0,i:1})}}function Rs(t){let l;return{c(){l=h("Preview")},l(s){l=m(s,"Preview")},m(s,a){V(s,l,a)},d(s){s&&o(l)}}}function is(t){let l,s,a,p,_,r;return{c(){l=u("p"),s=h("Image Path"),a=O(),p=u("input"),this.h()},l(i){l=f(i,"P",{class:!0});var g=c(l);s=m(g,"Image Path"),g.forEach(o),a=T(i),p=f(i,"INPUT",{type:!0,class:!0}),this.h()},h(){n(l,"class","text-lg svelte-1m4l8fo"),n(p,"type","text"),n(p,"class","max-w-md mb-4 pretty")},m(i,g){V(i,l,g),e(l,s),V(i,a,g),V(i,p,g),x(p,t[0].path),_||(r=ee(p,"input",t[8]),_=!0)},p(i,g){g&1&&p.value!==i[0].path&&x(p,i[0].path)},d(i){i&&o(l),i&&o(a),i&&o(p),_=!1,r()}}}function us(t){let l;return{c(){l=h("per z-stack.")},l(s){l=m(s,"per z-stack.")},m(s,a){V(s,l,a)},d(s){s&&o(l)}}}function fs(t){let l,s=t[1].n_z+"",a,p,_=t[0].z_obj+t[0].z_from*t[0].z_spacing+"",r,i,g=t[0].z_obj+t[0].z_to*t[0].z_spacing+"",v,S,k,I,w=(t[1].n_z?Wt(t[1].n_z*t[1].time):Wt(t[1].time))+"",A,z;return{c(){l=u("div"),a=h(s),p=h(" Z steps from "),r=h(_),i=h(" to "),v=h(g),S=O(),k=u("div"),I=h("Total time: "),A=h(w),z=h("."),this.h()},l(N){l=f(N,"DIV",{});var d=c(l);a=m(d,s),p=m(d," Z steps from "),r=m(d,_),i=m(d," to "),v=m(d,g),d.forEach(o),S=T(N),k=f(N,"DIV",{class:!0});var P=c(k);I=m(P,"Total time: "),A=m(P,w),z=m(P,"."),P.forEach(o),this.h()},h(){n(k,"class","font-semibold")},m(N,d){V(N,l,d),e(l,a),e(l,p),e(l,r),e(l,i),e(l,v),V(N,S,d),V(N,k,d),e(k,I),e(k,A),e(k,z)},p(N,d){d&2&&s!==(s=N[1].n_z+"")&&te(a,s),d&1&&_!==(_=N[0].z_obj+N[0].z_from*N[0].z_spacing+"")&&te(r,_),d&1&&g!==(g=N[0].z_obj+N[0].z_to*N[0].z_spacing+"")&&te(v,g),d&2&&w!==(w=(N[1].n_z?Wt(N[1].n_z*N[1].time):Wt(N[1].time))+"")&&te(A,w)},d(N){N&&o(l),N&&o(S),N&&o(k)}}}function Ys(t){let l,s,a,p,_,r,i,g,v,S,k,I,w,A,z,N,d,P,L,Z,W,F,U,j,E,H,M,G,R,ne,Q,le,ce,ke,$,me,Se,Be,Y,J,de,ae,ue,_e,fe,y,C,oe,Me,re,K,se=t[1].width.toFixed(2)+"",Ee,je,be=t[1].height.toFixed(2)+"",bt,Pt,Ue,Ce,Re=t[1].n_cols+"",pt,Nt,ct=t[1].n_bundles+"",Ye,Je,It,ye,gt=Wt(t[1].time)+"",dt,Ae,X,q,Ke,Dt,Vt,Qe,Le,lt,$e,Fe,zt,xe,we,Bt,st,Ot,nt,et,Mt,jt,Pe,qe,kt,at,Ut,Ne,Ie,Ze,Lt,Gt,Pl,Nl,tt,Ft,Et,Il,zl,pe,_t,Ol,Tl,ze,nl,Sl,vt,Cl,Al,Oe,al,Dl,ht,Vl,Bl,Te,ol,Ml,He,jl,ql;v=new el({props:{color:"indigo",$$slots:{default:[Rs]},$$scope:{ctx:t}}});let ve=t[3]&&is(t);function ps(b){t[9](b)}let Zl={i:0};t[0]!==void 0&&(Zl.params=t[0]),d=new rs({props:Zl}),kl.push(()=>El(d,"params",ps));function cs(b){t[10](b)}let Hl={i:1};t[0]!==void 0&&(Hl.params=t[0]),Z=new rs({props:Hl}),kl.push(()=>El(Z,"params",cs));function ds(b){t[11](b)}let Xl={};t[0].xy0!==void 0&&(Xl.xy=t[0].xy0),le=new os({props:Xl}),kl.push(()=>El(le,"xy",ds)),le.$on("change",t[6]),le.$on("go",t[12]);function _s(b){t[13](b)}let Wl={};t[0].xy1!==void 0&&(Wl.xy=t[0].xy1),Y=new os({props:Wl}),kl.push(()=>El(Y,"xy",_s)),Y.$on("change",t[6]),Y.$on("go",t[14]);let ge=t[2]&&us();st=new el({}),at=new el({});let he=t[2]&&fs(t);return{c(){l=u("div"),s=u("section"),a=u("p"),p=h("Name"),_=O(),r=u("div"),i=u("input"),g=O(),ot(v.$$.fragment),S=O(),ve&&ve.c(),k=O(),I=u("section"),w=u("h2"),A=h("Laser and Channels"),z=O(),N=u("div"),ot(d.$$.fragment),L=O(),ot(Z.$$.fragment),F=O(),U=u("section"),j=u("h2"),E=h("Positions"),H=O(),M=u("div"),G=u("div"),R=u("p"),ne=h("\u{1F4CC} Corner 1"),Q=O(),ot(le.$$.fragment),ke=O(),$=u("div"),me=u("p"),Se=h("\u{1F4CD} Corner 2"),Be=O(),ot(Y.$$.fragment),de=O(),ae=u("div"),ue=u("div"),_e=u("p"),fe=h("X-Overlap"),y=O(),C=u("input"),oe=h(`
          (0-1)`),Me=O(),re=u("div"),K=u("span"),Ee=h(se),je=h(" \xD7 "),bt=h(be),Pt=h(" mm."),Ue=O(),Ce=u("span"),pt=h(Re),Nt=h(" columns of "),Ye=h(ct),Je=h(" bundles."),It=O(),ye=u("span"),dt=h(gt),Ae=O(),ge&&ge.c(),X=O(),q=u("section"),Ke=u("h2"),Dt=h("Focus"),Vt=O(),Qe=u("div"),Le=u("div"),lt=u("div"),$e=u("p"),Fe=h("Z Tilt"),zt=O(),xe=u("div"),we=u("input"),Bt=O(),ot(st.$$.fragment),Ot=O(),nt=u("div"),et=u("p"),Mt=h("Z Objective"),jt=O(),Pe=u("span"),qe=u("input"),kt=O(),ot(at.$$.fragment),Ut=O(),Ne=u("button"),Ie=We("svg"),Ze=We("path"),Lt=O(),Gt=u("span"),Pl=h("Autofocus"),Nl=O(),tt=u("div"),Ft=u("label"),Et=u("input"),Il=h(`
          Z-Stack`),zl=O(),pe=u("div"),_t=u("span"),Ol=h("Spacing"),Tl=O(),ze=u("input"),Sl=O(),vt=u("span"),Cl=h("From"),Al=O(),Oe=u("input"),Dl=O(),ht=u("span"),Vl=h("To"),Bl=O(),Te=u("input"),Ml=O(),he&&he.c(),this.h()},l(b){l=f(b,"DIV",{id:!0,class:!0});var D=c(l);s=f(D,"SECTION",{class:!0});var mt=c(s);a=f(mt,"P",{class:!0});var Rt=c(a);p=m(Rt,"Name"),Rt.forEach(o),_=T(mt),r=f(mt,"DIV",{class:!0});var Tt=c(r);i=f(Tt,"INPUT",{type:!0,class:!0}),g=T(Tt),rt(v.$$.fragment,Tt),Tt.forEach(o),S=T(mt),ve&&ve.l(mt),mt.forEach(o),k=T(D),I=f(D,"SECTION",{class:!0});var St=c(I);w=f(St,"H2",{class:!0});var Yt=c(w);A=m(Yt,"Laser and Channels"),Yt.forEach(o),z=T(St),N=f(St,"DIV",{class:!0});var rl=c(N);rt(d.$$.fragment,rl),L=T(rl),rt(Z.$$.fragment,rl),rl.forEach(o),St.forEach(o),F=T(D),U=f(D,"SECTION",{class:!0});var il=c(U);j=f(il,"H2",{class:!0});var Gl=c(j);E=m(Gl,"Positions"),Gl.forEach(o),H=T(il),M=f(il,"DIV",{class:!0});var qt=c(M);G=f(qt,"DIV",{});var ul=c(G);R=f(ul,"P",{class:!0});var Rl=c(R);ne=m(Rl,"\u{1F4CC} Corner 1"),Rl.forEach(o),Q=T(ul),rt(le.$$.fragment,ul),ul.forEach(o),ke=T(qt),$=f(qt,"DIV",{});var fl=c($);me=f(fl,"P",{class:!0});var Yl=c(me);Se=m(Yl,"\u{1F4CD} Corner 2"),Yl.forEach(o),Be=T(fl),rt(Y.$$.fragment,fl),fl.forEach(o),de=T(qt),ae=f(qt,"DIV",{class:!0});var pl=c(ae);ue=f(pl,"DIV",{});var Jt=c(ue);_e=f(Jt,"P",{class:!0});var Jl=c(_e);fe=m(Jl,"X-Overlap"),Jl.forEach(o),y=T(Jt),C=f(Jt,"INPUT",{type:!0,class:!0,step:!0,min:!0,max:!0}),oe=m(Jt,`
          (0-1)`),Jt.forEach(o),Me=T(pl),re=f(pl,"DIV",{class:!0});var Zt=c(re);K=f(Zt,"SPAN",{class:!0});var Kt=c(K);Ee=m(Kt,se),je=m(Kt," \xD7 "),bt=m(Kt,be),Pt=m(Kt," mm."),Kt.forEach(o),Ue=T(Zt),Ce=f(Zt,"SPAN",{class:!0});var Qt=c(Ce);pt=m(Qt,Re),Nt=m(Qt," columns of "),Ye=m(Qt,ct),Je=m(Qt," bundles."),Qt.forEach(o),It=T(Zt),ye=f(Zt,"SPAN",{class:!0});var cl=c(ye);dt=m(cl,gt),Ae=T(cl),ge&&ge.l(cl),cl.forEach(o),Zt.forEach(o),pl.forEach(o),qt.forEach(o),il.forEach(o),X=T(D),q=f(D,"SECTION",{class:!0});var dl=c(q);Ke=f(dl,"H2",{class:!0});var Kl=c(Ke);Dt=m(Kl,"Focus"),Kl.forEach(o),Vt=T(dl),Qe=f(dl,"DIV",{class:!0});var _l=c(Qe);Le=f(_l,"DIV",{class:!0});var vl=c(Le);lt=f(vl,"DIV",{});var hl=c(lt);$e=f(hl,"P",{class:!0});var Ql=c($e);Fe=m(Ql,"Z Tilt"),Ql.forEach(o),zt=T(hl),xe=f(hl,"DIV",{class:!0});var ml=c(xe);we=f(ml,"INPUT",{type:!0,class:!0}),Bt=T(ml),rt(st.$$.fragment,ml),ml.forEach(o),hl.forEach(o),Ot=T(vl),nt=f(vl,"DIV",{});var bl=c(nt);et=f(bl,"P",{class:!0});var $l=c(et);Mt=m($l,"Z Objective"),$l.forEach(o),jt=T(bl),Pe=f(bl,"SPAN",{class:!0});var Ht=c(Pe);qe=f(Ht,"INPUT",{type:!0,class:!0}),kt=T(Ht),rt(at.$$.fragment,Ht),Ut=T(Ht),Ne=f(Ht,"BUTTON",{type:!0,class:!0});var gl=c(Ne);Ie=Ge(gl,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var xl=c(Ie);Ze=Ge(xl,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),c(Ze).forEach(o),xl.forEach(o),Lt=T(gl),Gt=f(gl,"SPAN",{});var es=c(Gt);Pl=m(es,"Autofocus"),es.forEach(o),gl.forEach(o),Ht.forEach(o),bl.forEach(o),vl.forEach(o),Nl=T(_l),tt=f(_l,"DIV",{class:!0});var Xt=c(tt);Ft=f(Xt,"LABEL",{});var Ul=c(Ft);Et=f(Ul,"INPUT",{type:!0,class:!0}),Il=m(Ul,`
          Z-Stack`),Ul.forEach(o),zl=T(Xt),pe=f(Xt,"DIV",{class:!0,id:!0});var Xe=c(pe);_t=f(Xe,"SPAN",{class:!0});var ts=c(_t);Ol=m(ts,"Spacing"),ts.forEach(o),Tl=T(Xe),ze=f(Xe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Sl=T(Xe),vt=f(Xe,"SPAN",{class:!0});var ls=c(vt);Cl=m(ls,"From"),ls.forEach(o),Al=T(Xe),Oe=f(Xe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Dl=T(Xe),ht=f(Xe,"SPAN",{class:!0});var ss=c(ht);Vl=m(ss,"To"),ss.forEach(o),Bl=T(Xe),Te=f(Xe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Xe.forEach(o),Ml=T(Xt),he&&he.l(Xt),Xt.forEach(o),_l.forEach(o),dl.forEach(o),D.forEach(o),this.h()},h(){n(a,"class","mt-1 text-lg svelte-1m4l8fo"),n(i,"type","text"),n(i,"class","flex-grow mb-4 pretty"),n(r,"class","flex w-full max-w-md gap-x-2"),n(s,"class","flex flex-col text-lg font-medium"),n(w,"class","svelte-1m4l8fo"),n(N,"class","grid grid-cols-2"),B(N,"opacity-70",t[4].block),n(I,"class","font-medium leading-10 "),n(j,"class","svelte-1m4l8fo"),n(R,"class","svelte-1m4l8fo"),n(me,"class","svelte-1m4l8fo"),n(_e,"class","svelte-1m4l8fo"),n(C,"type","number"),n(C,"class","w-20 pr-2 pretty"),n(C,"step","0.01"),n(C,"min","0"),n(C,"max","0.99"),n(K,"class","tabular-nums"),n(Ce,"class","tabular-nums"),n(ye,"class","tabular-nums"),B(ye,"font-semibold",!t[2]),n(re,"class","flex flex-col justify-center font-normal"),n(ae,"class","flex gap-8"),n(M,"class","-mt-1 space-y-4"),n(U,"class","flex flex-col gap-2"),B(U,"-mt-20",!t[3]),n(Ke,"class","svelte-1m4l8fo"),n($e,"class","svelte-1m4l8fo"),n(we,"type","number"),n(we,"class","w-28 pretty"),n(xe,"class","flex gap-2"),n(et,"class","svelte-1m4l8fo"),n(qe,"type","number"),n(qe,"class","w-28 pretty"),n(Ze,"fill-rule","evenodd"),n(Ze,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),n(Ze,"clip-rule","evenodd"),n(Ie,"xmlns","http://www.w3.org/2000/svg"),n(Ie,"class","w-5 h-5 mr-1"),n(Ie,"viewBox","0 0 20 20"),n(Ie,"fill","currentColor"),n(Ne,"type","button"),n(Ne,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),n(Pe,"class","flex gap-2"),n(Le,"class","flex space-x-8"),n(Et,"type","checkbox"),n(Et,"class","mr-1 rounded"),n(_t,"class","flex items-center border-l rounded-l-lg color-group svelte-1m4l8fo"),B(_t,"span-disabled",t[4].block||!t[2]),n(ze,"type","number"),n(ze,"min","1"),n(ze,"max","60000"),n(ze,"step","1"),n(ze,"class","z-10 h-10 text-center rounded-none pretty w-28"),ze.disabled=nl=t[4].block||!t[2],n(vt,"class","flex items-center color-group svelte-1m4l8fo"),B(vt,"span-disabled",t[4].block||!t[2]),n(Oe,"type","number"),n(Oe,"min","-100"),n(Oe,"max","100"),n(Oe,"step","1"),n(Oe,"class","z-10 w-16 h-10 text-center rounded-none pretty"),Oe.disabled=al=t[4].block||!t[2],n(ht,"class","flex items-center color-group svelte-1m4l8fo"),B(ht,"span-disabled",t[4].block||!t[2]),n(Te,"type","number"),n(Te,"min","-100"),n(Te,"max","100"),n(Te,"step","1"),n(Te,"class","z-10 w-16 h-10 text-center rounded-l-none rounded-r-lg pretty"),Te.disabled=ol=t[4].block||!t[2],n(pe,"class","flex font-medium"),n(pe,"id","zBox"),n(tt,"class","space-y-2"),n(Qe,"class","-mt-1 space-y-4"),n(q,"class","flex flex-col gap-2"),n(l,"id","control"),n(l,"class","grid grid-cols-2 gap-y-6 gap-x-4")},m(b,D){V(b,l,D),e(l,s),e(s,a),e(a,p),e(s,_),e(s,r),e(r,i),x(i,t[0].name),e(r,g),it(v,r,null),e(s,S),ve&&ve.m(s,null),e(l,k),e(l,I),e(I,w),e(w,A),e(I,z),e(I,N),it(d,N,null),e(N,L),it(Z,N,null),e(l,F),e(l,U),e(U,j),e(j,E),e(U,H),e(U,M),e(M,G),e(G,R),e(R,ne),e(G,Q),it(le,G,null),e(M,ke),e(M,$),e($,me),e(me,Se),e($,Be),it(Y,$,null),e(M,de),e(M,ae),e(ae,ue),e(ue,_e),e(_e,fe),e(ue,y),e(ue,C),x(C,t[0].overlap),e(ue,oe),e(ae,Me),e(ae,re),e(re,K),e(K,Ee),e(K,je),e(K,bt),e(K,Pt),e(re,Ue),e(re,Ce),e(Ce,pt),e(Ce,Nt),e(Ce,Ye),e(Ce,Je),e(re,It),e(re,ye),e(ye,dt),e(ye,Ae),ge&&ge.m(ye,null),e(l,X),e(l,q),e(q,Ke),e(Ke,Dt),e(q,Vt),e(q,Qe),e(Qe,Le),e(Le,lt),e(lt,$e),e($e,Fe),e(lt,zt),e(lt,xe),e(xe,we),x(we,t[0].z_tilt),e(xe,Bt),it(st,xe,null),e(Le,Ot),e(Le,nt),e(nt,et),e(et,Mt),e(nt,jt),e(nt,Pe),e(Pe,qe),x(qe,t[0].z_obj),e(Pe,kt),it(at,Pe,null),e(Pe,Ut),e(Pe,Ne),e(Ne,Ie),e(Ie,Ze),e(Ne,Lt),e(Ne,Gt),e(Gt,Pl),e(Qe,Nl),e(Qe,tt),e(tt,Ft),e(Ft,Et),Et.checked=t[2],e(Ft,Il),e(tt,zl),e(tt,pe),e(pe,_t),e(_t,Ol),e(pe,Tl),e(pe,ze),x(ze,t[0].z_spacing),e(pe,Sl),e(pe,vt),e(vt,Cl),e(pe,Al),e(pe,Oe),x(Oe,t[0].z_from),e(pe,Dl),e(pe,ht),e(ht,Vl),e(pe,Bl),e(pe,Te),x(Te,t[0].z_to),e(tt,Ml),he&&he.m(tt,null),He=!0,jl||(ql=[ee(i,"input",t[7]),ee(C,"input",t[15]),ee(we,"input",t[16]),ee(qe,"input",t[17]),ee(Et,"change",t[18]),$t(xt.call(null,_t,"Nyquist is 232.")),ee(ze,"input",t[19]),$t(xt.call(null,vt,"Multiple of Spacing")),ee(Oe,"input",t[20]),$t(xt.call(null,ht,"Multiple of Spacing")),ee(Te,"input",t[21])],jl=!0)},p(b,[D]){D&1&&i.value!==b[0].name&&x(i,b[0].name);const mt={};D&4194304&&(mt.$$scope={dirty:D,ctx:b}),v.$set(mt),b[3]?ve?ve.p(b,D):(ve=is(b),ve.c(),ve.m(s,null)):ve&&(ve.d(1),ve=null);const Rt={};!P&&D&1&&(P=!0,Rt.params=b[0],yl(()=>P=!1)),d.$set(Rt);const Tt={};!W&&D&1&&(W=!0,Tt.params=b[0],yl(()=>W=!1)),Z.$set(Tt),D&16&&B(N,"opacity-70",b[4].block);const St={};!ce&&D&1&&(ce=!0,St.xy=b[0].xy0,yl(()=>ce=!1)),le.$set(St);const Yt={};!J&&D&1&&(J=!0,Yt.xy=b[0].xy1,yl(()=>J=!1)),Y.$set(Yt),D&1&&ie(C.value)!==b[0].overlap&&x(C,b[0].overlap),(!He||D&2)&&se!==(se=b[1].width.toFixed(2)+"")&&te(Ee,se),(!He||D&2)&&be!==(be=b[1].height.toFixed(2)+"")&&te(bt,be),(!He||D&2)&&Re!==(Re=b[1].n_cols+"")&&te(pt,Re),(!He||D&2)&&ct!==(ct=b[1].n_bundles+"")&&te(Ye,ct),(!He||D&2)&&gt!==(gt=Wt(b[1].time)+"")&&te(dt,gt),b[2]?ge||(ge=us(),ge.c(),ge.m(ye,null)):ge&&(ge.d(1),ge=null),D&4&&B(ye,"font-semibold",!b[2]),D&8&&B(U,"-mt-20",!b[3]),D&1&&ie(we.value)!==b[0].z_tilt&&x(we,b[0].z_tilt),D&1&&ie(qe.value)!==b[0].z_obj&&x(qe,b[0].z_obj),D&4&&(Et.checked=b[2]),D&20&&B(_t,"span-disabled",b[4].block||!b[2]),(!He||D&20&&nl!==(nl=b[4].block||!b[2]))&&(ze.disabled=nl),D&1&&ie(ze.value)!==b[0].z_spacing&&x(ze,b[0].z_spacing),D&20&&B(vt,"span-disabled",b[4].block||!b[2]),(!He||D&20&&al!==(al=b[4].block||!b[2]))&&(Oe.disabled=al),D&1&&ie(Oe.value)!==b[0].z_from&&x(Oe,b[0].z_from),D&20&&B(ht,"span-disabled",b[4].block||!b[2]),(!He||D&20&&ol!==(ol=b[4].block||!b[2]))&&(Te.disabled=ol),D&1&&ie(Te.value)!==b[0].z_to&&x(Te,b[0].z_to),b[2]?he?he.p(b,D):(he=fs(b),he.c(),he.m(tt,null)):he&&(he.d(1),he=null)},i(b){He||(Ve(v.$$.fragment,b),Ve(d.$$.fragment,b),Ve(Z.$$.fragment,b),Ve(le.$$.fragment,b),Ve(Y.$$.fragment,b),Ve(st.$$.fragment,b),Ve(at.$$.fragment,b),He=!0)},o(b){De(v.$$.fragment,b),De(d.$$.fragment,b),De(Z.$$.fragment,b),De(le.$$.fragment,b),De(Y.$$.fragment,b),De(st.$$.fragment,b),De(at.$$.fragment,b),He=!1},d(b){b&&o(l),ut(v),ve&&ve.d(),ut(d),ut(Z),ut(le),ut(Y),ge&&ge.d(),ut(st),ut(at),he&&he.d(),jl=!1,wl(ql)}}}function Js(t,l){t&&(t.querySelectorAll("input").forEach(s=>s.disabled=l),t.querySelectorAll("select").forEach(s=>s.disabled=l),t.querySelectorAll("button").forEach(s=>s.disabled=l))}function Wt(t){const l=new Date(t*1e3).toISOString();return t>3600?`${l.substring(11,19)} hrs`:`${l.substring(14,19)} mins`}function Ks(t,l,s){let a,p;Ct(t,At,E=>s(4,a=E)),Ct(t,wt,E=>s(5,p=E));let{inAuto:_=!0}=l,{params:r}=l,{stats:i={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0}}=l,{z_stack:g=!1}=l;function v(){ft(At,a.image_params.xy0=r.xy0,a),ft(At,a.image_params.xy1=r.xy1,a)}function S(){r.name=this.value,s(0,r)}function k(){r.path=this.value,s(0,r)}function I(E){r=E,s(0,r)}function w(E){r=E,s(0,r)}function A(E){t.$$.not_equal(r.xy0,E)&&(r.xy0=E,s(0,r))}const z=()=>ft(wt,p="move0",p);function N(E){t.$$.not_equal(r.xy1,E)&&(r.xy1=E,s(0,r))}const d=()=>ft(wt,p="move1",p);function P(){r.overlap=ie(this.value),s(0,r)}function L(){r.z_tilt=ie(this.value),s(0,r)}function Z(){r.z_obj=ie(this.value),s(0,r)}function W(){g=this.checked,s(2,g)}function F(){r.z_spacing=ie(this.value),s(0,r)}function U(){r.z_from=ie(this.value),s(0,r)}function j(){r.z_to=ie(this.value),s(0,r)}return t.$$set=E=>{"inAuto"in E&&s(3,_=E.inAuto),"params"in E&&s(0,r=E.params),"stats"in E&&s(1,i=E.stats),"z_stack"in E&&s(2,g=E.z_stack)},t.$$.update=()=>{t.$$.dirty&16&&Js(document.getElementById("control"),a.block),t.$$.dirty&1&&s(1,i.height=Math.max(r.xy1[1],r.xy0[1])-Math.min(r.xy1[1],r.xy0[1]),i),t.$$.dirty&1&&s(1,i.width=Math.max(r.xy1[0],r.xy0[0])-Math.min(r.xy1[0],r.xy0[0]),i),t.$$.dirty&3&&s(1,i.n_cols=Math.ceil(i.width/(.768*(1-r.overlap))),i),t.$$.dirty&2&&s(1,i.n_bundles=Math.ceil(i.height/.048),i),t.$$.dirty&2&&s(1,i.time=i.n_bundles*i.n_cols/20,i),t.$$.dirty&1&&s(1,i.n_z=Math.abs(r.z_to-r.z_from)+1,i)},[r,i,g,_,a,p,v,S,k,I,w,A,z,N,d,P,L,Z,W,F,U,j]}class sn extends tl{constructor(l){super();ll(this,l,Ks,Ys,sl,{inAuto:3,params:0,stats:1,z_stack:2})}}export{ln as P,sn as T};
