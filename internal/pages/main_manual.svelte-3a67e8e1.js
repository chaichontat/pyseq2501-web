import{S as Ze,i as Fe,s as Ge,V as Ae,Z as xe,w as L,x as Q,y as W,_ as Ue,q as X,o as Y,B as K,N as ve,O as Te,e as v,t as S,k as P,c as b,a as m,h as N,d as o,m as C,b as l,g as T,H as i,j as ge,P as oe,Q as ue,W as B,T as st,X as we,Y as Qe,ac as ot,am as ut,ae as at,an as it,ao as ft,ap as ct,af as pt,a3 as rt,v as mt,ah as dt,a4 as gt,ai as je,a7 as Ee}from"../chunks/vendor-86a163ee.js";import{P as _t,T as ht,a as vt}from"../chunks/takeimage-12e0fe36.js";import{s as Be,c as Se,l as We,u as Le}from"../chunks/utils-2dc1caf8.js";import{t as lt}from"../chunks/tooltip-8c168986.js";import"../chunks/go-cd27acc0.js";function bt(r){let e,t,s,a,n,f=r[1][0]+"",p,g,u,h=r[0].n_bundles+"",c,_,V,E,A,w,$,k=r[1][1]+"",j,M,te,O=r[0].n_z+"",z,J,x,R,ee,G,U,se=r[1][2]+"",ne,ae,H,re=r[0].n_cols+"",_e,he,le,ie,Z,d,y,me,I,D,fe,ce=r[0].n_bundles*r[0].n_cols/10+"",de,be;return{c(){e=v("div"),t=v("section"),s=v("div"),a=v("span"),n=v("span"),p=S(f),g=S(`
          /
          `),u=v("span"),c=S(h),_=S(`
      Bundles taken`),V=P(),E=v("section"),A=v("div"),w=v("span"),$=v("span"),j=S(k),M=S(`
          /
          `),te=v("span"),z=S(O),J=S(`
      Z-steps taken`),x=P(),R=v("section"),ee=v("div"),G=v("span"),U=v("span"),ne=S(se),ae=S(`
          /
          `),H=v("span"),_e=S(re),he=S(`
      Columns taken`),le=P(),ie=v("section"),Z=v("span"),d=S("Elapsed time: "),y=S(r[5]),me=S(" s"),I=P(),D=v("span"),fe=S("Total time: "),de=S(ce),be=S(" s"),this.h()},l(F){e=b(F,"DIV",{class:!0});var q=m(e);t=b(q,"SECTION",{class:!0});var pe=m(t);s=b(pe,"DIV",{class:!0});var $e=m(s);a=b($e,"SPAN",{class:!0});var ke=m(a);n=b(ke,"SPAN",{class:!0});var Ne=m(n);p=N(Ne,f),Ne.forEach(o),g=N(ke,`
          /
          `),u=b(ke,"SPAN",{class:!0});var Pe=m(u);c=N(Pe,h),Pe.forEach(o),ke.forEach(o),$e.forEach(o),_=N(pe,`
      Bundles taken`),pe.forEach(o),V=C(q),E=b(q,"SECTION",{class:!0});var Ie=m(E);A=b(Ie,"DIV",{class:!0});var Ce=m(A);w=b(Ce,"SPAN",{class:!0});var Ve=m(w);$=b(Ve,"SPAN",{class:!0});var Ye=m($);j=N(Ye,k),Ye.forEach(o),M=N(Ve,`
          /
          `),te=b(Ve,"SPAN",{class:!0});var Ke=m(te);z=N(Ke,O),Ke.forEach(o),Ve.forEach(o),Ce.forEach(o),J=N(Ie,`
      Z-steps taken`),Ie.forEach(o),x=C(q),R=b(q,"SECTION",{class:!0});var Je=m(R);ee=b(Je,"DIV",{class:!0});var Re=m(ee);G=b(Re,"SPAN",{class:!0});var De=m(G);U=b(De,"SPAN",{class:!0});var et=m(U);ne=N(et,se),et.forEach(o),ae=N(De,`
          /
          `),H=b(De,"SPAN",{class:!0});var tt=m(H);_e=N(tt,re),tt.forEach(o),De.forEach(o),Re.forEach(o),he=N(Je,`
      Columns taken`),Je.forEach(o),le=C(q),ie=b(q,"SECTION",{class:!0});var Me=m(ie);Z=b(Me,"SPAN",{class:!0});var Oe=m(Z);d=N(Oe,"Elapsed time: "),y=N(Oe,r[5]),me=N(Oe," s"),Oe.forEach(o),I=C(Me),D=b(Me,"SPAN",{class:!0});var ze=m(D);fe=N(ze,"Total time: "),de=N(ze,ce),be=N(ze," s"),ze.forEach(o),Me.forEach(o),q.forEach(o),this.h()},h(){l(n,"class","font-mono"),l(u,"class","w-32 px-2 font-mono text-4xl font-bold "),l(a,"class","text-4xl font-bold"),l(s,"class","flex items-center"),l(t,"class","flex flex-col gap-y-1"),l($,"class","font-mono"),l(te,"class","w-32 px-2 font-mono text-4xl font-bold "),l(w,"class","text-4xl font-bold"),l(A,"class","flex items-center"),l(E,"class","flex flex-col gap-y-1"),l(U,"class","font-mono"),l(H,"class","w-32 px-2 font-mono text-4xl font-bold "),l(G,"class","text-4xl font-bold"),l(ee,"class","flex items-center"),l(R,"class","flex flex-col gap-y-1"),l(Z,"class","text-lg font-medium"),l(D,"class","text-lg font-medium"),l(ie,"class","flex flex-col"),l(e,"class","grid max-w-4xl grid-cols-4 mt-1")},m(F,q){T(F,e,q),i(e,t),i(t,s),i(s,a),i(a,n),i(n,p),i(a,g),i(a,u),i(u,c),i(t,_),i(e,V),i(e,E),i(E,A),i(A,w),i(w,$),i($,j),i(w,M),i(w,te),i(te,z),i(E,J),i(e,x),i(e,R),i(R,ee),i(ee,G),i(G,U),i(U,ne),i(G,ae),i(G,H),i(H,_e),i(R,he),i(e,le),i(e,ie),i(ie,Z),i(Z,d),i(Z,y),i(Z,me),i(ie,I),i(ie,D),i(D,fe),i(D,de),i(D,be)},p(F,q){q&2&&f!==(f=F[1][0]+"")&&ge(p,f),q&1&&h!==(h=F[0].n_bundles+"")&&ge(c,h),q&2&&k!==(k=F[1][1]+"")&&ge(j,k),q&1&&O!==(O=F[0].n_z+"")&&ge(z,O),q&2&&se!==(se=F[1][2]+"")&&ge(ne,se),q&1&&re!==(re=F[0].n_cols+"")&&ge(_e,re),q&32&&ge(y,F[5]),q&1&&ce!==(ce=F[0].n_bundles*F[0].n_cols/10+"")&&ge(de,ce)},d(F){F&&o(e)}}}function $t(r){let e,t,s,a;return{c(){e=oe("svg"),t=oe("path"),s=oe("path"),a=S(`
          Capture`),this.h()},l(n){e=ue(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var f=m(e);t=ue(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(o),s=ue(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(s).forEach(o),f.forEach(o),a=N(n,`
          Capture`),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,f){T(n,e,f),i(e,t),i(e,s),T(n,a,f)},d(n){n&&o(e),n&&o(a)}}}function kt(r){let e,t,s,a,n,f;return{c(){e=oe("svg"),t=oe("path"),s=oe("path"),a=P(),n=v("p"),f=S("Stop"),this.h()},l(p){e=ue(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=m(e);t=ue(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(o),s=ue(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(s).forEach(o),g.forEach(o),a=C(p),n=b(p,"P",{class:!0});var u=m(n);f=N(u,"Stop"),u.forEach(o),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","w-6 h-6 mr-1"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor"),l(n,"class","flex-grow")},m(p,g){T(p,e,g),i(e,t),i(e,s),T(p,a,g),T(p,n,g),i(n,f)},d(p){p&&o(e),p&&o(a),p&&o(n)}}}function wt(r){let e,t,s,a,n,f,p,g,u,h,c,_,V;function E($,k){return $[3].block==="capturing"||$[3].block==="previewing"?kt:$t}let A=E(r),w=A(r);return{c(){e=v("div"),t=v("button"),s=v("div"),w.c(),n=P(),f=v("button"),p=v("div"),g=oe("svg"),u=oe("path"),h=S(`
        Preview`),this.h()},l($){e=b($,"DIV",{slot:!0,class:!0});var k=m(e);t=b(k,"BUTTON",{type:!0,class:!0});var j=m(t);s=b(j,"DIV",{class:!0});var M=m(s);w.l(M),M.forEach(o),j.forEach(o),n=C(k),f=b(k,"BUTTON",{type:!0,id:!0,class:!0});var te=m(f);p=b(te,"DIV",{class:!0});var O=m(p);g=ue(O,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var z=m(g);u=ue(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(u).forEach(o),z.forEach(o),h=N(O,`
        Preview`),O.forEach(o),te.forEach(o),k.forEach(o),this.h()},h(){l(s,"class","flex items-center h-12 text-lg cursor-pointer"),l(t,"type","button"),l(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-1rgmygs"),t.disabled=a=r[4]!=="ok"||!r[6].connected,B(t,"focus:ring-blue-300",r[4]==="ok"),B(t,"focus:ring-orange-300",r[4]==="stop"),B(t,"start",r[4]==="ok"),B(t,"stop",r[4]==="stop"),l(u,"stroke-linecap","round"),l(u,"stroke-linejoin","round"),l(u,"stroke-width","2"),l(u,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(g,"xmlns","http://www.w3.org/2000/svg"),l(g,"class","w-6 h-6 mr-1"),l(g,"fill","none"),l(g,"viewBox","0 0 24 24"),l(g,"stroke","currentColor"),l(p,"class","flex items-center"),l(f,"type","button"),l(f,"id","preview"),l(f,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-1rgmygs"),f.disabled=c=Boolean(r[3].block)||!r[6].connected,l(e,"slot","buttons"),l(e,"class","grid grid-flow-row w-36")},m($,k){T($,e,k),i(e,t),i(t,s),w.m(s,null),i(e,n),i(e,f),i(f,p),i(p,g),i(g,u),i(p,h),_||(V=[st(lt.call(null,t,"Take image and save.")),we(t,"click",r[7]),st(lt.call(null,f,"Take a 16-bundle image based on the current position without saving.")),we(f,"click",r[8])],_=!0)},p($,k){A!==(A=E($))&&(w.d(1),w=A($),w&&(w.c(),w.m(s,null))),k&80&&a!==(a=$[4]!=="ok"||!$[6].connected)&&(t.disabled=a),k&16&&B(t,"focus:ring-blue-300",$[4]==="ok"),k&16&&B(t,"focus:ring-orange-300",$[4]==="stop"),k&16&&B(t,"start",$[4]==="ok"),k&16&&B(t,"stop",$[4]==="stop"),k&72&&c!==(c=Boolean($[3].block)||!$[6].connected)&&(f.disabled=c)},d($){$&&o(e),w.d(),_=!1,Qe(V)}}}function Et(r){let e,t,s;function a(f){r[12](f)}let n={$$slots:{buttons:[wt],default:[bt]},$$scope:{ctx:r}};return r[2]!==void 0&&(n.progress=r[2]),e=new _t({props:n}),Ae.push(()=>xe(e,"progress",a)),{c(){L(e.$$.fragment)},l(f){Q(e.$$.fragment,f)},m(f,p){W(e,f,p),s=!0},p(f,[p]){const g={};p&16507&&(g.$$scope={dirty:p,ctx:f}),!t&&p&4&&(t=!0,g.progress=f[2],Ue(()=>t=!1)),e.$set(g)},i(f){s||(X(e.$$.fragment,f),s=!0)},o(f){Y(e.$$.fragment,f),s=!1},d(f){K(e,f)}}}function yt(r,e,t){let s,a,n;ve(r,Be,w=>t(3,s=w)),ve(r,Se,w=>t(11,a=w)),ve(r,We,w=>t(6,n=w));let f=[0,0,0],p,{stats:g}=e;function u(){t(1,f=[0,0,0]),p.set(0)}let h="ok",c,_=0;function V(){c&&clearInterval(c),s.block==="capturing"?Te(Se,a={cmd:"stop"},a):(t(5,_=0),t(10,c=setInterval(()=>{t(5,_+=1)},1e3)),Te(Se,a={cmd:"capture"},a),Te(Be,s.block="capturing",s),u())}function E(){c&&clearInterval(c),s.block==="previewing"?Te(Se,a={cmd:"stop"},a):(t(5,_=0),t(10,c=setInterval(()=>{t(5,_+=1)},1e3)),Te(Se,a={cmd:"preview"},a),Te(Be,s.block="previewing",s),u())}function A(w){p=w,t(2,p)}return r.$$set=w=>{"stats"in w&&t(0,g=w.stats)},r.$$.update=()=>{r.$$.dirty&2055&&p&&(a==null?void 0:a.step)&&(t(1,f=a.step),p.set((f[2]*(g.n_z*g.n_bundles)+f[1]*g.n_bundles+f[0])/(g.n_bundles*g.n_cols*g.n_z))),r.$$.dirty&8&&t(4,h=s.block==="capturing"?"stop":"ok"),r.$$.dirty&8&&s.block,r.$$.dirty&1032&&!s.block&&c&&clearInterval(c)},[g,f,p,s,h,_,n,V,E,u,c,a,A]}class It extends Ze{constructor(e){super();Fe(this,e,yt,Et,Ge,{stats:0,resetProgress:9})}get resetProgress(){return this.$$.ctx[9]}}function Tt(r){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){l(e,"class","absolute w-full h-full border-b border-l border-gray-400")},m(t,s){T(t,e,s)},d(t){t&&o(e)}}}function St(r){let e,t,s=r[7]+"",a;return{c(){e=v("div"),t=v("span"),a=S(s),this.h()},l(n){e=b(n,"DIV",{class:!0});var f=m(e);t=b(f,"SPAN",{class:!0});var p=m(t);a=N(p,s),p.forEach(o),f.forEach(o),this.h()},h(){l(t,"class","absolute text-sm text-gray-600 -right-1 -bottom-6"),l(e,"class","relative top-0 block border-r border-dashed h-[105%] border-r-gray-400 x label svelte-1bo7ukv")},m(n,f){T(n,e,f),i(e,t),i(t,a)},p(n,f){f&128&&s!==(s=n[7]+"")&&ge(a,s)},d(n){n&&o(e)}}}function Nt(r){let e,t=r[7]+"",s;return{c(){e=v("span"),s=S(t),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=m(e);s=N(n,t),n.forEach(o),this.h()},h(){l(e,"class","absolute text-sm text-right text-gray-600 -left-12")},m(a,n){T(a,e,n),i(e,s)},p(a,n){n&128&&t!==(t=a[7]+"")&&ge(s,t)},d(a){a&&o(e)}}}function Pt(r){let e,t;return{c(){e=oe("path"),this.h()},l(s){e=ue(s,"path",{class:!0,d:!0}),m(e).forEach(o),this.h()},h(){l(e,"class","data stroke-blue-300 svelte-1bo7ukv"),l(e,"d",t=r[6])},m(s,a){T(s,e,a)},p(s,a){a&64&&t!==(t=s[6])&&l(e,"d",t)},d(s){s&&o(e)}}}function Ct(r){let e,t;return e=new ct({props:{data:r[1],$$slots:{default:[Pt,({d:s})=>({6:s}),({d:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){W(e,s,a),t=!0},p(s,a){const n={};a&2&&(n.data=s[1]),a&320&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(X(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function At(r){let e;return{c(){e=v("span"),this.h()},l(t){e=b(t,"SPAN",{class:!0}),m(e).forEach(o),this.h()},h(){l(e,"class","absolute translate-x-[-50%] translate-y-[-50%] rounded-[50%] bg-orange-400 w-3 h-3 opacity-90")},m(t,s){T(t,e,s)},d(t){t&&o(e)}}}function Bt(r){let e,t,s,a,n,f,p,g,u,h;return e=new ut({props:{x1:Xe,x2:qe,y1:r[2],y2:r[3],$$slots:{default:[Tt]},$$scope:{ctx:r}}}),s=new at({props:{vertical:!0,count:5,$$slots:{default:[St,({value:c})=>({7:c}),({value:c})=>c?128:0]},$$scope:{ctx:r}}}),n=new at({props:{horizontal:!0,count:3,$$slots:{default:[Nt,({value:c})=>({7:c}),({value:c})=>c?128:0]},$$scope:{ctx:r}}}),p=new it({props:{$$slots:{default:[Ct]},$$scope:{ctx:r}}}),u=new ft({props:{x:r[1][r[0]].x,y:r[1][r[0]].y,$$slots:{default:[At]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment),t=P(),L(s.$$.fragment),a=P(),L(n.$$.fragment),f=P(),L(p.$$.fragment),g=P(),L(u.$$.fragment)},l(c){Q(e.$$.fragment,c),t=C(c),Q(s.$$.fragment,c),a=C(c),Q(n.$$.fragment,c),f=C(c),Q(p.$$.fragment,c),g=C(c),Q(u.$$.fragment,c)},m(c,_){W(e,c,_),T(c,t,_),W(s,c,_),T(c,a,_),W(n,c,_),T(c,f,_),W(p,c,_),T(c,g,_),W(u,c,_),h=!0},p(c,_){const V={};_&4&&(V.y1=c[2]),_&8&&(V.y2=c[3]),_&256&&(V.$$scope={dirty:_,ctx:c}),e.$set(V);const E={};_&384&&(E.$$scope={dirty:_,ctx:c}),s.$set(E);const A={};_&384&&(A.$$scope={dirty:_,ctx:c}),n.$set(A);const w={};_&258&&(w.$$scope={dirty:_,ctx:c}),p.$set(w);const $={};_&3&&($.x=c[1][c[0]].x),_&3&&($.y=c[1][c[0]].y),_&256&&($.$$scope={dirty:_,ctx:c}),u.$set($)},i(c){h||(X(e.$$.fragment,c),X(s.$$.fragment,c),X(n.$$.fragment,c),X(p.$$.fragment,c),X(u.$$.fragment,c),h=!0)},o(c){Y(e.$$.fragment,c),Y(s.$$.fragment,c),Y(n.$$.fragment,c),Y(p.$$.fragment,c),Y(u.$$.fragment,c),h=!1},d(c){K(e,c),c&&o(t),K(s,c),c&&o(a),K(n,c),c&&o(f),K(p,c),c&&o(g),K(u,c)}}}function Vt(r){let e,t,s;return t=new ot({props:{x1:Xe,x2:qe,y1:r[2],y2:r[3],$$slots:{default:[Bt]},$$scope:{ctx:r}}}),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=m(e);Q(t.$$.fragment,n),n.forEach(o),this.h()},h(){l(e,"class","box-border h-48 chart w-[400px]")},m(a,n){T(a,e,n),W(t,e,null),s=!0},p(a,[n]){const f={};n&4&&(f.y1=a[2]),n&8&&(f.y2=a[3]),n&271&&(f.$$scope={dirty:n,ctx:a}),t.$set(f)},i(a){s||(X(t.$$.fragment,a),s=!0)},o(a){Y(t.$$.fragment,a),s=!1},d(a){a&&o(e),K(t)}}}const qe=60292,Xe=2621,Dt=259;function Mt(r,e,t){let s;ve(r,We,u=>t(4,s=u));let a=[],{curr:n=0}=e;const f=[...Array(259)].map((u,h)=>Math.round(qe-(qe-Xe)*h/Dt));let p=0,g=100;return r.$$set=u=>{"curr"in u&&t(0,n=u.curr)},r.$$.update=()=>{r.$$.dirty&22&&s.afimg.laplacian&&(t(1,a=s.afimg.laplacian.map((u,h)=>({x:f[h],y:u}))),t(2,p=Math.min(...s.afimg.laplacian)),t(2,p=p*.9),t(3,g=Math.max(...s.afimg.laplacian)),console.log(a))},[n,a,p,g,s]}class Ot extends Ze{constructor(e){super();Fe(this,e,Mt,Vt,Ge,{curr:0})}}function zt(r){let e,t,s;return{c(){e=v("button"),t=S("Channel 0"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=m(e);t=N(n,"Channel 0"),n.forEach(o),this.h()},h(){l(e,"class",s=Ee(ye("green",r[15],r[4].image_params.channels[0]))+" svelte-1e6iagd"),B(e,"bg-green-600",r[15])},m(a,n){T(a,e,n),i(e,t)},p(a,n){n&32784&&s!==(s=Ee(ye("green",a[15],a[4].image_params.channels[0]))+" svelte-1e6iagd")&&l(e,"class",s),n&32784&&B(e,"bg-green-600",a[15])},d(a){a&&o(e)}}}function jt(r){let e,t,s;return{c(){e=v("button"),t=S("Channel 1"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=m(e);t=N(n,"Channel 1"),n.forEach(o),this.h()},h(){l(e,"class",s=Ee(ye("orange",r[15],r[4].image_params.channels[1]))+" svelte-1e6iagd"),B(e,"bg-orange-500",r[15])},m(a,n){T(a,e,n),i(e,t)},p(a,n){n&32784&&s!==(s=Ee(ye("orange",a[15],a[4].image_params.channels[1]))+" svelte-1e6iagd")&&l(e,"class",s),n&32784&&B(e,"bg-orange-500",a[15])},d(a){a&&o(e)}}}function xt(r){let e,t,s;return{c(){e=v("button"),t=S("Channel 2"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=m(e);t=N(n,"Channel 2"),n.forEach(o),this.h()},h(){l(e,"class",s=Ee(ye("rose",r[15],r[4].image_params.channels[2]))+" svelte-1e6iagd"),B(e,"bg-rose-600",r[15])},m(a,n){T(a,e,n),i(e,t)},p(a,n){n&32784&&s!==(s=Ee(ye("rose",a[15],a[4].image_params.channels[2]))+" svelte-1e6iagd")&&l(e,"class",s),n&32784&&B(e,"bg-rose-600",a[15])},d(a){a&&o(e)}}}function Ut(r){let e,t,s;return{c(){e=v("button"),t=S("Channel 3"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=m(e);t=N(n,"Channel 3"),n.forEach(o),this.h()},h(){l(e,"class",s=Ee(ye("amber",r[15],r[4].image_params.channels[3]))+" svelte-1e6iagd"),B(e,"bg-amber-800",r[15])},m(a,n){T(a,e,n),i(e,t)},p(a,n){n&32784&&s!==(s=Ee(ye("amber",a[15],a[4].image_params.channels[3]))+" svelte-1e6iagd")&&l(e,"class",s),n&32784&&B(e,"bg-amber-800",a[15])},d(a){a&&o(e)}}}function qt(r){let e,t,s,a,n,f,p,g;return e=new je({props:{$$slots:{default:[zt,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:r}}}),s=new je({props:{$$slots:{default:[jt,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:r}}}),n=new je({props:{$$slots:{default:[xt,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:r}}}),p=new je({props:{$$slots:{default:[Ut,({selected:u})=>({15:u}),({selected:u})=>u?32768:0]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment),t=P(),L(s.$$.fragment),a=P(),L(n.$$.fragment),f=P(),L(p.$$.fragment)},l(u){Q(e.$$.fragment,u),t=C(u),Q(s.$$.fragment,u),a=C(u),Q(n.$$.fragment,u),f=C(u),Q(p.$$.fragment,u)},m(u,h){W(e,u,h),T(u,t,h),W(s,u,h),T(u,a,h),W(n,u,h),T(u,f,h),W(p,u,h),g=!0},p(u,h){const c={};h&98320&&(c.$$scope={dirty:h,ctx:u}),e.$set(c);const _={};h&98320&&(_.$$scope={dirty:h,ctx:u}),s.$set(_);const V={};h&98320&&(V.$$scope={dirty:h,ctx:u}),n.$set(V);const E={};h&98320&&(E.$$scope={dirty:h,ctx:u}),p.$set(E)},i(u){g||(X(e.$$.fragment,u),X(s.$$.fragment,u),X(n.$$.fragment,u),X(p.$$.fragment,u),g=!0)},o(u){Y(e.$$.fragment,u),Y(s.$$.fragment,u),Y(n.$$.fragment,u),Y(p.$$.fragment,u),g=!1},d(u){K(e,u),u&&o(t),K(s,u),u&&o(a),K(n,u),u&&o(f),K(p,u)}}}function Ht(r){let e,t;return e=new dt({props:{class:"grid grid-cols-4 p-1 space-x-1 rounded-lg bg-gray-50 white-button",$$slots:{default:[qt]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){W(e,s,a),t=!0},p(s,a){const n={};a&65552&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(X(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){K(e,s)}}}function Zt(r){let e,t,s,a,n,f,p,g,u,h,c,_,V,E,A,w,$,k,j,M,te,O,z,J,x,R,ee,G,U=r[7][He-r[0]-1]+"",se,ne,ae,H,re,_e,he,le,ie,Z,d,y,me;return a=new pt({props:{$$slots:{default:[Ht]},$$scope:{ctx:r}}}),a.$on("change",r[8]),Z=new Ot({props:{curr:258-r[0]}}),{c(){e=v("div"),t=v("div"),s=v("div"),L(a.$$.fragment),n=P(),f=v("button"),p=oe("svg"),g=oe("path"),u=P(),h=v("span"),c=S("Autofocus"),V=P(),E=v("div"),A=P(),w=v("div"),$=v("div"),k=v("canvas"),j=P(),M=v("div"),te=P(),O=v("div"),z=v("button"),J=oe("svg"),x=oe("path"),R=S(`
          Jump to Focus`),ee=P(),G=v("span"),se=S(U),ne=P(),ae=v("button"),H=oe("svg"),re=oe("path"),_e=S(`
          To Z Obj`),he=P(),le=v("input"),ie=P(),L(Z.$$.fragment),this.h()},l(I){e=b(I,"DIV",{class:!0});var D=m(e);t=b(D,"DIV",{class:!0});var fe=m(t);s=b(fe,"DIV",{class:!0});var ce=m(s);Q(a.$$.fragment,ce),ce.forEach(o),n=C(fe),f=b(fe,"BUTTON",{type:!0,class:!0});var de=m(f);p=ue(de,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var be=m(p);g=ue(be,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),m(g).forEach(o),be.forEach(o),u=C(de),h=b(de,"SPAN",{});var F=m(h);c=N(F,"Autofocus"),F.forEach(o),de.forEach(o),fe.forEach(o),V=C(D),E=b(D,"DIV",{class:!0}),m(E).forEach(o),A=C(D),w=b(D,"DIV",{class:!0});var q=m(w);$=b(q,"DIV",{class:!0});var pe=m($);k=b(pe,"CANVAS",{width:!0,height:!0,class:!0}),m(k).forEach(o),j=C(pe),M=b(pe,"DIV",{class:!0}),m(M).forEach(o),te=C(pe),O=b(pe,"DIV",{class:!0});var $e=m(O);z=b($e,"BUTTON",{type:!0,class:!0});var ke=m(z);J=ue(ke,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Ne=m(J);x=ue(Ne,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(x).forEach(o),Ne.forEach(o),R=N(ke,`
          Jump to Focus`),ke.forEach(o),ee=C($e),G=b($e,"SPAN",{class:!0});var Pe=m(G);se=N(Pe,U),Pe.forEach(o),ne=C($e),ae=b($e,"BUTTON",{type:!0,class:!0});var Ie=m(ae);H=ue(Ie,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Ce=m(H);re=ue(Ce,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(re).forEach(o),Ce.forEach(o),_e=N(Ie,`
          To Z Obj`),Ie.forEach(o),$e.forEach(o),he=C(pe),le=b(pe,"INPUT",{type:!0,class:!0,min:!0,max:!0}),ie=C(pe),Q(Z.$$.fragment,pe),pe.forEach(o),q.forEach(o),D.forEach(o),this.h()},h(){l(s,"class","flex-grow"),l(g,"fill-rule","evenodd"),l(g,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),l(g,"clip-rule","evenodd"),l(p,"xmlns","http://www.w3.org/2000/svg"),l(p,"class","w-5 h-5 mr-1"),l(p,"viewBox","0 0 20 20"),l(p,"fill","currentColor"),l(f,"type","button"),f.disabled=_=r[6].block,l(f,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),l(t,"class","flex max-w-lg mx-auto gap-x-4"),l(E,"class","w-[80%] mx-auto bg-gray-200 h-[1px]"),l(k,"width",256),l(k,"height",64),l(k,"class","svelte-1e6iagd"),l(M,"class","h-[32px]"),l(x,"stroke-linecap","round"),l(x,"stroke-linejoin","round"),l(x,"stroke-width","2"),l(x,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),l(J,"xmlns","http://www.w3.org/2000/svg"),l(J,"class","w-5 h-5 mr-1"),l(J,"fill","none"),l(J,"viewBox","0 0 24 24"),l(J,"stroke","currentColor"),l(z,"type","button"),l(z,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),l(G,"class","px-4 py-2 font-medium rounded-lg bg-blue-50 tabular-nums"),l(re,"stroke-linecap","round"),l(re,"stroke-linejoin","round"),l(re,"stroke-width","2"),l(re,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),l(H,"xmlns","http://www.w3.org/2000/svg"),l(H,"class","w-5 h-5 mr-1"),l(H,"fill","none"),l(H,"viewBox","0 0 24 24"),l(H,"stroke","currentColor"),l(ae,"type","button"),l(ae,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),l(O,"class","flex gap-x-4"),l(le,"type","range"),l(le,"class","mb-2 range w-[104.5%]"),l(le,"min","0"),l(le,"max","258"),l($,"class","flex flex-col items-center max-w-md mx-auto gap-y-6"),l(w,"class","flex items-center"),l(e,"class","space-y-12")},m(I,D){T(I,e,D),i(e,t),i(t,s),W(a,s,null),i(t,n),i(t,f),i(f,p),i(p,g),i(f,u),i(f,h),i(h,c),i(e,V),i(e,E),i(e,A),i(e,w),i(w,$),i($,k),r[10](k),i($,j),i($,M),i($,te),i($,O),i(O,z),i(z,J),i(J,x),i(z,R),i(O,ee),i(O,G),i(G,se),i(O,ne),i(O,ae),i(ae,H),i(H,re),i(ae,_e),i($,he),i($,le),rt(le,r[0]),i($,ie),W(Z,$,null),d=!0,y||(me=[we(f,"click",r[9]),we(z,"click",r[11]),we(le,"change",r[12]),we(le,"input",r[12])],y=!0)},p(I,[D]){const fe={};D&65552&&(fe.$$scope={dirty:D,ctx:I}),a.$set(fe),(!d||D&64&&_!==(_=I[6].block))&&(f.disabled=_),(!d||D&1)&&U!==(U=I[7][He-I[0]-1]+"")&&ge(se,U),D&1&&rt(le,I[0]);const ce={};D&1&&(ce.curr=258-I[0]),Z.$set(ce)},i(I){d||(X(a.$$.fragment,I),X(Z.$$.fragment,I),d=!0)},o(I){Y(a.$$.fragment,I),Y(Z.$$.fragment,I),d=!1},d(I){I&&o(e),K(a),r[10](null),K(Z),y=!1,Qe(me)}}}const nt=60292,Ft=2621,He=259;function ye(r,e,t){return`tab-button ${e?"text-white":`${t?`text-gray-700 hover:text-black bg-gray-50 hover:bg-${r}-300`:"text-gray-400"}`}`}function Gt(r,e,t){let s,a,n,f;ve(r,We,k=>t(1,s=k)),ve(r,Le,k=>t(4,a=k)),ve(r,Se,k=>t(5,n=k)),ve(r,Be,k=>t(6,f=k));let p,g,u,h=0;const c=[...Array(259)].map((k,j)=>Math.round(nt-(nt-Ft)*j/He));let _=0;mt(()=>{u=p.getContext("2d")}),g=new Image,g.onload=()=>u==null?void 0:u.drawImage(g,0,0);const V=k=>t(3,_=k.detail),E=()=>Te(Se,n={cmd:"autofocus"},n);function A(k){Ae[k?"unshift":"push"](()=>{p=k,t(2,p)})}const w=()=>t(0,h=258-s.afimg.laplacian.map((k,j)=>[k,j]).reduce((k,j)=>j[0]>k[0]?j:k)[1]);function $(){h=gt(this.value),t(0,h)}return r.$$.update=()=>{r.$$.dirty&3&&s.afimg.afimg&&(console.log(s.afimg),g.src=s.afimg.afimg[He-h-1])},[h,s,p,_,a,n,f,c,V,E,A,w,$]}class Jt extends Ze{constructor(e){super();Fe(this,e,Gt,Zt,Ge,{})}}function Lt(r){let e,t,s,a,n,f,p,g,u,h,c,_,V,E,A,w,$,k,j,M,te,O,z,J,x,R,ee,G,U,se,ne,ae,H,re;function _e(d){r[4](d)}let he={};r[0]!==void 0&&(he.stats=r[0]),a=new It({props:he}),Ae.push(()=>xe(a,"stats",_e));function le(d){r[5](d)}function ie(d){r[6](d)}let Z={inAuto:!1};return r[2].image_params!==void 0&&(Z.params=r[2].image_params),r[0]!==void 0&&(Z.stats=r[0]),h=new ht({props:Z}),Ae.push(()=>xe(h,"params",le)),Ae.push(()=>xe(h,"stats",ie)),ee=new vt({}),ne=new Jt({}),{c(){e=v("div"),t=v("div"),s=P(),L(a.$$.fragment),f=P(),p=v("p"),g=S("Capture Parameters"),u=P(),L(h.$$.fragment),V=P(),E=v("div"),A=v("div"),w=P(),$=v("button"),k=S("Preview"),j=P(),M=v("button"),te=S("Autofocus"),O=P(),z=v("div"),J=P(),x=v("section"),R=v("div"),L(ee.$$.fragment),G=P(),U=v("section"),se=v("div"),L(ne.$$.fragment),this.h()},l(d){e=b(d,"DIV",{class:!0});var y=m(e);t=b(y,"DIV",{class:!0}),m(t).forEach(o),s=C(y),Q(a.$$.fragment,y),y.forEach(o),f=C(d),p=b(d,"P",{class:!0});var me=m(p);g=N(me,"Capture Parameters"),me.forEach(o),u=C(d),Q(h.$$.fragment,d),V=C(d),E=b(d,"DIV",{class:!0});var I=m(E);A=b(I,"DIV",{class:!0}),m(A).forEach(o),w=C(I),$=b(I,"BUTTON",{class:!0});var D=m($);k=N(D,"Preview"),D.forEach(o),j=C(I),M=b(I,"BUTTON",{class:!0});var fe=m(M);te=N(fe,"Autofocus"),fe.forEach(o),O=C(I),z=b(I,"DIV",{class:!0}),m(z).forEach(o),I.forEach(o),J=C(d),x=b(d,"SECTION",{class:!0});var ce=m(x);R=b(ce,"DIV",{class:!0});var de=m(R);Q(ee.$$.fragment,de),de.forEach(o),ce.forEach(o),G=C(d),U=b(d,"SECTION",{class:!0});var be=m(U);se=b(be,"DIV",{class:!0});var F=m(se);Q(ne.$$.fragment,F),F.forEach(o),be.forEach(o),this.h()},h(){l(t,"class","w-full h-4"),l(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),l(p,"class","mt-6 title"),l(A,"class","-ml-10 cursor-default tab tab-lifted"),l($,"class","font-medium tab tab-lg tab-lifted"),B($,"tab-active",r[1]==="preview"),B($,"text-gray-800",r[1]==="preview"),l(M,"class","font-medium tab tab-lg tab-lifted"),B(M,"tab-active",r[1]==="autofocus"),B(M,"text-gray-800",r[1]==="autofocus"),l(z,"class","flex-1 cursor-default tab tab-lifted"),l(E,"class","w-full mt-8 tabs"),l(R,"class","my-4"),l(x,"class","relative"),B(x,"hidden",r[1]!=="preview"),l(se,"class","my-6"),l(U,"class","relative"),B(U,"hidden",r[1]!=="autofocus")},m(d,y){T(d,e,y),i(e,t),i(e,s),W(a,e,null),T(d,f,y),T(d,p,y),i(p,g),T(d,u,y),W(h,d,y),T(d,V,y),T(d,E,y),i(E,A),i(E,w),i(E,$),i($,k),i(E,j),i(E,M),i(M,te),i(E,O),i(E,z),T(d,J,y),T(d,x,y),i(x,R),W(ee,R,null),T(d,G,y),T(d,U,y),i(U,se),W(ne,se,null),ae=!0,H||(re=[we($,"click",r[7]),we(M,"click",r[8])],H=!0)},p(d,[y]){const me={};!n&&y&1&&(n=!0,me.stats=d[0],Ue(()=>n=!1)),a.$set(me);const I={};!c&&y&4&&(c=!0,I.params=d[2].image_params,Ue(()=>c=!1)),!_&&y&1&&(_=!0,I.stats=d[0],Ue(()=>_=!1)),h.$set(I),y&2&&B($,"tab-active",d[1]==="preview"),y&2&&B($,"text-gray-800",d[1]==="preview"),y&2&&B(M,"tab-active",d[1]==="autofocus"),y&2&&B(M,"text-gray-800",d[1]==="autofocus"),y&2&&B(x,"hidden",d[1]!=="preview"),y&2&&B(U,"hidden",d[1]!=="autofocus")},i(d){ae||(X(a.$$.fragment,d),X(h.$$.fragment,d),X(ee.$$.fragment,d),X(ne.$$.fragment,d),ae=!0)},o(d){Y(a.$$.fragment,d),Y(h.$$.fragment,d),Y(ee.$$.fragment,d),Y(ne.$$.fragment,d),ae=!1},d(d){d&&o(e),K(a),d&&o(f),d&&o(p),d&&o(u),K(h,d),d&&o(V),d&&o(E),d&&o(J),d&&o(x),K(ee),d&&o(G),d&&o(U),K(ne),H=!1,Qe(re)}}}function Qt(r,e){r&&(r.querySelectorAll("input").forEach(t=>t.disabled=e),r.querySelectorAll("select").forEach(t=>t.disabled=e),r.querySelectorAll("button").forEach(t=>t.disabled=e))}function Wt(r,e,t){let s,a;ve(r,Be,_=>t(3,s=_)),ve(r,Le,_=>t(2,a=_));let n={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0},f="preview";function p(_){n=_,t(0,n)}function g(_){r.$$.not_equal(a.image_params,_)&&(a.image_params=_,Le.set(a))}function u(_){n=_,t(0,n)}const h=()=>t(1,f="preview"),c=()=>t(1,f="autofocus");return r.$$.update=()=>{r.$$.dirty&8&&Qt(document.getElementById("control"),Boolean(s.block))},[n,f,a,s,p,g,u,h,c]}class ts extends Ze{constructor(e){super();Fe(this,e,Wt,Lt,Ge,{})}}export{ts as default};
