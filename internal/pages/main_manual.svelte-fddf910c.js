var Vt=Object.defineProperty;var Nt=Object.getOwnPropertySymbols;var Dt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var Pt=(a,e,t)=>e in a?Vt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,It=(a,e)=>{for(var t in e||(e={}))Dt.call(e,t)&&Pt(a,t,e[t]);if(Nt)for(var t of Nt(e))yt.call(e,t)&&Pt(a,t,e[t]);return a};import{S as Re,i as Ge,s as Le,a7 as Ot,e as _,w as U,c as g,a as m,x as H,d as u,b as r,g as N,y as W,q as R,o as G,B as L,a8 as jt,a9 as Mt,k as q,m as V,t as k,h as E,H as i,j as X,aa as Ut,R as D,T as be,ab as Ht,U as qt,N as ve,v as Wt,ac as Rt,ad as Gt,V as ie,Q as Te,ae as We,_ as ne,O as se,P as ae,a0 as zt,M as At,af as Lt,ag as Zt,W as ut,X as ct}from"../chunks/vendor-b4247f54.js";import{c as ge,u as ue}from"../chunks/store-55337599.js";import{t as Bt,T as Ft}from"../chunks/takeimage-9757061c.js";import"../chunks/spinning-532aadfd.js";import"../chunks/coords-813c65ab.js";function Qt(a){let e;return{c(){e=_("div"),this.h()},l(t){e=g(t,"DIV",{class:!0}),m(e).forEach(u),this.h()},h(){r(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(t,n){N(t,e,n)},d(t){t&&u(e)}}}function Xt(a){let e,t=a[3]+"",n;return{c(){e=_("span"),n=k(t),this.h()},l(s){e=g(s,"SPAN",{class:!0});var l=m(e);n=E(l,t),l.forEach(u),this.h()},h(){r(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(s,l){N(s,e,l),i(e,n)},p(s,l){l&8&&t!==(t=s[3]+"")&&X(n,t)},d(s){s&&u(e)}}}function Jt(a){let e,t,n,s;return e=new jt({props:{data:a[1],width:80,$$slots:{default:[Qt]},$$scope:{ctx:a}}}),n=new Mt({props:{vertical:!0,count:5,$$slots:{default:[Xt,({value:l})=>({3:l}),({value:l})=>l?8:0]},$$scope:{ctx:a}}}),{c(){U(e.$$.fragment),t=q(),U(n.$$.fragment)},l(l){H(e.$$.fragment,l),t=V(l),H(n.$$.fragment,l)},m(l,c){W(e,l,c),N(l,t,c),W(n,l,c),s=!0},p(l,c){const f={};c&2&&(f.data=l[1]),c&16&&(f.$$scope={dirty:c,ctx:l}),e.$set(f);const h={};c&24&&(h.$$scope={dirty:c,ctx:l}),n.$set(h)},i(l){s||(R(e.$$.fragment,l),R(n.$$.fragment,l),s=!0)},o(l){G(e.$$.fragment,l),G(n.$$.fragment,l),s=!1},d(l){L(e,l),l&&u(t),L(n,l)}}}function Kt(a){let e,t,n;return t=new Ot({props:{x1:-10,x2:4096+10,y1:0,y2:a[0],$$slots:{default:[Jt]},$$scope:{ctx:a}}}),{c(){e=_("div"),U(t.$$.fragment),this.h()},l(s){e=g(s,"DIV",{class:!0});var l=m(e);H(t.$$.fragment,l),l.forEach(u),this.h()},h(){r(e,"class","w-full h-full box-border")},m(s,l){N(s,e,l),W(t,e,null),n=!0},p(s,[l]){const c={};l&1&&(c.y2=s[0]),l&18&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){G(t.$$.fragment,s),n=!1},d(s){s&&u(e),L(t)}}}function Yt(a,e){return a.map((t,n)=>({x:t,y:e[n]}))}function xt(a,e,t){let{hist:n}=e,s,l=[{x:0,y:0},{x:2e3,y:10}];return a.$$set=c=>{"hist"in c&&t(2,n=c.hist)},a.$$.update=()=>{a.$$.dirty&4&&n&&(t(1,l=Yt(n.bin_edges,n.counts)),t(0,s=Math.max(...n.counts)))},[s,l,n]}class es extends Re{constructor(e){super();Ge(this,e,xt,Kt,Le,{hist:2})}}const ts={n:0,img:[""],hist:[{counts:[10],bin_edges:[0]}],channels:[!1,!1,!1,!1]};function ss(a){let e,t,n;return{c(){e=_("button"),t=k("Channel 0"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var l=m(e);t=E(l,"Channel 0"),l.forEach(u),this.h()},h(){r(e,"class",n=ne(le("green",a[17],a[6].image_params.channels[0]))+" svelte-132l8kq"),D(e,"bg-green-600",a[17])},m(s,l){N(s,e,l),i(e,t)},p(s,l){l&131136&&n!==(n=ne(le("green",s[17],s[6].image_params.channels[0]))+" svelte-132l8kq")&&r(e,"class",n),l&131136&&D(e,"bg-green-600",s[17])},d(s){s&&u(e)}}}function as(a){let e,t,n;return{c(){e=_("button"),t=k("Channel 1"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var l=m(e);t=E(l,"Channel 1"),l.forEach(u),this.h()},h(){r(e,"class",n=ne(le("orange",a[17],a[6].image_params.channels[1]))+" svelte-132l8kq"),D(e,"bg-orange-500",a[17])},m(s,l){N(s,e,l),i(e,t)},p(s,l){l&131136&&n!==(n=ne(le("orange",s[17],s[6].image_params.channels[1]))+" svelte-132l8kq")&&r(e,"class",n),l&131136&&D(e,"bg-orange-500",s[17])},d(s){s&&u(e)}}}function ns(a){let e,t,n;return{c(){e=_("button"),t=k("Channel 2"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var l=m(e);t=E(l,"Channel 2"),l.forEach(u),this.h()},h(){r(e,"class",n=ne(le("rose",a[17],a[6].image_params.channels[2]))+" svelte-132l8kq"),D(e,"bg-rose-600",a[17])},m(s,l){N(s,e,l),i(e,t)},p(s,l){l&131136&&n!==(n=ne(le("rose",s[17],s[6].image_params.channels[2]))+" svelte-132l8kq")&&r(e,"class",n),l&131136&&D(e,"bg-rose-600",s[17])},d(s){s&&u(e)}}}function ls(a){let e,t,n;return{c(){e=_("button"),t=k("Channel 3"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var l=m(e);t=E(l,"Channel 3"),l.forEach(u),this.h()},h(){r(e,"class",n=ne(le("amber",a[17],a[6].image_params.channels[3]))+" svelte-132l8kq"),D(e,"bg-amber-800",a[17])},m(s,l){N(s,e,l),i(e,t)},p(s,l){l&131136&&n!==(n=ne(le("amber",s[17],s[6].image_params.channels[3]))+" svelte-132l8kq")&&r(e,"class",n),l&131136&&D(e,"bg-amber-800",s[17])},d(s){s&&u(e)}}}function rs(a){let e,t,n,s,l,c,f,h;return e=new We({props:{disabled:!a[6].image_params.channels[0],$$slots:{default:[ss,({selected:o})=>({17:o}),({selected:o})=>o?131072:0]},$$scope:{ctx:a}}}),n=new We({props:{disabled:!a[6].image_params.channels[1],$$slots:{default:[as,({selected:o})=>({17:o}),({selected:o})=>o?131072:0]},$$scope:{ctx:a}}}),l=new We({props:{disabled:!a[6].image_params.channels[2],$$slots:{default:[ns,({selected:o})=>({17:o}),({selected:o})=>o?131072:0]},$$scope:{ctx:a}}}),f=new We({props:{disabled:!a[6].image_params.channels[3],$$slots:{default:[ls,({selected:o})=>({17:o}),({selected:o})=>o?131072:0]},$$scope:{ctx:a}}}),{c(){U(e.$$.fragment),t=q(),U(n.$$.fragment),s=q(),U(l.$$.fragment),c=q(),U(f.$$.fragment)},l(o){H(e.$$.fragment,o),t=V(o),H(n.$$.fragment,o),s=V(o),H(l.$$.fragment,o),c=V(o),H(f.$$.fragment,o)},m(o,d){W(e,o,d),N(o,t,d),W(n,o,d),N(o,s,d),W(l,o,d),N(o,c,d),W(f,o,d),h=!0},p(o,d){const v={};d&64&&(v.disabled=!o[6].image_params.channels[0]),d&393280&&(v.$$scope={dirty:d,ctx:o}),e.$set(v);const C={};d&64&&(C.disabled=!o[6].image_params.channels[1]),d&393280&&(C.$$scope={dirty:d,ctx:o}),n.$set(C);const P={};d&64&&(P.disabled=!o[6].image_params.channels[2]),d&393280&&(P.$$scope={dirty:d,ctx:o}),l.$set(P);const $={};d&64&&($.disabled=!o[6].image_params.channels[3]),d&393280&&($.$$scope={dirty:d,ctx:o}),f.$set($)},i(o){h||(R(e.$$.fragment,o),R(n.$$.fragment,o),R(l.$$.fragment,o),R(f.$$.fragment,o),h=!0)},o(o){G(e.$$.fragment,o),G(n.$$.fragment,o),G(l.$$.fragment,o),G(f.$$.fragment,o),h=!1},d(o){L(e,o),o&&u(t),L(n,o),o&&u(s),L(l,o),o&&u(c),L(f,o)}}}function os(a){let e,t;return e=new Gt({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[rs]},$$scope:{ctx:a}}}),{c(){U(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const l={};s&262208&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function is(a){let e,t,n,s,l,c,f,h,o,d,v,C,P,$,I,A,z,y,Z;return l=new Ut({props:{$$slots:{default:[os]},$$scope:{ctx:a}}}),l.$on("change",a[10]),A=new es({props:{hist:a[1].hist[a[0]]}}),{c(){e=_("div"),t=_("canvas"),n=q(),s=_("div"),U(l.$$.fragment),c=q(),f=_("button"),h=k("Center"),o=q(),d=_("div"),v=_("label"),C=_("input"),P=k(`
      Show Histogram`),$=q(),I=_("div"),U(A.$$.fragment),this.h()},l(b){e=g(b,"DIV",{id:!0,class:!0});var w=m(e);t=g(w,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),m(t).forEach(u),n=V(w),s=g(w,"DIV",{class:!0});var j=m(s);H(l.$$.fragment,j),j.forEach(u),c=V(w),f=g(w,"BUTTON",{class:!0});var O=m(f);h=E(O,"Center"),O.forEach(u),o=V(w),d=g(w,"DIV",{class:!0});var p=m(d);v=g(p,"LABEL",{class:!0});var S=m(v);C=g(S,"INPUT",{type:!0,class:!0}),P=E(S,`
      Show Histogram`),S.forEach(u),p.forEach(u),$=V(w),I=g(w,"DIV",{id:!0,class:!0});var F=m(I);H(A.$$.fragment,F),F.forEach(u),w.forEach(u),this.h()},h(){r(t,"id","canvas"),r(t,"width",2048),r(t,"height",128),r(t,"class","svelte-132l8kq"),r(s,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),r(f,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),r(C,"type","checkbox"),r(C,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),r(v,"class","mx-4 font-medium cursor-pointer"),r(d,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),r(I,"id","histogram"),r(I,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),D(I,"hidden",!a[5]),r(e,"id","frame"),r(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[40vh] svelte-132l8kq")},m(b,w){N(b,e,w),i(e,t),a[9](t),i(e,n),i(e,s),W(l,s,null),i(e,c),i(e,f),i(f,h),i(e,o),i(e,d),i(d,v),i(v,C),C.checked=a[5],i(v,P),i(e,$),i(e,I),W(A,I,null),a[14](e),z=!0,y||(Z=[be(t,"wheel",function(){Ht(a[4].zoomWithWheel)&&a[4].zoomWithWheel.apply(this,arguments)}),be(f,"click",a[11]),be(C,"change",a[12]),be(C,"click",a[13])],y=!0)},p(b,[w]){a=b;const j={};w&262208&&(j.$$scope={dirty:w,ctx:a}),l.$set(j),w&32&&(C.checked=a[5]);const O={};w&3&&(O.hist=a[1].hist[a[0]]),A.$set(O),w&32&&D(I,"hidden",!a[5])},i(b){z||(R(l.$$.fragment,b),R(A.$$.fragment,b),z=!0)},o(b){G(l.$$.fragment,b),G(A.$$.fragment,b),z=!1},d(b){b&&u(e),a[9](null),L(l),L(A),a[14](null),y=!1,qt(Z)}}}function le(a,e,t){return`tab-button ${e?"text-white":`${t?`text-gray-700 hover:text-black bg-white hover:bg-${a}-300`:"text-gray-400"}`}`}function us(a,e,t){let n,s;ve(a,ge,b=>t(8,n=b)),ve(a,ue,b=>t(6,s=b));let l,c,f,h,o,d=!0,v=0,C=It({},ts);Wt(()=>{t(7,o=c.getContext("2d")),t(4,h=Rt(c,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),f=new Image,f.onload=()=>o==null?void 0:o.drawImage(f,0,0);function P(b){b.msg==="imgReady"&&(fetch(`http://${window.location.hostname}:8000/img`).then(w=>w.json()).then(w=>t(1,C=w)).catch(w=>alert(w)),ie(ue,s.block="",s))}function $(b){Te[b?"unshift":"push"](()=>{c=b,t(3,c)})}const I=b=>t(0,v=b.detail),A=()=>{h.pan(0,0)};function z(){d=this.checked,t(5,d)}const y=()=>t(5,d=!d);function Z(b){Te[b?"unshift":"push"](()=>{l=b,t(2,l)})}return a.$$.update=()=>{a.$$.dirty&256&&P(n),a.$$.dirty&3&&(f.src=C.img[v]),a.$$.dirty&130&&o&&C&&t(7,o.canvas.height=128*C.n,o)},[v,C,l,c,h,d,s,o,n,$,I,A,z,y,Z]}class cs extends Re{constructor(e){super();Ge(this,e,us,is,Le,{})}}function fs(a){let e,t,n,s;return{c(){e=se("svg"),t=se("path"),n=se("path"),s=k(`
          Capture`),this.h()},l(l){e=ae(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var c=m(e);t=ae(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),n=ae(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(n).forEach(u),c.forEach(u),s=E(l,`
          Capture`),this.h()},h(){r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(l,c){N(l,e,c),i(e,t),i(e,n),N(l,s,c)},d(l){l&&u(e),l&&u(s)}}}function ps(a){let e,t,n,s,l,c;return{c(){e=se("svg"),t=se("path"),n=se("path"),s=q(),l=_("p"),c=k("Stop"),this.h()},l(f){e=ae(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var h=m(e);t=ae(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),n=ae(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(n).forEach(u),h.forEach(u),s=V(f),l=g(f,"P",{class:!0});var o=m(l);c=E(o,"Stop"),o.forEach(u),this.h()},h(){r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 mr-1"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor"),r(l,"class","flex-grow")},m(f,h){N(f,e,h),i(e,t),i(e,n),N(f,s,h),N(f,l,h),i(l,c)},d(f){f&&u(e),f&&u(s),f&&u(l)}}}function ms(a){let e,t,n,s,l,c,f,h,o,d,v,C,P,$,I,A,z,y,Z=a[1][0]+"",b,w,j,O=a[0].n_bundles+"",p,S,F,M,ce,J,fe,$e=a[1][1]+"",Ne,Ze,pe,we=a[0].n_z+"",Pe,Fe,Qe,re,me,K,he,ke=a[1][2]+"",Ie,Xe,de,Ee=a[0].n_cols+"",ze,Je,Ke,Y,x,Ye,Ce=a[0].n_bundles*a[0].n_cols/10+"",Ae,xe,et,ee,tt,Se=a[0].n_bundles*a[0].n_cols/10+"",Be,st,at,_e,oe,nt,ft;function pt(T,B){return T[2].block?ps:fs}let qe=pt(a),Q=qe(a);return{c(){e=_("span"),t=_("div"),n=_("button"),s=_("div"),Q.c(),l=q(),c=_("button"),f=_("div"),h=se("svg"),o=se("path"),d=k(`
        Preview`),C=q(),P=_("content"),$=_("div"),I=_("section"),A=_("div"),z=_("span"),y=_("span"),b=k(Z),w=k(`
            /
            `),j=_("span"),p=k(O),S=k(`
        Bundles taken`),F=q(),M=_("section"),ce=_("div"),J=_("span"),fe=_("span"),Ne=k($e),Ze=k(`
            /
            `),pe=_("span"),Pe=k(we),Fe=k(`
        Z-steps taken`),Qe=q(),re=_("section"),me=_("div"),K=_("span"),he=_("span"),Ie=k(ke),Xe=k(`
            /
            `),de=_("span"),ze=k(Ee),Je=k(`
        Columns taken`),Ke=q(),Y=_("section"),x=_("span"),Ye=k("Elapsed time: "),Ae=k(Ce),xe=k(" s"),et=q(),ee=_("span"),tt=k("Total time: "),Be=k(Se),st=k(" s"),at=q(),_e=_("div"),oe=_("progress"),this.h()},l(T){e=g(T,"SPAN",{class:!0});var B=m(e);t=g(B,"DIV",{class:!0});var Ve=m(t);n=g(Ve,"BUTTON",{type:!0,class:!0});var mt=m(n);s=g(mt,"DIV",{class:!0});var ht=m(s);Q.l(ht),ht.forEach(u),mt.forEach(u),l=V(Ve),c=g(Ve,"BUTTON",{type:!0,id:!0,class:!0});var dt=m(c);f=g(dt,"DIV",{class:!0});var lt=m(f);h=ae(lt,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _t=m(h);o=ae(_t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(o).forEach(u),_t.forEach(u),d=E(lt,`
        Preview`),lt.forEach(u),dt.forEach(u),Ve.forEach(u),C=V(B),P=g(B,"CONTENT",{class:!0});var De=m(P);$=g(De,"DIV",{class:!0});var te=m($);I=g(te,"SECTION",{class:!0});var rt=m(I);A=g(rt,"DIV",{class:!0});var gt=m(A);z=g(gt,"SPAN",{class:!0});var ye=m(z);y=g(ye,"SPAN",{class:!0});var bt=m(y);b=E(bt,Z),bt.forEach(u),w=E(ye,`
            /
            `),j=g(ye,"SPAN",{class:!0});var vt=m(j);p=E(vt,O),vt.forEach(u),ye.forEach(u),gt.forEach(u),S=E(rt,`
        Bundles taken`),rt.forEach(u),F=V(te),M=g(te,"SECTION",{class:!0});var ot=m(M);ce=g(ot,"DIV",{class:!0});var $t=m(ce);J=g($t,"SPAN",{class:!0});var Oe=m(J);fe=g(Oe,"SPAN",{class:!0});var wt=m(fe);Ne=E(wt,$e),wt.forEach(u),Ze=E(Oe,`
            /
            `),pe=g(Oe,"SPAN",{class:!0});var kt=m(pe);Pe=E(kt,we),kt.forEach(u),Oe.forEach(u),$t.forEach(u),Fe=E(ot,`
        Z-steps taken`),ot.forEach(u),Qe=V(te),re=g(te,"SECTION",{class:!0});var it=m(re);me=g(it,"DIV",{class:!0});var Et=m(me);K=g(Et,"SPAN",{class:!0});var je=m(K);he=g(je,"SPAN",{class:!0});var Ct=m(he);Ie=E(Ct,ke),Ct.forEach(u),Xe=E(je,`
            /
            `),de=g(je,"SPAN",{class:!0});var St=m(de);ze=E(St,Ee),St.forEach(u),je.forEach(u),Et.forEach(u),Je=E(it,`
        Columns taken`),it.forEach(u),Ke=V(te),Y=g(te,"SECTION",{class:!0});var Me=m(Y);x=g(Me,"SPAN",{class:!0});var Ue=m(x);Ye=E(Ue,"Elapsed time: "),Ae=E(Ue,Ce),xe=E(Ue," s"),Ue.forEach(u),et=V(Me),ee=g(Me,"SPAN",{class:!0});var He=m(ee);tt=E(He,"Total time: "),Be=E(He,Se),st=E(He," s"),He.forEach(u),Me.forEach(u),te.forEach(u),at=V(De),_e=g(De,"DIV",{class:!0});var Tt=m(_e);oe=g(Tt,"PROGRESS",{class:!0}),m(oe).forEach(u),Tt.forEach(u),De.forEach(u),B.forEach(u),this.h()},h(){r(s,"class","flex items-center h-12 text-lg"),r(n,"type","button"),r(n,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-130q06g"),D(n,"focus:ring-blue-300",!a[2].block),D(n,"focus:ring-orange-300",a[2].block),D(n,"start",!a[2].block),D(n,"stop",a[2].block),r(o,"stroke-linecap","round"),r(o,"stroke-linejoin","round"),r(o,"stroke-width","2"),r(o,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(h,"xmlns","http://www.w3.org/2000/svg"),r(h,"class","w-6 h-6 mr-1"),r(h,"fill","none"),r(h,"viewBox","0 0 24 24"),r(h,"stroke","currentColor"),r(f,"class","flex items-center"),r(c,"type","button"),r(c,"id","preview"),r(c,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-130q06g"),c.disabled=v=Boolean(a[2].block),r(t,"class","grid grid-flow-row w-36"),r(y,"class","font-mono"),r(j,"class","w-32 px-2 font-mono text-4xl font-bold "),r(z,"class","text-4xl font-bold"),r(A,"class","flex items-center"),r(I,"class","flex flex-col gap-y-1"),r(fe,"class","font-mono"),r(pe,"class","w-32 px-2 font-mono text-4xl font-bold "),r(J,"class","text-4xl font-bold"),r(ce,"class","flex items-center"),r(M,"class","flex flex-col gap-y-1"),r(he,"class","font-mono"),r(de,"class","w-32 px-2 font-mono text-4xl font-bold "),r(K,"class","text-4xl font-bold"),r(me,"class","flex items-center"),r(re,"class","flex flex-col gap-y-1"),r(x,"class","text-lg font-medium"),r(ee,"class","text-lg font-medium"),r(Y,"class","flex flex-col"),r($,"class","grid max-w-4xl grid-cols-4 mt-1"),r(oe,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-130q06g"),oe.value=a[3],r(_e,"class","mt-1"),r(P,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),r(e,"class","z-40 flex w-full space-x-2")},m(T,B){N(T,e,B),i(e,t),i(t,n),i(n,s),Q.m(s,null),i(t,l),i(t,c),i(c,f),i(f,h),i(h,o),i(f,d),i(e,C),i(e,P),i(P,$),i($,I),i(I,A),i(A,z),i(z,y),i(y,b),i(z,w),i(z,j),i(j,p),i(I,S),i($,F),i($,M),i(M,ce),i(ce,J),i(J,fe),i(fe,Ne),i(J,Ze),i(J,pe),i(pe,Pe),i(M,Fe),i($,Qe),i($,re),i(re,me),i(me,K),i(K,he),i(he,Ie),i(K,Xe),i(K,de),i(de,ze),i(re,Je),i($,Ke),i($,Y),i(Y,x),i(x,Ye),i(x,Ae),i(x,xe),i(Y,et),i(Y,ee),i(ee,tt),i(ee,Be),i(ee,st),i(P,at),i(P,_e),i(_e,oe),nt||(ft=[zt(Bt.call(null,n,"Take image and save.")),be(n,"click",a[5]),zt(Bt.call(null,c,"Take a 16-bundle image based on the current position without saving.")),be(c,"click",a[6])],nt=!0)},p(T,[B]){qe!==(qe=pt(T))&&(Q.d(1),Q=qe(T),Q&&(Q.c(),Q.m(s,null))),B&4&&D(n,"focus:ring-blue-300",!T[2].block),B&4&&D(n,"focus:ring-orange-300",T[2].block),B&4&&D(n,"start",!T[2].block),B&4&&D(n,"stop",T[2].block),B&4&&v!==(v=Boolean(T[2].block))&&(c.disabled=v),B&2&&Z!==(Z=T[1][0]+"")&&X(b,Z),B&1&&O!==(O=T[0].n_bundles+"")&&X(p,O),B&2&&$e!==($e=T[1][1]+"")&&X(Ne,$e),B&1&&we!==(we=T[0].n_z+"")&&X(Pe,we),B&2&&ke!==(ke=T[1][2]+"")&&X(Ie,ke),B&1&&Ee!==(Ee=T[0].n_cols+"")&&X(ze,Ee),B&1&&Ce!==(Ce=T[0].n_bundles*T[0].n_cols/10+"")&&X(Ae,Ce),B&1&&Se!==(Se=T[0].n_bundles*T[0].n_cols/10+"")&&X(Be,Se),B&8&&(oe.value=T[3])},i:At,o:At,d(T){T&&u(e),Q.d(),nt=!1,qt(ft)}}}function hs(a,e,t){let n,s,l;ve(a,ue,v=>t(2,n=v)),ve(a,ge,v=>t(7,s=v));let c=[0,0,0],{stats:f}=e;const h=Lt(0,{duration:400,easing:Zt});ve(a,h,v=>t(3,l=v));function o(){n.block==="capturing"?ie(ge,s="stop",s):(ie(ge,s="capture",s),ie(ue,n.block="capturing",n))}function d(){n.block==="previewing"?ie(ge,s="stop",s):(ie(ge,s="preview",s),ie(ue,n.block="previewing",n))}return a.$$set=v=>{"stats"in v&&t(0,f=v.stats)},a.$$.update=()=>{a.$$.dirty&131&&(s==null?void 0:s.step)&&(t(1,c=s.step),h.set((c[2]*(f.n_z*f.n_bundles)+c[1]*f.n_bundles+c[0])/(f.n_bundles*f.n_cols*f.n_z)))},[f,c,n,l,h,o,d,s]}class ds extends Re{constructor(e){super();Ge(this,e,hs,ms,Le,{stats:0})}}function _s(a){let e,t,n,s,l,c,f,h,o,d,v,C,P,$,I,A,z,y;function Z(p){a[2](p)}let b={};a[1]!==void 0&&(b.stats=a[1]),s=new ds({props:b}),Te.push(()=>ut(s,"stats",Z));function w(p){a[3](p)}function j(p){a[4](p)}let O={};return a[0].image_params!==void 0&&(O.params=a[0].image_params),a[1]!==void 0&&(O.stats=a[1]),d=new Ft({props:O}),Te.push(()=>ut(d,"params",w)),Te.push(()=>ut(d,"stats",j)),z=new cs({}),{c(){e=_("div"),t=_("div"),n=q(),U(s.$$.fragment),c=q(),f=_("p"),h=k("Capture Parameters"),o=q(),U(d.$$.fragment),P=q(),$=_("p"),I=k("Preview"),A=q(),U(z.$$.fragment),this.h()},l(p){e=g(p,"DIV",{class:!0});var S=m(e);t=g(S,"DIV",{class:!0}),m(t).forEach(u),n=V(S),H(s.$$.fragment,S),S.forEach(u),c=V(p),f=g(p,"P",{class:!0});var F=m(f);h=E(F,"Capture Parameters"),F.forEach(u),o=V(p),H(d.$$.fragment,p),P=V(p),$=g(p,"P",{class:!0});var M=m($);I=E(M,"Preview"),M.forEach(u),A=V(p),H(z.$$.fragment,p),this.h()},h(){r(t,"class","w-full h-4"),r(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),r(f,"class","mt-6 title"),r($,"class","title")},m(p,S){N(p,e,S),i(e,t),i(e,n),W(s,e,null),N(p,c,S),N(p,f,S),i(f,h),N(p,o,S),W(d,p,S),N(p,P,S),N(p,$,S),i($,I),N(p,A,S),W(z,p,S),y=!0},p(p,[S]){const F={};!l&&S&2&&(l=!0,F.stats=p[1],ct(()=>l=!1)),s.$set(F);const M={};!v&&S&1&&(v=!0,M.params=p[0].image_params,ct(()=>v=!1)),!C&&S&2&&(C=!0,M.stats=p[1],ct(()=>C=!1)),d.$set(M)},i(p){y||(R(s.$$.fragment,p),R(d.$$.fragment,p),R(z.$$.fragment,p),y=!0)},o(p){G(s.$$.fragment,p),G(d.$$.fragment,p),G(z.$$.fragment,p),y=!1},d(p){p&&u(e),L(s),p&&u(c),p&&u(f),p&&u(o),L(d,p),p&&u(P),p&&u($),p&&u(A),L(z,p)}}}function gs(a,e){a&&(a.querySelectorAll("input").forEach(t=>t.disabled=e),a.querySelectorAll("select").forEach(t=>t.disabled=e),a.querySelectorAll("button").forEach(t=>t.disabled=e))}function bs(a,e,t){let n;ve(a,ue,h=>t(0,n=h));let s={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function l(h){s=h,t(1,s)}function c(h){a.$$.not_equal(n.image_params,h)&&(n.image_params=h,ue.set(n))}function f(h){s=h,t(1,s)}return a.$$.update=()=>{a.$$.dirty&1&&gs(document.getElementById("control"),n.block)},[n,s,l,c,f]}class Ss extends Re{constructor(e){super();Ge(this,e,bs,_s,Le,{})}}export{Ss as default};
