import{S as xt,i as Nt,s as At,e as p,k as C,O as X,t as k,c as f,a as c,d as n,m as I,P as Y,h as b,b as e,U as Q,g as T,H as t,Q as wt,V as Et,j as W,M as Pt,W as Ct,N as Be,ax as It,ay as Tt,X as oe,T as Fe,Y as Je,w as Ke,x as Le,y as et,Z as tt,q as st,o as at,B as lt}from"../chunks/vendor-9417e0b8.js";import{P as yt}from"../chunks/preview-42787fbc.js";import{u as ve,c as _e}from"../chunks/store-319e096e.js";import{t as St}from"../chunks/tooltip-d1460923.js";import{T as Bt}from"../chunks/takeimage-dd9c52e9.js";import"../chunks/preview.svelte_svelte_type_style_lang-df4526fd.js";function zt(l){let a,o,s,i;return{c(){a=X("svg"),o=X("path"),s=X("path"),i=k(`
          Capture`),this.h()},l(m){a=Y(m,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var v=c(a);o=Y(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(o).forEach(n),s=Y(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(n),v.forEach(n),i=b(m,`
          Capture`),this.h()},h(){e(o,"stroke-linecap","round"),e(o,"stroke-linejoin","round"),e(o,"stroke-width","2"),e(o,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),e(s,"stroke-linecap","round"),e(s,"stroke-linejoin","round"),e(s,"stroke-width","2"),e(s,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(a,"xmlns","http://www.w3.org/2000/svg"),e(a,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),e(a,"fill","none"),e(a,"viewBox","0 0 24 24"),e(a,"stroke","currentColor")},m(m,v){T(m,a,v),t(a,o),t(a,s),T(m,i,v)},d(m){m&&n(a),m&&n(i)}}}function $t(l){let a,o,s,i,m,v;return{c(){a=X("svg"),o=X("path"),s=X("path"),i=C(),m=p("p"),v=k("Stop"),this.h()},l(u){a=Y(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var d=c(a);o=Y(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(o).forEach(n),s=Y(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(n),d.forEach(n),i=I(u),m=f(u,"P",{class:!0});var w=c(m);v=b(w,"Stop"),w.forEach(n),this.h()},h(){e(o,"stroke-linecap","round"),e(o,"stroke-linejoin","round"),e(o,"stroke-width","2"),e(o,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(s,"stroke-linecap","round"),e(s,"stroke-linejoin","round"),e(s,"stroke-width","2"),e(s,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),e(a,"xmlns","http://www.w3.org/2000/svg"),e(a,"class","w-6 h-6 mr-1"),e(a,"fill","none"),e(a,"viewBox","0 0 24 24"),e(a,"stroke","currentColor"),e(m,"class","flex-grow")},m(u,d){T(u,a,d),t(a,o),t(a,s),T(u,i,d),T(u,m,d),t(m,v)},d(u){u&&n(a),u&&n(i),u&&n(m)}}}function jt(l){let a,o,s,i,m,v,u,d,w,E,$,P,D,S,x,y,N,A,O,M=l[1][0]+"",L,ie,B,r=l[0].n_bundles+"",h,j,z,F,ee,q,te,ue=l[1][1]+"",he,ze,se,ce=l[0].n_z+"",ge,$e,je,J,ae,U,le,pe=l[1][2]+"",ke,Ve,ne,fe=l[0].n_cols+"",be,De,Oe,Z,R,Me,de=l[0].n_bundles*l[0].n_cols/10+"",we,qe,Ue,G,Ze,me=l[0].n_bundles*l[0].n_cols/10+"",Ee,Re,Ge,re,K,He,nt;function rt(_,g){return _[2].block==="capturing"||_[2].block==="previewing"?$t:zt}let Pe=rt(l),V=Pe(l);return{c(){a=p("span"),o=p("div"),s=p("button"),i=p("div"),V.c(),v=C(),u=p("button"),d=p("div"),w=X("svg"),E=X("path"),$=k(`
        Preview`),D=C(),S=p("content"),x=p("div"),y=p("section"),N=p("div"),A=p("span"),O=p("span"),L=k(M),ie=k(`
            /
            `),B=p("span"),h=k(r),j=k(`
        Bundles taken`),z=C(),F=p("section"),ee=p("div"),q=p("span"),te=p("span"),he=k(ue),ze=k(`
            /
            `),se=p("span"),ge=k(ce),$e=k(`
        Z-steps taken`),je=C(),J=p("section"),ae=p("div"),U=p("span"),le=p("span"),ke=k(pe),Ve=k(`
            /
            `),ne=p("span"),be=k(fe),De=k(`
        Columns taken`),Oe=C(),Z=p("section"),R=p("span"),Me=k("Elapsed time: "),we=k(de),qe=k(" s"),Ue=C(),G=p("span"),Ze=k("Total time: "),Ee=k(me),Re=k(" s"),Ge=C(),re=p("div"),K=p("progress"),this.h()},l(_){a=f(_,"SPAN",{class:!0});var g=c(a);o=f(g,"DIV",{class:!0});var Se=c(o);s=f(Se,"BUTTON",{type:!0,class:!0});var ot=c(s);i=f(ot,"DIV",{class:!0});var it=c(i);V.l(it),it.forEach(n),ot.forEach(n),v=I(Se),u=f(Se,"BUTTON",{type:!0,id:!0,class:!0});var ut=c(u);d=f(ut,"DIV",{class:!0});var Qe=c(d);w=Y(Qe,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var ct=c(w);E=Y(ct,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(E).forEach(n),ct.forEach(n),$=b(Qe,`
        Preview`),Qe.forEach(n),ut.forEach(n),Se.forEach(n),D=I(g),S=f(g,"CONTENT",{class:!0});var xe=c(S);x=f(xe,"DIV",{class:!0});var H=c(x);y=f(H,"SECTION",{class:!0});var We=c(y);N=f(We,"DIV",{class:!0});var pt=c(N);A=f(pt,"SPAN",{class:!0});var Ne=c(A);O=f(Ne,"SPAN",{class:!0});var ft=c(O);L=b(ft,M),ft.forEach(n),ie=b(Ne,`
            /
            `),B=f(Ne,"SPAN",{class:!0});var dt=c(B);h=b(dt,r),dt.forEach(n),Ne.forEach(n),pt.forEach(n),j=b(We,`
        Bundles taken`),We.forEach(n),z=I(H),F=f(H,"SECTION",{class:!0});var Xe=c(F);ee=f(Xe,"DIV",{class:!0});var mt=c(ee);q=f(mt,"SPAN",{class:!0});var Ae=c(q);te=f(Ae,"SPAN",{class:!0});var _t=c(te);he=b(_t,ue),_t.forEach(n),ze=b(Ae,`
            /
            `),se=f(Ae,"SPAN",{class:!0});var vt=c(se);ge=b(vt,ce),vt.forEach(n),Ae.forEach(n),mt.forEach(n),$e=b(Xe,`
        Z-steps taken`),Xe.forEach(n),je=I(H),J=f(H,"SECTION",{class:!0});var Ye=c(J);ae=f(Ye,"DIV",{class:!0});var ht=c(ae);U=f(ht,"SPAN",{class:!0});var Ce=c(U);le=f(Ce,"SPAN",{class:!0});var gt=c(le);ke=b(gt,pe),gt.forEach(n),Ve=b(Ce,`
            /
            `),ne=f(Ce,"SPAN",{class:!0});var kt=c(ne);be=b(kt,fe),kt.forEach(n),Ce.forEach(n),ht.forEach(n),De=b(Ye,`
        Columns taken`),Ye.forEach(n),Oe=I(H),Z=f(H,"SECTION",{class:!0});var Ie=c(Z);R=f(Ie,"SPAN",{class:!0});var Te=c(R);Me=b(Te,"Elapsed time: "),we=b(Te,de),qe=b(Te," s"),Te.forEach(n),Ue=I(Ie),G=f(Ie,"SPAN",{class:!0});var ye=c(G);Ze=b(ye,"Total time: "),Ee=b(ye,me),Re=b(ye," s"),ye.forEach(n),Ie.forEach(n),H.forEach(n),Ge=I(xe),re=f(xe,"DIV",{class:!0});var bt=c(re);K=f(bt,"PROGRESS",{class:!0}),c(K).forEach(n),bt.forEach(n),xe.forEach(n),g.forEach(n),this.h()},h(){e(i,"class","flex items-center h-12 text-lg"),e(s,"type","button"),e(s,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-cbcxg4"),s.disabled=m=l[3]!=="ok",Q(s,"focus:ring-blue-300",l[3]==="ok"),Q(s,"focus:ring-orange-300",l[3]==="stop"),Q(s,"start",l[3]==="ok"),Q(s,"stop",l[3]==="stop"),e(E,"stroke-linecap","round"),e(E,"stroke-linejoin","round"),e(E,"stroke-width","2"),e(E,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(w,"xmlns","http://www.w3.org/2000/svg"),e(w,"class","w-6 h-6 mr-1"),e(w,"fill","none"),e(w,"viewBox","0 0 24 24"),e(w,"stroke","currentColor"),e(d,"class","flex items-center"),e(u,"type","button"),e(u,"id","preview"),e(u,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-cbcxg4"),u.disabled=P=Boolean(l[2].block),e(o,"class","grid grid-flow-row w-36"),e(O,"class","font-mono"),e(B,"class","w-32 px-2 font-mono text-4xl font-bold "),e(A,"class","text-4xl font-bold"),e(N,"class","flex items-center"),e(y,"class","flex flex-col gap-y-1"),e(te,"class","font-mono"),e(se,"class","w-32 px-2 font-mono text-4xl font-bold "),e(q,"class","text-4xl font-bold"),e(ee,"class","flex items-center"),e(F,"class","flex flex-col gap-y-1"),e(le,"class","font-mono"),e(ne,"class","w-32 px-2 font-mono text-4xl font-bold "),e(U,"class","text-4xl font-bold"),e(ae,"class","flex items-center"),e(J,"class","flex flex-col gap-y-1"),e(R,"class","text-lg font-medium"),e(G,"class","text-lg font-medium"),e(Z,"class","flex flex-col"),e(x,"class","grid max-w-4xl grid-cols-4 mt-1"),e(K,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-cbcxg4"),K.value=l[4],e(re,"class","mt-1"),e(S,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),e(a,"class","z-40 flex w-full space-x-2")},m(_,g){T(_,a,g),t(a,o),t(o,s),t(s,i),V.m(i,null),t(o,v),t(o,u),t(u,d),t(d,w),t(w,E),t(d,$),t(a,D),t(a,S),t(S,x),t(x,y),t(y,N),t(N,A),t(A,O),t(O,L),t(A,ie),t(A,B),t(B,h),t(y,j),t(x,z),t(x,F),t(F,ee),t(ee,q),t(q,te),t(te,he),t(q,ze),t(q,se),t(se,ge),t(F,$e),t(x,je),t(x,J),t(J,ae),t(ae,U),t(U,le),t(le,ke),t(U,Ve),t(U,ne),t(ne,be),t(J,De),t(x,Oe),t(x,Z),t(Z,R),t(R,Me),t(R,we),t(R,qe),t(Z,Ue),t(Z,G),t(G,Ze),t(G,Ee),t(G,Re),t(S,Ge),t(S,re),t(re,K),He||(nt=[wt(St.call(null,s,"Take image and save.")),Et(s,"click",l[6]),wt(St.call(null,u,"Take a 16-bundle image based on the current position without saving.")),Et(u,"click",l[7])],He=!0)},p(_,[g]){Pe!==(Pe=rt(_))&&(V.d(1),V=Pe(_),V&&(V.c(),V.m(i,null))),g&8&&m!==(m=_[3]!=="ok")&&(s.disabled=m),g&8&&Q(s,"focus:ring-blue-300",_[3]==="ok"),g&8&&Q(s,"focus:ring-orange-300",_[3]==="stop"),g&8&&Q(s,"start",_[3]==="ok"),g&8&&Q(s,"stop",_[3]==="stop"),g&4&&P!==(P=Boolean(_[2].block))&&(u.disabled=P),g&2&&M!==(M=_[1][0]+"")&&W(L,M),g&1&&r!==(r=_[0].n_bundles+"")&&W(h,r),g&2&&ue!==(ue=_[1][1]+"")&&W(he,ue),g&1&&ce!==(ce=_[0].n_z+"")&&W(ge,ce),g&2&&pe!==(pe=_[1][2]+"")&&W(ke,pe),g&1&&fe!==(fe=_[0].n_cols+"")&&W(be,fe),g&1&&de!==(de=_[0].n_bundles*_[0].n_cols/10+"")&&W(we,de),g&1&&me!==(me=_[0].n_bundles*_[0].n_cols/10+"")&&W(Ee,me),g&16&&(K.value=_[4])},i:Pt,o:Pt,d(_){_&&n(a),V.d(),He=!1,Ct(nt)}}}function Vt(l,a,o){let s,i,m;Be(l,ve,P=>o(2,s=P)),Be(l,_e,P=>o(8,i=P));let v=[0,0,0],{stats:u}=a;const d=It(0,{duration:400,easing:Tt});Be(l,d,P=>o(4,m=P));let w="ok";function E(){s.block==="capturing"?oe(_e,i={cmd:"stop"},i):(oe(_e,i={cmd:"capture"},i),oe(ve,s.block="capturing",s))}function $(){s.block==="previewing"?oe(_e,i={cmd:"stop"},i):(oe(_e,i={cmd:"preview"},i),oe(ve,s.block="previewing",s))}return l.$$set=P=>{"stats"in P&&o(0,u=P.stats)},l.$$.update=()=>{l.$$.dirty&259&&(i==null?void 0:i.step)&&(o(1,v=i.step),d.set((v[2]*(u.n_z*u.n_bundles)+v[1]*u.n_bundles+v[0])/(u.n_bundles*u.n_cols*u.n_z))),l.$$.dirty&4&&o(3,w=s.block==="capturing"?"stop":"ok"),l.$$.dirty&4&&s.block},[u,v,s,w,m,d,E,$,i]}class Dt extends xt{constructor(a){super();Nt(this,a,Vt,jt,At,{stats:0})}}function Ot(l){let a,o,s,i,m,v,u,d,w,E,$,P,D,S,x,y,N,A;function O(r){l[2](r)}let M={};l[1]!==void 0&&(M.stats=l[1]),i=new Dt({props:M}),Fe.push(()=>Je(i,"stats",O));function L(r){l[3](r)}function ie(r){l[4](r)}let B={inAuto:!1};return l[0].image_params!==void 0&&(B.params=l[0].image_params),l[1]!==void 0&&(B.stats=l[1]),E=new Bt({props:B}),Fe.push(()=>Je(E,"params",L)),Fe.push(()=>Je(E,"stats",ie)),N=new yt({}),{c(){a=p("div"),o=p("div"),s=C(),Ke(i.$$.fragment),v=C(),u=p("p"),d=k("Capture Parameters"),w=C(),Ke(E.$$.fragment),D=C(),S=p("p"),x=k("Preview"),y=C(),Ke(N.$$.fragment),this.h()},l(r){a=f(r,"DIV",{class:!0});var h=c(a);o=f(h,"DIV",{class:!0}),c(o).forEach(n),s=I(h),Le(i.$$.fragment,h),h.forEach(n),v=I(r),u=f(r,"P",{class:!0});var j=c(u);d=b(j,"Capture Parameters"),j.forEach(n),w=I(r),Le(E.$$.fragment,r),D=I(r),S=f(r,"P",{class:!0});var z=c(S);x=b(z,"Preview"),z.forEach(n),y=I(r),Le(N.$$.fragment,r),this.h()},h(){e(o,"class","w-full h-4"),e(a,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),e(u,"class","mt-6 title"),e(S,"class","title")},m(r,h){T(r,a,h),t(a,o),t(a,s),et(i,a,null),T(r,v,h),T(r,u,h),t(u,d),T(r,w,h),et(E,r,h),T(r,D,h),T(r,S,h),t(S,x),T(r,y,h),et(N,r,h),A=!0},p(r,[h]){const j={};!m&&h&2&&(m=!0,j.stats=r[1],tt(()=>m=!1)),i.$set(j);const z={};!$&&h&1&&($=!0,z.params=r[0].image_params,tt(()=>$=!1)),!P&&h&2&&(P=!0,z.stats=r[1],tt(()=>P=!1)),E.$set(z)},i(r){A||(st(i.$$.fragment,r),st(E.$$.fragment,r),st(N.$$.fragment,r),A=!0)},o(r){at(i.$$.fragment,r),at(E.$$.fragment,r),at(N.$$.fragment,r),A=!1},d(r){r&&n(a),lt(i),r&&n(v),r&&n(u),r&&n(w),lt(E,r),r&&n(D),r&&n(S),r&&n(y),lt(N,r)}}}function Mt(l,a){l&&(l.querySelectorAll("input").forEach(o=>o.disabled=a),l.querySelectorAll("select").forEach(o=>o.disabled=a),l.querySelectorAll("button").forEach(o=>o.disabled=a))}function qt(l,a,o){let s;Be(l,ve,d=>o(0,s=d));let i={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function m(d){i=d,o(1,i)}function v(d){l.$$.not_equal(s.image_params,d)&&(s.image_params=d,ve.set(s))}function u(d){i=d,o(1,i)}return l.$$.update=()=>{l.$$.dirty&1&&Mt(document.getElementById("control"),s.block)},[s,i,m,v,u]}class Wt extends xt{constructor(a){super();Nt(this,a,qt,Ot,At,{})}}export{Wt as default};
