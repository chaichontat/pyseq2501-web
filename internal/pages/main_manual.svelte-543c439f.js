import{S as Ye,i as Fe,s as Ge,V as de,Z as _e,w as me,x as ge,y as he,_ as ve,q as ke,o as be,B as we,N as se,O as K,e as h,t as E,k as D,c as v,a as _,h as S,d as u,m as M,b as s,g as C,H as n,j as W,P as Y,Q as F,W as X,T as He,X as Qe,Y as Je}from"../chunks/vendor-8e1ae6ee.js";import{P as Ke,T as Le,a as Re}from"../chunks/takeimage-acc68adb.js";import{s as Ee,c as te,l as et,u as We}from"../chunks/utils-ef7584fe.js";import{t as Xe}from"../chunks/tooltip-58adbb05.js";import"../chunks/go-33291011.js";function tt(a){let e,t,r,o,p,l=a[1][0]+"",c,f,d,g=a[0].n_bundles+"",N,x,B,I,k,w,m,b=a[1][1]+"",O,q,z,V=a[0].n_z+"",$,i,P,T,j,Z,G,L=a[1][2]+"",ae,Se,J,R=a[0].n_cols+"",re,Pe,Ie,U,H,Ne,le,ye,Ae,Q,Ce,ee=a[0].n_bundles*a[0].n_cols/10+"",ne,xe;return{c(){e=h("div"),t=h("section"),r=h("div"),o=h("span"),p=h("span"),c=E(l),f=E(`
          /
          `),d=h("span"),N=E(g),x=E(`
      Bundles taken`),B=D(),I=h("section"),k=h("div"),w=h("span"),m=h("span"),O=E(b),q=E(`
          /
          `),z=h("span"),$=E(V),i=E(`
      Z-steps taken`),P=D(),T=h("section"),j=h("div"),Z=h("span"),G=h("span"),ae=E(L),Se=E(`
          /
          `),J=h("span"),re=E(R),Pe=E(`
      Columns taken`),Ie=D(),U=h("section"),H=h("span"),Ne=E("Elapsed time: "),le=E(a[5]),ye=E(" s"),Ae=D(),Q=h("span"),Ce=E("Total time: "),ne=E(ee),xe=E(" s"),this.h()},l(A){e=v(A,"DIV",{class:!0});var y=_(e);t=v(y,"SECTION",{class:!0});var Be=_(t);r=v(Be,"DIV",{class:!0});var ze=_(r);o=v(ze,"SPAN",{class:!0});var oe=_(o);p=v(oe,"SPAN",{class:!0});var Ve=_(p);c=S(Ve,l),Ve.forEach(u),f=S(oe,`
          /
          `),d=v(oe,"SPAN",{class:!0});var $e=_(d);N=S($e,g),$e.forEach(u),oe.forEach(u),ze.forEach(u),x=S(Be,`
      Bundles taken`),Be.forEach(u),B=M(y),I=v(y,"SECTION",{class:!0});var Te=_(I);k=v(Te,"DIV",{class:!0});var De=_(k);w=v(De,"SPAN",{class:!0});var ie=_(w);m=v(ie,"SPAN",{class:!0});var Me=_(m);O=S(Me,b),Me.forEach(u),q=S(ie,`
          /
          `),z=v(ie,"SPAN",{class:!0});var Oe=_(z);$=S(Oe,V),Oe.forEach(u),ie.forEach(u),De.forEach(u),i=S(Te,`
      Z-steps taken`),Te.forEach(u),P=M(y),T=v(y,"SECTION",{class:!0});var je=_(T);j=v(je,"DIV",{class:!0});var qe=_(j);Z=v(qe,"SPAN",{class:!0});var ue=_(Z);G=v(ue,"SPAN",{class:!0});var Ze=_(G);ae=S(Ze,L),Ze.forEach(u),Se=S(ue,`
          /
          `),J=v(ue,"SPAN",{class:!0});var Ue=_(J);re=S(Ue,R),Ue.forEach(u),ue.forEach(u),qe.forEach(u),Pe=S(je,`
      Columns taken`),je.forEach(u),Ie=M(y),U=v(y,"SECTION",{class:!0});var ce=_(U);H=v(ce,"SPAN",{class:!0});var pe=_(H);Ne=S(pe,"Elapsed time: "),le=S(pe,a[5]),ye=S(pe," s"),pe.forEach(u),Ae=M(ce),Q=v(ce,"SPAN",{class:!0});var fe=_(Q);Ce=S(fe,"Total time: "),ne=S(fe,ee),xe=S(fe," s"),fe.forEach(u),ce.forEach(u),y.forEach(u),this.h()},h(){s(p,"class","font-mono"),s(d,"class","w-32 px-2 font-mono text-4xl font-bold "),s(o,"class","text-4xl font-bold"),s(r,"class","flex items-center"),s(t,"class","flex flex-col gap-y-1"),s(m,"class","font-mono"),s(z,"class","w-32 px-2 font-mono text-4xl font-bold "),s(w,"class","text-4xl font-bold"),s(k,"class","flex items-center"),s(I,"class","flex flex-col gap-y-1"),s(G,"class","font-mono"),s(J,"class","w-32 px-2 font-mono text-4xl font-bold "),s(Z,"class","text-4xl font-bold"),s(j,"class","flex items-center"),s(T,"class","flex flex-col gap-y-1"),s(H,"class","text-lg font-medium"),s(Q,"class","text-lg font-medium"),s(U,"class","flex flex-col"),s(e,"class","grid max-w-4xl grid-cols-4 mt-1")},m(A,y){C(A,e,y),n(e,t),n(t,r),n(r,o),n(o,p),n(p,c),n(o,f),n(o,d),n(d,N),n(t,x),n(e,B),n(e,I),n(I,k),n(k,w),n(w,m),n(m,O),n(w,q),n(w,z),n(z,$),n(I,i),n(e,P),n(e,T),n(T,j),n(j,Z),n(Z,G),n(G,ae),n(Z,Se),n(Z,J),n(J,re),n(T,Pe),n(e,Ie),n(e,U),n(U,H),n(H,Ne),n(H,le),n(H,ye),n(U,Ae),n(U,Q),n(Q,Ce),n(Q,ne),n(Q,xe)},p(A,y){y&2&&l!==(l=A[1][0]+"")&&W(c,l),y&1&&g!==(g=A[0].n_bundles+"")&&W(N,g),y&2&&b!==(b=A[1][1]+"")&&W(O,b),y&1&&V!==(V=A[0].n_z+"")&&W($,V),y&2&&L!==(L=A[1][2]+"")&&W(ae,L),y&1&&R!==(R=A[0].n_cols+"")&&W(re,R),y&32&&W(le,A[5]),y&1&&ee!==(ee=A[0].n_bundles*A[0].n_cols/10+"")&&W(ne,ee)},d(A){A&&u(e)}}}function st(a){let e,t,r,o;return{c(){e=Y("svg"),t=Y("path"),r=Y("path"),o=E(`
          Capture`),this.h()},l(p){e=F(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=_(e);t=F(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(t).forEach(u),r=F(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(r).forEach(u),l.forEach(u),o=S(p,`
          Capture`),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","2"),s(r,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor")},m(p,l){C(p,e,l),n(e,t),n(e,r),C(p,o,l)},d(p){p&&u(e),p&&u(o)}}}function at(a){let e,t,r,o,p,l;return{c(){e=Y("svg"),t=Y("path"),r=Y("path"),o=D(),p=h("p"),l=E("Stop"),this.h()},l(c){e=F(c,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var f=_(e);t=F(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(t).forEach(u),r=F(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(r).forEach(u),f.forEach(u),o=M(c),p=v(c,"P",{class:!0});var d=_(p);l=S(d,"Stop"),d.forEach(u),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","2"),s(r,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 mr-1"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor"),s(p,"class","flex-grow")},m(c,f){C(c,e,f),n(e,t),n(e,r),C(c,o,f),C(c,p,f),n(p,l)},d(c){c&&u(e),c&&u(o),c&&u(p)}}}function rt(a){let e,t,r,o,p,l,c,f,d,g,N,x,B;function I(m,b){return m[3].block==="capturing"||m[3].block==="previewing"?at:st}let k=I(a),w=k(a);return{c(){e=h("div"),t=h("button"),r=h("div"),w.c(),p=D(),l=h("button"),c=h("div"),f=Y("svg"),d=Y("path"),g=E(`
        Preview`),this.h()},l(m){e=v(m,"DIV",{slot:!0,class:!0});var b=_(e);t=v(b,"BUTTON",{type:!0,class:!0});var O=_(t);r=v(O,"DIV",{class:!0});var q=_(r);w.l(q),q.forEach(u),O.forEach(u),p=M(b),l=v(b,"BUTTON",{type:!0,id:!0,class:!0});var z=_(l);c=v(z,"DIV",{class:!0});var V=_(c);f=F(V,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var $=_(f);d=F($,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(d).forEach(u),$.forEach(u),g=S(V,`
        Preview`),V.forEach(u),z.forEach(u),b.forEach(u),this.h()},h(){s(r,"class","flex items-center h-12 text-lg cursor-pointer"),s(t,"type","button"),s(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-1rgmygs"),t.disabled=o=a[4]!=="ok"||!a[6].connected,X(t,"focus:ring-blue-300",a[4]==="ok"),X(t,"focus:ring-orange-300",a[4]==="stop"),X(t,"start",a[4]==="ok"),X(t,"stop",a[4]==="stop"),s(d,"stroke-linecap","round"),s(d,"stroke-linejoin","round"),s(d,"stroke-width","2"),s(d,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(f,"xmlns","http://www.w3.org/2000/svg"),s(f,"class","w-6 h-6 mr-1"),s(f,"fill","none"),s(f,"viewBox","0 0 24 24"),s(f,"stroke","currentColor"),s(c,"class","flex items-center"),s(l,"type","button"),s(l,"id","preview"),s(l,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-1rgmygs"),l.disabled=N=Boolean(a[3].block)||!a[6].connected,s(e,"slot","buttons"),s(e,"class","grid grid-flow-row w-36")},m(m,b){C(m,e,b),n(e,t),n(t,r),w.m(r,null),n(e,p),n(e,l),n(l,c),n(c,f),n(f,d),n(c,g),x||(B=[He(Xe.call(null,t,"Take image and save.")),Qe(t,"click",a[7]),He(Xe.call(null,l,"Take a 16-bundle image based on the current position without saving.")),Qe(l,"click",a[8])],x=!0)},p(m,b){k!==(k=I(m))&&(w.d(1),w=k(m),w&&(w.c(),w.m(r,null))),b&80&&o!==(o=m[4]!=="ok"||!m[6].connected)&&(t.disabled=o),b&16&&X(t,"focus:ring-blue-300",m[4]==="ok"),b&16&&X(t,"focus:ring-orange-300",m[4]==="stop"),b&16&&X(t,"start",m[4]==="ok"),b&16&&X(t,"stop",m[4]==="stop"),b&72&&N!==(N=Boolean(m[3].block)||!m[6].connected)&&(l.disabled=N)},d(m){m&&u(e),w.d(),x=!1,Je(B)}}}function lt(a){let e,t,r;function o(l){a[11](l)}let p={$$slots:{buttons:[rt],default:[tt]},$$scope:{ctx:a}};return a[2]!==void 0&&(p.progress=a[2]),e=new Ke({props:p}),de.push(()=>_e(e,"progress",o)),{c(){me(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,c){he(e,l,c),r=!0},p(l,[c]){const f={};c&8315&&(f.$$scope={dirty:c,ctx:l}),!t&&c&4&&(t=!0,f.progress=l[2],ve(()=>t=!1)),e.$set(f)},i(l){r||(ke(e.$$.fragment,l),r=!0)},o(l){be(e.$$.fragment,l),r=!1},d(l){we(e,l)}}}function nt(a,e,t){let r,o,p;se(a,Ee,k=>t(3,r=k)),se(a,te,k=>t(10,o=k)),se(a,et,k=>t(6,p=k));let l=[0,0,0],c,{stats:f}=e,d="ok",g,N=0;function x(){console.log("hi"),g&&clearInterval(g),r.block==="capturing"?K(te,o={cmd:"stop"},o):(t(5,N=0),t(9,g=setInterval(()=>{t(5,N+=1)},1e3)),K(te,o={cmd:"capture"},o),K(Ee,r.block="capturing",r))}function B(){g&&clearInterval(g),r.block==="previewing"?K(te,o={cmd:"stop"},o):(t(5,N=0),t(9,g=setInterval(()=>{t(5,N+=1)},1e3)),K(te,o={cmd:"preview"},o),K(Ee,r.block="previewing",r))}function I(k){c=k,t(2,c)}return a.$$set=k=>{"stats"in k&&t(0,f=k.stats)},a.$$.update=()=>{a.$$.dirty&1031&&c&&(o==null?void 0:o.step)&&(t(1,l=o.step),c.set((l[2]*(f.n_z*f.n_bundles)+l[1]*f.n_bundles+l[0])/(f.n_bundles*f.n_cols*f.n_z))),a.$$.dirty&8&&t(4,d=r.block==="capturing"?"stop":"ok"),a.$$.dirty&8&&r.block,a.$$.dirty&520&&!r.block&&g&&clearInterval(g)},[f,l,c,r,d,N,p,x,B,g,o,I]}class ot extends Ye{constructor(e){super();Fe(this,e,nt,lt,Ge,{stats:0})}}function it(a){let e,t,r,o,p,l,c,f,d,g,N,x,B,I,k,w,m,b;function O(i){a[3](i)}let q={};a[0]!==void 0&&(q.stats=a[0]),o=new ot({props:q}),de.push(()=>_e(o,"stats",O));function z(i){a[4](i)}function V(i){a[5](i)}let $={inAuto:!1};return a[1].image_params!==void 0&&($.params=a[1].image_params),a[0]!==void 0&&($.stats=a[0]),g=new Le({props:$}),de.push(()=>_e(g,"params",z)),de.push(()=>_e(g,"stats",V)),m=new Re({}),{c(){e=h("div"),t=h("div"),r=D(),me(o.$$.fragment),l=D(),c=h("p"),f=E("Capture Parameters"),d=D(),me(g.$$.fragment),B=D(),I=h("p"),k=E("Preview"),w=D(),me(m.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var P=_(e);t=v(P,"DIV",{class:!0}),_(t).forEach(u),r=M(P),ge(o.$$.fragment,P),P.forEach(u),l=M(i),c=v(i,"P",{class:!0});var T=_(c);f=S(T,"Capture Parameters"),T.forEach(u),d=M(i),ge(g.$$.fragment,i),B=M(i),I=v(i,"P",{class:!0});var j=_(I);k=S(j,"Preview"),j.forEach(u),w=M(i),ge(m.$$.fragment,i),this.h()},h(){s(t,"class","w-full h-4"),s(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),s(c,"class","mt-6 title"),s(I,"class","title")},m(i,P){C(i,e,P),n(e,t),n(e,r),he(o,e,null),C(i,l,P),C(i,c,P),n(c,f),C(i,d,P),he(g,i,P),C(i,B,P),C(i,I,P),n(I,k),C(i,w,P),he(m,i,P),b=!0},p(i,[P]){const T={};!p&&P&1&&(p=!0,T.stats=i[0],ve(()=>p=!1)),o.$set(T);const j={};!N&&P&2&&(N=!0,j.params=i[1].image_params,ve(()=>N=!1)),!x&&P&1&&(x=!0,j.stats=i[0],ve(()=>x=!1)),g.$set(j)},i(i){b||(ke(o.$$.fragment,i),ke(g.$$.fragment,i),ke(m.$$.fragment,i),b=!0)},o(i){be(o.$$.fragment,i),be(g.$$.fragment,i),be(m.$$.fragment,i),b=!1},d(i){i&&u(e),we(o),i&&u(l),i&&u(c),i&&u(d),we(g,i),i&&u(B),i&&u(I),i&&u(w),we(m,i)}}}function ut(a,e){a&&(a.querySelectorAll("input").forEach(t=>t.disabled=e),a.querySelectorAll("select").forEach(t=>t.disabled=e),a.querySelectorAll("button").forEach(t=>t.disabled=e))}function ct(a,e,t){let r,o;se(a,Ee,d=>t(2,r=d)),se(a,We,d=>t(1,o=d));let p={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function l(d){p=d,t(0,p)}function c(d){a.$$.not_equal(o.image_params,d)&&(o.image_params=d,We.set(o))}function f(d){p=d,t(0,p)}return a.$$.update=()=>{a.$$.dirty&4&&ut(document.getElementById("control"),Boolean(r.block))},[p,o,r,l,c,f]}class gt extends Ye{constructor(e){super();Fe(this,e,ct,it,Ge,{})}}export{gt as default};
