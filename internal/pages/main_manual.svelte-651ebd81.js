import{S as qe,i as Me,s as je,a8 as dt,e as g,w as D,c as _,a as m,x as H,d as u,b as o,g as y,y as U,q as W,o as F,B as x,a9 as gt,aa as _t,k as A,m as q,t as $,h as v,H as i,j as K,ab as bt,R as M,T as pe,ac as $t,U as ht,N as oe,v as vt,ad as wt,ae as kt,Q as Ke,af as Ae,_ as se,O as ee,P as te,a0 as Et,M as mt,V as J,ag as St,ah as Ct,ai as Tt,W as Nt,X as Pt}from"../chunks/vendor-720ad347.js";import{i as et,u as ie,c as me}from"../chunks/store-cd2ed933.js";import{t as yt,T as Bt}from"../chunks/takeimage-ae97bd53.js";import"../chunks/spinning-782accff.js";import"../chunks/coords-9a57de07.js";function zt(n){let e;return{c(){e=g("div"),this.h()},l(a){e=_(a,"DIV",{class:!0}),m(e).forEach(u),this.h()},h(){o(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(a,t){y(a,e,t)},d(a){a&&u(e)}}}function It(n){let e,a=n[3]+"",t;return{c(){e=g("span"),t=$(a),this.h()},l(r){e=_(r,"SPAN",{class:!0});var s=m(e);t=v(s,a),s.forEach(u),this.h()},h(){o(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(r,s){y(r,e,s),i(e,t)},p(r,s){s&8&&a!==(a=r[3]+"")&&K(t,a)},d(r){r&&u(e)}}}function At(n){let e,a,t,r;return e=new gt({props:{data:n[1],width:80,$$slots:{default:[zt]},$$scope:{ctx:n}}}),t=new _t({props:{vertical:!0,count:5,$$slots:{default:[It,({value:s})=>({3:s}),({value:s})=>s?8:0]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment),a=A(),D(t.$$.fragment)},l(s){H(e.$$.fragment,s),a=q(s),H(t.$$.fragment,s)},m(s,c){U(e,s,c),y(s,a,c),U(t,s,c),r=!0},p(s,c){const f={};c&2&&(f.data=s[1]),c&16&&(f.$$scope={dirty:c,ctx:s}),e.$set(f);const d={};c&24&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i(s){r||(W(e.$$.fragment,s),W(t.$$.fragment,s),r=!0)},o(s){F(e.$$.fragment,s),F(t.$$.fragment,s),r=!1},d(s){x(e,s),s&&u(a),x(t,s)}}}function qt(n){let e,a,t;return a=new dt({props:{x1:-10,x2:4096+10,y1:0,y2:n[0],$$slots:{default:[At]},$$scope:{ctx:n}}}),{c(){e=g("div"),D(a.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var s=m(e);H(a.$$.fragment,s),s.forEach(u),this.h()},h(){o(e,"class","w-full h-full box-border")},m(r,s){y(r,e,s),U(a,e,null),t=!0},p(r,[s]){const c={};s&1&&(c.y2=r[0]),s&18&&(c.$$scope={dirty:s,ctx:r}),a.$set(c)},i(r){t||(W(a.$$.fragment,r),t=!0)},o(r){F(a.$$.fragment,r),t=!1},d(r){r&&u(e),x(a)}}}function Mt(n,e){return n.map((a,t)=>({x:a,y:e[t]}))}function jt(n,e,a){let{hist:t}=e,r,s=[{x:0,y:0},{x:2e3,y:10}];return n.$$set=c=>{"hist"in c&&a(2,t=c.hist)},n.$$.update=()=>{n.$$.dirty&4&&t&&(a(1,s=Mt(t.bin_edges,t.counts)),a(0,r=Math.max(...t.counts)))},[r,s,t]}class Ot extends qe{constructor(e){super();Me(this,e,jt,qt,je,{hist:2})}}function Vt(n){let e,a,t;return{c(){e=g("button"),a=$("Channel 0"),this.h()},l(r){e=_(r,"BUTTON",{class:!0});var s=m(e);a=v(s,"Channel 0"),s.forEach(u),this.h()},h(){o(e,"class",t=se(ae("green",n[15],n[6].image_params.channels[0]))+" svelte-132l8kq"),M(e,"bg-green-600",n[15])},m(r,s){y(r,e,s),i(e,a)},p(r,s){s&32832&&t!==(t=se(ae("green",r[15],r[6].image_params.channels[0]))+" svelte-132l8kq")&&o(e,"class",t),s&32832&&M(e,"bg-green-600",r[15])},d(r){r&&u(e)}}}function Dt(n){let e,a,t;return{c(){e=g("button"),a=$("Channel 1"),this.h()},l(r){e=_(r,"BUTTON",{class:!0});var s=m(e);a=v(s,"Channel 1"),s.forEach(u),this.h()},h(){o(e,"class",t=se(ae("orange",n[15],n[6].image_params.channels[1]))+" svelte-132l8kq"),M(e,"bg-orange-500",n[15])},m(r,s){y(r,e,s),i(e,a)},p(r,s){s&32832&&t!==(t=se(ae("orange",r[15],r[6].image_params.channels[1]))+" svelte-132l8kq")&&o(e,"class",t),s&32832&&M(e,"bg-orange-500",r[15])},d(r){r&&u(e)}}}function Ht(n){let e,a,t;return{c(){e=g("button"),a=$("Channel 2"),this.h()},l(r){e=_(r,"BUTTON",{class:!0});var s=m(e);a=v(s,"Channel 2"),s.forEach(u),this.h()},h(){o(e,"class",t=se(ae("rose",n[15],n[6].image_params.channels[2]))+" svelte-132l8kq"),M(e,"bg-rose-600",n[15])},m(r,s){y(r,e,s),i(e,a)},p(r,s){s&32832&&t!==(t=se(ae("rose",r[15],r[6].image_params.channels[2]))+" svelte-132l8kq")&&o(e,"class",t),s&32832&&M(e,"bg-rose-600",r[15])},d(r){r&&u(e)}}}function Ut(n){let e,a,t;return{c(){e=g("button"),a=$("Channel 3"),this.h()},l(r){e=_(r,"BUTTON",{class:!0});var s=m(e);a=v(s,"Channel 3"),s.forEach(u),this.h()},h(){o(e,"class",t=se(ae("amber",n[15],n[6].image_params.channels[3]))+" svelte-132l8kq"),M(e,"bg-amber-800",n[15])},m(r,s){y(r,e,s),i(e,a)},p(r,s){s&32832&&t!==(t=se(ae("amber",r[15],r[6].image_params.channels[3]))+" svelte-132l8kq")&&o(e,"class",t),s&32832&&M(e,"bg-amber-800",r[15])},d(r){r&&u(e)}}}function Wt(n){let e,a,t,r,s,c,f,d;return e=new Ae({props:{disabled:!n[6].image_params.channels[0],$$slots:{default:[Vt,({selected:l})=>({15:l}),({selected:l})=>l?32768:0]},$$scope:{ctx:n}}}),t=new Ae({props:{disabled:!n[6].image_params.channels[1],$$slots:{default:[Dt,({selected:l})=>({15:l}),({selected:l})=>l?32768:0]},$$scope:{ctx:n}}}),s=new Ae({props:{disabled:!n[6].image_params.channels[2],$$slots:{default:[Ht,({selected:l})=>({15:l}),({selected:l})=>l?32768:0]},$$scope:{ctx:n}}}),f=new Ae({props:{disabled:!n[6].image_params.channels[3],$$slots:{default:[Ut,({selected:l})=>({15:l}),({selected:l})=>l?32768:0]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment),a=A(),D(t.$$.fragment),r=A(),D(s.$$.fragment),c=A(),D(f.$$.fragment)},l(l){H(e.$$.fragment,l),a=q(l),H(t.$$.fragment,l),r=q(l),H(s.$$.fragment,l),c=q(l),H(f.$$.fragment,l)},m(l,h){U(e,l,h),y(l,a,h),U(t,l,h),y(l,r,h),U(s,l,h),y(l,c,h),U(f,l,h),d=!0},p(l,h){const S={};h&64&&(S.disabled=!l[6].image_params.channels[0]),h&98368&&(S.$$scope={dirty:h,ctx:l}),e.$set(S);const w={};h&64&&(w.disabled=!l[6].image_params.channels[1]),h&98368&&(w.$$scope={dirty:h,ctx:l}),t.$set(w);const B={};h&64&&(B.disabled=!l[6].image_params.channels[2]),h&98368&&(B.$$scope={dirty:h,ctx:l}),s.$set(B);const k={};h&64&&(k.disabled=!l[6].image_params.channels[3]),h&98368&&(k.$$scope={dirty:h,ctx:l}),f.$set(k)},i(l){d||(W(e.$$.fragment,l),W(t.$$.fragment,l),W(s.$$.fragment,l),W(f.$$.fragment,l),d=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(s.$$.fragment,l),F(f.$$.fragment,l),d=!1},d(l){x(e,l),l&&u(a),x(t,l),l&&u(r),x(s,l),l&&u(c),x(f,l)}}}function Ft(n){let e,a;return e=new kt({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[Wt]},$$scope:{ctx:n}}}),{c(){D(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){U(e,t,r),a=!0},p(t,r){const s={};r&65600&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){a||(W(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function xt(n){var C;let e,a,t,r,s,c,f,d,l,h,S,w,B,k,b,E,j,z,p;return s=new bt({props:{$$slots:{default:[Ft]},$$scope:{ctx:n}}}),s.$on("change",n[9]),E=new Ot({props:{hist:(C=n[1])==null?void 0:C.hist[n[0]]}}),{c(){e=g("div"),a=g("canvas"),t=A(),r=g("div"),D(s.$$.fragment),c=A(),f=g("button"),d=$("Center"),l=A(),h=g("div"),S=g("label"),w=g("input"),B=$(`
      Show Histogram`),k=A(),b=g("div"),D(E.$$.fragment),this.h()},l(P){e=_(P,"DIV",{id:!0,class:!0});var T=m(e);a=_(T,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),m(a).forEach(u),t=q(T),r=_(T,"DIV",{class:!0});var G=m(r);H(s.$$.fragment,G),G.forEach(u),c=q(T),f=_(T,"BUTTON",{class:!0});var O=m(f);d=v(O,"Center"),O.forEach(u),l=q(T),h=_(T,"DIV",{class:!0});var V=m(h);S=_(V,"LABEL",{class:!0});var re=m(S);w=_(re,"INPUT",{type:!0,class:!0}),B=v(re,`
      Show Histogram`),re.forEach(u),V.forEach(u),k=q(T),b=_(T,"DIV",{id:!0,class:!0});var R=m(b);H(E.$$.fragment,R),R.forEach(u),T.forEach(u),this.h()},h(){o(a,"id","canvas"),o(a,"width",2048),o(a,"height",128),o(a,"class","svelte-132l8kq"),o(r,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),o(f,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),o(w,"type","checkbox"),o(w,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),o(S,"class","mx-4 font-medium cursor-pointer"),o(h,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),o(b,"id","histogram"),o(b,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),M(b,"hidden",!n[5]),o(e,"id","frame"),o(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[40vh] svelte-132l8kq")},m(P,T){y(P,e,T),i(e,a),n[8](a),i(e,t),i(e,r),U(s,r,null),i(e,c),i(e,f),i(f,d),i(e,l),i(e,h),i(h,S),i(S,w),w.checked=n[5],i(S,B),i(e,k),i(e,b),U(E,b,null),n[13](e),j=!0,z||(p=[pe(a,"wheel",function(){$t(n[4].zoomWithWheel)&&n[4].zoomWithWheel.apply(this,arguments)}),pe(f,"click",n[10]),pe(w,"change",n[11]),pe(w,"click",n[12])],z=!0)},p(P,[T]){var V;n=P;const G={};T&65600&&(G.$$scope={dirty:T,ctx:n}),s.$set(G),T&32&&(w.checked=n[5]);const O={};T&3&&(O.hist=(V=n[1])==null?void 0:V.hist[n[0]]),E.$set(O),T&32&&M(b,"hidden",!n[5])},i(P){j||(W(s.$$.fragment,P),W(E.$$.fragment,P),j=!0)},o(P){F(s.$$.fragment,P),F(E.$$.fragment,P),j=!1},d(P){P&&u(e),n[8](null),x(s),x(E),n[13](null),z=!1,ht(p)}}}function ae(n,e,a){return`tab-button ${e?"text-white":`${a?`text-gray-700 hover:text-black bg-white hover:bg-${n}-300`:"text-gray-400"}`}`}function Gt(n,e,a){let t,r;oe(n,et,z=>a(1,t=z)),oe(n,ie,z=>a(6,r=z));let s,c,f,d,l,h=!0,S=0;vt(()=>{a(7,l=c.getContext("2d")),a(4,d=wt(c,{maxZoom:5,startScale:.5,startX:-1024+(s.clientWidth-1024),startY:(s.clientHeight+c.height)/2,animate:!0}))}),f=new Image,f.onload=()=>l==null?void 0:l.drawImage(f,0,0);function w(z){Ke[z?"unshift":"push"](()=>{c=z,a(3,c)})}const B=z=>a(0,S=z.detail),k=()=>d.pan(-1024+(s.clientWidth-1024),(s.clientHeight+c.height)/2);function b(){h=this.checked,a(5,h)}const E=()=>a(5,h=!h);function j(z){Ke[z?"unshift":"push"](()=>{s=z,a(2,s)})}return n.$$.update=()=>{n.$$.dirty&3&&(f.src=t==null?void 0:t.img[S]),n.$$.dirty&130&&l&&t&&a(7,l.canvas.height=128*t.n,l)},[S,t,s,c,d,h,r,l,w,B,k,b,E,j]}class Lt extends qe{constructor(e){super();Me(this,e,Gt,xt,je,{})}}function Rt(n){let e,a,t,r;return{c(){e=ee("svg"),a=ee("path"),t=ee("path"),r=$(`
          Capture`),this.h()},l(s){e=te(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var c=m(e);a=te(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(a).forEach(u),t=te(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),c.forEach(u),r=v(s,`
          Capture`),this.h()},h(){o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(a,"stroke-width","2"),o(a,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor")},m(s,c){y(s,e,c),i(e,a),i(e,t),y(s,r,c)},d(s){s&&u(e),s&&u(r)}}}function Zt(n){let e,a,t,r,s,c;return{c(){e=ee("svg"),a=ee("path"),t=ee("path"),r=A(),s=g("p"),c=$("Stop"),this.h()},l(f){e=te(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var d=m(e);a=te(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(a).forEach(u),t=te(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),d.forEach(u),r=q(f),s=_(f,"P",{class:!0});var l=m(s);c=v(l,"Stop"),l.forEach(u),this.h()},h(){o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(a,"stroke-width","2"),o(a,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","w-6 h-6 mr-1"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor"),o(s,"class","flex-grow")},m(f,d){y(f,e,d),i(e,a),i(e,t),y(f,r,d),y(f,s,d),i(s,c)},d(f){f&&u(e),f&&u(r),f&&u(s)}}}function Xt(n){let e,a,t,r,s,c,f,d,l,h,S,w,B,k,b,E,j,z,p,C,P=n[4]*n[3]+"",T,G,O,V,re,R=n[1].toFixed(3)+"",be,Oe,Ve,ne,De,he=n[0].toFixed(3)+"",$e,He,Ue,Z,X,ve,We,we,Fe,xe,ue,Ge,de=(n[2].image_params.z_n?n[2].image_params.z_n:1)+"",ke,Le,ce,Q,Re,ge=n[4]*n[3]/10+"",Ee,Ze,Xe,fe,le,Qe,tt;function st(N,I){return N[2].block?Zt:Rt}let Se=st(n),L=Se(n);return{c(){e=g("span"),a=g("div"),t=g("button"),r=g("div"),L.c(),s=A(),c=g("button"),f=g("div"),d=ee("svg"),l=ee("path"),h=$(`
        Preview`),w=A(),B=g("content"),k=g("div"),b=g("section"),E=g("span"),j=g("span"),z=$(pt),p=$(`
          /
          `),C=g("span"),T=$(P),G=A(),O=g("section"),V=g("span"),re=$("Width "),be=$(R),Oe=$(" mm"),Ve=A(),ne=g("span"),De=$("Height "),$e=$(he),He=$(" mm"),Ue=A(),Z=g("section"),X=g("span"),ve=$(n[3]),We=$(" Columns of "),we=$(n[4]),Fe=$(" Bundles"),xe=A(),ue=g("span"),Ge=$("Z-Stack depth of "),ke=$(de),Le=A(),ce=g("section"),Q=g("span"),Re=$("Total time: "),Ee=$(ge),Ze=$(" s"),Xe=$(`

    
    Bundles taken
    `),fe=g("div"),le=g("progress"),this.h()},l(N){e=_(N,"SPAN",{class:!0});var I=m(e);a=_(I,"DIV",{class:!0});var Ce=m(a);t=_(Ce,"BUTTON",{type:!0,class:!0});var at=m(t);r=_(at,"DIV",{class:!0});var rt=m(r);L.l(rt),rt.forEach(u),at.forEach(u),s=q(Ce),c=_(Ce,"BUTTON",{type:!0,id:!0,class:!0});var nt=m(c);f=_(nt,"DIV",{class:!0});var Ye=m(f);d=te(Ye,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var lt=m(d);l=te(lt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(l).forEach(u),lt.forEach(u),h=v(Ye,`
        Preview`),Ye.forEach(u),nt.forEach(u),Ce.forEach(u),w=q(I),B=_(I,"CONTENT",{class:!0});var Te=m(B);k=_(Te,"DIV",{class:!0});var Y=m(k);b=_(Y,"SECTION",{class:!0});var ot=m(b);E=_(ot,"SPAN",{class:!0});var Ne=m(E);j=_(Ne,"SPAN",{class:!0});var it=m(j);z=v(it,pt),it.forEach(u),p=v(Ne,`
          /
          `),C=_(Ne,"SPAN",{class:!0});var ut=m(C);T=v(ut,P),ut.forEach(u),Ne.forEach(u),ot.forEach(u),G=q(Y),O=_(Y,"SECTION",{class:!0});var Pe=m(O);V=_(Pe,"SPAN",{});var ye=m(V);re=v(ye,"Width "),be=v(ye,R),Oe=v(ye," mm"),ye.forEach(u),Ve=q(Pe),ne=_(Pe,"SPAN",{});var Be=m(ne);De=v(Be,"Height "),$e=v(Be,he),He=v(Be," mm"),Be.forEach(u),Pe.forEach(u),Ue=q(Y),Z=_(Y,"SECTION",{class:!0});var ze=m(Z);X=_(ze,"SPAN",{});var _e=m(X);ve=v(_e,n[3]),We=v(_e," Columns of "),we=v(_e,n[4]),Fe=v(_e," Bundles"),_e.forEach(u),xe=q(ze),ue=_(ze,"SPAN",{});var Je=m(ue);Ge=v(Je,"Z-Stack depth of "),ke=v(Je,de),Je.forEach(u),ze.forEach(u),Le=q(Y),ce=_(Y,"SECTION",{class:!0});var ct=m(ce);Q=_(ct,"SPAN",{class:!0});var Ie=m(Q);Re=v(Ie,"Total time: "),Ee=v(Ie,ge),Ze=v(Ie," s"),Ie.forEach(u),ct.forEach(u),Y.forEach(u),Xe=v(Te,`

    
    Bundles taken
    `),fe=_(Te,"DIV",{class:!0});var ft=m(fe);le=_(ft,"PROGRESS",{class:!0}),m(le).forEach(u),ft.forEach(u),Te.forEach(u),I.forEach(u),this.h()},h(){o(r,"class","flex items-center h-12 text-lg"),o(t,"type","button"),o(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-4f7jci"),M(t,"focus:ring-blue-300",!n[2].block),M(t,"focus:ring-orange-300",n[2].block),M(t,"start",!n[2].block),M(t,"stop",n[2].block),o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(l,"stroke-width","2"),o(l,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(d,"xmlns","http://www.w3.org/2000/svg"),o(d,"class","w-6 h-6 mr-1"),o(d,"fill","none"),o(d,"viewBox","0 0 24 24"),o(d,"stroke","currentColor"),o(f,"class","flex items-center"),o(c,"type","button"),o(c,"id","preview"),o(c,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-4f7jci"),c.disabled=S=Boolean(n[2].block),o(a,"class","grid grid-flow-row w-36"),o(j,"class","font-mono"),o(C,"class","w-32 px-2 font-mono text-4xl font-bold "),o(E,"class","text-4xl font-bold"),o(b,"class","flex items-center"),o(O,"class","flex flex-col tabular-nums"),o(Z,"class","flex flex-col"),o(Q,"class","text-lg font-medium"),o(ce,"class","flex items-center"),o(k,"class","grid max-w-4xl grid-cols-4 mt-1"),o(le,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-4f7jci"),le.value=n[5],o(fe,"class","mt-1"),o(B,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),o(e,"class","z-40 flex w-full space-x-2")},m(N,I){y(N,e,I),i(e,a),i(a,t),i(t,r),L.m(r,null),i(a,s),i(a,c),i(c,f),i(f,d),i(d,l),i(f,h),i(e,w),i(e,B),i(B,k),i(k,b),i(b,E),i(E,j),i(j,z),i(E,p),i(E,C),i(C,T),i(k,G),i(k,O),i(O,V),i(V,re),i(V,be),i(V,Oe),i(O,Ve),i(O,ne),i(ne,De),i(ne,$e),i(ne,He),i(k,Ue),i(k,Z),i(Z,X),i(X,ve),i(X,We),i(X,we),i(X,Fe),i(Z,xe),i(Z,ue),i(ue,Ge),i(ue,ke),i(k,Le),i(k,ce),i(ce,Q),i(Q,Re),i(Q,Ee),i(Q,Ze),i(B,Xe),i(B,fe),i(fe,le),Qe||(tt=[Et(yt.call(null,t,"Take image and save.")),pe(t,"click",n[7]),pe(c,"click",n[8])],Qe=!0)},p(N,[I]){Se!==(Se=st(N))&&(L.d(1),L=Se(N),L&&(L.c(),L.m(r,null))),I&4&&M(t,"focus:ring-blue-300",!N[2].block),I&4&&M(t,"focus:ring-orange-300",N[2].block),I&4&&M(t,"start",!N[2].block),I&4&&M(t,"stop",N[2].block),I&4&&S!==(S=Boolean(N[2].block))&&(c.disabled=S),I&24&&P!==(P=N[4]*N[3]+"")&&K(T,P),I&2&&R!==(R=N[1].toFixed(3)+"")&&K(be,R),I&1&&he!==(he=N[0].toFixed(3)+"")&&K($e,he),I&8&&K(ve,N[3]),I&16&&K(we,N[4]),I&4&&de!==(de=(N[2].image_params.z_n?N[2].image_params.z_n:1)+"")&&K(ke,de),I&24&&ge!==(ge=N[4]*N[3]/10+"")&&K(Ee,ge),I&32&&(le.value=N[5])},i:mt,o:mt,d(N){N&&u(e),L.d(),Qe=!1,ht(tt)}}}let pt="  --";function Qt(n,e,a){let t,r,s,c;oe(n,ie,b=>a(2,t=b)),oe(n,me,b=>a(9,r=b)),oe(n,et,b=>a(10,s=b));let f=0,d=0,l=1,h=1;const S=me.subscribe(b=>{fetch(`http://${window.location.hostname}:8000/img`).then(E=>E.json()).then(E=>{J(et,s=E,s)}),J(ie,t.block="",t)});St(S);const w=Ct(0,{duration:400,easing:Tt});oe(n,w,b=>a(5,c=b));function B(){t.block==="capturing"?J(me,r="stop",r):(J(me,r="capture",r),J(ie,t.block="capturing",t))}function k(){t.block==="previewing"?J(me,r="stop",r):(J(me,r="preview",r),J(ie,t.block="previewing",t))}return n.$$.update=()=>{n.$$.dirty&4&&a(0,f=Math.max(t.image_params.xy1[1],t.image_params.xy0[1])-Math.min(t.image_params.xy1[1],t.image_params.xy0[1])),n.$$.dirty&4&&a(1,d=Math.max(t.image_params.xy1[0],t.image_params.xy0[0])-Math.min(t.image_params.xy1[0],t.image_params.xy0[0])),n.$$.dirty&2&&a(3,l=Math.ceil(d/.768)),n.$$.dirty&1&&a(4,h=Math.ceil(f/.048))},[f,d,t,l,h,c,w,B,k]}class Yt extends qe{constructor(e){super();Me(this,e,Qt,Xt,je,{})}}function Jt(n){let e,a,t,r,s,c,f,d,l,h,S,w,B,k,b,E;r=new Yt({});function j(p){n[1](p)}let z={};return n[0].image_params!==void 0&&(z.params=n[0].image_params),l=new Bt({props:z}),Ke.push(()=>Nt(l,"params",j)),b=new Lt({}),{c(){e=g("div"),a=g("div"),t=A(),D(r.$$.fragment),s=A(),c=g("p"),f=$("Capture Parameters"),d=A(),D(l.$$.fragment),S=A(),w=g("p"),B=$("Preview"),k=A(),D(b.$$.fragment),this.h()},l(p){e=_(p,"DIV",{class:!0});var C=m(e);a=_(C,"DIV",{class:!0}),m(a).forEach(u),t=q(C),H(r.$$.fragment,C),C.forEach(u),s=q(p),c=_(p,"P",{class:!0});var P=m(c);f=v(P,"Capture Parameters"),P.forEach(u),d=q(p),H(l.$$.fragment,p),S=q(p),w=_(p,"P",{class:!0});var T=m(w);B=v(T,"Preview"),T.forEach(u),k=q(p),H(b.$$.fragment,p),this.h()},h(){o(a,"class","w-full h-4"),o(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),o(c,"class","mt-6 title"),o(w,"class","title")},m(p,C){y(p,e,C),i(e,a),i(e,t),U(r,e,null),y(p,s,C),y(p,c,C),i(c,f),y(p,d,C),U(l,p,C),y(p,S,C),y(p,w,C),i(w,B),y(p,k,C),U(b,p,C),E=!0},p(p,[C]){const P={};!h&&C&1&&(h=!0,P.params=p[0].image_params,Pt(()=>h=!1)),l.$set(P)},i(p){E||(W(r.$$.fragment,p),W(l.$$.fragment,p),W(b.$$.fragment,p),E=!0)},o(p){F(r.$$.fragment,p),F(l.$$.fragment,p),F(b.$$.fragment,p),E=!1},d(p){p&&u(e),x(r),p&&u(s),p&&u(c),p&&u(d),x(l,p),p&&u(S),p&&u(w),p&&u(k),x(b,p)}}}function Kt(n,e){n&&(n.querySelectorAll("input").forEach(a=>a.disabled=e),n.querySelectorAll("select").forEach(a=>a.disabled=e),n.querySelectorAll("button").forEach(a=>a.disabled=e))}function es(n,e,a){let t;oe(n,ie,s=>a(0,t=s));function r(s){n.$$.not_equal(t.image_params,s)&&(t.image_params=s,ie.set(t))}return n.$$.update=()=>{n.$$.dirty&1&&Kt(document.getElementById("control"),t.block)},[t,r]}class ls extends qe{constructor(e){super();Me(this,e,es,Jt,je,{})}}export{ls as default};
