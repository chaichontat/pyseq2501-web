import{S as Ge,i as Le,s as Re,a7 as Bt,e as _,w as U,c as g,a as h,x as H,d as u,b as r,g as P,y as W,q as G,o as L,B as R,a8 as qt,a9 as Vt,k as q,m as V,t as $,h as w,H as i,j as X,aa as yt,R as D,T as be,ab as Dt,U as At,N as ue,v as Ot,ac as jt,ad as Mt,Q as Te,ae as We,_ as le,O as ae,P as ne,a0 as Pt,M as It,af as Ut,V as se,ag as Ht,W as ut,X as ct}from"../chunks/vendor-9622d588.js";import{i as ft,u as ce,c as Se}from"../chunks/store-7ddc7fb8.js";import{t as zt,T as Wt}from"../chunks/takeimage-0c18ae21.js";import"../chunks/spinning-a6fe8392.js";import"../chunks/coords-813c65ab.js";function Gt(l){let e;return{c(){e=_("div"),this.h()},l(n){e=g(n,"DIV",{class:!0}),h(e).forEach(u),this.h()},h(){r(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(n,t){P(n,e,t)},d(n){n&&u(e)}}}function Lt(l){let e,n=l[3]+"",t;return{c(){e=_("span"),t=$(n),this.h()},l(s){e=g(s,"SPAN",{class:!0});var a=h(e);t=w(a,n),a.forEach(u),this.h()},h(){r(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(s,a){P(s,e,a),i(e,t)},p(s,a){a&8&&n!==(n=s[3]+"")&&X(t,n)},d(s){s&&u(e)}}}function Rt(l){let e,n,t,s;return e=new qt({props:{data:l[1],width:80,$$slots:{default:[Gt]},$$scope:{ctx:l}}}),t=new Vt({props:{vertical:!0,count:5,$$slots:{default:[Lt,({value:a})=>({3:a}),({value:a})=>a?8:0]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment),n=q(),U(t.$$.fragment)},l(a){H(e.$$.fragment,a),n=V(a),H(t.$$.fragment,a)},m(a,c){W(e,a,c),P(a,n,c),W(t,a,c),s=!0},p(a,c){const f={};c&2&&(f.data=a[1]),c&16&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const m={};c&24&&(m.$$scope={dirty:c,ctx:a}),t.$set(m)},i(a){s||(G(e.$$.fragment,a),G(t.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),L(t.$$.fragment,a),s=!1},d(a){R(e,a),a&&u(n),R(t,a)}}}function Zt(l){let e,n,t;return n=new Bt({props:{x1:-10,x2:4096+10,y1:0,y2:l[0],$$slots:{default:[Rt]},$$scope:{ctx:l}}}),{c(){e=_("div"),U(n.$$.fragment),this.h()},l(s){e=g(s,"DIV",{class:!0});var a=h(e);H(n.$$.fragment,a),a.forEach(u),this.h()},h(){r(e,"class","w-full h-full box-border")},m(s,a){P(s,e,a),W(n,e,null),t=!0},p(s,[a]){const c={};a&1&&(c.y2=s[0]),a&18&&(c.$$scope={dirty:a,ctx:s}),n.$set(c)},i(s){t||(G(n.$$.fragment,s),t=!0)},o(s){L(n.$$.fragment,s),t=!1},d(s){s&&u(e),R(n)}}}function Ft(l,e){return l.map((n,t)=>({x:n,y:e[t]}))}function Qt(l,e,n){let{hist:t}=e,s,a=[{x:0,y:0},{x:2e3,y:10}];return l.$$set=c=>{"hist"in c&&n(2,t=c.hist)},l.$$.update=()=>{l.$$.dirty&4&&t&&(n(1,a=Ft(t.bin_edges,t.counts)),n(0,s=Math.max(...t.counts)))},[s,a,t]}class Xt extends Ge{constructor(e){super();Le(this,e,Qt,Zt,Re,{hist:2})}}function Jt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 0"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=h(e);n=w(a,"Channel 0"),a.forEach(u),this.h()},h(){r(e,"class",t=le(re("green",l[15],l[6].image_params.channels[0]))+" svelte-132l8kq"),D(e,"bg-green-600",l[15])},m(s,a){P(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=le(re("green",s[15],s[6].image_params.channels[0]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&D(e,"bg-green-600",s[15])},d(s){s&&u(e)}}}function Kt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 1"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=h(e);n=w(a,"Channel 1"),a.forEach(u),this.h()},h(){r(e,"class",t=le(re("orange",l[15],l[6].image_params.channels[1]))+" svelte-132l8kq"),D(e,"bg-orange-500",l[15])},m(s,a){P(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=le(re("orange",s[15],s[6].image_params.channels[1]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&D(e,"bg-orange-500",s[15])},d(s){s&&u(e)}}}function Yt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 2"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=h(e);n=w(a,"Channel 2"),a.forEach(u),this.h()},h(){r(e,"class",t=le(re("rose",l[15],l[6].image_params.channels[2]))+" svelte-132l8kq"),D(e,"bg-rose-600",l[15])},m(s,a){P(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=le(re("rose",s[15],s[6].image_params.channels[2]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&D(e,"bg-rose-600",s[15])},d(s){s&&u(e)}}}function xt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 3"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=h(e);n=w(a,"Channel 3"),a.forEach(u),this.h()},h(){r(e,"class",t=le(re("amber",l[15],l[6].image_params.channels[3]))+" svelte-132l8kq"),D(e,"bg-amber-800",l[15])},m(s,a){P(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=le(re("amber",s[15],s[6].image_params.channels[3]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&D(e,"bg-amber-800",s[15])},d(s){s&&u(e)}}}function es(l){let e,n,t,s,a,c,f,m;return e=new We({props:{disabled:!l[6].image_params.channels[0],$$slots:{default:[Jt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),t=new We({props:{disabled:!l[6].image_params.channels[1],$$slots:{default:[Kt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),a=new We({props:{disabled:!l[6].image_params.channels[2],$$slots:{default:[Yt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),f=new We({props:{disabled:!l[6].image_params.channels[3],$$slots:{default:[xt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment),n=q(),U(t.$$.fragment),s=q(),U(a.$$.fragment),c=q(),U(f.$$.fragment)},l(o){H(e.$$.fragment,o),n=V(o),H(t.$$.fragment,o),s=V(o),H(a.$$.fragment,o),c=V(o),H(f.$$.fragment,o)},m(o,d){W(e,o,d),P(o,n,d),W(t,o,d),P(o,s,d),W(a,o,d),P(o,c,d),W(f,o,d),m=!0},p(o,d){const S={};d&64&&(S.disabled=!o[6].image_params.channels[0]),d&98368&&(S.$$scope={dirty:d,ctx:o}),e.$set(S);const N={};d&64&&(N.disabled=!o[6].image_params.channels[1]),d&98368&&(N.$$scope={dirty:d,ctx:o}),t.$set(N);const b={};d&64&&(b.disabled=!o[6].image_params.channels[2]),d&98368&&(b.$$scope={dirty:d,ctx:o}),a.$set(b);const v={};d&64&&(v.disabled=!o[6].image_params.channels[3]),d&98368&&(v.$$scope={dirty:d,ctx:o}),f.$set(v)},i(o){m||(G(e.$$.fragment,o),G(t.$$.fragment,o),G(a.$$.fragment,o),G(f.$$.fragment,o),m=!0)},o(o){L(e.$$.fragment,o),L(t.$$.fragment,o),L(a.$$.fragment,o),L(f.$$.fragment,o),m=!1},d(o){R(e,o),o&&u(n),R(t,o),o&&u(s),R(a,o),o&&u(c),R(f,o)}}}function ts(l){let e,n;return e=new Mt({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[es]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,s){W(e,t,s),n=!0},p(t,s){const a={};s&65600&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ss(l){var F;let e,n,t,s,a,c,f,m,o,d,S,N,b,v,I,A,z,E,Z;return a=new yt({props:{$$slots:{default:[ts]},$$scope:{ctx:l}}}),a.$on("change",l[9]),A=new Xt({props:{hist:(F=l[1])==null?void 0:F.hist[l[0]]}}),{c(){e=_("div"),n=_("canvas"),t=q(),s=_("div"),U(a.$$.fragment),c=q(),f=_("button"),m=$("Center"),o=q(),d=_("div"),S=_("label"),N=_("input"),b=$(`
      Show Histogram`),v=q(),I=_("div"),U(A.$$.fragment),this.h()},l(y){e=g(y,"DIV",{id:!0,class:!0});var C=h(e);n=g(C,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),h(n).forEach(u),t=V(C),s=g(C,"DIV",{class:!0});var j=h(s);H(a.$$.fragment,j),j.forEach(u),c=V(C),f=g(C,"BUTTON",{class:!0});var p=h(f);m=w(p,"Center"),p.forEach(u),o=V(C),d=g(C,"DIV",{class:!0});var k=h(d);S=g(k,"LABEL",{class:!0});var M=h(S);N=g(M,"INPUT",{type:!0,class:!0}),b=w(M,`
      Show Histogram`),M.forEach(u),k.forEach(u),v=V(C),I=g(C,"DIV",{id:!0,class:!0});var O=h(I);H(A.$$.fragment,O),O.forEach(u),C.forEach(u),this.h()},h(){r(n,"id","canvas"),r(n,"width",2048),r(n,"height",128),r(n,"class","svelte-132l8kq"),r(s,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),r(f,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),r(N,"type","checkbox"),r(N,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),r(S,"class","mx-4 font-medium cursor-pointer"),r(d,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),r(I,"id","histogram"),r(I,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),D(I,"hidden",!l[5]),r(e,"id","frame"),r(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[40vh] svelte-132l8kq")},m(y,C){P(y,e,C),i(e,n),l[8](n),i(e,t),i(e,s),W(a,s,null),i(e,c),i(e,f),i(f,m),i(e,o),i(e,d),i(d,S),i(S,N),N.checked=l[5],i(S,b),i(e,v),i(e,I),W(A,I,null),l[13](e),z=!0,E||(Z=[be(n,"wheel",function(){Dt(l[4].zoomWithWheel)&&l[4].zoomWithWheel.apply(this,arguments)}),be(f,"click",l[10]),be(N,"change",l[11]),be(N,"click",l[12])],E=!0)},p(y,[C]){var k;l=y;const j={};C&65600&&(j.$$scope={dirty:C,ctx:l}),a.$set(j),C&32&&(N.checked=l[5]);const p={};C&3&&(p.hist=(k=l[1])==null?void 0:k.hist[l[0]]),A.$set(p),C&32&&D(I,"hidden",!l[5])},i(y){z||(G(a.$$.fragment,y),G(A.$$.fragment,y),z=!0)},o(y){L(a.$$.fragment,y),L(A.$$.fragment,y),z=!1},d(y){y&&u(e),l[8](null),R(a),R(A),l[13](null),E=!1,At(Z)}}}function re(l,e,n){return`tab-button ${e?"text-white":`${n?`text-gray-700 hover:text-black bg-white hover:bg-${l}-300`:"text-gray-400"}`}`}function as(l,e,n){let t,s;ue(l,ft,E=>n(1,t=E)),ue(l,ce,E=>n(6,s=E));let a,c,f,m,o,d=!0,S=0;Ot(()=>{n(7,o=c.getContext("2d")),n(4,m=jt(c,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),f=new Image,f.onload=()=>o==null?void 0:o.drawImage(f,0,0);function N(E){Te[E?"unshift":"push"](()=>{c=E,n(3,c)})}const b=E=>n(0,S=E.detail),v=()=>{m.pan(0,0)};function I(){d=this.checked,n(5,d)}const A=()=>n(5,d=!d);function z(E){Te[E?"unshift":"push"](()=>{a=E,n(2,a)})}return l.$$.update=()=>{l.$$.dirty&3&&(f.src=t==null?void 0:t.img[S]),l.$$.dirty&130&&o&&t&&n(7,o.canvas.height=128*t.n,o)},[S,t,a,c,m,d,s,o,N,b,v,I,A,z]}class ns extends Ge{constructor(e){super();Le(this,e,as,ss,Re,{})}}function ls(l){let e,n,t,s;return{c(){e=ae("svg"),n=ae("path"),t=ae("path"),s=$(`
          Capture`),this.h()},l(a){e=ne(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var c=h(e);n=ne(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(n).forEach(u),t=ne(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(t).forEach(u),c.forEach(u),s=w(a,`
          Capture`),this.h()},h(){r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(a,c){P(a,e,c),i(e,n),i(e,t),P(a,s,c)},d(a){a&&u(e),a&&u(s)}}}function rs(l){let e,n,t,s,a,c;return{c(){e=ae("svg"),n=ae("path"),t=ae("path"),s=q(),a=_("p"),c=$("Stop"),this.h()},l(f){e=ne(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var m=h(e);n=ne(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(n).forEach(u),t=ne(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(t).forEach(u),m.forEach(u),s=V(f),a=g(f,"P",{class:!0});var o=h(a);c=w(o,"Stop"),o.forEach(u),this.h()},h(){r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 mr-1"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor"),r(a,"class","flex-grow")},m(f,m){P(f,e,m),i(e,n),i(e,t),P(f,s,m),P(f,a,m),i(a,c)},d(f){f&&u(e),f&&u(s),f&&u(a)}}}function os(l){let e,n,t,s,a,c,f,m,o,d,S,N,b,v,I,A,z,E,Z=l[1][0]+"",F,y,C,j=l[0].n_bundles+"",p,k,M,O,fe,J,pe,ve=l[1][1]+"",Ne,Ze,me,$e=l[0].n_z+"",Pe,Fe,Qe,oe,he,K,de,we=l[1][2]+"",Ie,Xe,_e,ke=l[0].n_cols+"",ze,Je,Ke,Y,x,Ye,Ee=l[0].n_bundles*l[0].n_cols/10+"",Ae,xe,et,ee,tt,Ce=l[0].n_bundles*l[0].n_cols/10+"",Be,st,at,ge,ie,nt,pt;function mt(T,B){return T[2].block?rs:ls}let qe=mt(l),Q=qe(l);return{c(){e=_("span"),n=_("div"),t=_("button"),s=_("div"),Q.c(),a=q(),c=_("button"),f=_("div"),m=ae("svg"),o=ae("path"),d=$(`
        Preview`),N=q(),b=_("content"),v=_("div"),I=_("section"),A=_("div"),z=_("span"),E=_("span"),F=$(Z),y=$(`
            /
            `),C=_("span"),p=$(j),k=$(`
        Bundles taken`),M=q(),O=_("section"),fe=_("div"),J=_("span"),pe=_("span"),Ne=$(ve),Ze=$(`
            /
            `),me=_("span"),Pe=$($e),Fe=$(`
        Z-steps taken`),Qe=q(),oe=_("section"),he=_("div"),K=_("span"),de=_("span"),Ie=$(we),Xe=$(`
            /
            `),_e=_("span"),ze=$(ke),Je=$(`
        Columns taken`),Ke=q(),Y=_("section"),x=_("span"),Ye=$("Elapsed time: "),Ae=$(Ee),xe=$(" s"),et=q(),ee=_("span"),tt=$("Total time: "),Be=$(Ce),st=$(" s"),at=q(),ge=_("div"),ie=_("progress"),this.h()},l(T){e=g(T,"SPAN",{class:!0});var B=h(e);n=g(B,"DIV",{class:!0});var Ve=h(n);t=g(Ve,"BUTTON",{type:!0,class:!0});var ht=h(t);s=g(ht,"DIV",{class:!0});var dt=h(s);Q.l(dt),dt.forEach(u),ht.forEach(u),a=V(Ve),c=g(Ve,"BUTTON",{type:!0,id:!0,class:!0});var _t=h(c);f=g(_t,"DIV",{class:!0});var lt=h(f);m=ne(lt,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var gt=h(m);o=ne(gt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(o).forEach(u),gt.forEach(u),d=w(lt,`
        Preview`),lt.forEach(u),_t.forEach(u),Ve.forEach(u),N=V(B),b=g(B,"CONTENT",{class:!0});var ye=h(b);v=g(ye,"DIV",{class:!0});var te=h(v);I=g(te,"SECTION",{class:!0});var rt=h(I);A=g(rt,"DIV",{class:!0});var bt=h(A);z=g(bt,"SPAN",{class:!0});var De=h(z);E=g(De,"SPAN",{class:!0});var vt=h(E);F=w(vt,Z),vt.forEach(u),y=w(De,`
            /
            `),C=g(De,"SPAN",{class:!0});var $t=h(C);p=w($t,j),$t.forEach(u),De.forEach(u),bt.forEach(u),k=w(rt,`
        Bundles taken`),rt.forEach(u),M=V(te),O=g(te,"SECTION",{class:!0});var ot=h(O);fe=g(ot,"DIV",{class:!0});var wt=h(fe);J=g(wt,"SPAN",{class:!0});var Oe=h(J);pe=g(Oe,"SPAN",{class:!0});var kt=h(pe);Ne=w(kt,ve),kt.forEach(u),Ze=w(Oe,`
            /
            `),me=g(Oe,"SPAN",{class:!0});var Et=h(me);Pe=w(Et,$e),Et.forEach(u),Oe.forEach(u),wt.forEach(u),Fe=w(ot,`
        Z-steps taken`),ot.forEach(u),Qe=V(te),oe=g(te,"SECTION",{class:!0});var it=h(oe);he=g(it,"DIV",{class:!0});var Ct=h(he);K=g(Ct,"SPAN",{class:!0});var je=h(K);de=g(je,"SPAN",{class:!0});var St=h(de);Ie=w(St,we),St.forEach(u),Xe=w(je,`
            /
            `),_e=g(je,"SPAN",{class:!0});var Tt=h(_e);ze=w(Tt,ke),Tt.forEach(u),je.forEach(u),Ct.forEach(u),Je=w(it,`
        Columns taken`),it.forEach(u),Ke=V(te),Y=g(te,"SECTION",{class:!0});var Me=h(Y);x=g(Me,"SPAN",{class:!0});var Ue=h(x);Ye=w(Ue,"Elapsed time: "),Ae=w(Ue,Ee),xe=w(Ue," s"),Ue.forEach(u),et=V(Me),ee=g(Me,"SPAN",{class:!0});var He=h(ee);tt=w(He,"Total time: "),Be=w(He,Ce),st=w(He," s"),He.forEach(u),Me.forEach(u),te.forEach(u),at=V(ye),ge=g(ye,"DIV",{class:!0});var Nt=h(ge);ie=g(Nt,"PROGRESS",{class:!0}),h(ie).forEach(u),Nt.forEach(u),ye.forEach(u),B.forEach(u),this.h()},h(){r(s,"class","flex items-center h-12 text-lg"),r(t,"type","button"),r(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-130q06g"),D(t,"focus:ring-blue-300",!l[2].block),D(t,"focus:ring-orange-300",l[2].block),D(t,"start",!l[2].block),D(t,"stop",l[2].block),r(o,"stroke-linecap","round"),r(o,"stroke-linejoin","round"),r(o,"stroke-width","2"),r(o,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(m,"xmlns","http://www.w3.org/2000/svg"),r(m,"class","w-6 h-6 mr-1"),r(m,"fill","none"),r(m,"viewBox","0 0 24 24"),r(m,"stroke","currentColor"),r(f,"class","flex items-center"),r(c,"type","button"),r(c,"id","preview"),r(c,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-130q06g"),c.disabled=S=Boolean(l[2].block),r(n,"class","grid grid-flow-row w-36"),r(E,"class","font-mono"),r(C,"class","w-32 px-2 font-mono text-4xl font-bold "),r(z,"class","text-4xl font-bold"),r(A,"class","flex items-center"),r(I,"class","flex flex-col gap-y-1"),r(pe,"class","font-mono"),r(me,"class","w-32 px-2 font-mono text-4xl font-bold "),r(J,"class","text-4xl font-bold"),r(fe,"class","flex items-center"),r(O,"class","flex flex-col gap-y-1"),r(de,"class","font-mono"),r(_e,"class","w-32 px-2 font-mono text-4xl font-bold "),r(K,"class","text-4xl font-bold"),r(he,"class","flex items-center"),r(oe,"class","flex flex-col gap-y-1"),r(x,"class","text-lg font-medium"),r(ee,"class","text-lg font-medium"),r(Y,"class","flex flex-col"),r(v,"class","grid max-w-4xl grid-cols-4 mt-1"),r(ie,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-130q06g"),ie.value=l[3],r(ge,"class","mt-1"),r(b,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),r(e,"class","z-40 flex w-full space-x-2")},m(T,B){P(T,e,B),i(e,n),i(n,t),i(t,s),Q.m(s,null),i(n,a),i(n,c),i(c,f),i(f,m),i(m,o),i(f,d),i(e,N),i(e,b),i(b,v),i(v,I),i(I,A),i(A,z),i(z,E),i(E,F),i(z,y),i(z,C),i(C,p),i(I,k),i(v,M),i(v,O),i(O,fe),i(fe,J),i(J,pe),i(pe,Ne),i(J,Ze),i(J,me),i(me,Pe),i(O,Fe),i(v,Qe),i(v,oe),i(oe,he),i(he,K),i(K,de),i(de,Ie),i(K,Xe),i(K,_e),i(_e,ze),i(oe,Je),i(v,Ke),i(v,Y),i(Y,x),i(x,Ye),i(x,Ae),i(x,xe),i(Y,et),i(Y,ee),i(ee,tt),i(ee,Be),i(ee,st),i(b,at),i(b,ge),i(ge,ie),nt||(pt=[Pt(zt.call(null,t,"Take image and save.")),be(t,"click",l[5]),Pt(zt.call(null,c,"Take a 16-bundle image based on the current position without saving.")),be(c,"click",l[6])],nt=!0)},p(T,[B]){qe!==(qe=mt(T))&&(Q.d(1),Q=qe(T),Q&&(Q.c(),Q.m(s,null))),B&4&&D(t,"focus:ring-blue-300",!T[2].block),B&4&&D(t,"focus:ring-orange-300",T[2].block),B&4&&D(t,"start",!T[2].block),B&4&&D(t,"stop",T[2].block),B&4&&S!==(S=Boolean(T[2].block))&&(c.disabled=S),B&2&&Z!==(Z=T[1][0]+"")&&X(F,Z),B&1&&j!==(j=T[0].n_bundles+"")&&X(p,j),B&2&&ve!==(ve=T[1][1]+"")&&X(Ne,ve),B&1&&$e!==($e=T[0].n_z+"")&&X(Pe,$e),B&2&&we!==(we=T[1][2]+"")&&X(Ie,we),B&1&&ke!==(ke=T[0].n_cols+"")&&X(ze,ke),B&1&&Ee!==(Ee=T[0].n_bundles*T[0].n_cols/10+"")&&X(Ae,Ee),B&1&&Ce!==(Ce=T[0].n_bundles*T[0].n_cols/10+"")&&X(Be,Ce),B&8&&(ie.value=T[3])},i:It,o:It,d(T){T&&u(e),Q.d(),nt=!1,At(pt)}}}function is(l,e,n){let t,s,a,c;ue(l,ce,b=>n(2,t=b)),ue(l,Se,b=>n(7,s=b)),ue(l,ft,b=>n(8,a=b));let f=[0,0,0],{stats:m}=e;function o(){fetch(`http://${window.location.hostname}:8000/img`).then(b=>b.json()).then(b=>{se(ft,a=b,a)}),se(ce,t.block="",t)}const d=Ut(0,{duration:400,easing:Ht});ue(l,d,b=>n(3,c=b));function S(){t.block==="capturing"?se(Se,s="stop",s):(se(Se,s="capture",s),se(ce,t.block="capturing",t))}function N(){t.block==="previewing"?se(Se,s="stop",s):(se(Se,s="preview",s),se(ce,t.block="previewing",t))}return l.$$set=b=>{"stats"in b&&n(0,m=b.stats)},l.$$.update=()=>{l.$$.dirty&131&&((s==null?void 0:s.msg)?o():(s==null?void 0:s.step)&&(n(1,f=s.step),d.set((f[2]*(m.n_z*m.n_bundles)+f[1]*m.n_bundles+f[0])/(m.n_bundles*m.n_cols*m.n_z))))},[m,f,t,c,d,S,N,s]}class us extends Ge{constructor(e){super();Le(this,e,is,os,Re,{stats:0})}}function cs(l){let e,n,t,s,a,c,f,m,o,d,S,N,b,v,I,A,z,E;function Z(p){l[2](p)}let F={};l[1]!==void 0&&(F.stats=l[1]),s=new us({props:F}),Te.push(()=>ut(s,"stats",Z));function y(p){l[3](p)}function C(p){l[4](p)}let j={};return l[0].image_params!==void 0&&(j.params=l[0].image_params),l[1]!==void 0&&(j.stats=l[1]),d=new Wt({props:j}),Te.push(()=>ut(d,"params",y)),Te.push(()=>ut(d,"stats",C)),z=new ns({}),{c(){e=_("div"),n=_("div"),t=q(),U(s.$$.fragment),c=q(),f=_("p"),m=$("Capture Parameters"),o=q(),U(d.$$.fragment),b=q(),v=_("p"),I=$("Preview"),A=q(),U(z.$$.fragment),this.h()},l(p){e=g(p,"DIV",{class:!0});var k=h(e);n=g(k,"DIV",{class:!0}),h(n).forEach(u),t=V(k),H(s.$$.fragment,k),k.forEach(u),c=V(p),f=g(p,"P",{class:!0});var M=h(f);m=w(M,"Capture Parameters"),M.forEach(u),o=V(p),H(d.$$.fragment,p),b=V(p),v=g(p,"P",{class:!0});var O=h(v);I=w(O,"Preview"),O.forEach(u),A=V(p),H(z.$$.fragment,p),this.h()},h(){r(n,"class","w-full h-4"),r(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),r(f,"class","mt-6 title"),r(v,"class","title")},m(p,k){P(p,e,k),i(e,n),i(e,t),W(s,e,null),P(p,c,k),P(p,f,k),i(f,m),P(p,o,k),W(d,p,k),P(p,b,k),P(p,v,k),i(v,I),P(p,A,k),W(z,p,k),E=!0},p(p,[k]){const M={};!a&&k&2&&(a=!0,M.stats=p[1],ct(()=>a=!1)),s.$set(M);const O={};!S&&k&1&&(S=!0,O.params=p[0].image_params,ct(()=>S=!1)),!N&&k&2&&(N=!0,O.stats=p[1],ct(()=>N=!1)),d.$set(O)},i(p){E||(G(s.$$.fragment,p),G(d.$$.fragment,p),G(z.$$.fragment,p),E=!0)},o(p){L(s.$$.fragment,p),L(d.$$.fragment,p),L(z.$$.fragment,p),E=!1},d(p){p&&u(e),R(s),p&&u(c),p&&u(f),p&&u(o),R(d,p),p&&u(b),p&&u(v),p&&u(A),R(z,p)}}}function fs(l,e){l&&(l.querySelectorAll("input").forEach(n=>n.disabled=e),l.querySelectorAll("select").forEach(n=>n.disabled=e),l.querySelectorAll("button").forEach(n=>n.disabled=e))}function ps(l,e,n){let t;ue(l,ce,m=>n(0,t=m));let s={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function a(m){s=m,n(1,s)}function c(m){l.$$.not_equal(t.image_params,m)&&(t.image_params=m,ce.set(t))}function f(m){s=m,n(1,s)}return l.$$.update=()=>{l.$$.dirty&1&&fs(document.getElementById("control"),t.block)},[t,s,a,c,f]}class bs extends Ge{constructor(e){super();Le(this,e,ps,cs,Re,{})}}export{bs as default};
