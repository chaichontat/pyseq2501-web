import{S as Pt,i as Nt,s as It,e as f,k as A,O as Y,t as E,c as d,a as c,d as r,m as C,P as F,h as S,b as e,U as W,g as y,H as t,Q as bt,V as wt,j as X,M as Et,W as At,N as _e,ax as Ct,ay as yt,X as oe,T as Fe,Y as Je,w as Ke,x as Le,y as $e,Z as et,q as tt,o as st,B as at}from"../chunks/vendor-9417e0b8.js";import{P as Bt}from"../chunks/preview-448dfc6b.js";import{s as Be,c as me,u as St}from"../chunks/store-7e8ca866.js";import{t as xt}from"../chunks/tooltip-d1460923.js";import{T as Tt}from"../chunks/takeimage-68f8eb7d.js";import"../chunks/preview.svelte_svelte_type_style_lang-df4526fd.js";function zt(a){let l,n,s,i;return{c(){l=Y("svg"),n=Y("path"),s=Y("path"),i=E(`
          Capture`),this.h()},l(p){l=F(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var v=c(l);n=F(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(n).forEach(r),s=F(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(r),v.forEach(r),i=S(p,`
          Capture`),this.h()},h(){e(n,"stroke-linecap","round"),e(n,"stroke-linejoin","round"),e(n,"stroke-width","2"),e(n,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),e(s,"stroke-linecap","round"),e(s,"stroke-linejoin","round"),e(s,"stroke-width","2"),e(s,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(l,"xmlns","http://www.w3.org/2000/svg"),e(l,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),e(l,"fill","none"),e(l,"viewBox","0 0 24 24"),e(l,"stroke","currentColor")},m(p,v){y(p,l,v),t(l,n),t(l,s),y(p,i,v)},d(p){p&&r(l),p&&r(i)}}}function jt(a){let l,n,s,i,p,v;return{c(){l=Y("svg"),n=Y("path"),s=Y("path"),i=A(),p=f("p"),v=E("Stop"),this.h()},l(u){l=F(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=c(l);n=F(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(n).forEach(r),s=F(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(s).forEach(r),g.forEach(r),i=C(u),p=d(u,"P",{class:!0});var m=c(p);v=S(m,"Stop"),m.forEach(r),this.h()},h(){e(n,"stroke-linecap","round"),e(n,"stroke-linejoin","round"),e(n,"stroke-width","2"),e(n,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(s,"stroke-linecap","round"),e(s,"stroke-linejoin","round"),e(s,"stroke-width","2"),e(s,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),e(l,"xmlns","http://www.w3.org/2000/svg"),e(l,"class","w-6 h-6 mr-1"),e(l,"fill","none"),e(l,"viewBox","0 0 24 24"),e(l,"stroke","currentColor"),e(p,"class","flex-grow")},m(u,g){y(u,l,g),t(l,n),t(l,s),y(u,i,g),y(u,p,g),t(p,v)},d(u){u&&r(l),u&&r(i),u&&r(p)}}}function Vt(a){let l,n,s,i,p,v,u,g,m,_,N,T,z,k,x,B,P,I,M,q=a[1][0]+"",$,ie,j,o=a[0].n_bundles+"",b,D,V,J,ee,U,te,ue=a[1][1]+"",ve,Te,se,ce=a[0].n_z+"",he,ze,je,K,ae,Z,le,pe=a[1][2]+"",ge,Ve,ne,fe=a[0].n_cols+"",ke,De,Oe,R,G,Me,be,qe,Ue,H,Ze,de=a[0].n_bundles*a[0].n_cols/10+"",we,Re,Ge,re,L,He,lt;function nt(h,w){return h[2].block==="capturing"||h[2].block==="previewing"?jt:zt}let Ee=nt(a),O=Ee(a);return{c(){l=f("span"),n=f("div"),s=f("button"),i=f("div"),O.c(),v=A(),u=f("button"),g=f("div"),m=Y("svg"),_=Y("path"),N=E(`
        Preview`),z=A(),k=f("content"),x=f("div"),B=f("section"),P=f("div"),I=f("span"),M=f("span"),$=E(q),ie=E(`
            /
            `),j=f("span"),b=E(o),D=E(`
        Bundles taken`),V=A(),J=f("section"),ee=f("div"),U=f("span"),te=f("span"),ve=E(ue),Te=E(`
            /
            `),se=f("span"),he=E(ce),ze=E(`
        Z-steps taken`),je=A(),K=f("section"),ae=f("div"),Z=f("span"),le=f("span"),ge=E(pe),Ve=E(`
            /
            `),ne=f("span"),ke=E(fe),De=E(`
        Columns taken`),Oe=A(),R=f("section"),G=f("span"),Me=E("Elapsed time: "),be=E(a[4]),qe=E(" s"),Ue=A(),H=f("span"),Ze=E("Total time: "),we=E(de),Re=E(" s"),Ge=A(),re=f("div"),L=f("progress"),this.h()},l(h){l=d(h,"SPAN",{class:!0});var w=c(l);n=d(w,"DIV",{class:!0});var Se=c(n);s=d(Se,"BUTTON",{type:!0,class:!0});var rt=c(s);i=d(rt,"DIV",{class:!0});var ot=c(i);O.l(ot),ot.forEach(r),rt.forEach(r),v=C(Se),u=d(Se,"BUTTON",{type:!0,id:!0,class:!0});var it=c(u);g=d(it,"DIV",{class:!0});var Qe=c(g);m=F(Qe,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var ut=c(m);_=F(ut,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(_).forEach(r),ut.forEach(r),N=S(Qe,`
        Preview`),Qe.forEach(r),it.forEach(r),Se.forEach(r),z=C(w),k=d(w,"CONTENT",{class:!0});var xe=c(k);x=d(xe,"DIV",{class:!0});var Q=c(x);B=d(Q,"SECTION",{class:!0});var We=c(B);P=d(We,"DIV",{class:!0});var ct=c(P);I=d(ct,"SPAN",{class:!0});var Pe=c(I);M=d(Pe,"SPAN",{class:!0});var pt=c(M);$=S(pt,q),pt.forEach(r),ie=S(Pe,`
            /
            `),j=d(Pe,"SPAN",{class:!0});var ft=c(j);b=S(ft,o),ft.forEach(r),Pe.forEach(r),ct.forEach(r),D=S(We,`
        Bundles taken`),We.forEach(r),V=C(Q),J=d(Q,"SECTION",{class:!0});var Xe=c(J);ee=d(Xe,"DIV",{class:!0});var dt=c(ee);U=d(dt,"SPAN",{class:!0});var Ne=c(U);te=d(Ne,"SPAN",{class:!0});var mt=c(te);ve=S(mt,ue),mt.forEach(r),Te=S(Ne,`
            /
            `),se=d(Ne,"SPAN",{class:!0});var _t=c(se);he=S(_t,ce),_t.forEach(r),Ne.forEach(r),dt.forEach(r),ze=S(Xe,`
        Z-steps taken`),Xe.forEach(r),je=C(Q),K=d(Q,"SECTION",{class:!0});var Ye=c(K);ae=d(Ye,"DIV",{class:!0});var vt=c(ae);Z=d(vt,"SPAN",{class:!0});var Ie=c(Z);le=d(Ie,"SPAN",{class:!0});var ht=c(le);ge=S(ht,pe),ht.forEach(r),Ve=S(Ie,`
            /
            `),ne=d(Ie,"SPAN",{class:!0});var gt=c(ne);ke=S(gt,fe),gt.forEach(r),Ie.forEach(r),vt.forEach(r),De=S(Ye,`
        Columns taken`),Ye.forEach(r),Oe=C(Q),R=d(Q,"SECTION",{class:!0});var Ae=c(R);G=d(Ae,"SPAN",{class:!0});var Ce=c(G);Me=S(Ce,"Elapsed time: "),be=S(Ce,a[4]),qe=S(Ce," s"),Ce.forEach(r),Ue=C(Ae),H=d(Ae,"SPAN",{class:!0});var ye=c(H);Ze=S(ye,"Total time: "),we=S(ye,de),Re=S(ye," s"),ye.forEach(r),Ae.forEach(r),Q.forEach(r),Ge=C(xe),re=d(xe,"DIV",{class:!0});var kt=c(re);L=d(kt,"PROGRESS",{class:!0}),c(L).forEach(r),kt.forEach(r),xe.forEach(r),w.forEach(r),this.h()},h(){e(i,"class","flex items-center h-12 text-lg"),e(s,"type","button"),e(s,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-cbcxg4"),s.disabled=p=a[3]!=="ok",W(s,"focus:ring-blue-300",a[3]==="ok"),W(s,"focus:ring-orange-300",a[3]==="stop"),W(s,"start",a[3]==="ok"),W(s,"stop",a[3]==="stop"),e(_,"stroke-linecap","round"),e(_,"stroke-linejoin","round"),e(_,"stroke-width","2"),e(_,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(m,"xmlns","http://www.w3.org/2000/svg"),e(m,"class","w-6 h-6 mr-1"),e(m,"fill","none"),e(m,"viewBox","0 0 24 24"),e(m,"stroke","currentColor"),e(g,"class","flex items-center"),e(u,"type","button"),e(u,"id","preview"),e(u,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-cbcxg4"),u.disabled=T=Boolean(a[2].block),e(n,"class","grid grid-flow-row w-36"),e(M,"class","font-mono"),e(j,"class","w-32 px-2 font-mono text-4xl font-bold "),e(I,"class","text-4xl font-bold"),e(P,"class","flex items-center"),e(B,"class","flex flex-col gap-y-1"),e(te,"class","font-mono"),e(se,"class","w-32 px-2 font-mono text-4xl font-bold "),e(U,"class","text-4xl font-bold"),e(ee,"class","flex items-center"),e(J,"class","flex flex-col gap-y-1"),e(le,"class","font-mono"),e(ne,"class","w-32 px-2 font-mono text-4xl font-bold "),e(Z,"class","text-4xl font-bold"),e(ae,"class","flex items-center"),e(K,"class","flex flex-col gap-y-1"),e(G,"class","text-lg font-medium"),e(H,"class","text-lg font-medium"),e(R,"class","flex flex-col"),e(x,"class","grid max-w-4xl grid-cols-4 mt-1"),e(L,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-cbcxg4"),L.value=a[5],e(re,"class","mt-1"),e(k,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),e(l,"class","z-40 flex w-full space-x-2")},m(h,w){y(h,l,w),t(l,n),t(n,s),t(s,i),O.m(i,null),t(n,v),t(n,u),t(u,g),t(g,m),t(m,_),t(g,N),t(l,z),t(l,k),t(k,x),t(x,B),t(B,P),t(P,I),t(I,M),t(M,$),t(I,ie),t(I,j),t(j,b),t(B,D),t(x,V),t(x,J),t(J,ee),t(ee,U),t(U,te),t(te,ve),t(U,Te),t(U,se),t(se,he),t(J,ze),t(x,je),t(x,K),t(K,ae),t(ae,Z),t(Z,le),t(le,ge),t(Z,Ve),t(Z,ne),t(ne,ke),t(K,De),t(x,Oe),t(x,R),t(R,G),t(G,Me),t(G,be),t(G,qe),t(R,Ue),t(R,H),t(H,Ze),t(H,we),t(H,Re),t(k,Ge),t(k,re),t(re,L),He||(lt=[bt(xt.call(null,s,"Take image and save.")),wt(s,"click",a[7]),bt(xt.call(null,u,"Take a 16-bundle image based on the current position without saving.")),wt(u,"click",a[8])],He=!0)},p(h,[w]){Ee!==(Ee=nt(h))&&(O.d(1),O=Ee(h),O&&(O.c(),O.m(i,null))),w&8&&p!==(p=h[3]!=="ok")&&(s.disabled=p),w&8&&W(s,"focus:ring-blue-300",h[3]==="ok"),w&8&&W(s,"focus:ring-orange-300",h[3]==="stop"),w&8&&W(s,"start",h[3]==="ok"),w&8&&W(s,"stop",h[3]==="stop"),w&4&&T!==(T=Boolean(h[2].block))&&(u.disabled=T),w&2&&q!==(q=h[1][0]+"")&&X($,q),w&1&&o!==(o=h[0].n_bundles+"")&&X(b,o),w&2&&ue!==(ue=h[1][1]+"")&&X(ve,ue),w&1&&ce!==(ce=h[0].n_z+"")&&X(he,ce),w&2&&pe!==(pe=h[1][2]+"")&&X(ge,pe),w&1&&fe!==(fe=h[0].n_cols+"")&&X(ke,fe),w&16&&X(be,h[4]),w&1&&de!==(de=h[0].n_bundles*h[0].n_cols/10+"")&&X(we,de),w&32&&(L.value=h[5])},i:Et,o:Et,d(h){h&&r(l),O.d(),He=!1,At(lt)}}}function Dt(a,l,n){let s,i,p;_e(a,Be,k=>n(2,s=k)),_e(a,me,k=>n(10,i=k));let v=[0,0,0],{stats:u}=l;const g=Ct(0,{duration:400,easing:yt});_e(a,g,k=>n(5,p=k));let m="ok",_,N=0;function T(){console.log("hi"),_&&clearInterval(_),s.block==="capturing"?oe(me,i={cmd:"stop"},i):(n(4,N=0),n(9,_=setInterval(()=>{n(4,N+=1)},1e3)),oe(me,i={cmd:"capture"},i),oe(Be,s.block="capturing",s))}function z(){_&&clearInterval(_),s.block==="previewing"?oe(me,i={cmd:"stop"},i):(n(4,N=0),n(9,_=setInterval(()=>{n(4,N+=1)},1e3)),oe(me,i={cmd:"preview"},i),oe(Be,s.block="previewing",s))}return a.$$set=k=>{"stats"in k&&n(0,u=k.stats)},a.$$.update=()=>{a.$$.dirty&1027&&(i==null?void 0:i.step)&&(n(1,v=i.step),g.set((v[2]*(u.n_z*u.n_bundles)+v[1]*u.n_bundles+v[0])/(u.n_bundles*u.n_cols*u.n_z))),a.$$.dirty&4&&n(3,m=s.block==="capturing"?"stop":"ok"),a.$$.dirty&4&&s.block,a.$$.dirty&516&&!s.block&&_&&clearInterval(_)},[u,v,s,m,N,p,g,T,z,_,i]}class Ot extends Pt{constructor(l){super();Nt(this,l,Dt,Vt,It,{stats:0})}}function Mt(a){let l,n,s,i,p,v,u,g,m,_,N,T,z,k,x,B,P,I;function M(o){a[3](o)}let q={};a[0]!==void 0&&(q.stats=a[0]),i=new Ot({props:q}),Fe.push(()=>Je(i,"stats",M));function $(o){a[4](o)}function ie(o){a[5](o)}let j={inAuto:!1};return a[1].image_params!==void 0&&(j.params=a[1].image_params),a[0]!==void 0&&(j.stats=a[0]),_=new Tt({props:j}),Fe.push(()=>Je(_,"params",$)),Fe.push(()=>Je(_,"stats",ie)),P=new Bt({}),{c(){l=f("div"),n=f("div"),s=A(),Ke(i.$$.fragment),v=A(),u=f("p"),g=E("Capture Parameters"),m=A(),Ke(_.$$.fragment),z=A(),k=f("p"),x=E("Preview"),B=A(),Ke(P.$$.fragment),this.h()},l(o){l=d(o,"DIV",{class:!0});var b=c(l);n=d(b,"DIV",{class:!0}),c(n).forEach(r),s=C(b),Le(i.$$.fragment,b),b.forEach(r),v=C(o),u=d(o,"P",{class:!0});var D=c(u);g=S(D,"Capture Parameters"),D.forEach(r),m=C(o),Le(_.$$.fragment,o),z=C(o),k=d(o,"P",{class:!0});var V=c(k);x=S(V,"Preview"),V.forEach(r),B=C(o),Le(P.$$.fragment,o),this.h()},h(){e(n,"class","w-full h-4"),e(l,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),e(u,"class","mt-6 title"),e(k,"class","title")},m(o,b){y(o,l,b),t(l,n),t(l,s),$e(i,l,null),y(o,v,b),y(o,u,b),t(u,g),y(o,m,b),$e(_,o,b),y(o,z,b),y(o,k,b),t(k,x),y(o,B,b),$e(P,o,b),I=!0},p(o,[b]){const D={};!p&&b&1&&(p=!0,D.stats=o[0],et(()=>p=!1)),i.$set(D);const V={};!N&&b&2&&(N=!0,V.params=o[1].image_params,et(()=>N=!1)),!T&&b&1&&(T=!0,V.stats=o[0],et(()=>T=!1)),_.$set(V)},i(o){I||(tt(i.$$.fragment,o),tt(_.$$.fragment,o),tt(P.$$.fragment,o),I=!0)},o(o){st(i.$$.fragment,o),st(_.$$.fragment,o),st(P.$$.fragment,o),I=!1},d(o){o&&r(l),at(i),o&&r(v),o&&r(u),o&&r(m),at(_,o),o&&r(z),o&&r(k),o&&r(B),at(P,o)}}}function qt(a,l){a&&(a.querySelectorAll("input").forEach(n=>n.disabled=l),a.querySelectorAll("select").forEach(n=>n.disabled=l),a.querySelectorAll("button").forEach(n=>n.disabled=l))}function Ut(a,l,n){let s,i;_e(a,Be,m=>n(2,s=m)),_e(a,St,m=>n(1,i=m));let p={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function v(m){p=m,n(0,p)}function u(m){a.$$.not_equal(i.image_params,m)&&(i.image_params=m,St.set(i))}function g(m){p=m,n(0,p)}return a.$$.update=()=>{a.$$.dirty&4&&qt(document.getElementById("control"),Boolean(s.block))},[p,i,s,v,u,g]}class Xt extends Pt{constructor(l){super();Nt(this,l,Ut,Mt,It,{})}}export{Xt as default};
