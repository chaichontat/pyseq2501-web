import{S as Ye,i as Fe,s as Ge,w as fe,x as de,y as me,q as _e,o as ve,B as he,N as ke,e as v,t as w,k as D,c as h,a as d,h as E,d as i,m as M,b as s,g as C,H as n,j as W,O as Y,P as F,U as X,Q as He,V as Qe,W as Je,X as K,T as Be,Y as $e,Z as Te}from"../chunks/vendor-3b7a823e.js";import{P as Ke}from"../chunks/preview-d11f77af.js";import{s as ge,c as te,u as We}from"../chunks/store-778decd6.js";import{t as Xe}from"../chunks/tooltip-9431c815.js";import{P as Le,T as Re}from"../chunks/takeimage-20d8fe7f.js";import"../chunks/coords-813c65ab.js";function et(r){let e,t,a,l,u,f=r[1][0]+"",p,_,c,g=r[0].n_bundles+"",N,B,x,I,y,b,m,k=r[1][1]+"",O,q,j,z=r[0].n_z+"",V,o,P,$,T,U,G,L=r[1][2]+"",se,be,J,R=r[0].n_cols+"",ae,we,Ee,Z,H,Pe,le,Se,xe,Q,Ie,ee=r[0].n_bundles*r[0].n_cols/10+"",re,Ne;return{c(){e=v("div"),t=v("section"),a=v("div"),l=v("span"),u=v("span"),p=w(f),_=w(`
          /
          `),c=v("span"),N=w(g),B=w(`
      Bundles taken`),x=D(),I=v("section"),y=v("div"),b=v("span"),m=v("span"),O=w(k),q=w(`
          /
          `),j=v("span"),V=w(z),o=w(`
      Z-steps taken`),P=D(),$=v("section"),T=v("div"),U=v("span"),G=v("span"),se=w(L),be=w(`
          /
          `),J=v("span"),ae=w(R),we=w(`
      Columns taken`),Ee=D(),Z=v("section"),H=v("span"),Pe=w("Elapsed time: "),le=w(r[4]),Se=w(" s"),xe=D(),Q=v("span"),Ie=w("Total time: "),re=w(ee),Ne=w(" s"),this.h()},l(A){e=h(A,"DIV",{class:!0});var S=d(e);t=h(S,"SECTION",{class:!0});var ye=d(t);a=h(ye,"DIV",{class:!0});var je=d(a);l=h(je,"SPAN",{class:!0});var ne=d(l);u=h(ne,"SPAN",{class:!0});var ze=d(u);p=E(ze,f),ze.forEach(i),_=E(ne,`
          /
          `),c=h(ne,"SPAN",{class:!0});var Ve=d(c);N=E(Ve,g),Ve.forEach(i),ne.forEach(i),je.forEach(i),B=E(ye,`
      Bundles taken`),ye.forEach(i),x=M(S),I=h(S,"SECTION",{class:!0});var Ae=d(I);y=h(Ae,"DIV",{class:!0});var De=d(y);b=h(De,"SPAN",{class:!0});var oe=d(b);m=h(oe,"SPAN",{class:!0});var Me=d(m);O=E(Me,k),Me.forEach(i),q=E(oe,`
          /
          `),j=h(oe,"SPAN",{class:!0});var Oe=d(j);V=E(Oe,z),Oe.forEach(i),oe.forEach(i),De.forEach(i),o=E(Ae,`
      Z-steps taken`),Ae.forEach(i),P=M(S),$=h(S,"SECTION",{class:!0});var Ce=d($);T=h(Ce,"DIV",{class:!0});var qe=d(T);U=h(qe,"SPAN",{class:!0});var ie=d(U);G=h(ie,"SPAN",{class:!0});var Ue=d(G);se=E(Ue,L),Ue.forEach(i),be=E(ie,`
          /
          `),J=h(ie,"SPAN",{class:!0});var Ze=d(J);ae=E(Ze,R),Ze.forEach(i),ie.forEach(i),qe.forEach(i),we=E(Ce,`
      Columns taken`),Ce.forEach(i),Ee=M(S),Z=h(S,"SECTION",{class:!0});var ue=d(Z);H=h(ue,"SPAN",{class:!0});var ce=d(H);Pe=E(ce,"Elapsed time: "),le=E(ce,r[4]),Se=E(ce," s"),ce.forEach(i),xe=M(ue),Q=h(ue,"SPAN",{class:!0});var pe=d(Q);Ie=E(pe,"Total time: "),re=E(pe,ee),Ne=E(pe," s"),pe.forEach(i),ue.forEach(i),S.forEach(i),this.h()},h(){s(u,"class","font-mono"),s(c,"class","w-32 px-2 font-mono text-4xl font-bold "),s(l,"class","text-4xl font-bold"),s(a,"class","flex items-center"),s(t,"class","flex flex-col gap-y-1"),s(m,"class","font-mono"),s(j,"class","w-32 px-2 font-mono text-4xl font-bold "),s(b,"class","text-4xl font-bold"),s(y,"class","flex items-center"),s(I,"class","flex flex-col gap-y-1"),s(G,"class","font-mono"),s(J,"class","w-32 px-2 font-mono text-4xl font-bold "),s(U,"class","text-4xl font-bold"),s(T,"class","flex items-center"),s($,"class","flex flex-col gap-y-1"),s(H,"class","text-lg font-medium"),s(Q,"class","text-lg font-medium"),s(Z,"class","flex flex-col"),s(e,"class","grid max-w-4xl grid-cols-4 mt-1")},m(A,S){C(A,e,S),n(e,t),n(t,a),n(a,l),n(l,u),n(u,p),n(l,_),n(l,c),n(c,N),n(t,B),n(e,x),n(e,I),n(I,y),n(y,b),n(b,m),n(m,O),n(b,q),n(b,j),n(j,V),n(I,o),n(e,P),n(e,$),n($,T),n(T,U),n(U,G),n(G,se),n(U,be),n(U,J),n(J,ae),n($,we),n(e,Ee),n(e,Z),n(Z,H),n(H,Pe),n(H,le),n(H,Se),n(Z,xe),n(Z,Q),n(Q,Ie),n(Q,re),n(Q,Ne)},p(A,S){S&2&&f!==(f=A[1][0]+"")&&W(p,f),S&1&&g!==(g=A[0].n_bundles+"")&&W(N,g),S&2&&k!==(k=A[1][1]+"")&&W(O,k),S&1&&z!==(z=A[0].n_z+"")&&W(V,z),S&2&&L!==(L=A[1][2]+"")&&W(se,L),S&1&&R!==(R=A[0].n_cols+"")&&W(ae,R),S&16&&W(le,A[4]),S&1&&ee!==(ee=A[0].n_bundles*A[0].n_cols/10+"")&&W(re,ee)},d(A){A&&i(e)}}}function tt(r){let e,t,a,l;return{c(){e=Y("svg"),t=Y("path"),a=Y("path"),l=w(`
          Capture`),this.h()},l(u){e=F(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var f=d(e);t=F(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(i),a=F(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(a).forEach(i),f.forEach(i),l=E(u,`
          Capture`),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor")},m(u,f){C(u,e,f),n(e,t),n(e,a),C(u,l,f)},d(u){u&&i(e),u&&i(l)}}}function st(r){let e,t,a,l,u,f;return{c(){e=Y("svg"),t=Y("path"),a=Y("path"),l=D(),u=v("p"),f=w("Stop"),this.h()},l(p){e=F(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _=d(e);t=F(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(i),a=F(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(a).forEach(i),_.forEach(i),l=M(p),u=h(p,"P",{class:!0});var c=d(u);f=E(c,"Stop"),c.forEach(i),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 mr-1"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor"),s(u,"class","flex-grow")},m(p,_){C(p,e,_),n(e,t),n(e,a),C(p,l,_),C(p,u,_),n(u,f)},d(p){p&&i(e),p&&i(l),p&&i(u)}}}function at(r){let e,t,a,l,u,f,p,_,c,g,N,B,x;function I(m,k){return m[2].block==="capturing"||m[2].block==="previewing"?st:tt}let y=I(r),b=y(r);return{c(){e=v("div"),t=v("button"),a=v("div"),b.c(),u=D(),f=v("button"),p=v("div"),_=Y("svg"),c=Y("path"),g=w(`
        Preview`),this.h()},l(m){e=h(m,"DIV",{slot:!0,class:!0});var k=d(e);t=h(k,"BUTTON",{type:!0,class:!0});var O=d(t);a=h(O,"DIV",{class:!0});var q=d(a);b.l(q),q.forEach(i),O.forEach(i),u=M(k),f=h(k,"BUTTON",{type:!0,id:!0,class:!0});var j=d(f);p=h(j,"DIV",{class:!0});var z=d(p);_=F(z,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var V=d(_);c=F(V,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(c).forEach(i),V.forEach(i),g=E(z,`
        Preview`),z.forEach(i),j.forEach(i),k.forEach(i),this.h()},h(){s(a,"class","flex items-center h-12 text-lg"),s(t,"type","button"),s(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-e2mwve"),t.disabled=l=r[3]!=="ok",X(t,"focus:ring-blue-300",r[3]==="ok"),X(t,"focus:ring-orange-300",r[3]==="stop"),X(t,"start",r[3]==="ok"),X(t,"stop",r[3]==="stop"),s(c,"stroke-linecap","round"),s(c,"stroke-linejoin","round"),s(c,"stroke-width","2"),s(c,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(_,"xmlns","http://www.w3.org/2000/svg"),s(_,"class","w-6 h-6 mr-1"),s(_,"fill","none"),s(_,"viewBox","0 0 24 24"),s(_,"stroke","currentColor"),s(p,"class","flex items-center"),s(f,"type","button"),s(f,"id","preview"),s(f,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-e2mwve"),f.disabled=N=Boolean(r[2].block),s(e,"slot","buttons"),s(e,"class","grid grid-flow-row w-36")},m(m,k){C(m,e,k),n(e,t),n(t,a),b.m(a,null),n(e,u),n(e,f),n(f,p),n(p,_),n(_,c),n(p,g),B||(x=[He(Xe.call(null,t,"Take image and save.")),Qe(t,"click",r[6]),He(Xe.call(null,f,"Take a 16-bundle image based on the current position without saving.")),Qe(f,"click",r[7])],B=!0)},p(m,k){y!==(y=I(m))&&(b.d(1),b=y(m),b&&(b.c(),b.m(a,null))),k&8&&l!==(l=m[3]!=="ok")&&(t.disabled=l),k&8&&X(t,"focus:ring-blue-300",m[3]==="ok"),k&8&&X(t,"focus:ring-orange-300",m[3]==="stop"),k&8&&X(t,"start",m[3]==="ok"),k&8&&X(t,"stop",m[3]==="stop"),k&4&&N!==(N=Boolean(m[2].block))&&(f.disabled=N)},d(m){m&&i(e),b.d(),B=!1,Je(x)}}}function lt(r){let e,t;return e=new Le({props:{progress:r[5],$$slots:{buttons:[at],default:[et]},$$scope:{ctx:r}}}),{c(){fe(e.$$.fragment)},l(a){de(e.$$.fragment,a)},m(a,l){me(e,a,l),t=!0},p(a,[l]){const u={};l&2079&&(u.$$scope={dirty:l,ctx:a}),e.$set(u)},i(a){t||(_e(e.$$.fragment,a),t=!0)},o(a){ve(e.$$.fragment,a),t=!1},d(a){he(e,a)}}}function rt(r,e,t){let a,l;ke(r,ge,x=>t(2,a=x)),ke(r,te,x=>t(9,l=x));let u=[0,0,0],f,{stats:p}=e,_="ok",c,g=0;function N(){console.log("hi"),c&&clearInterval(c),a.block==="capturing"?K(te,l={cmd:"stop"},l):(t(4,g=0),t(8,c=setInterval(()=>{t(4,g+=1)},1e3)),K(te,l={cmd:"capture"},l),K(ge,a.block="capturing",a))}function B(){c&&clearInterval(c),a.block==="previewing"?K(te,l={cmd:"stop"},l):(t(4,g=0),t(8,c=setInterval(()=>{t(4,g+=1)},1e3)),K(te,l={cmd:"preview"},l),K(ge,a.block="previewing",a))}return r.$$set=x=>{"stats"in x&&t(0,p=x.stats)},r.$$.update=()=>{r.$$.dirty&515&&(l==null?void 0:l.step)&&(t(1,u=l.step),f.set((u[2]*(p.n_z*p.n_bundles)+u[1]*p.n_bundles+u[0])/(p.n_bundles*p.n_cols*p.n_z))),r.$$.dirty&4&&t(3,_=a.block==="capturing"?"stop":"ok"),r.$$.dirty&4&&a.block,r.$$.dirty&260&&!a.block&&c&&clearInterval(c)},[p,u,a,_,g,f,N,B,c,l]}class nt extends Ye{constructor(e){super();Fe(this,e,rt,lt,Ge,{stats:0})}}function ot(r){let e,t,a,l,u,f,p,_,c,g,N,B,x,I,y,b,m,k;function O(o){r[3](o)}let q={};r[0]!==void 0&&(q.stats=r[0]),l=new nt({props:q}),Be.push(()=>$e(l,"stats",O));function j(o){r[4](o)}function z(o){r[5](o)}let V={inAuto:!1};return r[1].image_params!==void 0&&(V.params=r[1].image_params),r[0]!==void 0&&(V.stats=r[0]),g=new Re({props:V}),Be.push(()=>$e(g,"params",j)),Be.push(()=>$e(g,"stats",z)),m=new Ke({}),{c(){e=v("div"),t=v("div"),a=D(),fe(l.$$.fragment),f=D(),p=v("p"),_=w("Capture Parameters"),c=D(),fe(g.$$.fragment),x=D(),I=v("p"),y=w("Preview"),b=D(),fe(m.$$.fragment),this.h()},l(o){e=h(o,"DIV",{class:!0});var P=d(e);t=h(P,"DIV",{class:!0}),d(t).forEach(i),a=M(P),de(l.$$.fragment,P),P.forEach(i),f=M(o),p=h(o,"P",{class:!0});var $=d(p);_=E($,"Capture Parameters"),$.forEach(i),c=M(o),de(g.$$.fragment,o),x=M(o),I=h(o,"P",{class:!0});var T=d(I);y=E(T,"Preview"),T.forEach(i),b=M(o),de(m.$$.fragment,o),this.h()},h(){s(t,"class","w-full h-4"),s(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),s(p,"class","mt-6 title"),s(I,"class","title")},m(o,P){C(o,e,P),n(e,t),n(e,a),me(l,e,null),C(o,f,P),C(o,p,P),n(p,_),C(o,c,P),me(g,o,P),C(o,x,P),C(o,I,P),n(I,y),C(o,b,P),me(m,o,P),k=!0},p(o,[P]){const $={};!u&&P&1&&(u=!0,$.stats=o[0],Te(()=>u=!1)),l.$set($);const T={};!N&&P&2&&(N=!0,T.params=o[1].image_params,Te(()=>N=!1)),!B&&P&1&&(B=!0,T.stats=o[0],Te(()=>B=!1)),g.$set(T)},i(o){k||(_e(l.$$.fragment,o),_e(g.$$.fragment,o),_e(m.$$.fragment,o),k=!0)},o(o){ve(l.$$.fragment,o),ve(g.$$.fragment,o),ve(m.$$.fragment,o),k=!1},d(o){o&&i(e),he(l),o&&i(f),o&&i(p),o&&i(c),he(g,o),o&&i(x),o&&i(I),o&&i(b),he(m,o)}}}function it(r,e){r&&(r.querySelectorAll("input").forEach(t=>t.disabled=e),r.querySelectorAll("select").forEach(t=>t.disabled=e),r.querySelectorAll("button").forEach(t=>t.disabled=e))}function ut(r,e,t){let a,l;ke(r,ge,c=>t(2,a=c)),ke(r,We,c=>t(1,l=c));let u={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function f(c){u=c,t(0,u)}function p(c){r.$$.not_equal(l.image_params,c)&&(l.image_params=c,We.set(l))}function _(c){u=c,t(0,u)}return r.$$.update=()=>{r.$$.dirty&4&&it(document.getElementById("control"),Boolean(a.block))},[u,l,a,f,p,_]}class vt extends Ye{constructor(e){super();Fe(this,e,ut,ot,Ge,{})}}export{vt as default};
