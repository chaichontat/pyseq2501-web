import{S as Fe,i as He,s as Le,V as Ce,Z as Me,w as Q,x as W,y as X,_ as xe,q as Y,o as K,B as R,N as be,al as ot,O as Ae,e as v,t as N,k as P,c as b,a as d,h as C,d as o,m as B,b as l,g as I,H as i,j as ve,P as ue,Q as ie,W as z,T as tt,X as ke,Y as Je,aa as ut,am as it,ac as st,an as ct,ao as ft,ap as pt,ad as dt,a3 as at,v as gt,af as mt,a4 as _t,ag as Oe,ah as we}from"../chunks/vendor-c698867c.js";import{P as ht,T as vt,a as bt}from"../chunks/takeimage-243d0b23.js";import{s as Ue,c as Pe,l as Qe,u as qe}from"../chunks/utils-e86a3dae.js";import{t as rt}from"../chunks/tooltip-dc100dde.js";import"../chunks/coords-813c65ab.js";function $t(r){let e,t,s,a,n,c=r[1][0]+"",p,_,u,h=r[0].n_bundles+"",f,$,w,E,V,S,g,T=r[1][1]+"",ae,j,G,k=r[0].n_z+"",A,M,F,x,ee,re,O,te=r[1][2]+"",le,ge,L,me=r[0].n_cols+"",se,ce,$e,U,ne,m,y,fe,J,D,q,oe=r[0].n_bundles*r[0].n_cols/10+"",pe,_e;return{c(){e=v("div"),t=v("section"),s=v("div"),a=v("span"),n=v("span"),p=N(c),_=N(`
          /
          `),u=v("span"),f=N(h),$=N(`
      Bundles taken`),w=P(),E=v("section"),V=v("div"),S=v("span"),g=v("span"),ae=N(T),j=N(`
          /
          `),G=v("span"),A=N(k),M=N(`
      Z-steps taken`),F=P(),x=v("section"),ee=v("div"),re=v("span"),O=v("span"),le=N(te),ge=N(`
          /
          `),L=v("span"),se=N(me),ce=N(`
      Columns taken`),$e=P(),U=v("section"),ne=v("span"),m=N("Elapsed time: "),y=N(r[5]),fe=N(" s"),J=P(),D=v("span"),q=N("Total time: "),pe=N(oe),_e=N(" s"),this.h()},l(H){e=b(H,"DIV",{class:!0});var Z=d(e);t=b(Z,"SECTION",{class:!0});var ye=d(t);s=b(ye,"DIV",{class:!0});var de=d(s);a=b(de,"SPAN",{class:!0});var he=d(a);n=b(he,"SPAN",{class:!0});var Se=d(n);p=C(Se,c),Se.forEach(o),_=C(he,`
          /
          `),u=b(he,"SPAN",{class:!0});var Te=d(u);f=C(Te,h),Te.forEach(o),he.forEach(o),de.forEach(o),$=C(ye,`
      Bundles taken`),ye.forEach(o),w=B(Z),E=b(Z,"SECTION",{class:!0});var Ie=d(E);V=b(Ie,"DIV",{class:!0});var Ne=d(V);S=b(Ne,"SPAN",{class:!0});var Ee=d(S);g=b(Ee,"SPAN",{class:!0});var Xe=d(g);ae=C(Xe,T),Xe.forEach(o),j=C(Ee,`
          /
          `),G=b(Ee,"SPAN",{class:!0});var Ye=d(G);A=C(Ye,k),Ye.forEach(o),Ee.forEach(o),Ne.forEach(o),M=C(Ie,`
      Z-steps taken`),Ie.forEach(o),F=B(Z),x=b(Z,"SECTION",{class:!0});var Ge=d(x);ee=b(Ge,"DIV",{class:!0});var Ke=d(ee);re=b(Ke,"SPAN",{class:!0});var Ve=d(re);O=b(Ve,"SPAN",{class:!0});var Re=d(O);le=C(Re,te),Re.forEach(o),ge=C(Ve,`
          /
          `),L=b(Ve,"SPAN",{class:!0});var et=d(L);se=C(et,me),et.forEach(o),Ve.forEach(o),Ke.forEach(o),ce=C(Ge,`
      Columns taken`),Ge.forEach(o),$e=B(Z),U=b(Z,"SECTION",{class:!0});var De=d(U);ne=b(De,"SPAN",{class:!0});var ze=d(ne);m=C(ze,"Elapsed time: "),y=C(ze,r[5]),fe=C(ze," s"),ze.forEach(o),J=B(De),D=b(De,"SPAN",{class:!0});var je=d(D);q=C(je,"Total time: "),pe=C(je,oe),_e=C(je," s"),je.forEach(o),De.forEach(o),Z.forEach(o),this.h()},h(){l(n,"class","font-mono"),l(u,"class","w-32 px-2 font-mono text-4xl font-bold "),l(a,"class","text-4xl font-bold"),l(s,"class","flex items-center"),l(t,"class","flex flex-col gap-y-1"),l(g,"class","font-mono"),l(G,"class","w-32 px-2 font-mono text-4xl font-bold "),l(S,"class","text-4xl font-bold"),l(V,"class","flex items-center"),l(E,"class","flex flex-col gap-y-1"),l(O,"class","font-mono"),l(L,"class","w-32 px-2 font-mono text-4xl font-bold "),l(re,"class","text-4xl font-bold"),l(ee,"class","flex items-center"),l(x,"class","flex flex-col gap-y-1"),l(ne,"class","text-lg font-medium"),l(D,"class","text-lg font-medium"),l(U,"class","flex flex-col"),l(e,"class","grid max-w-4xl grid-cols-4 mt-1")},m(H,Z){I(H,e,Z),i(e,t),i(t,s),i(s,a),i(a,n),i(n,p),i(a,_),i(a,u),i(u,f),i(t,$),i(e,w),i(e,E),i(E,V),i(V,S),i(S,g),i(g,ae),i(S,j),i(S,G),i(G,A),i(E,M),i(e,F),i(e,x),i(x,ee),i(ee,re),i(re,O),i(O,le),i(re,ge),i(re,L),i(L,se),i(x,ce),i(e,$e),i(e,U),i(U,ne),i(ne,m),i(ne,y),i(ne,fe),i(U,J),i(U,D),i(D,q),i(D,pe),i(D,_e)},p(H,Z){Z&2&&c!==(c=H[1][0]+"")&&ve(p,c),Z&1&&h!==(h=H[0].n_bundles+"")&&ve(f,h),Z&2&&T!==(T=H[1][1]+"")&&ve(ae,T),Z&1&&k!==(k=H[0].n_z+"")&&ve(A,k),Z&2&&te!==(te=H[1][2]+"")&&ve(le,te),Z&1&&me!==(me=H[0].n_cols+"")&&ve(se,me),Z&32&&ve(y,H[5]),Z&1&&oe!==(oe=H[0].n_bundles*H[0].n_cols/10+"")&&ve(pe,oe)},d(H){H&&o(e)}}}function kt(r){let e,t,s,a;return{c(){e=ue("svg"),t=ue("path"),s=ue("path"),a=N(`
          Capture`),this.h()},l(n){e=ie(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var c=d(e);t=ie(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(o),s=ie(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(s).forEach(o),c.forEach(o),a=C(n,`
          Capture`),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,c){I(n,e,c),i(e,t),i(e,s),I(n,a,c)},d(n){n&&o(e),n&&o(a)}}}function wt(r){let e,t,s,a,n,c;return{c(){e=ue("svg"),t=ue("path"),s=ue("path"),a=P(),n=v("p"),c=N("Stop"),this.h()},l(p){e=ie(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _=d(e);t=ie(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(o),s=ie(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(s).forEach(o),_.forEach(o),a=B(p),n=b(p,"P",{class:!0});var u=d(n);c=C(u,"Stop"),u.forEach(o),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","w-6 h-6 mr-1"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor"),l(n,"class","flex-grow")},m(p,_){I(p,e,_),i(e,t),i(e,s),I(p,a,_),I(p,n,_),i(n,c)},d(p){p&&o(e),p&&o(a),p&&o(n)}}}function Et(r){let e,t,s,a,n,c,p,_,u,h,f,$,w;function E(g,T){return g[3].block==="capturing"||g[3].block==="previewing"?wt:kt}let V=E(r),S=V(r);return{c(){e=v("div"),t=v("button"),s=v("div"),S.c(),n=P(),c=v("button"),p=v("div"),_=ue("svg"),u=ue("path"),h=N(`
        Autofocus`),this.h()},l(g){e=b(g,"DIV",{slot:!0,class:!0});var T=d(e);t=b(T,"BUTTON",{type:!0,class:!0});var ae=d(t);s=b(ae,"DIV",{class:!0});var j=d(s);S.l(j),j.forEach(o),ae.forEach(o),n=B(T),c=b(T,"BUTTON",{type:!0,id:!0,class:!0});var G=d(c);p=b(G,"DIV",{class:!0});var k=d(p);_=ie(k,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var A=d(_);u=ie(A,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(u).forEach(o),A.forEach(o),h=C(k,`
        Autofocus`),k.forEach(o),G.forEach(o),T.forEach(o),this.h()},h(){l(s,"class","flex items-center h-12 text-lg cursor-pointer"),l(t,"type","button"),l(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-1rgmygs"),t.disabled=a=r[4]!=="ok"||!r[6].connected,z(t,"focus:ring-blue-300",r[4]==="ok"),z(t,"focus:ring-orange-300",r[4]==="stop"),z(t,"start",r[4]==="ok"),z(t,"stop",r[4]==="stop"),l(u,"stroke-linecap","round"),l(u,"stroke-linejoin","round"),l(u,"stroke-width","2"),l(u,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(_,"xmlns","http://www.w3.org/2000/svg"),l(_,"class","w-6 h-6 mr-1"),l(_,"fill","none"),l(_,"viewBox","0 0 24 24"),l(_,"stroke","currentColor"),l(p,"class","flex items-center"),l(c,"type","button"),l(c,"id","preview"),l(c,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-1rgmygs"),c.disabled=f=Boolean(r[3].block)||!r[6].connected,l(e,"slot","buttons"),l(e,"class","grid w-40 grid-flow-row")},m(g,T){I(g,e,T),i(e,t),i(t,s),S.m(s,null),i(e,n),i(e,c),i(c,p),i(p,_),i(_,u),i(p,h),$||(w=[tt(rt.call(null,t,"Take image and save.")),ke(t,"click",r[8]),tt(rt.call(null,c,"See the autofocus pane.")),ke(c,"click",r[12])],$=!0)},p(g,T){V!==(V=E(g))&&(S.d(1),S=V(g),S&&(S.c(),S.m(s,null))),T&80&&a!==(a=g[4]!=="ok"||!g[6].connected)&&(t.disabled=a),T&16&&z(t,"focus:ring-blue-300",g[4]==="ok"),T&16&&z(t,"focus:ring-orange-300",g[4]==="stop"),T&16&&z(t,"start",g[4]==="ok"),T&16&&z(t,"stop",g[4]==="stop"),T&72&&f!==(f=Boolean(g[3].block)||!g[6].connected)&&(c.disabled=f)},d(g){g&&o(e),S.d(),$=!1,Je(w)}}}function yt(r){let e,t,s;function a(c){r[13](c)}let n={$$slots:{buttons:[Et],default:[$t]},$$scope:{ctx:r}};return r[2]!==void 0&&(n.progress=r[2]),e=new ht({props:n}),Ce.push(()=>Me(e,"progress",a)),{c(){Q(e.$$.fragment)},l(c){W(e.$$.fragment,c)},m(c,p){X(e,c,p),s=!0},p(c,[p]){const _={};p&32891&&(_.$$scope={dirty:p,ctx:c}),!t&&p&4&&(t=!0,_.progress=c[2],xe(()=>t=!1)),e.$set(_)},i(c){s||(Y(e.$$.fragment,c),s=!0)},o(c){K(e.$$.fragment,c),s=!1},d(c){R(e,c)}}}function St(r,e,t){let s,a,n;be(r,Ue,g=>t(3,s=g)),be(r,Pe,g=>t(11,a=g)),be(r,Qe,g=>t(6,n=g));let c=[0,0,0],p,{stats:_}=e;const u=ot();function h(){t(1,c=[0,0,0]),p.set(0)}let f="ok",$,w=0;function E(){$&&clearInterval($),s.block==="capturing"?Ae(Pe,a={cmd:"stop"},a):(t(5,w=0),t(10,$=setInterval(()=>{t(5,w+=1)},1e3)),Ae(Pe,a={cmd:"capture"},a),Ae(Ue,s.block="capturing",s),h())}const V=()=>u("autofocus");function S(g){p=g,t(2,p)}return r.$$set=g=>{"stats"in g&&t(0,_=g.stats)},r.$$.update=()=>{if(r.$$.dirty&2055&&p&&(a==null?void 0:a.step)){t(1,c=a.step);const g=(c[2]*(_.n_z*_.n_bundles)+c[1]*_.n_bundles+c[0])/(_.n_bundles*_.n_cols*_.n_z);g&&p.set(g>1?1:g)}r.$$.dirty&8&&t(4,f=s.block==="capturing"?"stop":"ok"),r.$$.dirty&8&&s.block,r.$$.dirty&1032&&!s.block&&$&&clearInterval($)},[_,c,p,s,f,w,n,u,E,h,$,a,V,S]}class Tt extends Fe{constructor(e){super();He(this,e,St,yt,Le,{stats:0,resetProgress:9})}get resetProgress(){return this.$$.ctx[9]}}function It(r){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),d(e).forEach(o),this.h()},h(){l(e,"class","absolute w-full h-full border-b border-l border-gray-400")},m(t,s){I(t,e,s)},d(t){t&&o(e)}}}function Nt(r){let e,t,s=r[7]+"",a;return{c(){e=v("div"),t=v("span"),a=N(s),this.h()},l(n){e=b(n,"DIV",{class:!0});var c=d(e);t=b(c,"SPAN",{class:!0});var p=d(t);a=C(p,s),p.forEach(o),c.forEach(o),this.h()},h(){l(t,"class","absolute text-sm text-gray-600 -right-1 -bottom-6"),l(e,"class","relative top-0 block border-r border-dashed h-[105%] border-r-gray-400 x label svelte-p2apv")},m(n,c){I(n,e,c),i(e,t),i(t,a)},p(n,c){c&128&&s!==(s=n[7]+"")&&ve(a,s)},d(n){n&&o(e)}}}function Ct(r){let e,t=r[7]+"",s;return{c(){e=v("span"),s=N(t),this.h()},l(a){e=b(a,"SPAN",{class:!0});var n=d(e);s=C(n,t),n.forEach(o),this.h()},h(){l(e,"class","absolute text-sm text-right text-gray-600 -left-12")},m(a,n){I(a,e,n),i(e,s)},p(a,n){n&128&&t!==(t=a[7]+"")&&ve(s,t)},d(a){a&&o(e)}}}function At(r){let e,t;return{c(){e=ue("path"),this.h()},l(s){e=ie(s,"path",{class:!0,d:!0}),d(e).forEach(o),this.h()},h(){l(e,"class","fill-transparent stroke-blue-300 svelte-p2apv"),l(e,"d",t=r[6])},m(s,a){I(s,e,a)},p(s,a){a&64&&t!==(t=s[6])&&l(e,"d",t)},d(s){s&&o(e)}}}function Pt(r){let e,t;return e=new pt({props:{data:r[2],$$slots:{default:[At,({d:s})=>({6:s}),({d:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){X(e,s,a),t=!0},p(s,a){const n={};a&4&&(n.data=s[2]),a&320&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function Bt(r){let e;return{c(){e=v("span"),this.h()},l(t){e=b(t,"SPAN",{class:!0}),d(e).forEach(o),this.h()},h(){l(e,"class","absolute translate-x-[-50%] translate-y-[-50%] rounded-[50%] bg-orange-400 w-3 h-3 opacity-90")},m(t,s){I(t,e,s)},d(t){t&&o(e)}}}function Vt(r){let e,t,s,a,n,c,p,_,u,h;return e=new it({props:{x1:We,x2:Ze,y1:r[1],y2:r[3],$$slots:{default:[It]},$$scope:{ctx:r}}}),s=new st({props:{vertical:!0,count:5,$$slots:{default:[Nt,({value:f})=>({7:f}),({value:f})=>f?128:0]},$$scope:{ctx:r}}}),n=new st({props:{horizontal:!0,count:3,$$slots:{default:[Ct,({value:f})=>({7:f}),({value:f})=>f?128:0]},$$scope:{ctx:r}}}),p=new ct({props:{$$slots:{default:[Pt]},$$scope:{ctx:r}}}),u=new ft({props:{x:r[2][r[0]].x,y:r[2][r[0]].y,$$slots:{default:[Bt]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment),t=P(),Q(s.$$.fragment),a=P(),Q(n.$$.fragment),c=P(),Q(p.$$.fragment),_=P(),Q(u.$$.fragment)},l(f){W(e.$$.fragment,f),t=B(f),W(s.$$.fragment,f),a=B(f),W(n.$$.fragment,f),c=B(f),W(p.$$.fragment,f),_=B(f),W(u.$$.fragment,f)},m(f,$){X(e,f,$),I(f,t,$),X(s,f,$),I(f,a,$),X(n,f,$),I(f,c,$),X(p,f,$),I(f,_,$),X(u,f,$),h=!0},p(f,$){const w={};$&2&&(w.y1=f[1]),$&8&&(w.y2=f[3]),$&256&&(w.$$scope={dirty:$,ctx:f}),e.$set(w);const E={};$&384&&(E.$$scope={dirty:$,ctx:f}),s.$set(E);const V={};$&384&&(V.$$scope={dirty:$,ctx:f}),n.$set(V);const S={};$&260&&(S.$$scope={dirty:$,ctx:f}),p.$set(S);const g={};$&5&&(g.x=f[2][f[0]].x),$&5&&(g.y=f[2][f[0]].y),$&256&&(g.$$scope={dirty:$,ctx:f}),u.$set(g)},i(f){h||(Y(e.$$.fragment,f),Y(s.$$.fragment,f),Y(n.$$.fragment,f),Y(p.$$.fragment,f),Y(u.$$.fragment,f),h=!0)},o(f){K(e.$$.fragment,f),K(s.$$.fragment,f),K(n.$$.fragment,f),K(p.$$.fragment,f),K(u.$$.fragment,f),h=!1},d(f){R(e,f),f&&o(t),R(s,f),f&&o(a),R(n,f),f&&o(c),R(p,f),f&&o(_),R(u,f)}}}function Dt(r){let e,t,s;return t=new ut({props:{x1:We,x2:Ze,y1:r[1],y2:r[3],$$slots:{default:[Vt]},$$scope:{ctx:r}}}),{c(){e=v("div"),Q(t.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=d(e);W(t.$$.fragment,n),n.forEach(o),this.h()},h(){l(e,"class","box-border h-48 chart w-[400px]")},m(a,n){I(a,e,n),X(t,e,null),s=!0},p(a,[n]){const c={};n&2&&(c.y1=a[1]),n&8&&(c.y2=a[3]),n&271&&(c.$$scope={dirty:n,ctx:a}),t.$set(c)},i(a){s||(Y(t.$$.fragment,a),s=!0)},o(a){K(t.$$.fragment,a),s=!1},d(a){a&&o(e),R(t)}}}const Ze=60292,We=2621,lt=259;function zt(r,e,t){let s;be(r,Qe,u=>t(4,s=u));let a=[],{curr:n=0}=e;const c=[...Array(lt)].map((u,h)=>Math.round(Ze-(Ze-We)*h/lt));let p=0,_=100;return r.$$set=u=>{"curr"in u&&t(0,n=u.curr)},r.$$.update=()=>{r.$$.dirty&18&&s.afimg.laplacian&&(t(2,a=s.afimg.laplacian.map((u,h)=>({x:c[h],y:u}))),t(1,p=Math.min(...s.afimg.laplacian)),t(1,p=p*.9),t(3,_=Math.max(...s.afimg.laplacian,1)))},[n,p,a,_,s]}class jt extends Fe{constructor(e){super();He(this,e,zt,Dt,Le,{curr:0})}}function Ot(r){let e,t,s;return{c(){e=v("button"),t=N("Channel 0"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=d(e);t=C(n,"Channel 0"),n.forEach(o),this.h()},h(){l(e,"class",s=we(r[7]("green",r[19])+" active:ring-green-500")+" svelte-1e6iagd"),z(e,"bg-green-600",r[19])},m(a,n){I(a,e,n),i(e,t)},p(a,n){n&524288&&s!==(s=we(a[7]("green",a[19])+" active:ring-green-500")+" svelte-1e6iagd")&&l(e,"class",s),n&524288&&z(e,"bg-green-600",a[19])},d(a){a&&o(e)}}}function Mt(r){let e,t,s;return{c(){e=v("button"),t=N("Channel 1"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=d(e);t=C(n,"Channel 1"),n.forEach(o),this.h()},h(){l(e,"class",s=we(r[7]("orange",r[19])+" active:ring-orange-500")+" svelte-1e6iagd"),z(e,"bg-orange-500",r[19])},m(a,n){I(a,e,n),i(e,t)},p(a,n){n&524288&&s!==(s=we(a[7]("orange",a[19])+" active:ring-orange-500")+" svelte-1e6iagd")&&l(e,"class",s),n&524288&&z(e,"bg-orange-500",a[19])},d(a){a&&o(e)}}}function xt(r){let e,t,s;return{c(){e=v("button"),t=N("Channel 2"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=d(e);t=C(n,"Channel 2"),n.forEach(o),this.h()},h(){l(e,"class",s=we(r[7]("rose",r[19])+" active:ring-rose-500")+" svelte-1e6iagd"),z(e,"bg-rose-600",r[19])},m(a,n){I(a,e,n),i(e,t)},p(a,n){n&524288&&s!==(s=we(a[7]("rose",a[19])+" active:ring-rose-500")+" svelte-1e6iagd")&&l(e,"class",s),n&524288&&z(e,"bg-rose-600",a[19])},d(a){a&&o(e)}}}function Ut(r){let e,t,s;return{c(){e=v("button"),t=N("Channel 3"),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var n=d(e);t=C(n,"Channel 3"),n.forEach(o),this.h()},h(){l(e,"class",s=we(r[7]("amber",r[19])+" active:ring-amber-500")+" svelte-1e6iagd"),z(e,"bg-amber-800",r[19])},m(a,n){I(a,e,n),i(e,t)},p(a,n){n&524288&&s!==(s=we(a[7]("amber",a[19])+" active:ring-amber-500")+" svelte-1e6iagd")&&l(e,"class",s),n&524288&&z(e,"bg-amber-800",a[19])},d(a){a&&o(e)}}}function qt(r){let e,t,s,a,n,c,p,_;return e=new Oe({props:{$$slots:{default:[Ot,({selected:u})=>({19:u}),({selected:u})=>u?524288:0]},$$scope:{ctx:r}}}),s=new Oe({props:{$$slots:{default:[Mt,({selected:u})=>({19:u}),({selected:u})=>u?524288:0]},$$scope:{ctx:r}}}),n=new Oe({props:{$$slots:{default:[xt,({selected:u})=>({19:u}),({selected:u})=>u?524288:0]},$$scope:{ctx:r}}}),p=new Oe({props:{$$slots:{default:[Ut,({selected:u})=>({19:u}),({selected:u})=>u?524288:0]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment),t=P(),Q(s.$$.fragment),a=P(),Q(n.$$.fragment),c=P(),Q(p.$$.fragment)},l(u){W(e.$$.fragment,u),t=B(u),W(s.$$.fragment,u),a=B(u),W(n.$$.fragment,u),c=B(u),W(p.$$.fragment,u)},m(u,h){X(e,u,h),I(u,t,h),X(s,u,h),I(u,a,h),X(n,u,h),I(u,c,h),X(p,u,h),_=!0},p(u,h){const f={};h&1572864&&(f.$$scope={dirty:h,ctx:u}),e.$set(f);const $={};h&1572864&&($.$$scope={dirty:h,ctx:u}),s.$set($);const w={};h&1572864&&(w.$$scope={dirty:h,ctx:u}),n.$set(w);const E={};h&1572864&&(E.$$scope={dirty:h,ctx:u}),p.$set(E)},i(u){_||(Y(e.$$.fragment,u),Y(s.$$.fragment,u),Y(n.$$.fragment,u),Y(p.$$.fragment,u),_=!0)},o(u){K(e.$$.fragment,u),K(s.$$.fragment,u),K(n.$$.fragment,u),K(p.$$.fragment,u),_=!1},d(u){R(e,u),u&&o(t),R(s,u),u&&o(a),R(n,u),u&&o(c),R(p,u)}}}function Zt(r){let e,t;return e=new mt({props:{class:"grid grid-cols-4 p-1 space-x-1 border border-gray-300 rounded-lg shadow-sm bg-gray-50",$$slots:{default:[qt]},$$scope:{ctx:r}}}),{c(){Q(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){X(e,s,a),t=!0},p(s,a){const n={};a&1048576&&(n.$$scope={dirty:a,ctx:s}),e.$set(n)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function Ft(r){let e,t,s,a,n,c,p,_,u,h,f,$,w,E,V,S,g,T,ae,j,G,k,A,M,F,x,ee,re,O,te=r[6][Be-r[0]-1]+"",le,ge,L,me,se,ce,$e,U,ne,m,y,fe,J;return a=new dt({props:{$$slots:{default:[Zt]},$$scope:{ctx:r}}}),a.$on("change",r[10]),m=new jt({props:{curr:258-r[0]}}),{c(){e=v("div"),t=v("div"),s=v("div"),Q(a.$$.fragment),n=P(),c=v("button"),p=ue("svg"),_=ue("path"),u=P(),h=v("span"),f=N("Autofocus"),w=P(),E=v("div"),V=P(),S=v("div"),g=v("div"),T=v("canvas"),ae=P(),j=v("div"),G=P(),k=v("div"),A=v("button"),M=ue("svg"),F=ue("path"),x=ue("path"),ee=N(`
          Jump to Focus`),re=P(),O=v("span"),le=N(te),ge=P(),L=v("button"),me=N(`To Z Obj
          `),se=ue("svg"),ce=ue("path"),$e=P(),U=v("input"),ne=P(),Q(m.$$.fragment),this.h()},l(D){e=b(D,"DIV",{class:!0});var q=d(e);t=b(q,"DIV",{class:!0});var oe=d(t);s=b(oe,"DIV",{class:!0});var pe=d(s);W(a.$$.fragment,pe),pe.forEach(o),n=B(oe),c=b(oe,"BUTTON",{type:!0,class:!0});var _e=d(c);p=ie(_e,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var H=d(p);_=ie(H,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),d(_).forEach(o),H.forEach(o),u=B(_e),h=b(_e,"SPAN",{});var Z=d(h);f=C(Z,"Autofocus"),Z.forEach(o),_e.forEach(o),oe.forEach(o),w=B(q),E=b(q,"DIV",{class:!0}),d(E).forEach(o),V=B(q),S=b(q,"DIV",{class:!0});var ye=d(S);g=b(ye,"DIV",{class:!0});var de=d(g);T=b(de,"CANVAS",{width:!0,height:!0,class:!0}),d(T).forEach(o),ae=B(de),j=b(de,"DIV",{class:!0}),d(j).forEach(o),G=B(de),k=b(de,"DIV",{class:!0});var he=d(k);A=b(he,"BUTTON",{type:!0,class:!0});var Se=d(A);M=ie(Se,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var Te=d(M);F=ie(Te,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),d(F).forEach(o),x=ie(Te,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),d(x).forEach(o),Te.forEach(o),ee=C(Se,`
          Jump to Focus`),Se.forEach(o),re=B(he),O=b(he,"SPAN",{class:!0});var Ie=d(O);le=C(Ie,te),Ie.forEach(o),ge=B(he),L=b(he,"BUTTON",{type:!0,class:!0});var Ne=d(L);me=C(Ne,`To Z Obj
          `),se=ie(Ne,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var Ee=d(se);ce=ie(Ee,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),d(ce).forEach(o),Ee.forEach(o),Ne.forEach(o),he.forEach(o),$e=B(de),U=b(de,"INPUT",{type:!0,class:!0,min:!0,max:!0}),ne=B(de),W(m.$$.fragment,de),de.forEach(o),ye.forEach(o),q.forEach(o),this.h()},h(){l(s,"class","flex-grow"),l(_,"fill-rule","evenodd"),l(_,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),l(_,"clip-rule","evenodd"),l(p,"xmlns","http://www.w3.org/2000/svg"),l(p,"class","w-5 h-5 mr-1"),l(p,"viewBox","0 0 20 20"),l(p,"fill","currentColor"),l(c,"type","button"),c.disabled=$=r[4].block,l(c,"class","px-4 py-1 font-medium text-gray-900 rounded-lg w-36 white-button"),l(t,"class","flex max-w-lg mx-auto gap-x-4"),l(E,"class","w-[80%] mx-auto bg-gray-200 h-[1px]"),l(T,"width",256),l(T,"height",64),l(T,"class","svelte-1e6iagd"),l(j,"class","h-[32px]"),l(F,"stroke-linecap","round"),l(F,"stroke-linejoin","round"),l(F,"d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"),l(x,"stroke-linecap","round"),l(x,"stroke-linejoin","round"),l(x,"d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),l(M,"xmlns","http://www.w3.org/2000/svg"),l(M,"class","w-5 h-5 mr-1"),l(M,"fill","none"),l(M,"viewBox","0 0 24 24"),l(M,"stroke","currentColor"),l(M,"stroke-width","2"),l(A,"type","button"),l(A,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),l(O,"class","px-4 py-2 font-medium border border-blue-200 rounded-lg shadow-sm bg-blue-50 tabular-nums"),l(ce,"stroke-linecap","round"),l(ce,"stroke-linejoin","round"),l(ce,"d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"),l(se,"xmlns","http://www.w3.org/2000/svg"),l(se,"class","w-5 h-5 ml-2 -mr-1"),l(se,"fill","none"),l(se,"viewBox","0 0 24 24"),l(se,"stroke","currentColor"),l(se,"stroke-width","2"),l(L,"type","button"),l(L,"class","px-4 py-1 text-sm font-medium text-gray-900 rounded-lg white-button disabled:bg-gray-50 disabled:hover:bg-gray-50 disabled:active:bg-gray-50 disabled:text-gray-500"),l(k,"class","flex w-full gap-x-4 content-evenly"),l(U,"type","range"),l(U,"class","mb-2 range w-[104.5%]"),l(U,"min","0"),l(U,"max","258"),l(g,"class","flex flex-col items-center max-w-md mx-auto gap-y-6"),l(S,"class","flex items-center"),l(e,"class","space-y-12")},m(D,q){I(D,e,q),i(e,t),i(t,s),X(a,s,null),i(t,n),i(t,c),i(c,p),i(p,_),i(c,u),i(c,h),i(h,f),i(e,w),i(e,E),i(e,V),i(e,S),i(S,g),i(g,T),r[12](T),i(g,ae),i(g,j),i(g,G),i(g,k),i(k,A),i(A,M),i(M,F),i(M,x),i(A,ee),i(k,re),i(k,O),i(O,le),i(k,ge),i(k,L),i(L,me),i(L,se),i(se,ce),i(g,$e),i(g,U),at(U,r[0]),i(g,ne),X(m,g,null),y=!0,fe||(J=[ke(c,"click",r[11]),ke(A,"click",r[13]),ke(L,"click",r[14]),ke(U,"change",r[15]),ke(U,"input",r[15])],fe=!0)},p(D,[q]){const oe={};q&1048576&&(oe.$$scope={dirty:q,ctx:D}),a.$set(oe),(!y||q&16&&$!==($=D[4].block))&&(c.disabled=$),(!y||q&1)&&te!==(te=D[6][Be-D[0]-1]+"")&&ve(le,te),q&1&&at(U,D[0]);const pe={};q&1&&(pe.curr=258-D[0]),m.$set(pe)},i(D){y||(Y(a.$$.fragment,D),Y(m.$$.fragment,D),y=!0)},o(D){K(a.$$.fragment,D),K(m.$$.fragment,D),y=!1},d(D){D&&o(e),R(a),r[12](null),R(m),fe=!1,Je(J)}}}const nt=60292,Ht=2621,Be=259;function Lt(r,e,t){let s,a,n,c;be(r,Qe,k=>t(9,s=k)),be(r,Pe,k=>t(3,a=k)),be(r,Ue,k=>t(4,n=k)),be(r,qe,k=>t(5,c=k));let p,_,u,h=0;const f=[...Array(259)].map((k,A)=>Math.round(nt-(nt-Ht)*A/Be));let $=0;gt(()=>{u=p.getContext("2d")}),_=new Image,_.onload=()=>u==null?void 0:u.drawImage(_,0,0);const w={green:"hover:bg-green-300 active:bg-green-700",orange:"hover:bg-orange-300",rose:"hover:bg-rose-300",amber:"hover:bg-amber-600"};function E(k,A){return`tab-button transition-all ${A?"text-white":`text-gray-700 hover:text-black bg-gray-50 ${w[k]}`}`}function V(){return 258-s.afimg.laplacian.map((k,A)=>[k,A]).reduce((k,A)=>A[0]>k[0]?A:k)[1]}const S=k=>t(2,$=k.detail),g=()=>Ae(Pe,a={cmd:"autofocus"},a);function T(k){Ce[k?"unshift":"push"](()=>{p=k,t(1,p)})}const ae=()=>t(0,h=V()),j=()=>Ae(qe,c.image_params.z_obj=f[Be-h-1],c);function G(){h=_t(this.value),t(0,h),t(9,s)}return r.$$.update=()=>{r.$$.dirty&512&&s.afimg.laplacian&&t(0,h=V()),r.$$.dirty&513&&s.afimg.afimg&&(console.log(s.afimg),_.src=s.afimg.afimg[Be-h-1])},[h,p,$,a,n,c,f,E,V,s,S,g,T,ae,j,G]}class Gt extends Fe{constructor(e){super();He(this,e,Lt,Ft,Le,{})}}function Jt(r){let e,t,s,a,n,c,p,_,u,h,f,$,w,E,V,S,g,T,ae,j,G,k,A,M,F,x,ee,re,O,te,le,ge,L,me;function se(m){r[4](m)}let ce={};r[0]!==void 0&&(ce.stats=r[0]),a=new Tt({props:ce}),Ce.push(()=>Me(a,"stats",se)),a.$on("autofocus",r[5]);function $e(m){r[6](m)}function U(m){r[7](m)}let ne={inAuto:!1};return r[2].image_params!==void 0&&(ne.params=r[2].image_params),r[0]!==void 0&&(ne.stats=r[0]),h=new vt({props:ne}),Ce.push(()=>Me(h,"params",$e)),Ce.push(()=>Me(h,"stats",U)),ee=new bt({}),le=new Gt({}),{c(){e=v("div"),t=v("div"),s=P(),Q(a.$$.fragment),c=P(),p=v("p"),_=N("Capture Parameters"),u=P(),Q(h.$$.fragment),w=P(),E=v("div"),V=v("div"),S=P(),g=v("button"),T=N("Preview"),ae=P(),j=v("button"),G=N("Autofocus"),k=P(),A=v("div"),M=P(),F=v("section"),x=v("div"),Q(ee.$$.fragment),re=P(),O=v("section"),te=v("div"),Q(le.$$.fragment),this.h()},l(m){e=b(m,"DIV",{class:!0});var y=d(e);t=b(y,"DIV",{class:!0}),d(t).forEach(o),s=B(y),W(a.$$.fragment,y),y.forEach(o),c=B(m),p=b(m,"P",{class:!0});var fe=d(p);_=C(fe,"Capture Parameters"),fe.forEach(o),u=B(m),W(h.$$.fragment,m),w=B(m),E=b(m,"DIV",{class:!0});var J=d(E);V=b(J,"DIV",{class:!0}),d(V).forEach(o),S=B(J),g=b(J,"BUTTON",{class:!0});var D=d(g);T=C(D,"Preview"),D.forEach(o),ae=B(J),j=b(J,"BUTTON",{class:!0});var q=d(j);G=C(q,"Autofocus"),q.forEach(o),k=B(J),A=b(J,"DIV",{class:!0}),d(A).forEach(o),J.forEach(o),M=B(m),F=b(m,"SECTION",{class:!0});var oe=d(F);x=b(oe,"DIV",{class:!0});var pe=d(x);W(ee.$$.fragment,pe),pe.forEach(o),oe.forEach(o),re=B(m),O=b(m,"SECTION",{class:!0});var _e=d(O);te=b(_e,"DIV",{class:!0});var H=d(te);W(le.$$.fragment,H),H.forEach(o),_e.forEach(o),this.h()},h(){l(t,"class","w-full h-4"),l(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),l(p,"class","mt-6 title"),l(V,"class","-ml-10 cursor-default tab tab-lifted"),l(g,"class","font-medium tab tab-lg tab-lifted"),z(g,"tab-active",r[1]==="preview"),z(g,"text-gray-800",r[1]==="preview"),l(j,"class","font-medium tab tab-lg tab-lifted"),z(j,"tab-active",r[1]==="autofocus"),z(j,"text-gray-800",r[1]==="autofocus"),l(A,"class","flex-1 cursor-default tab tab-lifted"),l(E,"class","w-full mt-8 tabs"),l(x,"class","my-4"),l(F,"class","relative"),z(F,"hidden",r[1]!=="preview"),l(te,"class","my-6"),l(O,"class","relative"),z(O,"hidden",r[1]!=="autofocus")},m(m,y){I(m,e,y),i(e,t),i(e,s),X(a,e,null),I(m,c,y),I(m,p,y),i(p,_),I(m,u,y),X(h,m,y),I(m,w,y),I(m,E,y),i(E,V),i(E,S),i(E,g),i(g,T),i(E,ae),i(E,j),i(j,G),i(E,k),i(E,A),I(m,M,y),I(m,F,y),i(F,x),X(ee,x,null),I(m,re,y),I(m,O,y),i(O,te),X(le,te,null),ge=!0,L||(me=[ke(g,"click",r[8]),ke(j,"click",r[9])],L=!0)},p(m,[y]){const fe={};!n&&y&1&&(n=!0,fe.stats=m[0],xe(()=>n=!1)),a.$set(fe);const J={};!f&&y&4&&(f=!0,J.params=m[2].image_params,xe(()=>f=!1)),!$&&y&1&&($=!0,J.stats=m[0],xe(()=>$=!1)),h.$set(J),y&2&&z(g,"tab-active",m[1]==="preview"),y&2&&z(g,"text-gray-800",m[1]==="preview"),y&2&&z(j,"tab-active",m[1]==="autofocus"),y&2&&z(j,"text-gray-800",m[1]==="autofocus"),y&2&&z(F,"hidden",m[1]!=="preview"),y&2&&z(O,"hidden",m[1]!=="autofocus")},i(m){ge||(Y(a.$$.fragment,m),Y(h.$$.fragment,m),Y(ee.$$.fragment,m),Y(le.$$.fragment,m),ge=!0)},o(m){K(a.$$.fragment,m),K(h.$$.fragment,m),K(ee.$$.fragment,m),K(le.$$.fragment,m),ge=!1},d(m){m&&o(e),R(a),m&&o(c),m&&o(p),m&&o(u),R(h,m),m&&o(w),m&&o(E),m&&o(M),m&&o(F),R(ee),m&&o(re),m&&o(O),R(le),L=!1,Je(me)}}}function Qt(r,e){r&&(r.querySelectorAll("input").forEach(t=>t.disabled=e),r.querySelectorAll("select").forEach(t=>t.disabled=e),r.querySelectorAll("button").forEach(t=>t.disabled=e))}function Wt(r,e,t){let s,a;be(r,Ue,w=>t(3,s=w)),be(r,qe,w=>t(2,a=w));let n={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0},c="preview";function p(w){n=w,t(0,n)}const _=()=>t(1,c="autofocus");function u(w){r.$$.not_equal(a.image_params,w)&&(a.image_params=w,qe.set(a))}function h(w){n=w,t(0,n)}const f=()=>t(1,c="preview"),$=()=>t(1,c="autofocus");return r.$$.update=()=>{r.$$.dirty&8&&Qt(document.getElementById("control"),Boolean(s.block))},[n,c,a,s,p,_,u,h,f,$]}class ts extends Fe{constructor(e){super();He(this,e,Wt,Jt,Le,{})}}export{ts as default};
