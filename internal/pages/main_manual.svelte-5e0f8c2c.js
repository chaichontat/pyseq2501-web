import{S as Ye,i as Fe,s as Ge,T as fe,Y as de,w as _e,x as me,y as ve,Z as ge,q as he,o as ke,B as be,N as Ee,X as K,e as v,t as E,k as D,c as g,a as d,h as P,d as u,m as M,b as s,g as C,H as n,j as W,O as Y,P as F,U as X,Q as He,V as Qe,W as Je}from"../chunks/vendor-3b7a823e.js";import{P as Ke}from"../chunks/preview-5a92f6af.js";import{s as we,c as te,u as We}from"../chunks/store-cb7bda8e.js";import{t as Xe}from"../chunks/tooltip-9431c815.js";import{P as Le,T as Re}from"../chunks/takeimage-8dfc1898.js";import"../chunks/coords-813c65ab.js";function et(a){let e,t,r,o,c,l=a[1][0]+"",p,_,f,k=a[0].n_bundles+"",I,y,B,h,N,w,m,b=a[1][1]+"",O,q,j,z=a[0].n_z+"",V,i,S,T,$,U,G,L=a[1][2]+"",se,Pe,J,R=a[0].n_cols+"",ae,Se,xe,Z,H,Ie,re,Ne,Ae,Q,Ce,ee=a[0].n_bundles*a[0].n_cols/10+"",le,ye;return{c(){e=v("div"),t=v("section"),r=v("div"),o=v("span"),c=v("span"),p=E(l),_=E(`
          /
          `),f=v("span"),I=E(k),y=E(`
      Bundles taken`),B=D(),h=v("section"),N=v("div"),w=v("span"),m=v("span"),O=E(b),q=E(`
          /
          `),j=v("span"),V=E(z),i=E(`
      Z-steps taken`),S=D(),T=v("section"),$=v("div"),U=v("span"),G=v("span"),se=E(L),Pe=E(`
          /
          `),J=v("span"),ae=E(R),Se=E(`
      Columns taken`),xe=D(),Z=v("section"),H=v("span"),Ie=E("Elapsed time: "),re=E(a[5]),Ne=E(" s"),Ae=D(),Q=v("span"),Ce=E("Total time: "),le=E(ee),ye=E(" s"),this.h()},l(A){e=g(A,"DIV",{class:!0});var x=d(e);t=g(x,"SECTION",{class:!0});var Be=d(t);r=g(Be,"DIV",{class:!0});var je=d(r);o=g(je,"SPAN",{class:!0});var ne=d(o);c=g(ne,"SPAN",{class:!0});var ze=d(c);p=P(ze,l),ze.forEach(u),_=P(ne,`
          /
          `),f=g(ne,"SPAN",{class:!0});var Ve=d(f);I=P(Ve,k),Ve.forEach(u),ne.forEach(u),je.forEach(u),y=P(Be,`
      Bundles taken`),Be.forEach(u),B=M(x),h=g(x,"SECTION",{class:!0});var Te=d(h);N=g(Te,"DIV",{class:!0});var De=d(N);w=g(De,"SPAN",{class:!0});var oe=d(w);m=g(oe,"SPAN",{class:!0});var Me=d(m);O=P(Me,b),Me.forEach(u),q=P(oe,`
          /
          `),j=g(oe,"SPAN",{class:!0});var Oe=d(j);V=P(Oe,z),Oe.forEach(u),oe.forEach(u),De.forEach(u),i=P(Te,`
      Z-steps taken`),Te.forEach(u),S=M(x),T=g(x,"SECTION",{class:!0});var $e=d(T);$=g($e,"DIV",{class:!0});var qe=d($);U=g(qe,"SPAN",{class:!0});var ie=d(U);G=g(ie,"SPAN",{class:!0});var Ue=d(G);se=P(Ue,L),Ue.forEach(u),Pe=P(ie,`
          /
          `),J=g(ie,"SPAN",{class:!0});var Ze=d(J);ae=P(Ze,R),Ze.forEach(u),ie.forEach(u),qe.forEach(u),Se=P($e,`
      Columns taken`),$e.forEach(u),xe=M(x),Z=g(x,"SECTION",{class:!0});var ue=d(Z);H=g(ue,"SPAN",{class:!0});var pe=d(H);Ie=P(pe,"Elapsed time: "),re=P(pe,a[5]),Ne=P(pe," s"),pe.forEach(u),Ae=M(ue),Q=g(ue,"SPAN",{class:!0});var ce=d(Q);Ce=P(ce,"Total time: "),le=P(ce,ee),ye=P(ce," s"),ce.forEach(u),ue.forEach(u),x.forEach(u),this.h()},h(){s(c,"class","font-mono"),s(f,"class","w-32 px-2 font-mono text-4xl font-bold "),s(o,"class","text-4xl font-bold"),s(r,"class","flex items-center"),s(t,"class","flex flex-col gap-y-1"),s(m,"class","font-mono"),s(j,"class","w-32 px-2 font-mono text-4xl font-bold "),s(w,"class","text-4xl font-bold"),s(N,"class","flex items-center"),s(h,"class","flex flex-col gap-y-1"),s(G,"class","font-mono"),s(J,"class","w-32 px-2 font-mono text-4xl font-bold "),s(U,"class","text-4xl font-bold"),s($,"class","flex items-center"),s(T,"class","flex flex-col gap-y-1"),s(H,"class","text-lg font-medium"),s(Q,"class","text-lg font-medium"),s(Z,"class","flex flex-col"),s(e,"class","grid max-w-4xl grid-cols-4 mt-1")},m(A,x){C(A,e,x),n(e,t),n(t,r),n(r,o),n(o,c),n(c,p),n(o,_),n(o,f),n(f,I),n(t,y),n(e,B),n(e,h),n(h,N),n(N,w),n(w,m),n(m,O),n(w,q),n(w,j),n(j,V),n(h,i),n(e,S),n(e,T),n(T,$),n($,U),n(U,G),n(G,se),n(U,Pe),n(U,J),n(J,ae),n(T,Se),n(e,xe),n(e,Z),n(Z,H),n(H,Ie),n(H,re),n(H,Ne),n(Z,Ae),n(Z,Q),n(Q,Ce),n(Q,le),n(Q,ye)},p(A,x){x&2&&l!==(l=A[1][0]+"")&&W(p,l),x&1&&k!==(k=A[0].n_bundles+"")&&W(I,k),x&2&&b!==(b=A[1][1]+"")&&W(O,b),x&1&&z!==(z=A[0].n_z+"")&&W(V,z),x&2&&L!==(L=A[1][2]+"")&&W(se,L),x&1&&R!==(R=A[0].n_cols+"")&&W(ae,R),x&32&&W(re,A[5]),x&1&&ee!==(ee=A[0].n_bundles*A[0].n_cols/10+"")&&W(le,ee)},d(A){A&&u(e)}}}function tt(a){let e,t,r,o;return{c(){e=Y("svg"),t=Y("path"),r=Y("path"),o=E(`
          Capture`),this.h()},l(c){e=F(c,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=d(e);t=F(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(u),r=F(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(r).forEach(u),l.forEach(u),o=P(c,`
          Capture`),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","2"),s(r,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor")},m(c,l){C(c,e,l),n(e,t),n(e,r),C(c,o,l)},d(c){c&&u(e),c&&u(o)}}}function st(a){let e,t,r,o,c,l;return{c(){e=Y("svg"),t=Y("path"),r=Y("path"),o=D(),c=v("p"),l=E("Stop"),this.h()},l(p){e=F(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _=d(e);t=F(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(u),r=F(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(r).forEach(u),_.forEach(u),o=M(p),c=g(p,"P",{class:!0});var f=d(c);l=P(f,"Stop"),f.forEach(u),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","2"),s(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(r,"stroke-linecap","round"),s(r,"stroke-linejoin","round"),s(r,"stroke-width","2"),s(r,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","w-6 h-6 mr-1"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke","currentColor"),s(c,"class","flex-grow")},m(p,_){C(p,e,_),n(e,t),n(e,r),C(p,o,_),C(p,c,_),n(c,l)},d(p){p&&u(e),p&&u(o),p&&u(c)}}}function at(a){let e,t,r,o,c,l,p,_,f,k,I,y,B;function h(m,b){return m[3].block==="capturing"||m[3].block==="previewing"?st:tt}let N=h(a),w=N(a);return{c(){e=v("div"),t=v("button"),r=v("div"),w.c(),c=D(),l=v("button"),p=v("div"),_=Y("svg"),f=Y("path"),k=E(`
        Preview`),this.h()},l(m){e=g(m,"DIV",{slot:!0,class:!0});var b=d(e);t=g(b,"BUTTON",{type:!0,class:!0});var O=d(t);r=g(O,"DIV",{class:!0});var q=d(r);w.l(q),q.forEach(u),O.forEach(u),c=M(b),l=g(b,"BUTTON",{type:!0,id:!0,class:!0});var j=d(l);p=g(j,"DIV",{class:!0});var z=d(p);_=F(z,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var V=d(_);f=F(V,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(f).forEach(u),V.forEach(u),k=P(z,`
        Preview`),z.forEach(u),j.forEach(u),b.forEach(u),this.h()},h(){s(r,"class","flex items-center h-12 text-lg cursor-pointer"),s(t,"type","button"),s(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-e2mwve"),t.disabled=o=a[4]!=="ok",X(t,"focus:ring-blue-300",a[4]==="ok"),X(t,"focus:ring-orange-300",a[4]==="stop"),X(t,"start",a[4]==="ok"),X(t,"stop",a[4]==="stop"),s(f,"stroke-linecap","round"),s(f,"stroke-linejoin","round"),s(f,"stroke-width","2"),s(f,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),s(_,"xmlns","http://www.w3.org/2000/svg"),s(_,"class","w-6 h-6 mr-1"),s(_,"fill","none"),s(_,"viewBox","0 0 24 24"),s(_,"stroke","currentColor"),s(p,"class","flex items-center"),s(l,"type","button"),s(l,"id","preview"),s(l,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-e2mwve"),l.disabled=I=Boolean(a[3].block),s(e,"slot","buttons"),s(e,"class","grid grid-flow-row w-36")},m(m,b){C(m,e,b),n(e,t),n(t,r),w.m(r,null),n(e,c),n(e,l),n(l,p),n(p,_),n(_,f),n(p,k),y||(B=[He(Xe.call(null,t,"Take image and save.")),Qe(t,"click",a[6]),He(Xe.call(null,l,"Take a 16-bundle image based on the current position without saving.")),Qe(l,"click",a[7])],y=!0)},p(m,b){N!==(N=h(m))&&(w.d(1),w=N(m),w&&(w.c(),w.m(r,null))),b&16&&o!==(o=m[4]!=="ok")&&(t.disabled=o),b&16&&X(t,"focus:ring-blue-300",m[4]==="ok"),b&16&&X(t,"focus:ring-orange-300",m[4]==="stop"),b&16&&X(t,"start",m[4]==="ok"),b&16&&X(t,"stop",m[4]==="stop"),b&8&&I!==(I=Boolean(m[3].block))&&(l.disabled=I)},d(m){m&&u(e),w.d(),y=!1,Je(B)}}}function rt(a){let e,t,r;function o(l){a[10](l)}let c={$$slots:{buttons:[at],default:[et]},$$scope:{ctx:a}};return a[2]!==void 0&&(c.progress=a[2]),e=new Le({props:c}),fe.push(()=>de(e,"progress",o)),{c(){_e(e.$$.fragment)},l(l){me(e.$$.fragment,l)},m(l,p){ve(e,l,p),r=!0},p(l,[p]){const _={};p&4155&&(_.$$scope={dirty:p,ctx:l}),!t&&p&4&&(t=!0,_.progress=l[2],ge(()=>t=!1)),e.$set(_)},i(l){r||(he(e.$$.fragment,l),r=!0)},o(l){ke(e.$$.fragment,l),r=!1},d(l){be(e,l)}}}function lt(a,e,t){let r,o;Ee(a,we,h=>t(3,r=h)),Ee(a,te,h=>t(9,o=h));let c=[0,0,0],l,{stats:p}=e,_="ok",f,k=0;function I(){console.log("hi"),f&&clearInterval(f),r.block==="capturing"?K(te,o={cmd:"stop"},o):(t(5,k=0),t(8,f=setInterval(()=>{t(5,k+=1)},1e3)),K(te,o={cmd:"capture"},o),K(we,r.block="capturing",r))}function y(){f&&clearInterval(f),r.block==="previewing"?K(te,o={cmd:"stop"},o):(t(5,k=0),t(8,f=setInterval(()=>{t(5,k+=1)},1e3)),K(te,o={cmd:"preview"},o),K(we,r.block="previewing",r))}function B(h){l=h,t(2,l)}return a.$$set=h=>{"stats"in h&&t(0,p=h.stats)},a.$$.update=()=>{a.$$.dirty&519&&l&&(o==null?void 0:o.step)&&(t(1,c=o.step),l.set((c[2]*(p.n_z*p.n_bundles)+c[1]*p.n_bundles+c[0])/(p.n_bundles*p.n_cols*p.n_z))),a.$$.dirty&8&&t(4,_=r.block==="capturing"?"stop":"ok"),a.$$.dirty&8&&r.block,a.$$.dirty&264&&!r.block&&f&&clearInterval(f)},[p,c,l,r,_,k,I,y,f,o,B]}class nt extends Ye{constructor(e){super();Fe(this,e,lt,rt,Ge,{stats:0})}}function ot(a){let e,t,r,o,c,l,p,_,f,k,I,y,B,h,N,w,m,b;function O(i){a[3](i)}let q={};a[0]!==void 0&&(q.stats=a[0]),o=new nt({props:q}),fe.push(()=>de(o,"stats",O));function j(i){a[4](i)}function z(i){a[5](i)}let V={inAuto:!1};return a[1].image_params!==void 0&&(V.params=a[1].image_params),a[0]!==void 0&&(V.stats=a[0]),k=new Re({props:V}),fe.push(()=>de(k,"params",j)),fe.push(()=>de(k,"stats",z)),m=new Ke({}),{c(){e=v("div"),t=v("div"),r=D(),_e(o.$$.fragment),l=D(),p=v("p"),_=E("Capture Parameters"),f=D(),_e(k.$$.fragment),B=D(),h=v("p"),N=E("Preview"),w=D(),_e(m.$$.fragment),this.h()},l(i){e=g(i,"DIV",{class:!0});var S=d(e);t=g(S,"DIV",{class:!0}),d(t).forEach(u),r=M(S),me(o.$$.fragment,S),S.forEach(u),l=M(i),p=g(i,"P",{class:!0});var T=d(p);_=P(T,"Capture Parameters"),T.forEach(u),f=M(i),me(k.$$.fragment,i),B=M(i),h=g(i,"P",{class:!0});var $=d(h);N=P($,"Preview"),$.forEach(u),w=M(i),me(m.$$.fragment,i),this.h()},h(){s(t,"class","w-full h-4"),s(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),s(p,"class","mt-6 title"),s(h,"class","title")},m(i,S){C(i,e,S),n(e,t),n(e,r),ve(o,e,null),C(i,l,S),C(i,p,S),n(p,_),C(i,f,S),ve(k,i,S),C(i,B,S),C(i,h,S),n(h,N),C(i,w,S),ve(m,i,S),b=!0},p(i,[S]){const T={};!c&&S&1&&(c=!0,T.stats=i[0],ge(()=>c=!1)),o.$set(T);const $={};!I&&S&2&&(I=!0,$.params=i[1].image_params,ge(()=>I=!1)),!y&&S&1&&(y=!0,$.stats=i[0],ge(()=>y=!1)),k.$set($)},i(i){b||(he(o.$$.fragment,i),he(k.$$.fragment,i),he(m.$$.fragment,i),b=!0)},o(i){ke(o.$$.fragment,i),ke(k.$$.fragment,i),ke(m.$$.fragment,i),b=!1},d(i){i&&u(e),be(o),i&&u(l),i&&u(p),i&&u(f),be(k,i),i&&u(B),i&&u(h),i&&u(w),be(m,i)}}}function it(a,e){a&&(a.querySelectorAll("input").forEach(t=>t.disabled=e),a.querySelectorAll("select").forEach(t=>t.disabled=e),a.querySelectorAll("button").forEach(t=>t.disabled=e))}function ut(a,e,t){let r,o;Ee(a,we,f=>t(2,r=f)),Ee(a,We,f=>t(1,o=f));let c={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function l(f){c=f,t(0,c)}function p(f){a.$$.not_equal(o.image_params,f)&&(o.image_params=f,We.set(o))}function _(f){c=f,t(0,c)}return a.$$.update=()=>{a.$$.dirty&4&&it(document.getElementById("control"),Boolean(r.block))},[c,o,r,l,p,_]}class vt extends Ye{constructor(e){super();Fe(this,e,ut,ot,Ge,{})}}export{vt as default};
