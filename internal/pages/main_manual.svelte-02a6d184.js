import{S as Ge,i as Le,s as Re,a7 as At,e as _,w as U,c as g,a as m,x as H,d as u,b as r,g as S,y as W,q as G,o as L,B as R,a8 as Bt,a9 as qt,k as V,m as D,t as $,h as w,H as i,j as X,aa as Vt,R as O,T as _e,ab as Dt,U as zt,N as ge,v as Ot,ac as yt,ad as jt,Q as Te,ae as We,_ as ne,O as se,P as ae,a0 as Nt,M as Pt,af as Mt,ag as Ut,V as de,W as ut,X as ct}from"../chunks/vendor-b4247f54.js";import{l as Ht,u as be,c as Se}from"../chunks/store-03472fbf.js";import{t as It,T as Wt}from"../chunks/takeimage-d75586fb.js";import"../chunks/coords-813c65ab.js";import"../chunks/spinning-8a0bc7b0.js";function Gt(l){let e;return{c(){e=_("div"),this.h()},l(n){e=g(n,"DIV",{class:!0}),m(e).forEach(u),this.h()},h(){r(e,"class","absolute w-full bg-blue-800 bottom-6 h-[90%] opacity-60")},m(n,t){S(n,e,t)},d(n){n&&u(e)}}}function Lt(l){let e,n=l[3]+"",t;return{c(){e=_("span"),t=$(n),this.h()},l(s){e=g(s,"SPAN",{class:!0});var a=m(e);t=w(a,n),a.forEach(u),this.h()},h(){r(e,"class","absolute bottom-0 right-0 text-sm text-center translate-x-1 vert svelte-b05ewu")},m(s,a){S(s,e,a),i(e,t)},p(s,a){a&8&&n!==(n=s[3]+"")&&X(t,n)},d(s){s&&u(e)}}}function Rt(l){let e,n,t,s;return e=new Bt({props:{data:l[1],width:80,$$slots:{default:[Gt]},$$scope:{ctx:l}}}),t=new qt({props:{vertical:!0,count:5,$$slots:{default:[Lt,({value:a})=>({3:a}),({value:a})=>a?8:0]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment),n=V(),U(t.$$.fragment)},l(a){H(e.$$.fragment,a),n=D(a),H(t.$$.fragment,a)},m(a,c){W(e,a,c),S(a,n,c),W(t,a,c),s=!0},p(a,c){const f={};c&2&&(f.data=a[1]),c&16&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const h={};c&24&&(h.$$scope={dirty:c,ctx:a}),t.$set(h)},i(a){s||(G(e.$$.fragment,a),G(t.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),L(t.$$.fragment,a),s=!1},d(a){R(e,a),a&&u(n),R(t,a)}}}function Zt(l){let e,n,t;return n=new At({props:{x1:-10,x2:4096+10,y1:0,y2:l[0],$$slots:{default:[Rt]},$$scope:{ctx:l}}}),{c(){e=_("div"),U(n.$$.fragment),this.h()},l(s){e=g(s,"DIV",{class:!0});var a=m(e);H(n.$$.fragment,a),a.forEach(u),this.h()},h(){r(e,"class","w-full h-full box-border")},m(s,a){S(s,e,a),W(n,e,null),t=!0},p(s,[a]){const c={};a&1&&(c.y2=s[0]),a&18&&(c.$$scope={dirty:a,ctx:s}),n.$set(c)},i(s){t||(G(n.$$.fragment,s),t=!0)},o(s){L(n.$$.fragment,s),t=!1},d(s){s&&u(e),R(n)}}}function Ft(l,e){return l.map((n,t)=>({x:n,y:e[t]}))}function Qt(l,e,n){let{hist:t}=e,s,a=[{x:0,y:0},{x:2e3,y:10}];return l.$$set=c=>{"hist"in c&&n(2,t=c.hist)},l.$$.update=()=>{l.$$.dirty&4&&t&&(n(1,a=Ft(t.bin_edges,t.counts)),n(0,s=Math.max(...t.counts)))},[s,a,t]}class Xt extends Ge{constructor(e){super();Le(this,e,Qt,Zt,Re,{hist:2})}}function Jt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 0"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=m(e);n=w(a,"Channel 0"),a.forEach(u),this.h()},h(){r(e,"class",t=ne(le("green",l[15],l[6].image_params.channels[0]))+" svelte-132l8kq"),O(e,"bg-green-600",l[15])},m(s,a){S(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=ne(le("green",s[15],s[6].image_params.channels[0]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&O(e,"bg-green-600",s[15])},d(s){s&&u(e)}}}function Kt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 1"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=m(e);n=w(a,"Channel 1"),a.forEach(u),this.h()},h(){r(e,"class",t=ne(le("orange",l[15],l[6].image_params.channels[1]))+" svelte-132l8kq"),O(e,"bg-orange-500",l[15])},m(s,a){S(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=ne(le("orange",s[15],s[6].image_params.channels[1]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&O(e,"bg-orange-500",s[15])},d(s){s&&u(e)}}}function Yt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 2"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=m(e);n=w(a,"Channel 2"),a.forEach(u),this.h()},h(){r(e,"class",t=ne(le("rose",l[15],l[6].image_params.channels[2]))+" svelte-132l8kq"),O(e,"bg-rose-600",l[15])},m(s,a){S(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=ne(le("rose",s[15],s[6].image_params.channels[2]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&O(e,"bg-rose-600",s[15])},d(s){s&&u(e)}}}function xt(l){let e,n,t;return{c(){e=_("button"),n=$("Channel 3"),this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=m(e);n=w(a,"Channel 3"),a.forEach(u),this.h()},h(){r(e,"class",t=ne(le("amber",l[15],l[6].image_params.channels[3]))+" svelte-132l8kq"),O(e,"bg-amber-800",l[15])},m(s,a){S(s,e,a),i(e,n)},p(s,a){a&32832&&t!==(t=ne(le("amber",s[15],s[6].image_params.channels[3]))+" svelte-132l8kq")&&r(e,"class",t),a&32832&&O(e,"bg-amber-800",s[15])},d(s){s&&u(e)}}}function es(l){let e,n,t,s,a,c,f,h;return e=new We({props:{disabled:!l[6].image_params.channels[0],$$slots:{default:[Jt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),t=new We({props:{disabled:!l[6].image_params.channels[1],$$slots:{default:[Kt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),a=new We({props:{disabled:!l[6].image_params.channels[2],$$slots:{default:[Yt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),f=new We({props:{disabled:!l[6].image_params.channels[3],$$slots:{default:[xt,({selected:o})=>({15:o}),({selected:o})=>o?32768:0]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment),n=V(),U(t.$$.fragment),s=V(),U(a.$$.fragment),c=V(),U(f.$$.fragment)},l(o){H(e.$$.fragment,o),n=D(o),H(t.$$.fragment,o),s=D(o),H(a.$$.fragment,o),c=D(o),H(f.$$.fragment,o)},m(o,d){W(e,o,d),S(o,n,d),W(t,o,d),S(o,s,d),W(a,o,d),S(o,c,d),W(f,o,d),h=!0},p(o,d){const b={};d&64&&(b.disabled=!o[6].image_params.channels[0]),d&98368&&(b.$$scope={dirty:d,ctx:o}),e.$set(b);const N={};d&64&&(N.disabled=!o[6].image_params.channels[1]),d&98368&&(N.$$scope={dirty:d,ctx:o}),t.$set(N);const P={};d&64&&(P.disabled=!o[6].image_params.channels[2]),d&98368&&(P.$$scope={dirty:d,ctx:o}),a.$set(P);const v={};d&64&&(v.disabled=!o[6].image_params.channels[3]),d&98368&&(v.$$scope={dirty:d,ctx:o}),f.$set(v)},i(o){h||(G(e.$$.fragment,o),G(t.$$.fragment,o),G(a.$$.fragment,o),G(f.$$.fragment,o),h=!0)},o(o){L(e.$$.fragment,o),L(t.$$.fragment,o),L(a.$$.fragment,o),L(f.$$.fragment,o),h=!1},d(o){R(e,o),o&&u(n),R(t,o),o&&u(s),R(a,o),o&&u(c),R(f,o)}}}function ts(l){let e,n;return e=new jt({props:{class:"grid grid-cols-4 p-1 space-x-1 bg-white shadow rounded-xl opacity-90 ",$$slots:{default:[es]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,s){W(e,t,s),n=!0},p(t,s){const a={};s&65600&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ss(l){let e,n,t,s,a,c,f,h,o,d,b,N,P,v,I,A,z,k,F;return a=new Vt({props:{$$slots:{default:[ts]},$$scope:{ctx:l}}}),a.$on("change",l[9]),A=new Xt({props:{hist:l[1].img.hist[l[0]]}}),{c(){e=_("div"),n=_("canvas"),t=V(),s=_("div"),U(a.$$.fragment),c=V(),f=_("button"),h=$("Center"),o=V(),d=_("div"),b=_("label"),N=_("input"),P=$(`
      Show Histogram`),v=V(),I=_("div"),U(A.$$.fragment),this.h()},l(q){e=g(q,"DIV",{id:!0,class:!0});var T=m(e);n=g(T,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),m(n).forEach(u),t=D(T),s=g(T,"DIV",{class:!0});var j=m(s);H(a.$$.fragment,j),j.forEach(u),c=D(T),f=g(T,"BUTTON",{class:!0});var y=m(f);h=w(y,"Center"),y.forEach(u),o=D(T),d=g(T,"DIV",{class:!0});var p=m(d);b=g(p,"LABEL",{class:!0});var E=m(b);N=g(E,"INPUT",{type:!0,class:!0}),P=w(E,`
      Show Histogram`),E.forEach(u),p.forEach(u),v=D(T),I=g(T,"DIV",{id:!0,class:!0});var Z=m(I);H(A.$$.fragment,Z),Z.forEach(u),T.forEach(u),this.h()},h(){r(n,"id","canvas"),r(n,"width",2048),r(n,"height",128),r(n,"class","svelte-132l8kq"),r(s,"class","absolute z-40 w-2/5 h-10 top-4 left-4"),r(f,"class","absolute z-40 inline-flex items-center h-10 px-4 font-medium bg-white border rounded-lg shadow-lg top-4 right-56 opacity-90 white-button"),r(N,"type","checkbox"),r(N,"class","mr-1 text-blue-500 rounded focus:ring-blue-300"),r(b,"class","mx-4 font-medium cursor-pointer"),r(d,"class","absolute z-40 inline-flex items-center h-10 bg-white border rounded-lg shadow-lg top-4 right-8 opacity-90"),r(I,"id","histogram"),r(I,"class","absolute z-30 p-6 pb-3 bg-white rounded-lg shadow-lg shadow-gray-500 bottom-8 right-8 opacity-90 w-[400px] h-[300px]"),O(I,"hidden",!l[5]),r(e,"id","frame"),r(e,"class","relative z-10 w-11/12 mx-auto mt-4 border border-gray-300 rounded-md resize-y min-h-[60vh] svelte-132l8kq")},m(q,T){S(q,e,T),i(e,n),l[8](n),i(e,t),i(e,s),W(a,s,null),i(e,c),i(e,f),i(f,h),i(e,o),i(e,d),i(d,b),i(b,N),N.checked=l[5],i(b,P),i(e,v),i(e,I),W(A,I,null),l[13](e),z=!0,k||(F=[_e(n,"wheel",function(){Dt(l[4].zoomWithWheel)&&l[4].zoomWithWheel.apply(this,arguments)}),_e(f,"click",l[10]),_e(N,"change",l[11]),_e(N,"click",l[12])],k=!0)},p(q,[T]){l=q;const j={};T&65600&&(j.$$scope={dirty:T,ctx:l}),a.$set(j),T&32&&(N.checked=l[5]);const y={};T&3&&(y.hist=l[1].img.hist[l[0]]),A.$set(y),T&32&&O(I,"hidden",!l[5])},i(q){z||(G(a.$$.fragment,q),G(A.$$.fragment,q),z=!0)},o(q){L(a.$$.fragment,q),L(A.$$.fragment,q),z=!1},d(q){q&&u(e),l[8](null),R(a),R(A),l[13](null),k=!1,zt(F)}}}function le(l,e,n){return`tab-button ${e?"text-white":`${n?`text-gray-700 hover:text-black bg-white hover:bg-${l}-300`:"text-gray-400"}`}`}function as(l,e,n){let t,s;ge(l,Ht,k=>n(1,t=k)),ge(l,be,k=>n(6,s=k));let a,c,f,h,o,d=!0,b=0;Ot(()=>{n(7,o=c.getContext("2d")),n(4,h=yt(c,{animate:!0,maxZoom:5,startScale:.4,origin:"0 0"}))}),f=new Image,f.onload=()=>o==null?void 0:o.drawImage(f,0,0);function N(k){Te[k?"unshift":"push"](()=>{c=k,n(3,c)})}const P=k=>n(0,b=k.detail),v=()=>{h.pan(0,0)};function I(){d=this.checked,n(5,d)}const A=()=>n(5,d=!d);function z(k){Te[k?"unshift":"push"](()=>{a=k,n(2,a)})}return l.$$.update=()=>{l.$$.dirty&3&&(f.src=t.img.img[b]),l.$$.dirty&130&&o&&t.img&&n(7,o.canvas.height=128*t.img.n,o)},[b,t,a,c,h,d,s,o,N,P,v,I,A,z]}class ns extends Ge{constructor(e){super();Le(this,e,as,ss,Re,{})}}function ls(l){let e,n,t,s;return{c(){e=se("svg"),n=se("path"),t=se("path"),s=$(`
          Capture`),this.h()},l(a){e=ae(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var c=m(e);n=ae(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(n).forEach(u),t=ae(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),c.forEach(u),s=w(a,`
          Capture`),this.h()},h(){r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 -ml-0.5 mr-1 -translate-y-[0.25px]"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(a,c){S(a,e,c),i(e,n),i(e,t),S(a,s,c)},d(a){a&&u(e),a&&u(s)}}}function rs(l){let e,n,t,s,a,c;return{c(){e=se("svg"),n=se("path"),t=se("path"),s=V(),a=_("p"),c=$("Stop"),this.h()},l(f){e=ae(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var h=m(e);n=ae(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(n).forEach(u),t=ae(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(t).forEach(u),h.forEach(u),s=D(f),a=g(f,"P",{class:!0});var o=m(a);c=w(o,"Stop"),o.forEach(u),this.h()},h(){r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","w-6 h-6 mr-1"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor"),r(a,"class","flex-grow")},m(f,h){S(f,e,h),i(e,n),i(e,t),S(f,s,h),S(f,a,h),i(a,c)},d(f){f&&u(e),f&&u(s),f&&u(a)}}}function os(l){let e,n,t,s,a,c,f,h,o,d,b,N,P,v,I,A,z,k,F=l[1][0]+"",q,T,j,y=l[0].n_bundles+"",p,E,Z,M,ie,J,ue,ve=l[1][1]+"",Ne,Ze,ce,$e=l[0].n_z+"",Pe,Fe,Qe,re,fe,K,pe,we=l[1][2]+"",Ie,Xe,me,ke=l[0].n_cols+"",ze,Je,Ke,Y,x,Ye,Ee=l[0].n_bundles*l[0].n_cols/10+"",Ae,xe,et,ee,tt,Ce=l[0].n_bundles*l[0].n_cols/10+"",Be,st,at,he,oe,nt,ft;function pt(C,B){return C[2].block?rs:ls}let qe=pt(l),Q=qe(l);return{c(){e=_("span"),n=_("div"),t=_("button"),s=_("div"),Q.c(),a=V(),c=_("button"),f=_("div"),h=se("svg"),o=se("path"),d=$(`
        Preview`),N=V(),P=_("content"),v=_("div"),I=_("section"),A=_("div"),z=_("span"),k=_("span"),q=$(F),T=$(`
            /
            `),j=_("span"),p=$(y),E=$(`
        Bundles taken`),Z=V(),M=_("section"),ie=_("div"),J=_("span"),ue=_("span"),Ne=$(ve),Ze=$(`
            /
            `),ce=_("span"),Pe=$($e),Fe=$(`
        Z-steps taken`),Qe=V(),re=_("section"),fe=_("div"),K=_("span"),pe=_("span"),Ie=$(we),Xe=$(`
            /
            `),me=_("span"),ze=$(ke),Je=$(`
        Columns taken`),Ke=V(),Y=_("section"),x=_("span"),Ye=$("Elapsed time: "),Ae=$(Ee),xe=$(" s"),et=V(),ee=_("span"),tt=$("Total time: "),Be=$(Ce),st=$(" s"),at=V(),he=_("div"),oe=_("progress"),this.h()},l(C){e=g(C,"SPAN",{class:!0});var B=m(e);n=g(B,"DIV",{class:!0});var Ve=m(n);t=g(Ve,"BUTTON",{type:!0,class:!0});var mt=m(t);s=g(mt,"DIV",{class:!0});var ht=m(s);Q.l(ht),ht.forEach(u),mt.forEach(u),a=D(Ve),c=g(Ve,"BUTTON",{type:!0,id:!0,class:!0});var dt=m(c);f=g(dt,"DIV",{class:!0});var lt=m(f);h=ae(lt,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _t=m(h);o=ae(_t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),m(o).forEach(u),_t.forEach(u),d=w(lt,`
        Preview`),lt.forEach(u),dt.forEach(u),Ve.forEach(u),N=D(B),P=g(B,"CONTENT",{class:!0});var De=m(P);v=g(De,"DIV",{class:!0});var te=m(v);I=g(te,"SECTION",{class:!0});var rt=m(I);A=g(rt,"DIV",{class:!0});var gt=m(A);z=g(gt,"SPAN",{class:!0});var Oe=m(z);k=g(Oe,"SPAN",{class:!0});var bt=m(k);q=w(bt,F),bt.forEach(u),T=w(Oe,`
            /
            `),j=g(Oe,"SPAN",{class:!0});var vt=m(j);p=w(vt,y),vt.forEach(u),Oe.forEach(u),gt.forEach(u),E=w(rt,`
        Bundles taken`),rt.forEach(u),Z=D(te),M=g(te,"SECTION",{class:!0});var ot=m(M);ie=g(ot,"DIV",{class:!0});var $t=m(ie);J=g($t,"SPAN",{class:!0});var ye=m(J);ue=g(ye,"SPAN",{class:!0});var wt=m(ue);Ne=w(wt,ve),wt.forEach(u),Ze=w(ye,`
            /
            `),ce=g(ye,"SPAN",{class:!0});var kt=m(ce);Pe=w(kt,$e),kt.forEach(u),ye.forEach(u),$t.forEach(u),Fe=w(ot,`
        Z-steps taken`),ot.forEach(u),Qe=D(te),re=g(te,"SECTION",{class:!0});var it=m(re);fe=g(it,"DIV",{class:!0});var Et=m(fe);K=g(Et,"SPAN",{class:!0});var je=m(K);pe=g(je,"SPAN",{class:!0});var Ct=m(pe);Ie=w(Ct,we),Ct.forEach(u),Xe=w(je,`
            /
            `),me=g(je,"SPAN",{class:!0});var St=m(me);ze=w(St,ke),St.forEach(u),je.forEach(u),Et.forEach(u),Je=w(it,`
        Columns taken`),it.forEach(u),Ke=D(te),Y=g(te,"SECTION",{class:!0});var Me=m(Y);x=g(Me,"SPAN",{class:!0});var Ue=m(x);Ye=w(Ue,"Elapsed time: "),Ae=w(Ue,Ee),xe=w(Ue," s"),Ue.forEach(u),et=D(Me),ee=g(Me,"SPAN",{class:!0});var He=m(ee);tt=w(He,"Total time: "),Be=w(He,Ce),st=w(He," s"),He.forEach(u),Me.forEach(u),te.forEach(u),at=D(De),he=g(De,"DIV",{class:!0});var Tt=m(he);oe=g(Tt,"PROGRESS",{class:!0}),m(oe).forEach(u),Tt.forEach(u),De.forEach(u),B.forEach(u),this.h()},h(){r(s,"class","flex items-center h-12 text-lg"),r(t,"type","button"),r(t,"class","text-lg text-white focus:ring-4 shadow-lg font-medium rounded-lg px-5 py-2.5 text-center mr-2 mb-2 svelte-130q06g"),O(t,"focus:ring-blue-300",!l[2].block),O(t,"focus:ring-orange-300",l[2].block),O(t,"start",!l[2].block),O(t,"stop",l[2].block),r(o,"stroke-linecap","round"),r(o,"stroke-linejoin","round"),r(o,"stroke-width","2"),r(o,"d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(h,"xmlns","http://www.w3.org/2000/svg"),r(h,"class","w-6 h-6 mr-1"),r(h,"fill","none"),r(h,"viewBox","0 0 24 24"),r(h,"stroke","currentColor"),r(f,"class","flex items-center"),r(c,"type","button"),r(c,"id","preview"),r(c,"class","text-lg mt-2 text-white focus:ring-4 focus:ring-sky-300 font-medium rounded-lg shadow px-4 py-2.5 text-center inline-flex items-center mr-2 svelte-130q06g"),c.disabled=b=Boolean(l[2].block),r(n,"class","grid grid-flow-row w-36"),r(k,"class","font-mono"),r(j,"class","w-32 px-2 font-mono text-4xl font-bold "),r(z,"class","text-4xl font-bold"),r(A,"class","flex items-center"),r(I,"class","flex flex-col gap-y-1"),r(ue,"class","font-mono"),r(ce,"class","w-32 px-2 font-mono text-4xl font-bold "),r(J,"class","text-4xl font-bold"),r(ie,"class","flex items-center"),r(M,"class","flex flex-col gap-y-1"),r(pe,"class","font-mono"),r(me,"class","w-32 px-2 font-mono text-4xl font-bold "),r(K,"class","text-4xl font-bold"),r(fe,"class","flex items-center"),r(re,"class","flex flex-col gap-y-1"),r(x,"class","text-lg font-medium"),r(ee,"class","text-lg font-medium"),r(Y,"class","flex flex-col"),r(v,"class","grid max-w-4xl grid-cols-4 mt-1"),r(oe,"class","relative w-full h-2 overflow-hidden rounded-lg shadow appearance-none svelte-130q06g"),oe.value=l[3],r(he,"class","mt-1"),r(P,"class","flex-grow px-4 py-2 border rounded-lg border-base-300"),r(e,"class","z-40 flex w-full space-x-2")},m(C,B){S(C,e,B),i(e,n),i(n,t),i(t,s),Q.m(s,null),i(n,a),i(n,c),i(c,f),i(f,h),i(h,o),i(f,d),i(e,N),i(e,P),i(P,v),i(v,I),i(I,A),i(A,z),i(z,k),i(k,q),i(z,T),i(z,j),i(j,p),i(I,E),i(v,Z),i(v,M),i(M,ie),i(ie,J),i(J,ue),i(ue,Ne),i(J,Ze),i(J,ce),i(ce,Pe),i(M,Fe),i(v,Qe),i(v,re),i(re,fe),i(fe,K),i(K,pe),i(pe,Ie),i(K,Xe),i(K,me),i(me,ze),i(re,Je),i(v,Ke),i(v,Y),i(Y,x),i(x,Ye),i(x,Ae),i(x,xe),i(Y,et),i(Y,ee),i(ee,tt),i(ee,Be),i(ee,st),i(P,at),i(P,he),i(he,oe),nt||(ft=[Nt(It.call(null,t,"Take image and save.")),_e(t,"click",l[5]),Nt(It.call(null,c,"Take a 16-bundle image based on the current position without saving.")),_e(c,"click",l[6])],nt=!0)},p(C,[B]){qe!==(qe=pt(C))&&(Q.d(1),Q=qe(C),Q&&(Q.c(),Q.m(s,null))),B&4&&O(t,"focus:ring-blue-300",!C[2].block),B&4&&O(t,"focus:ring-orange-300",C[2].block),B&4&&O(t,"start",!C[2].block),B&4&&O(t,"stop",C[2].block),B&4&&b!==(b=Boolean(C[2].block))&&(c.disabled=b),B&2&&F!==(F=C[1][0]+"")&&X(q,F),B&1&&y!==(y=C[0].n_bundles+"")&&X(p,y),B&2&&ve!==(ve=C[1][1]+"")&&X(Ne,ve),B&1&&$e!==($e=C[0].n_z+"")&&X(Pe,$e),B&2&&we!==(we=C[1][2]+"")&&X(Ie,we),B&1&&ke!==(ke=C[0].n_cols+"")&&X(ze,ke),B&1&&Ee!==(Ee=C[0].n_bundles*C[0].n_cols/10+"")&&X(Ae,Ee),B&1&&Ce!==(Ce=C[0].n_bundles*C[0].n_cols/10+"")&&X(Be,Ce),B&8&&(oe.value=C[3])},i:Pt,o:Pt,d(C){C&&u(e),Q.d(),nt=!1,zt(ft)}}}function is(l,e,n){let t,s,a;ge(l,be,b=>n(2,t=b)),ge(l,Se,b=>n(7,s=b));let c=[0,0,0],{stats:f}=e;const h=Mt(0,{duration:400,easing:Ut});ge(l,h,b=>n(3,a=b));function o(){t.block==="capturing"?de(Se,s={cmd:"stop"},s):(de(Se,s={cmd:"capture"},s),de(be,t.block="capturing",t))}function d(){t.block==="previewing"?de(Se,s={cmd:"stop"},s):(de(Se,s={cmd:"preview"},s),de(be,t.block="previewing",t))}return l.$$set=b=>{"stats"in b&&n(0,f=b.stats)},l.$$.update=()=>{l.$$.dirty&131&&(s==null?void 0:s.step)&&(n(1,c=s.step),h.set((c[2]*(f.n_z*f.n_bundles)+c[1]*f.n_bundles+c[0])/(f.n_bundles*f.n_cols*f.n_z)))},[f,c,t,a,h,o,d,s]}class us extends Ge{constructor(e){super();Le(this,e,is,os,Re,{stats:0})}}function cs(l){let e,n,t,s,a,c,f,h,o,d,b,N,P,v,I,A,z,k;function F(p){l[2](p)}let q={};l[1]!==void 0&&(q.stats=l[1]),s=new us({props:q}),Te.push(()=>ut(s,"stats",F));function T(p){l[3](p)}function j(p){l[4](p)}let y={inAuto:!1};return l[0].image_params!==void 0&&(y.params=l[0].image_params),l[1]!==void 0&&(y.stats=l[1]),d=new Wt({props:y}),Te.push(()=>ut(d,"params",T)),Te.push(()=>ut(d,"stats",j)),z=new ns({}),{c(){e=_("div"),n=_("div"),t=V(),U(s.$$.fragment),c=V(),f=_("p"),h=$("Capture Parameters"),o=V(),U(d.$$.fragment),P=V(),v=_("p"),I=$("Preview"),A=V(),U(z.$$.fragment),this.h()},l(p){e=g(p,"DIV",{class:!0});var E=m(e);n=g(E,"DIV",{class:!0}),m(n).forEach(u),t=D(E),H(s.$$.fragment,E),E.forEach(u),c=D(p),f=g(p,"P",{class:!0});var Z=m(f);h=w(Z,"Capture Parameters"),Z.forEach(u),o=D(p),H(d.$$.fragment,p),P=D(p),v=g(p,"P",{class:!0});var M=m(v);I=w(M,"Preview"),M.forEach(u),A=D(p),H(z.$$.fragment,p),this.h()},h(){r(n,"class","w-full h-4"),r(e,"class","box-border sticky z-40 -mx-10 px-10 pb-6 shadow-md bg-white/[0.95] border-b top-16 "),r(f,"class","mt-6 title"),r(v,"class","title")},m(p,E){S(p,e,E),i(e,n),i(e,t),W(s,e,null),S(p,c,E),S(p,f,E),i(f,h),S(p,o,E),W(d,p,E),S(p,P,E),S(p,v,E),i(v,I),S(p,A,E),W(z,p,E),k=!0},p(p,[E]){const Z={};!a&&E&2&&(a=!0,Z.stats=p[1],ct(()=>a=!1)),s.$set(Z);const M={};!b&&E&1&&(b=!0,M.params=p[0].image_params,ct(()=>b=!1)),!N&&E&2&&(N=!0,M.stats=p[1],ct(()=>N=!1)),d.$set(M)},i(p){k||(G(s.$$.fragment,p),G(d.$$.fragment,p),G(z.$$.fragment,p),k=!0)},o(p){L(s.$$.fragment,p),L(d.$$.fragment,p),L(z.$$.fragment,p),k=!1},d(p){p&&u(e),R(s),p&&u(c),p&&u(f),p&&u(o),R(d,p),p&&u(P),p&&u(v),p&&u(A),R(z,p)}}}function fs(l,e){l&&(l.querySelectorAll("input").forEach(n=>n.disabled=e),l.querySelectorAll("select").forEach(n=>n.disabled=e),l.querySelectorAll("button").forEach(n=>n.disabled=e))}function ps(l,e,n){let t;ge(l,be,h=>n(0,t=h));let s={height:0,width:0,n_cols:0,n_bundles:0,n_z:1,time:0};function a(h){s=h,n(1,s)}function c(h){l.$$.not_equal(t.image_params,h)&&(t.image_params=h,be.set(t))}function f(h){s=h,n(1,s)}return l.$$.update=()=>{l.$$.dirty&1&&fs(document.getElementById("control"),t.block)},[t,s,a,c,f]}class bs extends Ge{constructor(e){super();Le(this,e,ps,cs,Re,{})}}export{bs as default};
